import{u as o,d7 as l,ap as c}from"./index-BnTlsbFl.js";import{h as u}from"./chunk-WY5IRSCW-1dc6FieG.js";import{i as m}from"./insomnia-fetch-B_XbrnGh.js";import{c as h}from"./router-BoVIwh1i.js";async function S({request:e}){const{organizations:t=[],sessionId:r}=await e.json(),a=await o.getOrCreate(),{id:s}=a,{salt:n}=await m({method:"GET",path:"/v1/user/vault",sessionId:s}).catch(i=>{console.error(`failed to get vault salt ${i.toString()}`)})||{};return r!==s?(await l(t),o.update(a,{vaultSalt:n,vaultKey:""}),c.ipcRenderer.emit("show-toast",null,{content:{title:"Your vault key has been reset, all you local secrets have been deleted.",status:"info"}}),!0):!1}const y=h(e=>t=>{e(t,{action:u("/auth/clear-vault-key"),method:"POST",encType:"application/json"})});export{S as c,y as u};
//# sourceMappingURL=auth.clear-vault-key-B0vAvdAY.js.map
