import{I as w,m as g,n as u,o as y,P as E}from"./index-BnTlsbFl.js";class I extends Error{constructor(n,s){super(n),this.name="ResponseFailError",this.response=s}}async function T({method:o,path:n,data:s,sessionId:r,organizationId:i,origin:a,headers:f,onlyResolveOnSuccess:l=!1,timeout:h=w}){const d={method:o,headers:{...f,"X-Insomnia-Client":y(),"insomnia-request-id":u("desk"),"X-Origin":a||g(),...r?{"X-Session-Id":r}:{},...s?{"Content-Type":"application/json"}:{},...i?{"X-Insomnia-Org-Id":i}:{},...E?{"X-Mockbin-Test":"true"}:{}},...s?{body:JSON.stringify(s)}:{},signal:AbortSignal.timeout(h)};if(r===void 0)throw new Error(`No session ID provided to ${o}:${n}`);try{const e=await fetch((a||g())+n,d),c=e.headers.get("x-insomnia-command");c&&window.main.openDeepLink(c);const m=e.headers.get("content-type")?.includes("application/json")||n.match(/\.json$/);if(l&&!e.ok){let p="";if(m)try{const t=await e.json();typeof t?.message=="string"&&(p=t.message)}catch{}throw new I(p,e)}return m?e.json():e.text()}catch(e){throw e.name==="AbortError"?new Error("insomniaFetch timed out"):e}}export{T as i};
//# sourceMappingURL=insomnia-fetch-B_XbrnGh.js.map
