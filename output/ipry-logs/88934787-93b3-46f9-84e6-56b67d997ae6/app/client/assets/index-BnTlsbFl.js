import{g as Un,c as ur}from"./_commonjsHelpers-CE1G-McA.js";import{i as op}from"./invariant-DVddvGrP.js";const _e=require("node:zlib");_e.crc32;_e.Deflate;_e.Inflate;_e.Gzip;_e.Gunzip;_e.DeflateRaw;_e.InflateRaw;_e.Unzip;_e.BrotliCompress;_e.BrotliDecompress;_e.ZstdCompress;_e.ZstdDecompress;_e.deflate;_e.deflateSync;_e.gzip;_e.gzipSync;_e.deflateRaw;_e.deflateRawSync;_e.unzip;_e.unzipSync;_e.inflate;_e.inflateSync;_e.gunzip;_e.gunzipSync;_e.inflateRaw;_e.inflateRawSync;_e.brotliCompress;_e.brotliCompressSync;_e.brotliDecompress;_e.brotliDecompressSync;_e.zstdCompress;_e.zstdCompressSync;_e.zstdDecompress;_e.zstdDecompressSync;_e.createDeflate;_e.createInflate;_e.createDeflateRaw;_e.createInflateRaw;_e.createGzip;_e.createGunzip;_e.createUnzip;_e.createBrotliCompress;_e.createBrotliDecompress;_e.createZstdCompress;_e.createZstdDecompress;_e.constants;_e.codes;function na(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fa={exports:{}},cp=fa.exports,sc;function up(){return sc||(sc=1,(function(e){(function(t,r){e.exports?e.exports=r():t.fuzzysort=r()})(cp,function(){function r(m){var E={single:function(u,p,x){if(u=="farzher")return{target:"farzher was here (^-^*)/",score:0,indexes:[0,1,2,3,4,5,6]};if(!u)return null;var w=E.getPreparedSearch(u),B=w.lowerCodes;if(!p)return null;v(p)||(p=E.getPrepared(p));var C=w.bitmask;return(C&p._bitmask)!=C?null:E.algorithm(B,p,u.toLowerCase())},go:function(u,p,x){if(u=="farzher")return[{target:"farzher was here (^-^*)/",score:0,indexes:[0,1,2,3,4,5,6],obj:p?p[0]:null}];if(!u)return x&&x.all||m&&m.all?E.all(u,p,x):c;var w=E.getPreparedSearch(u),B=w.lowerCodes;B[0];var C=w.bitmask,l=u.toLowerCase(),o=x&&x.threshold||m&&m.threshold||-9007199254740991,S=x&&x.limit||m&&m.limit||9007199254740991,A=0,N=0,D=p.length;if(x&&x.keys)for(var q=x.scoreFn||b,H=x.keys,Y=H.length,Q=D-1;Q>=0;--Q){for(var J=p[Q],ne=new Array(Y),se=Y-1;se>=0;--se){var fe=H[se],he=I(J,fe);if(!he){ne[se]=null;continue}v(he)||(he=E.getPrepared(he)),(C&he._bitmask)!=C?ne[se]=null:ne[se]=E.algorithm(B,he,l)}ne.obj=J;var we=q(ne);we!==null&&(we<o||(ne.score=we,A<S?(y.add(ne),++A):(++N,we>y.peek().score&&y.replaceTop(ne))))}else if(x&&x.key)for(var fe=x.key,Q=D-1;Q>=0;--Q){var J=p[Q],he=I(J,fe);if(he){if(v(he)||(he=E.getPrepared(he)),(C&he._bitmask)!=C)var Se=null;else var Se=E.algorithm(B,he,l);Se!==null&&(Se.score<o||(Se={target:Se.target,_targetLower:"",_targetLowerCodes:null,_nextBeginningIndexes:null,_bitmask:0,score:Se.score,indexes:Se.indexes,obj:J},A<S?(y.add(Se),++A):(++N,Se.score>y.peek().score&&y.replaceTop(Se))))}}else for(var Q=D-1;Q>=0;--Q){var he=p[Q];if(he){if(v(he)||(he=E.getPrepared(he)),(C&he._bitmask)!=C)var Se=null;else var Se=E.algorithm(B,he,l);Se!==null&&(Se.score<o||(A<S?(y.add(Se),++A):(++N,Se.score>y.peek().score&&y.replaceTop(Se))))}}if(A===0)return c;for(var le=new Array(A),Q=A-1;Q>=0;--Q)le[Q]=y.poll();return le.total=A+N,le},goAsync:function(u,p,x){var w=new Promise(function(B,C){B(E.go(u,p,x))});return w.cancel=function(){},w},all:function(u,p,x){var w=[];w.total=p.length;var B=x&&x.limit||m&&m.limit||9007199254740991;if(x&&x.keys)for(var C=0;C<p.length;C++){for(var l=p[C],o=new Array(x.keys.length),S=x.keys.length-1;S>=0;--S){var A=I(l,x.keys[S]);if(!A){o[S]=null;continue}v(A)||(A=E.getPrepared(A)),A.score=-9007199254740991,o[S]=A}if(o.obj=l,o.score=-9007199254740991,w.push(o),w.length>=B)return w}else if(x&&x.key)for(var C=0;C<p.length;C++){var l=p[C],A=I(l,x.key);if(A){v(A)||(A=E.getPrepared(A)),A.score=-9007199254740991;var N=A;if(N={target:N.target,_targetLower:"",_targetLowerCodes:null,_nextBeginningIndexes:null,_bitmask:0,score:A.score,indexes:null,obj:l},w.push(N),w.length>=B)return w}}else for(var C=0;C<p.length;C++){var A=p[C];if(A&&(v(A)||(A=E.getPrepared(A)),A.score=-9007199254740991,w.push(A),w.length>=B))return w}return w},highlight:function(u,p,x){if(typeof p=="function")return E.highlightCallback(u,p);if(u===null)return null;p===void 0&&(p="<b>"),x===void 0&&(x="</b>");for(var w="",B=0,C=!1,l=u.target,o=l.length,S=u.indexes,A=0;A<o;++A){var N=l[A];if(S[B]===A){if(++B,C||(C=!0,w+=p),B===S.length){w+=N+x+l.substr(A+1);break}}else C&&(C=!1,w+=x);w+=N}return w},highlightCallback:function(A,p){if(A===null)return null;for(var x=A.target,w=x.length,B=A.indexes,C="",l=0,o=0,S=!1,A=[],N=0;N<w;++N){var D=x[N];if(B[o]===N){if(++o,S||(S=!0,A.push(C),C=""),o===B.length){C+=D,A.push(p(C,l++)),C="",A.push(x.substr(N+1));break}}else S&&(S=!1,A.push(p(C,l++)),C="");C+=D}return A},prepare:function(u){u||(u="");var p=E.prepareLowerCodes(u);return{target:u,_targetLower:u.toLowerCase(),_targetLowerCodes:p,_nextBeginningIndexes:null,_bitmask:E.prepareBitmask(p),score:null,indexes:[0],obj:null}},prepareSlow:function(u){return E.prepare(u)},prepareSearch:function(u){u||(u="");var p=E.prepareLowerCodes(u);return{lowerCodes:p,bitmask:E.prepareBitmask(p)}},getPrepared:function(u){if(u.length>999)return E.prepare(u);var p=i.get(u);return p!==void 0||(p=E.prepare(u),i.set(u,p)),p},getPreparedSearch:function(u){if(u.length>999)return E.prepareSearch(u);var p=s.get(u);return p!==void 0||(p=E.prepareSearch(u),s.set(u,p)),p},algorithm:function(u,p,x){for(var w=u[0],B=p._targetLowerCodes,C=u.length,l=B.length,N=0,o=0,S=0;;){var A=w===B[o];if(A){if(n[S++]=o,++N,N===C)break;w=u[N]}if(++o,o>=l)return null}var N=0,D=!1,q=0,H=p._nextBeginningIndexes;H===null&&(H=p._nextBeginningIndexes=E.prepareNextBeginningIndexes(p.target)),o=n[0]===0?0:H[n[0]-1];var Y=0;if(o!==l)for(;;)if(o>=l){if(N<=0||(++Y,Y>200))break;--N;var Q=d[--q];o=H[Q]}else{var A=u[N]===B[o];if(A){if(d[q++]=o,++N,N===C){D=!0;break}++o}else o=H[o]}var J=p._targetLower.indexOf(x,n[0]),ne=~J;if(ne&&!D)for(var se=0;se<S;++se)n[se]=J+se;var fe=!1;ne&&(fe=p._nextBeginningIndexes[J-1]==J);{if(D)var he=d,we=q;else var he=n,we=S;for(var Se=0,le=0,se=C-1;se>=1;--se)he[se]-he[se-1]!==1&&(Se-=he[se],++le);var Ne=he[C-1]-he[0]-(C-1);if(Se-=Ne*le,he[0]!==0&&(Se-=he[0]*10),!D)Se*=1e3;else{for(var pe=1,se=H[0];se<l;se=H[se])++pe;pe>24&&(Se*=(pe-24)*10)}ne&&(Se/=10),fe&&(Se/=10),Se-=l-C,p.score=Se,p.indexes=new Array(we);for(var se=we-1;se>=0;--se)p.indexes[se]=he[se];return p}},prepareLowerCodes:function(u){for(var p=u.length,x=[],w=u.toLowerCase(),B=0;B<p;++B)x[B]=w.charCodeAt(B);return x},prepareBeginningIndexes:function(u){for(var p=u.length,x=[],w=0,B=!1,C=!1,l=0;l<p;++l){var o=u.charCodeAt(l),S=o>=65&&o<=90,A=S||o>=97&&o<=122||o>=48&&o<=57,N=S&&!B||!C||!A;B=S,C=A,N&&(x[w++]=l)}return x},prepareNextBeginningIndexes:function(u){for(var p=u.length,x=E.prepareBeginningIndexes(u),w=[],B=x[0],C=0,l=0;l<p;++l)B>l?w[l]=B:(B=x[++C],w[l]=B===void 0?p:B);return w},prepareBitmask:function(u){for(var p=0,x=u.length-1;x>=0;--x){var w=u[x],B=w>=97&&w<=122?w-97:w>=48&&w<=57?26:w===32?27:w<=127?28:29;p|=1<<B}return p},cleanup:f,new:r};return E}var a=typeof Map=="function"?Map:function(){var m=Object.create(null);this.get=function(E){return m[E]},this.set=function(E,u){return m[E]=u,this},this.clear=function(){m=Object.create(null)}},i=new a,s=new a,c=[];c.total=0;var n=[],d=[];function f(){i.clear(),s.clear(),n=[],d=[]}function b(m){for(var E=-9007199254740991,u=m.length-1;u>=0;--u){var p=m[u];if(p!==null){var x=p.score;x>E&&(E=x)}}return E===-9007199254740991?null:E}function I(m,E){var u=m[E];if(u!==void 0)return u;var p=E;Array.isArray(E)||(p=E.split("."));for(var x=p.length,w=-1;m&&++w<x;)m=m[p[w]];return m}function v(m){return typeof m=="object"}var h=function(){var m=[],E=0,u={};function p(){for(var x=0,w=m[x],B=1;B<E;){var C=B+1;x=B,C<E&&m[C].score<m[B].score&&(x=C),m[x-1>>1]=m[x],B=1+(x<<1)}for(var l=x-1>>1;x>0&&w.score<m[l].score;l=(x=l)-1>>1)m[x]=m[l];m[x]=w}return u.add=function(x){var w=E;m[E++]=x;for(var B=w-1>>1;w>0&&x.score<m[B].score;B=(w=B)-1>>1)m[w]=m[B];m[w]=x},u.poll=function(){if(E!==0){var x=m[0];return m[0]=m[--E],p(),x}},u.peek=function(x){if(E!==0)return m[0]},u.replaceTop=function(x){m[0]=x,p()},u},y=h();return r()})})(fa)),fa.exports}var lp=up();const fp=Un(lp);let aa;const dp=new Uint8Array(16);function pp(){if(!aa&&(aa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!aa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aa(dp)}const hp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yp(e){return typeof e=="string"&&hp.test(e)}const Tt=[];for(let e=0;e<256;++e)Tt.push((e+256).toString(16).slice(1));function Bl(e,t=0){return Tt[e[t+0]]+Tt[e[t+1]]+Tt[e[t+2]]+Tt[e[t+3]]+"-"+Tt[e[t+4]]+Tt[e[t+5]]+"-"+Tt[e[t+6]]+Tt[e[t+7]]+"-"+Tt[e[t+8]]+Tt[e[t+9]]+"-"+Tt[e[t+10]]+Tt[e[t+11]]+Tt[e[t+12]]+Tt[e[t+13]]+Tt[e[t+14]]+Tt[e[t+15]]}function BI(e,t=0){const r=Bl(e,t);if(!yp(r))throw TypeError("Stringified UUID is invalid");return r}const gp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),oc={randomUUID:gp};function Ta(e,t,r){if(oc.randomUUID&&!t&&!e)return oc.randomUUID();e=e||{};const a=e.random||(e.rng||pp)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=a[i];return t}return Bl(a)}const vp="Insomnia",mp="default",Cp="studio-light",Ep="default",Sp=[{name:"@kong/insomnia-plugin-external-vault"},{name:"@kong/insomnia-plugin-ai"}],xp="https://aaec2e800e644070a8daba5b7ad02c16@o1147619.ingest.sentry.io/6311804",Jr={productName:vp,theme:mp,lightTheme:Cp,darkTheme:Ep,bundlePlugins:Sp,sentryDsn:xp},bp="12.1.0";var Tp={};const Ip="env",At=process[Ip];At.INSOMNIA_GITLAB_REDIRECT_URI;At.INSOMNIA_GITLAB_CLIENT_ID;At.INSOMNIA_GITLAB_API_URL;const Ap=At.PLAYWRIGHT,NI=()=>At.INSOMNIA_SKIP_ONBOARDING,RI=()=>At.INSOMNIA_SESSION,kI=()=>At.INSOMNIA_SECRET_KEY,DI=()=>At.INSOMNIA_PUBLIC_KEY,PI=()=>At.INSOMNIA_VAULT_SALT,_p=()=>At.INSOMNIA_VAULT_KEY,wp=()=>bp,OI=()=>Jr.productName,Bp=()=>Jr.theme,Np=()=>Jr.lightTheme,Rp=()=>Jr.darkTheme,Ia=()=>process.platform,LI=()=>Jr.bundlePlugins,$n=()=>Ia()==="darwin",kp=()=>Ia()==="linux",Nl=()=>Ia()==="win32",Dp=()=>"production",UI=()=>Jr.sentryDsn;function $I(){return!(kp()||Nl()&&Tp.PORTABLE_EXECUTABLE_DIR)}const FI=()=>`${Dp()}::${Ia()}::${wp()}`,Rl=100,MI=1e4,kl=-222,VI=5,KI=100,qI=/^(http|https):\/\/[\wàâäèéêëîïôóœùûüÿçÀÂÄÈÉÊËÎÏÔŒÙÛÜŸÇ\-_.]+[/\wàâäèéêëîïôóœùûüÿçÀÂÄÈÉÊËÎÏÔŒÙÛÜŸÇ.\-+=:\][@%^*&!#?;$~'(),]*/,jI=[".pem",".crt",".cer",".p12"],GI=["gguf","claude","openai","gemini"];var Pp=(e=>(e.default="default",e.emacs="emacs",e.sublime="sublime",e.vim="vim",e))(Pp||{});$n();const Op=e=>{const t=$n();switch(e){case"ctrl":return t?"⌃":"Ctrl";case"alt":return t?"⌥":"Alt";case"shift":return t?"⇧":"Shift";case"meta":return t?"⌘":Nl()?"Win":"Super";default:throw new Error(e+"unrecognized key")}},HI=()=>At.OAUTH_REDIRECT_URL||"https://app.insomnia.rest/oauth/redirect",zI=()=>At.OAUTH_RELAY_URL||"https://app.insomnia.rest/oauth/relay",WI=()=>At.INSOMNIA_API_URL||"https://api.insomnia.rest",Lp=()=>At.INSOMNIA_MOCK_API_URL||"https://mock.insomnia.run",YI=(e,t)=>{if(!e.useInsomniaCloud)return`${e.url}/bin/${e._id}${t}`;const r=Lp(),a=new URL(r);return a.host=e._id.replace("_","-")+"."+a.host,a.origin+t},QI=()=>At.INSOMNIA_APP_WEBSITE_URL||"https://app.insomnia.rest",XI=()=>At.INSOMNIA_GITHUB_REST_API_URL||"https://api.github.com",JI="master",ZI="https://insomnia.rest/plugins",eA="https://www.npmjs.com/package",tA=8,rA=24,nA=8,aA=24,iA=25,Dl="GET",Up="POST",$p="PUT",Fp="PATCH",Mp="DELETE",Vp="OPTIONS",Kp="HEAD",sA=[Dl,Up,$p,Fp,Mp,Vp,Kp],Pl="friendly",qp="source",jp="raw",da={[Pl]:["Preview","Visual Preview"],[qp]:["Source","Source Code"],[jp]:["Raw","Raw Data"]},oA=Object.keys(da),Ol="application/json",Gp="text/plain",Hp="application/xml",zp="application/yaml",cA="text/event-stream",Wp="application/edn",Ll="application/x-www-form-urlencoded",Yp="multipart/form-data",Qp="application/octet-stream",lo="application/graphql",no="",_n={[Wp]:["EDN","EDN"],[Qp]:["File","Binary File"],[Yp]:["Multipart","Multipart Form"],[Ll]:["Form","Form URL Encoded"],[lo]:["GraphQL","GraphQL Query"],[Ol]:["JSON","JSON"],[no]:["Other","Other"],[Gp]:["Plain","Plain"],[Hp]:["XML","XML"],[zp]:["YAML","YAML"]},uA="sha256",lA="sha1",fA="&",Xp="~|",dA=["type-manual","name-asc","name-desc","created-asc","created-desc","http-method","type-desc","type-asc"],pA={"type-manual":"Manual","name-asc":"Name Ascending (A-Z)","name-desc":"Name Descending (Z-A)","created-asc":"Oldest First","created-desc":"Newest First","http-method":"HTTP Method","type-desc":"Folders First","type-asc":"Requests First"},hA="@kong/insomnia-plugin-external-vault",yA="@kong/insomnia-plugin-ai",gA=["modified-desc","name-asc","name-desc","created-asc","created-desc"],vA={"name-asc":"Name Ascending (A-Z)","name-desc":"Name Descending (Z-A)","created-asc":"Oldest First","created-desc":"Newest First","modified-desc":"Last Modified"};function mA(e,t=!1){return e in da?t?da[e][1]:da[e][0]:""}function CA(e){if(!e)return null;const[t]=e.split(";");return t.trim()}function EA(e,t=!1){if(typeof e!="string")return"";for(const r in _n)if(e.includes(r)&&r.length>0)return t?_n[r][1]:_n[r][0];return t?_n[no][1]:_n[no][0]}function Jp(e,t=null){if(!Array.isArray(e))return null;const r=e.find(({name:a})=>a.toLowerCase()==="content-type");return r?r.value:t}const SA={[kl]:"An Insomnia plugin threw an error which prevented the request from sending",100:"This interim response indicates that everything so far is OK and that the client should continue with the request or ignore it if it is already finished.",101:"This code is sent in response to an Upgrade: request header by the client and indicates the protocol the server is switching to.",200:"The request has succeeded.",201:"The request has succeeded and a new resource has been created as a result. This is typically the response sent after POST requests, or some PUT requests.",202:"The request has been received but not yet acted upon. It is non-committal, meaning that there is no way in HTTP to later send an asynchronous response indicating the outcome of processing the request. It is intended for cases where another process or server handles the request, or for batch processing.",203:"This response code means returned meta-information set is not exact set as available from the origin server, but collected from a local or a third party copy. Except this condition, 200 OK response should be preferred instead of this response.",204:"There is no content to send for this request, but the headers may be useful. The user-agent may update its cached headers for this resource with the new ones.",205:"This response code is sent after accomplishing request to tell user agent reset document view which sent this request.",206:"This response code is used because of range header sent by the client to separate download into multiple streams.",207:"A Multi-Status response conveys information about multiple resources in situations where multiple status codes might be appropriate.",208:"Used inside a DAV: propstat response element to avoid enumerating the internal members of multiple bindings to the same collection repeatedly.",226:"The server has fulfilled a GET request for the resource, and the response is a representation of the result of one or more instance-manipulations applied to the current instance.",300:"The request has more than one possible responses. User-agent or user should choose one of them. There is no standardized way to choose one of the responses.",301:"This response code means that URI of requested resource has been changed. Probably, new URI would be given in the response.",302:"This response code means that URI of requested resource has been changed temporarily. New changes in the URI might be made in the future. Therefore, this same URI should be used by the client in future requests.",303:"Server sent this response to directing client to get requested resource to another URI with an GET request.",304:"This is used for caching purposes. It is telling to client that response has not been modified. So, client can continue to use same cached version of response.",305:"This means requested response must be accessed by a proxy. This response code is not largely supported because of security reasons.",306:"This response code is no longer used and is just reserved currently. It was used in a previous version of the HTTP 1.1 specification.",307:"Server sent this response to directing client to get requested resource to another URI with same method that used prior request. This has the same semantic than the 302 Found HTTP response code, with the exception that the user agent must not change the HTTP method used: if a POST was used in the first request, a POST must be used in the second request.",308:"This means that the resource is now permanently located at another URI, specified by the Location: HTTP Response header. This has the same semantics as the 301 Moved Permanently HTTP response code, with the exception that the user agent must not change the HTTP method used: if a POST was used in the first request, a POST must be used in the second request.",400:"This response means that the server could not understand the request due to invalid syntax.",401:"Authentication is needed to get the requested response. This is similar to 403, but is different in that authentication is possible.",402:"This response code is reserved for future use. Initial aim for creating this code was using it for digital payment systems, but it is not used currently.",403:"Client does not have access rights to the content, so the server is rejecting to give proper response.",404:"Server cannot find requested resource. This response code is probably the most famous one due to how frequently it occurs on the web.",405:"The request method is known by the server but has been disabled and cannot be used.",406:"This response is sent when the web server, after performing server-driven content negotiation, doesn't find any content following the criteria given by the user agent.",407:"This is similar to 401 but authentication is needed to be done by a proxy.",408:"This response is sent on an idle connection by some servers, even without any previous request by the client. It means that the server would like to shut down this unused connection. This response is used much more since some browsers, like Chrome or IE9, use HTTP pre-connection mechanisms to speed up surfing (see bug 881804, which tracks the future implementation of such a mechanism in Firefox). Also, note that some servers merely shut down the connection without sending this message.",409:"This response is sent when a request conflicts with the current state of the server.",410:"This response is sent when the requested content has been deleted from the server.",411:"Server rejected the request because the Content-Length header field is not defined and the server requires it.",412:"The client has indicated preconditions in its headers which the server does not meet.",413:"Request entity is larger than limits defined by the server; the server might close the connection or return a Retry-After header field.",414:"The URI requested by the client is longer than the server is willing to interpret.",415:"The media format of the requested data is not supported by the server, so the server is rejecting the request.",416:"The range specified by the Range header field in the request can't be fulfilled; it's possible that the range is outside the size of the target URI's data.",417:"This response code means the expectation indicated by the Expect request header field can't be met by the server.",418:`Any attempt to brew coffee with a teapot should result in the error code "418 I'm a teapot". The resulting entity body MAY be short and stout.`,421:"The request was directed at a server that is not able to produce a response. This can be sent by a server that is not configured to produce responses for the combination of scheme and authority that are included in the request URI.",422:"The request was well-formed but was unable to be followed due to semantic errors.",423:"The resource that is being accessed is locked.",424:"The request failed due to failure of a previous request.",426:"The server refuses to perform the request using the current protocol but might be willing to do so after the client upgrades to a different protocol. The server MUST send an Upgrade header field in a 426 response to indicate the required protocol(s) (Section 6.7 of [RFC7230]).",428:`The origin server requires the request to be conditional. Intended to prevent "the 'lost update' problem, where a client GETs a resource's state, modifies it, and PUTs it back to the server, when meanwhile a third party has modified the state on the server, leading to a conflict."`,429:'The user has sent too many requests in a given amount of time ("rate limiting").',431:"The server is unwilling to process the request because its header fields are too large. The request MAY be resubmitted after reducing the size of the request header fields.",451:"The user requests an illegal resource, such as a web page censored by a government.",500:"The server has encountered a situation it doesn't know how to handle.",501:"The request method is not supported by the server and cannot be handled. The only methods that servers are required to support (and therefore that must not return this code) are GET and HEAD.",502:"This error response means that the server, while working as a gateway to get a response needed to handle the request, got an invalid response.",503:"The server is not ready to handle the request. Common causes are a server that is down for maintenance or that is overloaded. Note that together with this response, a user-friendly page explaining the problem should be sent. This responses should be used for temporary conditions and the Retry-After: HTTP header should, if possible, contain the estimated time before the recovery of the service. The webmaster must also take care about the caching-related headers that are sent along with this response, as these temporary condition responses should usually not be cached.",504:"This error response is given when the server is acting as a gateway and cannot get a response in time.",505:"The HTTP version used in the request is not supported by the server.",506:"The server has an internal configuration error: transparent content negotiation for the request results in a circular reference.",507:"The server has an internal configuration error: the chosen variant resource is configured to engage in transparent content negotiation itself, and is therefore not a proper end point in the negotiation process.",508:"The server detected an infinite loop while processing the request.",509:"The server has exceeded the bandwidth specified by the server administrator; this is often used by shared hosting providers to limit the bandwidth of customers.",510:"Further extensions to the request are required for the server to fulfill it.",511:"The 511 status code indicates that the client needs to authenticate to gain network access.",598:"Used by some HTTP proxies to signal a network read timeout behind the proxy to a client in front of the proxy.",599:"An error used by some HTTP proxies to signal a network connect timeout behind the proxy to a client in front of the proxy."},xA={[kl]:"Plugin Error",100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a Teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required",598:"Network read timeout error",599:"Network Connect Timeout Error"},bA=3e4,TA={READY_STATE:"readyState",NEW_EVENT:"newEventReceived",MCP_NOTIFICATION:"mcpNotification"},Zp=/[-[\]/{}()*+?.\\^$|]/g;function fr(e,t){return!Array.isArray(e)||!t||typeof t!="string"?[]:e.filter(r=>!r||!r.name||typeof r.name!="string"?!1:r.name.toLowerCase()===t.toLowerCase())}function IA(e){return fr(e,"content-type").length>0}function AA(e){return fr(e,"authorization").length>0}function _A(e){return fr(e,"accept").length>0}function wA(e){return fr(e,"accept-encoding").length>0}function BA(e){return fr(e,"set-cookie").map(t=>({name:t.name,value:t.value.replaceAll("{{","").replaceAll("}}","").replaceAll("{%","").replaceAll("%}","")}))}function NA(e){const t=fr(e,"location");return t.length?t[0]:null}function RA(e){const t=fr(e,"content-type");return t.length?t[0]:null}function kA(e){const t=fr(e,"host");return t.length?t[0]:null}function DA(e){const t=fr(e,"content-disposition");return t.length?t[0]:null}function Xr(e){const t=Ta().replace(/-/g,"");return e?`${e}_${t}`:t}function PA(e=Rl){return new Promise(t=>setTimeout(t,e))}const OA=(e,t=Rl)=>{let r;return(...i)=>{clearTimeout(r),r=setTimeout(()=>e(...i),t)}};function LA(e,t=!1){e=Math.round(e*10)/10;let r,a;return e<1024*2?(r=e,a=t?"bytes":"B"):e<1024*1024*2?(r=e/1024,a=t?"kilobytes":"KB"):e<1024*1024*1024*2?(r=e/1024/1024,a=t?"megabytes":"MB"):(r=e/1024/1024/1024,a=t?"gigabytes":"GB"),`${Math.round(r*10)/10} ${a}`}function UA(e,...t){return typeof e=="string"?e:e(...t)}function eh(e){return _e.gzipSync(JSON.stringify(e)).toString("base64")}function Ul(e){if(typeof e!="string")return null;const t=_e.gunzipSync(Buffer.from(e,"base64"));return JSON.parse(t.toString("utf8"))}function $A(e){return e.replace(Zp,"\\$&")}function FA(e,t,r={}){return th(e,[t],r)}function th(e,t,r={}){if(!e||!e.trim())return null;const a=e.split(" ").filter(d=>d.trim()),i=r.splitSpace?[...a,e]:[e];let s=null,c=[],n=0;for(const d of i){let f=!1;for(const b of t.filter(I=>!I||I.trim())){const I=fp.single(d,b);I&&(I.score<-8e3||((s===null||I.score>s)&&(s=I.score),c=[...c,...I.indexes],f=!0))}f&&n++}return!r.loose&&n<i.length-1||s===null?null:{score:s,indexes:c,target:t.join(" ")}}function MA(e){return e!=null}const VA=e=>e.replace(/ /g,"-");function KA(e){return e.replace(/(\\+)\//g,(t,r)=>r.length%2===1?r.slice(0,r.length-1)+"/":t)}function qA(e){return process.type==="renderer"||process.type==="browser"?`Insomnia cannot access the file "${e}". You must specify which directories Insomnia can access in Insomnia Preferences → Security`:`Insomnia cannot access the file ‘${e}’. You must specify which directories Insomnia can access with one or more "--dataFolders <directory>".`}const jA=(e,t)=>{e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView(t))};function $l(e,t,r){r-=t.filter(s=>s<r).length;const a=t.map(s=>({from:s,to:r++}));for(let s=0;s<a.length;s++){const c=a[s].from;for(let n=s;n<a.length;n++)a[n].from>c&&a[n].from--}for(let s=0;s<a.length;s++){const c=a[s];for(let n=a.length-1;n>s;n--){const d=a[n];d.from<c.to?c.to++:d.from++}}const i=e.slice();for(const s of a){const[c]=i.splice(s.from,1);i.splice(s.to,0,c)}return i}const GA=(e,t,r)=>{const a=e.findIndex(c=>c.id===t);if(a===-1)return e;const s=(Array.isArray(r)?r:[...r]).map(c=>e.findIndex(n=>n.id===c)).sort((c,n)=>c-n);return $l(e,s,a)},HA=(e,t,r)=>{const a=e.findIndex(c=>c.id===t);if(a===-1)return e;const s=(Array.isArray(r)?r:[...r]).map(c=>e.findIndex(n=>n.id===c)).sort((c,n)=>c-n);return $l(e,s,a+1)},rh=e=>Object.keys(e);function zA(e,t){const r=e.getTime()-t.getTime();return Math.ceil(r/(1e3*60*60*24))}function WA(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d)(?=\.\d*|$))/g,",")}const Te=require("node:path"),YA=Te.resolve;Te.normalize;Te.isAbsolute;const QA=Te.join;Te.relative;Te.toNamespacedPath;Te.dirname;const XA=Te.basename;Te.extname;Te.format;Te.parse;Te.matchesGlob;Te.sep;Te.delimiter;Te.win32;Te.posix;Te._makeLong;var Lt={},Er={},cc;function fo(){if(cc)return Er;cc=1;const e=(c,n)=>n?[...new Map(c.map(d=>[n(d),d])).values()]:[...new Set(c)],t=c=>typeof c=="object"&&c!==null,r=c=>t(c)&&Object.prototype.toString.call(c)==="[object Date]",a=c=>t(c)&&Object.prototype.toString.call(c)==="[object RegExp]",i=(c,n)=>n.reduce((d,f)=>(c&&Object.prototype.hasOwnProperty.call(c,f)&&(d[f]=c[f]),d),{}),s=c=>([n,d])=>!!(typeof d=="string"||typeof d=="number"||typeof d=="boolean"||r(d)||d===null)&&c.includes(n);return Er.uniq=e,Er.isDate=r,Er.isRegExp=a,Er.pick=i,Er.filterIndexNames=s,Er}var uc;function Aa(){if(uc)return Lt;uc=1;const{uniq:e,isDate:t,isRegExp:r}=fo(),a=(S,A)=>{if(typeof S=="number"&&(S=S.toString()),S[0]==="$"&&!(S==="$$date"&&typeof A=="number")&&!(S==="$$deleted"&&A===!0)&&S!=="$$indexCreated"&&S!=="$$indexRemoved")throw new Error("Field names cannot begin with the $ character");if(S.indexOf(".")!==-1)throw new Error("Field names cannot contain a .")},i=S=>{if(Array.isArray(S)&&S.forEach(A=>{i(A)}),typeof S=="object"&&S!==null)for(const A in S)Object.prototype.hasOwnProperty.call(S,A)&&(a(A,S[A]),i(S[A]))},s=S=>JSON.stringify(S,function(A,N){if(a(A,N),N!==void 0)return N===null?null:typeof this[A].getTime=="function"?{$$date:this[A].getTime()}:N}),c=S=>JSON.parse(S,function(A,N){return A==="$$date"?new Date(N):typeof N=="string"||typeof N=="number"||typeof N=="boolean"||N===null?N:N&&N.$$date?N.$$date:N});function n(S,A){if(typeof S=="boolean"||typeof S=="number"||typeof S=="string"||S===null||t(S))return S;if(Array.isArray(S))return S.map(N=>n(N,A));if(typeof S=="object"){const N={};for(const D in S)Object.prototype.hasOwnProperty.call(S,D)&&(!A||D[0]!=="$"&&D.indexOf(".")===-1)&&(N[D]=n(S[D],A));return N}}const d=S=>typeof S=="boolean"||typeof S=="number"||typeof S=="string"||S===null||t(S)||Array.isArray(S),f=(S,A)=>S<A?-1:S>A?1:0,b=(S,A)=>{const N=Math.min(S.length,A.length);for(let D=0;D<N;D+=1){const q=I(S[D],A[D]);if(q!==0)return q}return f(S.length,A.length)},I=(S,A,N)=>{const D=N||f;if(S===void 0)return A===void 0?0:-1;if(A===void 0)return 1;if(S===null)return A===null?0:-1;if(A===null)return 1;if(typeof S=="number")return typeof A=="number"?f(S,A):-1;if(typeof A=="number")return typeof S=="number"?f(S,A):1;if(typeof S=="string")return typeof A=="string"?D(S,A):-1;if(typeof A=="string")return typeof S=="string"?D(S,A):1;if(typeof S=="boolean")return typeof A=="boolean"?f(S,A):-1;if(typeof A=="boolean")return typeof S=="boolean"?f(S,A):1;if(t(S))return t(A)?f(S.getTime(),A.getTime()):-1;if(t(A))return t(S)?f(S.getTime(),A.getTime()):1;if(Array.isArray(S))return Array.isArray(A)?b(S,A):-1;if(Array.isArray(A))return Array.isArray(S)?b(S,A):1;const q=Object.keys(S).sort(),H=Object.keys(A).sort();for(let Y=0;Y<Math.min(q.length,H.length);Y+=1){const Q=I(S[q[Y]],A[H[Y]]);if(Q!==0)return Q}return f(q.length,H.length)},v=(S,A=!1)=>(N,D,q)=>{const H=(Y,Q,J)=>{const ne=typeof Q=="string"?Q.split("."):Q;if(ne.length===1)S(Y,Q,J);else{if(Y[ne[0]]===void 0){if(A)return;Y[ne[0]]={}}H(Y[ne[0]],ne.slice(1),J)}};return H(N,D,q)},h=(S,A,N)=>{if(Object.prototype.hasOwnProperty.call(S,A)||(S[A]=[]),!Array.isArray(S[A]))throw new Error("Can't $addToSet an element on non-array values");if(N!==null&&typeof N=="object"&&N.$each){if(Object.keys(N).length>1)throw new Error("Can't use another field in conjunction with $each");if(!Array.isArray(N.$each))throw new Error("$each requires an array value");N.$each.forEach(D=>{h(S,A,D)})}else{let D=!0;S[A].forEach(q=>{I(q,N)===0&&(D=!1)}),D&&S[A].push(N)}},y={$set:v((S,A,N)=>{S[A]=N}),$unset:v((S,A,N)=>{delete S[A]},!0),$min:v((S,A,N)=>{(typeof S[A]>"u"||N<S[A])&&(S[A]=N)}),$max:v((S,A,N)=>{(typeof S[A]>"u"||N>S[A])&&(S[A]=N)}),$inc:v((S,A,N)=>{if(typeof N!="number")throw new Error(`${N} must be a number`);if(typeof S[A]!="number")if(!Object.prototype.hasOwnProperty.call(S,A))S[A]=N;else throw new Error("Don't use the $inc modifier on non-number fields");else S[A]+=N}),$pull:v((S,A,N)=>{if(!Array.isArray(S[A]))throw new Error("Can't $pull an element from non-array values");const D=S[A];for(let q=D.length-1;q>=0;q-=1)l(D[q],N)&&D.splice(q,1)}),$pop:v((S,A,N)=>{if(!Array.isArray(S[A]))throw new Error("Can't $pop an element from non-array values");if(typeof N!="number")throw new Error(`${N} isn't an integer, can't use it with $pop`);N!==0&&(N>0?S[A]=S[A].slice(0,S[A].length-1):S[A]=S[A].slice(1))}),$addToSet:v(h),$push:v((S,A,N)=>{if(Object.prototype.hasOwnProperty.call(S,A)||(S[A]=[]),!Array.isArray(S[A]))throw new Error("Can't $push an element on non-array values");if(N!==null&&typeof N=="object"&&N.$slice&&N.$each===void 0&&(N.$each=[]),N!==null&&typeof N=="object"&&N.$each){if(Object.keys(N).length>=3||Object.keys(N).length===2&&N.$slice===void 0)throw new Error("Can only use $slice in cunjunction with $each when $push to array");if(!Array.isArray(N.$each))throw new Error("$each requires an array value");if(N.$each.forEach(D=>{S[A].push(D)}),N.$slice===void 0||typeof N.$slice!="number")return;if(N.$slice===0)S[A]=[];else{let D,q;const H=S[A].length;N.$slice<0?(D=Math.max(0,H+N.$slice),q=H):N.$slice>0&&(D=0,q=Math.min(H,N.$slice)),S[A]=S[A].slice(D,q)}}else S[A].push(N)})},m=(S,A)=>{const N=Object.keys(A),D=N.map(Q=>Q[0]),q=D.filter(Q=>Q==="$");let H,Y;if(N.indexOf("_id")!==-1&&A._id!==S._id)throw new Error("You cannot change a document's _id");if(q.length!==0&&q.length!==D.length)throw new Error("You cannot mix modifiers and normal fields");if(q.length===0?(H=n(A),H._id=S._id):(Y=e(N),H=n(S),Y.forEach(Q=>{if(!y[Q])throw new Error(`Unknown modifier ${Q}`);if(typeof A[Q]!="object")throw new Error(`Modifier ${Q}'s argument must be an object`);Object.keys(A[Q]).forEach(ne=>{y[Q](H,ne,A[Q][ne])})})),i(H),S._id!==H._id)throw new Error("You can't change a document's _id");return H},E=(S,A)=>{const N=typeof A=="string"?A.split("."):A;if(S){if(N.length===0)return S;if(N.length===1)return S[N[0]];if(Array.isArray(S[N[0]])){const D=parseInt(N[1],10);return typeof D=="number"&&!isNaN(D)?E(S[N[0]][D],N.slice(2)):S[N[0]].map(q=>E(q,N.slice(1)))}else return E(S[N[0]],N.slice(1))}},u=(S,A)=>{if(!Array.isArray(A))throw new Error("fields must be an Array");if(A.length>1){const N={};for(const D of A)N[D]=E(S,D);return N}else return E(S,A[0])},p=(S,A)=>{if(S===null||typeof S=="string"||typeof S=="boolean"||typeof S=="number"||A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number")return S===A;if(t(S)||t(A))return t(S)&&t(A)&&S.getTime()===A.getTime();if(!(Array.isArray(S)&&Array.isArray(A))&&(Array.isArray(S)||Array.isArray(A))||S===void 0||A===void 0)return!1;let N,D;try{N=Object.keys(S),D=Object.keys(A)}catch{return!1}if(N.length!==D.length)return!1;for(const q of N)if(D.indexOf(q)===-1||!p(S[q],A[q]))return!1;return!0},x=(S,A)=>!(typeof S!="string"&&typeof S!="number"&&!t(S)&&typeof A!="string"&&typeof A!="number"&&!t(A)||typeof S!=typeof A),w={$lt:(S,A)=>x(S,A)&&S<A,$lte:(S,A)=>x(S,A)&&S<=A,$gt:(S,A)=>x(S,A)&&S>A,$gte:(S,A)=>x(S,A)&&S>=A,$ne:(S,A)=>S===void 0||!p(S,A),$in:(S,A)=>{if(!Array.isArray(A))throw new Error("$in operator called with a non-array");for(const N of A)if(p(S,N))return!0;return!1},$nin:(S,A)=>{if(!Array.isArray(A))throw new Error("$nin operator called with a non-array");return!w.$in(S,A)},$regex:(S,A)=>{if(!r(A))throw new Error("$regex operator called with non regular expression");return typeof S!="string"?!1:A.test(S)},$exists:(S,A)=>(A||A===""?A=!0:A=!1,S===void 0?!A:A),$size:(S,A)=>{if(!Array.isArray(S))return!1;if(A%1!==0)throw new Error("$size operator called without an integer");return S.length===A},$elemMatch:(S,A)=>Array.isArray(S)?S.some(N=>l(N,A)):!1},B={$size:!0,$elemMatch:!0},C={$or:(S,A)=>{if(!Array.isArray(A))throw new Error("$or operator used without an array");for(let N=0;N<A.length;N+=1)if(l(S,A[N]))return!0;return!1},$and:(S,A)=>{if(!Array.isArray(A))throw new Error("$and operator used without an array");for(let N=0;N<A.length;N+=1)if(!l(S,A[N]))return!1;return!0},$not:(S,A)=>!l(S,A),$where:(S,A)=>{if(typeof A!="function")throw new Error("$where operator used without a function");const N=A.call(S);if(typeof N!="boolean")throw new Error("$where function must return boolean");return N}},l=(S,A)=>{if(d(S)||d(A))return o({needAKey:S},"needAKey",A);for(const N in A)if(Object.prototype.hasOwnProperty.call(A,N)){const D=A[N];if(N[0]==="$"){if(!C[N])throw new Error(`Unknown logical operator ${N}`);if(!C[N](S,D))return!1}else if(!o(S,N,D))return!1}return!0};function o(S,A,N,D){const q=E(S,A);if(Array.isArray(q)&&!D){if(Array.isArray(N))return o(S,A,N,!0);if(N!==null&&typeof N=="object"&&!r(N)){for(const H in N)if(Object.prototype.hasOwnProperty.call(N,H)&&B[H])return o(S,A,N,!0)}for(const H of q)if(o({k:H},"k",N))return!0;return!1}if(N!==null&&typeof N=="object"&&!r(N)&&!Array.isArray(N)){const H=Object.keys(N),Y=H.map(J=>J[0]),Q=Y.filter(J=>J==="$");if(Q.length!==0&&Q.length!==Y.length)throw new Error("You cannot mix operators and normal fields");if(Q.length>0){for(const J of H){if(!w[J])throw new Error(`Unknown comparison function ${J}`);if(!w[J](q,N[J]))return!1}return!0}}return r(N)?w.$regex(q,N):p(q,N)}return Lt.serialize=s,Lt.deserialize=c,Lt.deepCopy=n,Lt.checkObject=i,Lt.isPrimitiveType=d,Lt.modify=m,Lt.getDotValue=E,Lt.getDotValues=u,Lt.match=l,Lt.areThingsEqual=p,Lt.compareThings=I,Lt}var Wa,lc;function nh(){if(lc)return Wa;lc=1;const e=Aa(),{callbackify:t}=require("util");class r{constructor(i,s,c){this.db=i,this.query=s||{},c&&(this.mapFn=c),this._limit=void 0,this._skip=void 0,this._sort=void 0,this._projection=void 0}limit(i){return this._limit=i,this}skip(i){return this._skip=i,this}sort(i){return this._sort=i,this}projection(i){return this._projection=i,this}_project(i){const s=[];let c;if(this._projection===void 0||Object.keys(this._projection).length===0)return i;const n=this._projection._id!==0,{_id:d,...f}=this._projection;this._projection=f;const b=Object.keys(this._projection);return b.forEach(I=>{if(c!==void 0&&this._projection[I]!==c)throw new Error("Can't both keep and omit fields except for _id");c=this._projection[I]}),i.forEach(I=>{let v;c===1?(v={$set:{}},b.forEach(h=>{v.$set[h]=e.getDotValue(I,h),v.$set[h]===void 0&&delete v.$set[h]}),v=e.modify({},v)):(v={$unset:{}},b.forEach(h=>{v.$unset[h]=!0}),v=e.modify(I,v)),n?v._id=I._id:delete v._id,s.push(v)}),s}async _execAsync(){let i=[],s=0,c=0;const n=await this.db._getCandidatesAsync(this.query);for(const d of n)if(e.match(d,this.query)){if(this._sort)i.push(d);else if(this._skip&&this._skip>c)c+=1;else if(i.push(d),s+=1,this._limit&&this._limit<=s)break}if(this._sort){const d=Object.entries(this._sort).map(([I,v])=>({key:I,direction:v}));i.sort((I,v)=>{for(const h of d){const y=h.direction*e.compareThings(e.getDotValue(I,h.key),e.getDotValue(v,h.key),this.db.compareStrings);if(y!==0)return y}return 0});const f=this._limit||i.length,b=this._skip||0;i=i.slice(b,b+f)}return i=this._project(i),this.mapFn?this.mapFn(i):i}exec(i){t(()=>this.execAsync())(i)}execAsync(){return this.db.executor.pushAsync(()=>this._execAsync())}then(i,s){return this.execAsync().then(i,s)}catch(i){return this.execAsync().catch(i)}finally(i){return this.execAsync().finally(i)}}return Wa=r,Wa}var Ya={},fc;function ah(){if(fc)return Ya;fc=1;const e=a=>{const i=new Array(a);for(let s=0,c;s<a;s++)(s&3)===0&&(c=Math.random()*4294967296),i[s]=c>>>((s&3)<<3)&255;return i},t=a=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=a.length%3;let c="",n;const d=f=>i[f>>18&63]+i[f>>12&63]+i[f>>6&63]+i[f&63];for(let f=0,b=a.length-s;f<b;f+=3)n=(a[f]<<16)+(a[f+1]<<8)+a[f+2],c+=d(n);return s===1?(n=a[a.length-1],c+=i[n>>2],c+=i[n<<4&63],c+="=="):s===2&&(n=(a[a.length-2]<<8)+a[a.length-1],c+=i[n>>10],c+=i[n>>4&63],c+=i[n<<2&63],c+="="),c},r=a=>t(e(Math.ceil(Math.max(8,a*2)))).replace(/[+/]/g,"").slice(0,a);return Ya.uid=r,Ya}var Qa,dc;function Fl(){if(dc)return Qa;dc=1;class e{constructor(){this.guardian=Promise.resolve()}waterfall(r){return(...a)=>(this.guardian=this.guardian.then(()=>r(...a).then(i=>({error:!1,result:i}),i=>({error:!0,result:i}))),this.guardian.then(({error:i,result:s})=>i?Promise.reject(s):Promise.resolve(s)))}chain(r){return this.waterfall(()=>r)()}}return Qa=e,Qa}var Xa,pc;function ih(){if(pc)return Xa;pc=1;const e=Fl();class t{constructor(){this.ready=!1,this.queue=new e,this.buffer=null,this._triggerBuffer=null,this.resetBuffer()}pushAsync(a,i=!1){return this.ready||i?this.queue.waterfall(a)():this.buffer.waterfall(a)()}processBuffer(){this.ready=!0,this._triggerBuffer(),this.queue.waterfall(()=>this.buffer.guardian)}resetBuffer(){this.buffer=new e,this.buffer.chain(new Promise(a=>{this._triggerBuffer=a})),this.ready&&this._triggerBuffer()}}return Xa=t,Xa}var ia={},wn={},hc;function Ml(){if(hc)return wn;hc=1;const e=a=>{if(a===0)return[];if(a===1)return[0];const i=e(a-1),s=Math.floor(Math.random()*a);return i.splice(s,0,a-1),i};wn.getRandomArray=e;const t=(a,i)=>{if(a<i)return-1;if(a>i)return 1;if(a===i)return 0;const s=new Error("Couldn't compare elements");throw s.a=a,s.b=i,s};wn.defaultCompareKeysFunction=t;const r=(a,i)=>a===i;return wn.defaultCheckValueEquality=r,wn}var Ja,yc;function Vl(){if(yc)return Ja;yc=1;const e=Ml();class t{constructor(i){i=i||{},this.left=null,this.right=null,this.parent=i.parent!==void 0?i.parent:null,Object.prototype.hasOwnProperty.call(i,"key")&&(this.key=i.key),this.data=Object.prototype.hasOwnProperty.call(i,"value")?[i.value]:[],this.unique=i.unique||!1,this.compareKeys=i.compareKeys||e.defaultCompareKeysFunction,this.checkValueEquality=i.checkValueEquality||e.defaultCheckValueEquality}getMaxKeyDescendant(){return this.right?this.right.getMaxKeyDescendant():this}getMaxKey(){return this.getMaxKeyDescendant().key}getMinKeyDescendant(){return this.left?this.left.getMinKeyDescendant():this}getMinKey(){return this.getMinKeyDescendant().key}checkAllNodesFullfillCondition(i){Object.prototype.hasOwnProperty.call(this,"key")&&(i(this.key,this.data),this.left&&this.left.checkAllNodesFullfillCondition(i),this.right&&this.right.checkAllNodesFullfillCondition(i))}checkNodeOrdering(){Object.prototype.hasOwnProperty.call(this,"key")&&(this.left&&(this.left.checkAllNodesFullfillCondition(i=>{if(this.compareKeys(i,this.key)>=0)throw new Error(`Tree with root ${this.key} is not a binary search tree`)}),this.left.checkNodeOrdering()),this.right&&(this.right.checkAllNodesFullfillCondition(i=>{if(this.compareKeys(i,this.key)<=0)throw new Error(`Tree with root ${this.key} is not a binary search tree`)}),this.right.checkNodeOrdering()))}checkInternalPointers(){if(this.left){if(this.left.parent!==this)throw new Error(`Parent pointer broken for key ${this.key}`);this.left.checkInternalPointers()}if(this.right){if(this.right.parent!==this)throw new Error(`Parent pointer broken for key ${this.key}`);this.right.checkInternalPointers()}}checkIsBST(){if(this.checkNodeOrdering(),this.checkInternalPointers(),this.parent)throw new Error("The root shouldn't have a parent")}getNumberOfKeys(){let i;return Object.prototype.hasOwnProperty.call(this,"key")?(i=1,this.left&&(i+=this.left.getNumberOfKeys()),this.right&&(i+=this.right.getNumberOfKeys()),i):0}createSimilar(i){return i=i||{},i.unique=this.unique,i.compareKeys=this.compareKeys,i.checkValueEquality=this.checkValueEquality,new this.constructor(i)}createLeftChild(i){const s=this.createSimilar(i);return s.parent=this,this.left=s,s}createRightChild(i){const s=this.createSimilar(i);return s.parent=this,this.right=s,s}insert(i,s){if(!Object.prototype.hasOwnProperty.call(this,"key")){this.key=i,this.data.push(s);return}if(this.compareKeys(this.key,i)===0){if(this.unique){const c=new Error(`Can't insert key ${JSON.stringify(i)}, it violates the unique constraint`);throw c.key=i,c.errorType="uniqueViolated",c}else this.data.push(s);return}this.compareKeys(i,this.key)<0?this.left?this.left.insert(i,s):this.createLeftChild({key:i,value:s}):this.right?this.right.insert(i,s):this.createRightChild({key:i,value:s})}search(i){return Object.prototype.hasOwnProperty.call(this,"key")?this.compareKeys(this.key,i)===0?this.data:this.compareKeys(i,this.key)<0?this.left?this.left.search(i):[]:this.right?this.right.search(i):[]:[]}getLowerBoundMatcher(i){return!Object.prototype.hasOwnProperty.call(i,"$gt")&&!Object.prototype.hasOwnProperty.call(i,"$gte")?()=>!0:Object.prototype.hasOwnProperty.call(i,"$gt")&&Object.prototype.hasOwnProperty.call(i,"$gte")?this.compareKeys(i.$gte,i.$gt)===0?s=>this.compareKeys(s,i.$gt)>0:this.compareKeys(i.$gte,i.$gt)>0?s=>this.compareKeys(s,i.$gte)>=0:s=>this.compareKeys(s,i.$gt)>0:Object.prototype.hasOwnProperty.call(i,"$gt")?s=>this.compareKeys(s,i.$gt)>0:s=>this.compareKeys(s,i.$gte)>=0}getUpperBoundMatcher(i){return!Object.prototype.hasOwnProperty.call(i,"$lt")&&!Object.prototype.hasOwnProperty.call(i,"$lte")?()=>!0:Object.prototype.hasOwnProperty.call(i,"$lt")&&Object.prototype.hasOwnProperty.call(i,"$lte")?this.compareKeys(i.$lte,i.$lt)===0?s=>this.compareKeys(s,i.$lt)<0:this.compareKeys(i.$lte,i.$lt)<0?s=>this.compareKeys(s,i.$lte)<=0:s=>this.compareKeys(s,i.$lt)<0:Object.prototype.hasOwnProperty.call(i,"$lt")?s=>this.compareKeys(s,i.$lt)<0:s=>this.compareKeys(s,i.$lte)<=0}betweenBounds(i,s,c){const n=[];return Object.prototype.hasOwnProperty.call(this,"key")?(s=s||this.getLowerBoundMatcher(i),c=c||this.getUpperBoundMatcher(i),s(this.key)&&this.left&&r(n,this.left.betweenBounds(i,s,c)),s(this.key)&&c(this.key)&&r(n,this.data),c(this.key)&&this.right&&r(n,this.right.betweenBounds(i,s,c)),n):[]}deleteIfLeaf(){return this.left||this.right?!1:this.parent?(this.parent.left===this?this.parent.left=null:this.parent.right=null,!0):(delete this.key,this.data=[],!0)}deleteIfOnlyOneChild(){let i;return this.left&&!this.right&&(i=this.left),!this.left&&this.right&&(i=this.right),i?this.parent?(this.parent.left===this?(this.parent.left=i,i.parent=this.parent):(this.parent.right=i,i.parent=this.parent),!0):(this.key=i.key,this.data=i.data,this.left=null,i.left&&(this.left=i.left,i.left.parent=this),this.right=null,i.right&&(this.right=i.right,i.right.parent=this),!0):!1}delete(i,s){const c=[];let n;if(Object.prototype.hasOwnProperty.call(this,"key")){if(this.compareKeys(i,this.key)<0){this.left&&this.left.delete(i,s);return}if(this.compareKeys(i,this.key)>0){this.right&&this.right.delete(i,s);return}if(!this.compareKeys(i,this.key)!==0){if(this.data.length>1&&s!==void 0){this.data.forEach(d=>{this.checkValueEquality(d,s)||c.push(d)}),this.data=c;return}this.deleteIfLeaf()||this.deleteIfOnlyOneChild()||(Math.random()>=.5?(n=this.left.getMaxKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.left=n.left,n.left&&(n.left.parent=n.parent)):(n.parent.right=n.left,n.left&&(n.left.parent=n.parent))):(n=this.right.getMinKeyDescendant(),this.key=n.key,this.data=n.data,this===n.parent?(this.right=n.right,n.right&&(n.right.parent=n.parent)):(n.parent.left=n.right,n.right&&(n.right.parent=n.parent))))}}}executeOnEveryNode(i){this.left&&this.left.executeOnEveryNode(i),i(this),this.right&&this.right.executeOnEveryNode(i)}prettyPrint(i,s){s=s||"",console.log(`${s}* ${this.key}`),i&&console.log(`${s}* ${this.data}`),!(!this.left&&!this.right)&&(this.left?this.left.prettyPrint(i,`${s}  `):console.log(`${s}  *`),this.right?this.right.prettyPrint(i,`${s}  `):console.log(`${s}  *`))}}function r(a,i){for(let s=0;s<i.length;s+=1)a.push(i[s])}return Ja=t,Ja}var Za,gc;function sh(){if(gc)return Za;gc=1;const e=Vl(),t=Ml();class r{constructor(s){this.tree=new a(s)}checkIsAVLT(){this.tree.checkIsAVLT()}insert(s,c){const n=this.tree.insert(s,c);n&&(this.tree=n)}delete(s,c){const n=this.tree.delete(s,c);n&&(this.tree=n)}}class a extends e{constructor(s){super(),s=s||{},this.left=null,this.right=null,this.parent=s.parent!==void 0?s.parent:null,Object.prototype.hasOwnProperty.call(s,"key")&&(this.key=s.key),this.data=Object.prototype.hasOwnProperty.call(s,"value")?[s.value]:[],this.unique=s.unique||!1,this.compareKeys=s.compareKeys||t.defaultCompareKeysFunction,this.checkValueEquality=s.checkValueEquality||t.defaultCheckValueEquality}checkHeightCorrect(){if(!Object.prototype.hasOwnProperty.call(this,"key"))return;if(this.left&&this.left.height===void 0)throw new Error("Undefined height for node "+this.left.key);if(this.right&&this.right.height===void 0)throw new Error("Undefined height for node "+this.right.key);if(this.height===void 0)throw new Error("Undefined height for node "+this.key);const s=this.left?this.left.height:0,c=this.right?this.right.height:0;if(this.height!==1+Math.max(s,c))throw new Error("Height constraint failed for node "+this.key);this.left&&this.left.checkHeightCorrect(),this.right&&this.right.checkHeightCorrect()}balanceFactor(){const s=this.left?this.left.height:0,c=this.right?this.right.height:0;return s-c}checkBalanceFactors(){if(Math.abs(this.balanceFactor())>1)throw new Error("Tree is unbalanced at node "+this.key);this.left&&this.left.checkBalanceFactors(),this.right&&this.right.checkBalanceFactors()}checkIsAVLT(){super.checkIsBST(),this.checkHeightCorrect(),this.checkBalanceFactors()}rightRotation(){const s=this,c=this.left;if(!c)return s;const n=c.right;s.parent?(c.parent=s.parent,s.parent.left===s?s.parent.left=c:s.parent.right=c):c.parent=null,c.right=s,s.parent=c,s.left=n,n&&(n.parent=s);const d=c.left?c.left.height:0,f=n?n.height:0,b=s.right?s.right.height:0;return s.height=Math.max(f,b)+1,c.height=Math.max(d,s.height)+1,c}leftRotation(){const s=this,c=this.right;if(!c)return this;const n=c.left;s.parent?(c.parent=s.parent,s.parent.left===s?s.parent.left=c:s.parent.right=c):c.parent=null,c.left=s,s.parent=c,s.right=n,n&&(n.parent=s);const d=s.left?s.left.height:0,f=n?n.height:0,b=c.right?c.right.height:0;return s.height=Math.max(d,f)+1,c.height=Math.max(b,s.height)+1,c}rightTooSmall(){return this.balanceFactor()<=1?this:(this.left.balanceFactor()<0&&this.left.leftRotation(),this.rightRotation())}leftTooSmall(){return this.balanceFactor()>=-1?this:(this.right.balanceFactor()>0&&this.right.rightRotation(),this.leftRotation())}rebalanceAlongPath(s){let c=this,n,d;if(!Object.prototype.hasOwnProperty.call(this,"key"))return delete this.height,this;for(d=s.length-1;d>=0;d-=1)s[d].height=1+Math.max(s[d].left?s[d].left.height:0,s[d].right?s[d].right.height:0),s[d].balanceFactor()>1&&(n=s[d].rightTooSmall(),d===0&&(c=n)),s[d].balanceFactor()<-1&&(n=s[d].leftTooSmall(),d===0&&(c=n));return c}insert(s,c){const n=[];let d=this;if(!Object.prototype.hasOwnProperty.call(this,"key"))return this.key=s,this.data.push(c),this.height=1,this;for(;;){if(d.compareKeys(d.key,s)===0){if(d.unique){const f=new Error(`Can't insert key ${JSON.stringify(s)}, it violates the unique constraint`);throw f.key=s,f.errorType="uniqueViolated",f}else d.data.push(c);return this}if(n.push(d),d.compareKeys(s,d.key)<0)if(d.left)d=d.left;else{n.push(d.createLeftChild({key:s,value:c}));break}else if(d.right)d=d.right;else{n.push(d.createRightChild({key:s,value:c}));break}}return this.rebalanceAlongPath(n)}delete(s,c){const n=[];let d,f=this;const b=[];if(!Object.prototype.hasOwnProperty.call(this,"key"))return this;for(;f.compareKeys(s,f.key)!==0;)if(b.push(f),f.compareKeys(s,f.key)<0)if(f.left)f=f.left;else return this;else if(f.right)f=f.right;else return this;if(f.data.length>1&&c!==void 0)return f.data.forEach(function(I){f.checkValueEquality(I,c)||n.push(I)}),f.data=n,this;if(!f.left&&!f.right)return f===this?(delete f.key,f.data=[],delete f.height,this):(f.parent.left===f?f.parent.left=null:f.parent.right=null,this.rebalanceAlongPath(b));if(!f.left||!f.right)return d=f.left?f.left:f.right,f===this?(d.parent=null,d):(f.parent.left===f?(f.parent.left=d,d.parent=f.parent):(f.parent.right=d,d.parent=f.parent),this.rebalanceAlongPath(b));if(b.push(f),d=f.left,!d.right)return f.key=d.key,f.data=d.data,f.left=d.left,d.left&&(d.left.parent=f),this.rebalanceAlongPath(b);for(;d.right;)b.push(d),d=d.right;return f.key=d.key,f.data=d.data,d.parent.right=d.left,d.left&&(d.left.parent=d.parent),this.rebalanceAlongPath(b)}}return r._AVLTree=a,["getNumberOfKeys","search","betweenBounds","prettyPrint","executeOnEveryNode"].forEach(function(i){r.prototype[i]=function(){return this.tree[i].apply(this.tree,arguments)}}),Za=r,Za}var vc;function oh(){return vc||(vc=1,ia.BinarySearchTree=Vl(),ia.AVLTree=sh()),ia}var ei,mc;function Kl(){if(mc)return ei;mc=1;const e=oh().AVLTree,t=Aa(),{uniq:r,isDate:a}=fo(),i=(n,d)=>n===d,s=n=>n===null?"$null":typeof n=="string"?"$string"+n:typeof n=="boolean"?"$boolean"+n:typeof n=="number"?"$number"+n:a(n)?"$date"+n.getTime():n;class c{constructor(d){if(this.fieldName=d.fieldName,typeof this.fieldName!="string")throw new Error("fieldName must be a string");this._fields=this.fieldName.split(","),this.unique=d.unique||!1,this.sparse=d.sparse||!1,this.treeOptions={unique:this.unique,compareKeys:t.compareThings,checkValueEquality:i},this.tree=new e(this.treeOptions)}reset(d){this.tree=new e(this.treeOptions),d&&this.insert(d)}insert(d){let f,b,I;if(Array.isArray(d)){this.insertMultipleDocs(d);return}const v=t.getDotValues(d,this._fields);if(!((v===void 0||typeof v=="object"&&v!==null&&Object.values(v).every(h=>h===void 0))&&this.sparse))if(!Array.isArray(v))this.tree.insert(v,d);else{f=r(v,s);for(let h=0;h<f.length;h+=1)try{this.tree.insert(f[h],d)}catch(y){I=y,b=h;break}if(I){for(let h=0;h<b;h+=1)this.tree.delete(f[h],d);throw I}}}insertMultipleDocs(d){let f,b;for(let I=0;I<d.length;I+=1)try{this.insert(d[I])}catch(v){f=v,b=I;break}if(f){for(let I=0;I<b;I+=1)this.remove(d[I]);throw f}}remove(d){if(Array.isArray(d)){d.forEach(b=>{this.remove(b)});return}const f=t.getDotValues(d,this._fields);f===void 0&&this.sparse||(Array.isArray(f)?r(f,s).forEach(b=>{this.tree.delete(b,d)}):this.tree.delete(f,d))}update(d,f){if(Array.isArray(d)){this.updateMultipleDocs(d);return}this.remove(d);try{this.insert(f)}catch(b){throw this.insert(d),b}}updateMultipleDocs(d){let f,b;for(let I=0;I<d.length;I+=1)this.remove(d[I].oldDoc);for(let I=0;I<d.length;I+=1)try{this.insert(d[I].newDoc)}catch(v){b=v,f=I;break}if(b){for(let I=0;I<f;I+=1)this.remove(d[I].newDoc);for(let I=0;I<d.length;I+=1)this.insert(d[I].oldDoc);throw b}}revertUpdate(d,f){const b=[];Array.isArray(d)?(d.forEach(I=>{b.push({oldDoc:I.newDoc,newDoc:I.oldDoc})}),this.update(b)):this.update(f,d)}getMatching(d){if(Array.isArray(d)){const f={},b=[];return d.forEach(I=>{this.getMatching(I).forEach(v=>{f[v._id]=v})}),Object.keys(f).forEach(I=>{b.push(f[I])}),b}else return this.tree.search(d)}getBetweenBounds(d){return this.tree.betweenBounds(d)}getAll(){const d=[];return this.tree.executeOnEveryNode(f=>{d.push(...f.data)}),d}}return ei=c,ei}var ti,Cc;function ch(){return Cc||(Cc=1,ti={}),ti}var Ft={},ri={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Ec;function uh(){return Ec||(Ec=1,(function(e,t){(function(r){e.exports=r()})(function(){return(function r(a,i,s){function c(f,b){if(!i[f]){if(!a[f]){var I=typeof na=="function"&&na;if(!b&&I)return I(f,!0);if(n)return n(f,!0);var v=new Error("Cannot find module '"+f+"'");throw v.code="MODULE_NOT_FOUND",v}var h=i[f]={exports:{}};a[f][0].call(h.exports,function(y){var m=a[f][1][y];return c(m||y)},h,h.exports,r,a,i,s)}return i[f].exports}for(var n=typeof na=="function"&&na,d=0;d<s.length;d++)c(s[d]);return c})({1:[function(r,a,i){(function(s){var c=s.MutationObserver||s.WebKitMutationObserver,n;if(c){var d=0,f=new c(y),b=s.document.createTextNode("");f.observe(b,{characterData:!0}),n=function(){b.data=d=++d%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var I=new s.MessageChannel;I.port1.onmessage=y,n=function(){I.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?n=function(){var E=s.document.createElement("script");E.onreadystatechange=function(){y(),E.onreadystatechange=null,E.parentNode.removeChild(E),E=null},s.document.documentElement.appendChild(E)}:n=function(){setTimeout(y,0)};var v,h=[];function y(){v=!0;for(var E,u,p=h.length;p;){for(u=h,h=[],E=-1;++E<p;)u[E]();p=h.length}v=!1}a.exports=m;function m(E){h.push(E)===1&&!v&&n()}}).call(this,typeof ur<"u"?ur:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,a,i){var s=r(1);function c(){}var n={},d=["REJECTED"],f=["FULFILLED"],b=["PENDING"];a.exports=I;function I(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,B!==c&&m(this,B)}I.prototype.catch=function(B){return this.then(null,B)},I.prototype.then=function(B,C){if(typeof B!="function"&&this.state===f||typeof C!="function"&&this.state===d)return this;var l=new this.constructor(c);if(this.state!==b){var o=this.state===f?B:C;h(l,o,this.outcome)}else this.queue.push(new v(l,B,C));return l};function v(B,C,l){this.promise=B,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof l=="function"&&(this.onRejected=l,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(B){n.resolve(this.promise,B)},v.prototype.otherCallFulfilled=function(B){h(this.promise,this.onFulfilled,B)},v.prototype.callRejected=function(B){n.reject(this.promise,B)},v.prototype.otherCallRejected=function(B){h(this.promise,this.onRejected,B)};function h(B,C,l){s(function(){var o;try{o=C(l)}catch(S){return n.reject(B,S)}o===B?n.reject(B,new TypeError("Cannot resolve promise with itself")):n.resolve(B,o)})}n.resolve=function(B,C){var l=E(y,C);if(l.status==="error")return n.reject(B,l.value);var o=l.value;if(o)m(B,o);else{B.state=f,B.outcome=C;for(var S=-1,A=B.queue.length;++S<A;)B.queue[S].callFulfilled(C)}return B},n.reject=function(B,C){B.state=d,B.outcome=C;for(var l=-1,o=B.queue.length;++l<o;)B.queue[l].callRejected(C);return B};function y(B){var C=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof C=="function")return function(){C.apply(B,arguments)}}function m(B,C){var l=!1;function o(D){l||(l=!0,n.reject(B,D))}function S(D){l||(l=!0,n.resolve(B,D))}function A(){C(S,o)}var N=E(A);N.status==="error"&&o(N.value)}function E(B,C){var l={};try{l.value=B(C),l.status="success"}catch(o){l.status="error",l.value=o}return l}I.resolve=u;function u(B){return B instanceof this?B:n.resolve(new this(c),B)}I.reject=p;function p(B){var C=new this(c);return n.reject(C,B)}I.all=x;function x(B){var C=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=B.length,o=!1;if(!l)return this.resolve([]);for(var S=new Array(l),A=0,N=-1,D=new this(c);++N<l;)q(B[N],N);return D;function q(H,Y){C.resolve(H).then(Q,function(J){o||(o=!0,n.reject(D,J))});function Q(J){S[Y]=J,++A===l&&!o&&(o=!0,n.resolve(D,S))}}}I.race=w;function w(B){var C=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var l=B.length,o=!1;if(!l)return this.resolve([]);for(var S=-1,A=new this(c);++S<l;)N(B[S]);return A;function N(D){C.resolve(D).then(function(q){o||(o=!0,n.resolve(A,q))},function(q){o||(o=!0,n.reject(A,q))})}}},{1:1}],3:[function(r,a,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof ur<"u"?ur:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,a,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function c(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function n(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var d=n();function f(){try{if(!d||!d.open)return!1;var _=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),$=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!_||$)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function b(_,$){_=_||[],$=$||{};try{return new Blob(_,$)}catch(W){if(W.name!=="TypeError")throw W;for(var P=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,j=new P,G=0;G<_.length;G+=1)j.append(_[G]);return j.getBlob($.type)}}typeof Promise>"u"&&r(3);var I=Promise;function v(_,$){$&&_.then(function(P){$(null,P)},function(P){$(P)})}function h(_,$,P){typeof $=="function"&&_.then($),typeof P=="function"&&_.catch(P)}function y(_){return typeof _!="string"&&(console.warn(_+" used as a key, but it is not a string."),_=String(_)),_}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var E="local-forage-detect-blob-support",u=void 0,p={},x=Object.prototype.toString,w="readonly",B="readwrite";function C(_){for(var $=_.length,P=new ArrayBuffer($),j=new Uint8Array(P),G=0;G<$;G++)j[G]=_.charCodeAt(G);return P}function l(_){return new I(function($){var P=_.transaction(E,B),j=b([""]);P.objectStore(E).put(j,"key"),P.onabort=function(G){G.preventDefault(),G.stopPropagation(),$(!1)},P.oncomplete=function(){var G=navigator.userAgent.match(/Chrome\/(\d+)/),W=navigator.userAgent.match(/Edge\//);$(W||!G||parseInt(G[1],10)>=43)}}).catch(function(){return!1})}function o(_){return typeof u=="boolean"?I.resolve(u):l(_).then(function($){return u=$,u})}function S(_){var $=p[_.name],P={};P.promise=new I(function(j,G){P.resolve=j,P.reject=G}),$.deferredOperations.push(P),$.dbReady?$.dbReady=$.dbReady.then(function(){return P.promise}):$.dbReady=P.promise}function A(_){var $=p[_.name],P=$.deferredOperations.pop();if(P)return P.resolve(),P.promise}function N(_,$){var P=p[_.name],j=P.deferredOperations.pop();if(j)return j.reject($),j.promise}function D(_,$){return new I(function(P,j){if(p[_.name]=p[_.name]||we(),_.db)if($)S(_),_.db.close();else return P(_.db);var G=[_.name];$&&G.push(_.version);var W=d.open.apply(d,G);$&&(W.onupgradeneeded=function(ee){var ie=W.result;try{ie.createObjectStore(_.storeName),ee.oldVersion<=1&&ie.createObjectStore(E)}catch(ce){if(ce.name==="ConstraintError")console.warn('The database "'+_.name+'" has been upgraded from version '+ee.oldVersion+" to version "+ee.newVersion+', but the storage "'+_.storeName+'" already exists.');else throw ce}}),W.onerror=function(ee){ee.preventDefault(),j(W.error)},W.onsuccess=function(){var ee=W.result;ee.onversionchange=function(ie){ie.target.close()},P(ee),A(_)}})}function q(_){return D(_,!1)}function H(_){return D(_,!0)}function Y(_,$){if(!_.db)return!0;var P=!_.db.objectStoreNames.contains(_.storeName),j=_.version<_.db.version,G=_.version>_.db.version;if(j&&(_.version!==$&&console.warn('The database "'+_.name+`" can't be downgraded from version `+_.db.version+" to version "+_.version+"."),_.version=_.db.version),G||P){if(P){var W=_.db.version+1;W>_.version&&(_.version=W)}return!0}return!1}function Q(_){return new I(function($,P){var j=new FileReader;j.onerror=P,j.onloadend=function(G){var W=btoa(G.target.result||"");$({__local_forage_encoded_blob:!0,data:W,type:_.type})},j.readAsBinaryString(_)})}function J(_){var $=C(atob(_.data));return b([$],{type:_.type})}function ne(_){return _&&_.__local_forage_encoded_blob}function se(_){var $=this,P=$._initReady().then(function(){var j=p[$._dbInfo.name];if(j&&j.dbReady)return j.dbReady});return h(P,_,_),P}function fe(_){S(_);for(var $=p[_.name],P=$.forages,j=0;j<P.length;j++){var G=P[j];G._dbInfo.db&&(G._dbInfo.db.close(),G._dbInfo.db=null)}return _.db=null,q(_).then(function(W){return _.db=W,Y(_)?H(_):W}).then(function(W){_.db=$.db=W;for(var ee=0;ee<P.length;ee++)P[ee]._dbInfo.db=W}).catch(function(W){throw N(_,W),W})}function he(_,$,P,j){j===void 0&&(j=1);try{var G=_.db.transaction(_.storeName,$);P(null,G)}catch(W){if(j>0&&(!_.db||W.name==="InvalidStateError"||W.name==="NotFoundError"))return I.resolve().then(function(){if(!_.db||W.name==="NotFoundError"&&!_.db.objectStoreNames.contains(_.storeName)&&_.version<=_.db.version)return _.db&&(_.version=_.db.version+1),H(_)}).then(function(){return fe(_).then(function(){he(_,$,P,j-1)})}).catch(P);P(W)}}function we(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Se(_){var $=this,P={db:null};if(_)for(var j in _)P[j]=_[j];var G=p[P.name];G||(G=we(),p[P.name]=G),G.forages.push($),$._initReady||($._initReady=$.ready,$.ready=se);var W=[];function ee(){return I.resolve()}for(var ie=0;ie<G.forages.length;ie++){var ce=G.forages[ie];ce!==$&&W.push(ce._initReady().catch(ee))}var ue=G.forages.slice(0);return I.all(W).then(function(){return P.db=G.db,q(P)}).then(function(de){return P.db=de,Y(P,$._defaultConfig.version)?H(P):de}).then(function(de){P.db=G.db=de,$._dbInfo=P;for(var ve=0;ve<ue.length;ve++){var Ae=ue[ve];Ae!==$&&(Ae._dbInfo.db=P.db,Ae._dbInfo.version=P.version)}})}function le(_,$){var P=this;_=y(_);var j=new I(function(G,W){P.ready().then(function(){he(P._dbInfo,w,function(ee,ie){if(ee)return W(ee);try{var ce=ie.objectStore(P._dbInfo.storeName),ue=ce.get(_);ue.onsuccess=function(){var de=ue.result;de===void 0&&(de=null),ne(de)&&(de=J(de)),G(de)},ue.onerror=function(){W(ue.error)}}catch(de){W(de)}})}).catch(W)});return v(j,$),j}function Ne(_,$){var P=this,j=new I(function(G,W){P.ready().then(function(){he(P._dbInfo,w,function(ee,ie){if(ee)return W(ee);try{var ce=ie.objectStore(P._dbInfo.storeName),ue=ce.openCursor(),de=1;ue.onsuccess=function(){var ve=ue.result;if(ve){var Ae=ve.value;ne(Ae)&&(Ae=J(Ae));var $e=_(Ae,ve.key,de++);$e!==void 0?G($e):ve.continue()}else G()},ue.onerror=function(){W(ue.error)}}catch(ve){W(ve)}})}).catch(W)});return v(j,$),j}function pe(_,$,P){var j=this;_=y(_);var G=new I(function(W,ee){var ie;j.ready().then(function(){return ie=j._dbInfo,x.call($)==="[object Blob]"?o(ie.db).then(function(ce){return ce?$:Q($)}):$}).then(function(ce){he(j._dbInfo,B,function(ue,de){if(ue)return ee(ue);try{var ve=de.objectStore(j._dbInfo.storeName);ce===null&&(ce=void 0);var Ae=ve.put(ce,_);de.oncomplete=function(){ce===void 0&&(ce=null),W(ce)},de.onabort=de.onerror=function(){var $e=Ae.error?Ae.error:Ae.transaction.error;ee($e)}}catch($e){ee($e)}})}).catch(ee)});return v(G,P),G}function tt(_,$){var P=this;_=y(_);var j=new I(function(G,W){P.ready().then(function(){he(P._dbInfo,B,function(ee,ie){if(ee)return W(ee);try{var ce=ie.objectStore(P._dbInfo.storeName),ue=ce.delete(_);ie.oncomplete=function(){G()},ie.onerror=function(){W(ue.error)},ie.onabort=function(){var de=ue.error?ue.error:ue.transaction.error;W(de)}}catch(de){W(de)}})}).catch(W)});return v(j,$),j}function ke(_){var $=this,P=new I(function(j,G){$.ready().then(function(){he($._dbInfo,B,function(W,ee){if(W)return G(W);try{var ie=ee.objectStore($._dbInfo.storeName),ce=ie.clear();ee.oncomplete=function(){j()},ee.onabort=ee.onerror=function(){var ue=ce.error?ce.error:ce.transaction.error;G(ue)}}catch(ue){G(ue)}})}).catch(G)});return v(P,_),P}function T(_){var $=this,P=new I(function(j,G){$.ready().then(function(){he($._dbInfo,w,function(W,ee){if(W)return G(W);try{var ie=ee.objectStore($._dbInfo.storeName),ce=ie.count();ce.onsuccess=function(){j(ce.result)},ce.onerror=function(){G(ce.error)}}catch(ue){G(ue)}})}).catch(G)});return v(P,_),P}function U(_,$){var P=this,j=new I(function(G,W){if(_<0){G(null);return}P.ready().then(function(){he(P._dbInfo,w,function(ee,ie){if(ee)return W(ee);try{var ce=ie.objectStore(P._dbInfo.storeName),ue=!1,de=ce.openKeyCursor();de.onsuccess=function(){var ve=de.result;if(!ve){G(null);return}_===0||ue?G(ve.key):(ue=!0,ve.advance(_))},de.onerror=function(){W(de.error)}}catch(ve){W(ve)}})}).catch(W)});return v(j,$),j}function O(_){var $=this,P=new I(function(j,G){$.ready().then(function(){he($._dbInfo,w,function(W,ee){if(W)return G(W);try{var ie=ee.objectStore($._dbInfo.storeName),ce=ie.openKeyCursor(),ue=[];ce.onsuccess=function(){var de=ce.result;if(!de){j(ue);return}ue.push(de.key),de.continue()},ce.onerror=function(){G(ce.error)}}catch(de){G(de)}})}).catch(G)});return v(P,_),P}function g(_,$){$=m.apply(this,arguments);var P=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||P.name,_.storeName=_.storeName||P.storeName);var j=this,G;if(!_.name)G=I.reject("Invalid arguments");else{var W=_.name===P.name&&j._dbInfo.db,ee=W?I.resolve(j._dbInfo.db):q(_).then(function(ie){var ce=p[_.name],ue=ce.forages;ce.db=ie;for(var de=0;de<ue.length;de++)ue[de]._dbInfo.db=ie;return ie});_.storeName?G=ee.then(function(ie){if(ie.objectStoreNames.contains(_.storeName)){var ce=ie.version+1;S(_);var ue=p[_.name],de=ue.forages;ie.close();for(var ve=0;ve<de.length;ve++){var Ae=de[ve];Ae._dbInfo.db=null,Ae._dbInfo.version=ce}var $e=new I(function(De,Me){var Qe=d.open(_.name,ce);Qe.onerror=function(gt){var Cr=Qe.result;Cr.close(),Me(gt)},Qe.onupgradeneeded=function(){var gt=Qe.result;gt.deleteObjectStore(_.storeName)},Qe.onsuccess=function(){var gt=Qe.result;gt.close(),De(gt)}});return $e.then(function(De){ue.db=De;for(var Me=0;Me<de.length;Me++){var Qe=de[Me];Qe._dbInfo.db=De,A(Qe._dbInfo)}}).catch(function(De){throw(N(_,De)||I.resolve()).catch(function(){}),De})}}):G=ee.then(function(ie){S(_);var ce=p[_.name],ue=ce.forages;ie.close();for(var de=0;de<ue.length;de++){var ve=ue[de];ve._dbInfo.db=null}var Ae=new I(function($e,De){var Me=d.deleteDatabase(_.name);Me.onerror=function(){var Qe=Me.result;Qe&&Qe.close(),De(Me.error)},Me.onblocked=function(){console.warn('dropInstance blocked for database "'+_.name+'" until all open connections are closed')},Me.onsuccess=function(){var Qe=Me.result;Qe&&Qe.close(),$e(Qe)}});return Ae.then(function($e){ce.db=$e;for(var De=0;De<ue.length;De++){var Me=ue[De];A(Me._dbInfo)}}).catch(function($e){throw(N(_,$e)||I.resolve()).catch(function(){}),$e})})}return v(G,$),G}var k={_driver:"asyncStorage",_initStorage:Se,_support:f(),iterate:Ne,getItem:le,setItem:pe,removeItem:tt,clear:ke,length:T,key:U,keys:O,dropInstance:g};function z(){return typeof openDatabase=="function"}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te="~~local_forage_type~",ge=/^~~local_forage_type~([^~]+)~/,me="__lfsc__:",Z=me.length,ye="arbf",xe="blob",Re="si08",Ie="ui08",Le="uic8",je="si16",ze="si32",Ge="ur16",Ke="ui32",qe="fl32",Ye="fl64",rt=Z+ye.length,nt=Object.prototype.toString;function yt(_){var $=_.length*.75,P=_.length,j,G=0,W,ee,ie,ce;_[_.length-1]==="="&&($--,_[_.length-2]==="="&&$--);var ue=new ArrayBuffer($),de=new Uint8Array(ue);for(j=0;j<P;j+=4)W=K.indexOf(_[j]),ee=K.indexOf(_[j+1]),ie=K.indexOf(_[j+2]),ce=K.indexOf(_[j+3]),de[G++]=W<<2|ee>>4,de[G++]=(ee&15)<<4|ie>>2,de[G++]=(ie&3)<<6|ce&63;return ue}function at(_){var $=new Uint8Array(_),P="",j;for(j=0;j<$.length;j+=3)P+=K[$[j]>>2],P+=K[($[j]&3)<<4|$[j+1]>>4],P+=K[($[j+1]&15)<<2|$[j+2]>>6],P+=K[$[j+2]&63];return $.length%3===2?P=P.substring(0,P.length-1)+"=":$.length%3===1&&(P=P.substring(0,P.length-2)+"=="),P}function xt(_,$){var P="";if(_&&(P=nt.call(_)),_&&(P==="[object ArrayBuffer]"||_.buffer&&nt.call(_.buffer)==="[object ArrayBuffer]")){var j,G=me;_ instanceof ArrayBuffer?(j=_,G+=ye):(j=_.buffer,P==="[object Int8Array]"?G+=Re:P==="[object Uint8Array]"?G+=Ie:P==="[object Uint8ClampedArray]"?G+=Le:P==="[object Int16Array]"?G+=je:P==="[object Uint16Array]"?G+=Ge:P==="[object Int32Array]"?G+=ze:P==="[object Uint32Array]"?G+=Ke:P==="[object Float32Array]"?G+=qe:P==="[object Float64Array]"?G+=Ye:$(new Error("Failed to get type for BinaryArray"))),$(G+at(j))}else if(P==="[object Blob]"){var W=new FileReader;W.onload=function(){var ee=te+_.type+"~"+at(this.result);$(me+xe+ee)},W.readAsArrayBuffer(_)}else try{$(JSON.stringify(_))}catch(ee){console.error("Couldn't convert value into a JSON string: ",_),$(null,ee)}}function It(_){if(_.substring(0,Z)!==me)return JSON.parse(_);var $=_.substring(rt),P=_.substring(Z,rt),j;if(P===xe&&ge.test($)){var G=$.match(ge);j=G[1],$=$.substring(G[0].length)}var W=yt($);switch(P){case ye:return W;case xe:return b([W],{type:j});case Re:return new Int8Array(W);case Ie:return new Uint8Array(W);case Le:return new Uint8ClampedArray(W);case je:return new Int16Array(W);case Ge:return new Uint16Array(W);case ze:return new Int32Array(W);case Ke:return new Uint32Array(W);case qe:return new Float32Array(W);case Ye:return new Float64Array(W);default:throw new Error("Unkown type: "+P)}}var mt={serialize:xt,deserialize:It,stringToBuffer:yt,bufferToString:at};function Ct(_,$,P,j){_.executeSql("CREATE TABLE IF NOT EXISTS "+$.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],P,j)}function _t(_){var $=this,P={db:null};if(_)for(var j in _)P[j]=typeof _[j]!="string"?_[j].toString():_[j];var G=new I(function(W,ee){try{P.db=openDatabase(P.name,String(P.version),P.description,P.size)}catch(ie){return ee(ie)}P.db.transaction(function(ie){Ct(ie,P,function(){$._dbInfo=P,W()},function(ce,ue){ee(ue)})},ee)});return P.serializer=mt,G}function ht(_,$,P,j,G,W){_.executeSql(P,j,G,function(ee,ie){ie.code===ie.SYNTAX_ERR?ee.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[$.storeName],function(ce,ue){ue.rows.length?W(ce,ie):Ct(ce,$,function(){ce.executeSql(P,j,G,W)},W)},W):W(ee,ie)},W)}function Ot(_,$){var P=this;_=y(_);var j=new I(function(G,W){P.ready().then(function(){var ee=P._dbInfo;ee.db.transaction(function(ie){ht(ie,ee,"SELECT * FROM "+ee.storeName+" WHERE key = ? LIMIT 1",[_],function(ce,ue){var de=ue.rows.length?ue.rows.item(0).value:null;de&&(de=ee.serializer.deserialize(de)),G(de)},function(ce,ue){W(ue)})})}).catch(W)});return v(j,$),j}function Rt(_,$){var P=this,j=new I(function(G,W){P.ready().then(function(){var ee=P._dbInfo;ee.db.transaction(function(ie){ht(ie,ee,"SELECT * FROM "+ee.storeName,[],function(ce,ue){for(var de=ue.rows,ve=de.length,Ae=0;Ae<ve;Ae++){var $e=de.item(Ae),De=$e.value;if(De&&(De=ee.serializer.deserialize(De)),De=_(De,$e.key,Ae+1),De!==void 0){G(De);return}}G()},function(ce,ue){W(ue)})})}).catch(W)});return v(j,$),j}function Qt(_,$,P,j){var G=this;_=y(_);var W=new I(function(ee,ie){G.ready().then(function(){$===void 0&&($=null);var ce=$,ue=G._dbInfo;ue.serializer.serialize($,function(de,ve){ve?ie(ve):ue.db.transaction(function(Ae){ht(Ae,ue,"INSERT OR REPLACE INTO "+ue.storeName+" (key, value) VALUES (?, ?)",[_,de],function(){ee(ce)},function($e,De){ie(De)})},function(Ae){if(Ae.code===Ae.QUOTA_ERR){if(j>0){ee(Qt.apply(G,[_,ce,P,j-1]));return}ie(Ae)}})})}).catch(ie)});return v(W,P),W}function pr(_,$,P){return Qt.apply(this,[_,$,P,1])}function it(_,$){var P=this;_=y(_);var j=new I(function(G,W){P.ready().then(function(){var ee=P._dbInfo;ee.db.transaction(function(ie){ht(ie,ee,"DELETE FROM "+ee.storeName+" WHERE key = ?",[_],function(){G()},function(ce,ue){W(ue)})})}).catch(W)});return v(j,$),j}function st(_){var $=this,P=new I(function(j,G){$.ready().then(function(){var W=$._dbInfo;W.db.transaction(function(ee){ht(ee,W,"DELETE FROM "+W.storeName,[],function(){j()},function(ie,ce){G(ce)})})}).catch(G)});return v(P,_),P}function ot(_){var $=this,P=new I(function(j,G){$.ready().then(function(){var W=$._dbInfo;W.db.transaction(function(ee){ht(ee,W,"SELECT COUNT(key) as c FROM "+W.storeName,[],function(ie,ce){var ue=ce.rows.item(0).c;j(ue)},function(ie,ce){G(ce)})})}).catch(G)});return v(P,_),P}function Xe(_,$){var P=this,j=new I(function(G,W){P.ready().then(function(){var ee=P._dbInfo;ee.db.transaction(function(ie){ht(ie,ee,"SELECT key FROM "+ee.storeName+" WHERE id = ? LIMIT 1",[_+1],function(ce,ue){var de=ue.rows.length?ue.rows.item(0).key:null;G(de)},function(ce,ue){W(ue)})})}).catch(W)});return v(j,$),j}function Je(_){var $=this,P=new I(function(j,G){$.ready().then(function(){var W=$._dbInfo;W.db.transaction(function(ee){ht(ee,W,"SELECT key FROM "+W.storeName,[],function(ie,ce){for(var ue=[],de=0;de<ce.rows.length;de++)ue.push(ce.rows.item(de).key);j(ue)},function(ie,ce){G(ce)})})}).catch(G)});return v(P,_),P}function He(_){return new I(function($,P){_.transaction(function(j){j.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(G,W){for(var ee=[],ie=0;ie<W.rows.length;ie++)ee.push(W.rows.item(ie).name);$({db:_,storeNames:ee})},function(G,W){P(W)})},function(j){P(j)})})}function ct(_,$){$=m.apply(this,arguments);var P=this.config();_=typeof _!="function"&&_||{},_.name||(_.name=_.name||P.name,_.storeName=_.storeName||P.storeName);var j=this,G;return _.name?G=new I(function(W){var ee;_.name===P.name?ee=j._dbInfo.db:ee=openDatabase(_.name,"","",0),_.storeName?W({db:ee,storeNames:[_.storeName]}):W(He(ee))}).then(function(W){return new I(function(ee,ie){W.db.transaction(function(ce){function ue($e){return new I(function(De,Me){ce.executeSql("DROP TABLE IF EXISTS "+$e,[],function(){De()},function(Qe,gt){Me(gt)})})}for(var de=[],ve=0,Ae=W.storeNames.length;ve<Ae;ve++)de.push(ue(W.storeNames[ve]));I.all(de).then(function(){ee()}).catch(function($e){ie($e)})},function(ce){ie(ce)})})}):G=I.reject("Invalid arguments"),v(G,$),G}var ut={_driver:"webSQLStorage",_initStorage:_t,_support:z(),iterate:Rt,getItem:Ot,setItem:pr,removeItem:it,clear:st,length:ot,key:Xe,keys:Je,dropInstance:ct};function lt(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ze(_,$){var P=_.name+"/";return _.storeName!==$.storeName&&(P+=_.storeName+"/"),P}function ft(){var _="_localforage_support_test";try{return localStorage.setItem(_,!0),localStorage.removeItem(_),!1}catch{return!0}}function Ve(){return!ft()||localStorage.length>0}function We(_){var $=this,P={};if(_)for(var j in _)P[j]=_[j];return P.keyPrefix=Ze(_,$._defaultConfig),Ve()?($._dbInfo=P,P.serializer=mt,I.resolve()):I.reject()}function et(_){var $=this,P=$.ready().then(function(){for(var j=$._dbInfo.keyPrefix,G=localStorage.length-1;G>=0;G--){var W=localStorage.key(G);W.indexOf(j)===0&&localStorage.removeItem(W)}});return v(P,_),P}function dt(_,$){var P=this;_=y(_);var j=P.ready().then(function(){var G=P._dbInfo,W=localStorage.getItem(G.keyPrefix+_);return W&&(W=G.serializer.deserialize(W)),W});return v(j,$),j}function pt(_,$){var P=this,j=P.ready().then(function(){for(var G=P._dbInfo,W=G.keyPrefix,ee=W.length,ie=localStorage.length,ce=1,ue=0;ue<ie;ue++){var de=localStorage.key(ue);if(de.indexOf(W)===0){var ve=localStorage.getItem(de);if(ve&&(ve=G.serializer.deserialize(ve)),ve=_(ve,de.substring(ee),ce++),ve!==void 0)return ve}}});return v(j,$),j}function mn(_,$){var P=this,j=P.ready().then(function(){var G=P._dbInfo,W;try{W=localStorage.key(_)}catch{W=null}return W&&(W=W.substring(G.keyPrefix.length)),W});return v(j,$),j}function Xt(_){var $=this,P=$.ready().then(function(){for(var j=$._dbInfo,G=localStorage.length,W=[],ee=0;ee<G;ee++){var ie=localStorage.key(ee);ie.indexOf(j.keyPrefix)===0&&W.push(ie.substring(j.keyPrefix.length))}return W});return v(P,_),P}function Cn(_){var $=this,P=$.keys().then(function(j){return j.length});return v(P,_),P}function Jt(_,$){var P=this;_=y(_);var j=P.ready().then(function(){var G=P._dbInfo;localStorage.removeItem(G.keyPrefix+_)});return v(j,$),j}function En(_,$,P){var j=this;_=y(_);var G=j.ready().then(function(){$===void 0&&($=null);var W=$;return new I(function(ee,ie){var ce=j._dbInfo;ce.serializer.serialize($,function(ue,de){if(de)ie(de);else try{localStorage.setItem(ce.keyPrefix+_,ue),ee(W)}catch(ve){(ve.name==="QuotaExceededError"||ve.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ie(ve),ie(ve)}})})});return v(G,P),G}function Sn(_,$){if($=m.apply(this,arguments),_=typeof _!="function"&&_||{},!_.name){var P=this.config();_.name=_.name||P.name,_.storeName=_.storeName||P.storeName}var j=this,G;return _.name?G=new I(function(W){_.storeName?W(Ze(_,j._defaultConfig)):W(_.name+"/")}).then(function(W){for(var ee=localStorage.length-1;ee>=0;ee--){var ie=localStorage.key(ee);ie.indexOf(W)===0&&localStorage.removeItem(ie)}}):G=I.reject("Invalid arguments"),v(G,$),G}var xn={_driver:"localStorageWrapper",_initStorage:We,_support:lt(),iterate:pt,getItem:dt,setItem:En,removeItem:Jt,clear:et,length:Cn,key:mn,keys:Xt,dropInstance:Sn},Zt=function($,P){return $===P||typeof $=="number"&&typeof P=="number"&&isNaN($)&&isNaN(P)},bn=function($,P){for(var j=$.length,G=0;G<j;){if(Zt($[G],P))return!0;G++}return!1},qr=Array.isArray||function(_){return Object.prototype.toString.call(_)==="[object Array]"},sr={},jr={},er={INDEXEDDB:k,WEBSQL:ut,LOCALSTORAGE:xn},wt=[er.INDEXEDDB._driver,er.WEBSQL._driver,er.LOCALSTORAGE._driver],or=["dropInstance"],tr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(or),Tn={description:"",driver:wt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function mr(_,$){_[$]=function(){var P=arguments;return _.ready().then(function(){return _[$].apply(_,P)})}}function R(){for(var _=1;_<arguments.length;_++){var $=arguments[_];if($)for(var P in $)$.hasOwnProperty(P)&&(qr($[P])?arguments[0][P]=$[P].slice():arguments[0][P]=$[P])}return arguments[0]}var L=(function(){function _($){c(this,_);for(var P in er)if(er.hasOwnProperty(P)){var j=er[P],G=j._driver;this[P]=G,sr[G]||this.defineDriver(j)}this._defaultConfig=R({},Tn),this._config=R({},this._defaultConfig,$),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return _.prototype.config=function(P){if((typeof P>"u"?"undefined":s(P))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var j in P){if(j==="storeName"&&(P[j]=P[j].replace(/\W/g,"_")),j==="version"&&typeof P[j]!="number")return new Error("Database version must be a number.");this._config[j]=P[j]}return"driver"in P&&P.driver?this.setDriver(this._config.driver):!0}else return typeof P=="string"?this._config[P]:this._config},_.prototype.defineDriver=function(P,j,G){var W=new I(function(ee,ie){try{var ce=P._driver,ue=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!P._driver){ie(ue);return}for(var de=tr.concat("_initStorage"),ve=0,Ae=de.length;ve<Ae;ve++){var $e=de[ve],De=!bn(or,$e);if((De||P[$e])&&typeof P[$e]!="function"){ie(ue);return}}var Me=function(){for(var Cr=function(ja){return function(){var ea=new Error("Method "+ja+" is not implemented by the current driver"),rr=I.reject(ea);return v(rr,arguments[arguments.length-1]),rr}},In=0,qa=or.length;In<qa;In++){var An=or[In];P[An]||(P[An]=Cr(An))}};Me();var Qe=function(Cr){sr[ce]&&console.info("Redefining LocalForage driver: "+ce),sr[ce]=P,jr[ce]=Cr,ee()};"_support"in P?P._support&&typeof P._support=="function"?P._support().then(Qe,ie):Qe(!!P._support):Qe(!0)}catch(gt){ie(gt)}});return h(W,j,G),W},_.prototype.driver=function(){return this._driver||null},_.prototype.getDriver=function(P,j,G){var W=sr[P]?I.resolve(sr[P]):I.reject(new Error("Driver not found."));return h(W,j,G),W},_.prototype.getSerializer=function(P){var j=I.resolve(mt);return h(j,P),j},_.prototype.ready=function(P){var j=this,G=j._driverSet.then(function(){return j._ready===null&&(j._ready=j._initDriver()),j._ready});return h(G,P,P),G},_.prototype.setDriver=function(P,j,G){var W=this;qr(P)||(P=[P]);var ee=this._getSupportedDrivers(P);function ie(){W._config.driver=W.driver()}function ce(ve){return W._extend(ve),ie(),W._ready=W._initStorage(W._config),W._ready}function ue(ve){return function(){var Ae=0;function $e(){for(;Ae<ve.length;){var De=ve[Ae];return Ae++,W._dbInfo=null,W._ready=null,W.getDriver(De).then(ce).catch($e)}ie();var Me=new Error("No available storage method found.");return W._driverSet=I.reject(Me),W._driverSet}return $e()}}var de=this._driverSet!==null?this._driverSet.catch(function(){return I.resolve()}):I.resolve();return this._driverSet=de.then(function(){var ve=ee[0];return W._dbInfo=null,W._ready=null,W.getDriver(ve).then(function(Ae){W._driver=Ae._driver,ie(),W._wrapLibraryMethodsWithReady(),W._initDriver=ue(ee)})}).catch(function(){ie();var ve=new Error("No available storage method found.");return W._driverSet=I.reject(ve),W._driverSet}),h(this._driverSet,j,G),this._driverSet},_.prototype.supports=function(P){return!!jr[P]},_.prototype._extend=function(P){R(this,P)},_.prototype._getSupportedDrivers=function(P){for(var j=[],G=0,W=P.length;G<W;G++){var ee=P[G];this.supports(ee)&&j.push(ee)}return j},_.prototype._wrapLibraryMethodsWithReady=function(){for(var P=0,j=tr.length;P<j;P++)mr(this,tr[P])},_.prototype.createInstance=function(P){return new _(P)},_})(),M=new L;a.exports=M},{3:3}]},{},[4])(4)})})(ri)),ri.exports}var Sc;function lh(){if(Sc)return Ft;Sc=1;const t=uh().createInstance({name:"NeDB",storeName:"nedbdata"}),r=async v=>{try{return await t.getItem(v)!==null}catch{return!1}},a=async(v,h)=>{try{const y=await t.getItem(v);y===null?await t.removeItem(h):(await t.setItem(h,y),await t.removeItem(v))}catch{console.warn("An error happened while renaming, skip")}},i=async(v,h,y)=>{try{await t.setItem(v,h)}catch{console.warn("An error happened while writing, skip")}},s=async(v,h,y)=>{try{const m=await t.getItem(v)||"";await t.setItem(v,m+h)}catch{console.warn("An error happened appending to file writing, skip")}},c=async(v,h)=>{try{return await t.getItem(v)||""}catch{return console.warn("An error happened while reading, skip"),""}},n=async v=>{try{await t.removeItem(v)}catch{console.warn("An error happened while unlinking, skip")}},d=(v,h)=>Promise.resolve(),f=async(v,h)=>Promise.resolve(),b=v=>Promise.resolve(),I=async(v,h)=>{h.push(""),await i(v,h.join(`
`))};return Ft.existsAsync=r,Ft.renameAsync=a,Ft.writeFileAsync=i,Ft.crashSafeWriteFileLinesAsync=I,Ft.appendFileAsync=s,Ft.readFileAsync=c,Ft.unlinkAsync=n,Ft.mkdirAsync=d,Ft.ensureDatafileIntegrityAsync=b,Ft.ensureParentDirectoryExistsAsync=f,Ft}var ni,xc;function fh(){if(xc)return ni;xc=1;const{deprecate:e}=require("util"),t=ch(),r=Kl(),a=Aa(),i=lh(),s=Fl(),c=493,n=420;class d{constructor(b){if(this.db=b.db,this.inMemoryOnly=this.db.inMemoryOnly,this.filename=this.db.filename,this.corruptAlertThreshold=b.corruptAlertThreshold!==void 0?b.corruptAlertThreshold:.1,this.modes=b.modes!==void 0?b.modes:{fileMode:n,dirMode:c},this.modes.fileMode===void 0&&(this.modes.fileMode=n),this.modes.dirMode===void 0&&(this.modes.dirMode=c),!this.inMemoryOnly&&this.filename&&this.filename.charAt(this.filename.length-1)==="~")throw new Error("The datafile name can't end with a ~, which is reserved for crash safe backup files");if(b.afterSerialization&&!b.beforeDeserialization)throw new Error("Serialization hook defined but deserialization hook undefined, cautiously refusing to start NeDB to prevent dataloss");if(!b.afterSerialization&&b.beforeDeserialization)throw new Error("Serialization hook undefined but deserialization hook defined, cautiously refusing to start NeDB to prevent dataloss");this.afterSerialization=async I=>(b.afterSerialization||(v=>v))(I),this.beforeDeserialization=async I=>(b.beforeDeserialization||(v=>v))(I)}async persistCachedDatabaseAsync(){const b=[];if(!this.inMemoryOnly){for(const I of this.db.getAllData())b.push(await this.afterSerialization(a.serialize(I)));for(const I of Object.keys(this.db.indexes))I!=="_id"&&b.push(await this.afterSerialization(a.serialize({$$indexCreated:{fieldName:this.db.indexes[I].fieldName,unique:this.db.indexes[I].unique,sparse:this.db.indexes[I].sparse}})));await i.crashSafeWriteFileLinesAsync(this.filename,b,this.modes),this.db.emit("compaction.done")}}compactDatafile(b){e(I=>this.db.compactDatafile(I),"@seald-io/nedb: calling Datastore#persistence#compactDatafile is deprecated, please use Datastore#compactDatafile, it will be removed in the next major version.")(b)}setAutocompactionInterval(b){e(I=>this.db.setAutocompactionInterval(I),"@seald-io/nedb: calling Datastore#persistence#setAutocompactionInterval is deprecated, please use Datastore#setAutocompactionInterval, it will be removed in the next major version.")(b)}stopAutocompaction(){e(()=>this.db.stopAutocompaction(),"@seald-io/nedb: calling Datastore#persistence#stopAutocompaction is deprecated, please use Datastore#stopAutocompaction, it will be removed in the next major version.")()}async persistNewStateAsync(b){let I="";if(!this.inMemoryOnly){for(const v of b)I+=await this.afterSerialization(a.serialize(v))+`
`;I.length!==0&&await i.appendFileAsync(this.filename,I,{encoding:"utf8",mode:this.modes.fileMode})}}async treatRawData(b){const I=b.split(`
`).filter(u=>u!=="").map(async u=>a.deserialize(await this.beforeDeserialization(u))),v={},h={},y=I.length;let m=0;for(const u of I)try{const p=await u;p._id?p.$$deleted===!0?delete v[p._id]:v[p._id]=p:p.$$indexCreated&&p.$$indexCreated.fieldName!=null?h[p.$$indexCreated.fieldName]=p.$$indexCreated:typeof p.$$indexRemoved=="string"&&delete h[p.$$indexRemoved]}catch{m+=1}if(y>0){const u=m/y;if(u>this.corruptAlertThreshold){const p=new Error(`${Math.floor(100*u)}% of the data file is corrupt, more than given corruptAlertThreshold (${Math.floor(100*this.corruptAlertThreshold)}%). Cautiously refusing to start NeDB to prevent dataloss.`);throw p.corruptionRate=u,p.corruptItems=m,p.dataLength=y,p}}return{data:Object.values(v),indexes:h}}treatRawStreamAsync(b){return new Promise((I,v)=>{const h={},y={};let m=0;const E=t(b);let u=0;const p=new s;E.on("data",x=>{const w=this.beforeDeserialization(x);return p.waterfall(async()=>{if(x!==""){try{const B=a.deserialize(await w);B._id?B.$$deleted===!0?delete h[B._id]:h[B._id]=B:B.$$indexCreated&&B.$$indexCreated.fieldName!=null?y[B.$$indexCreated.fieldName]=B.$$indexCreated:typeof B.$$indexRemoved=="string"&&delete y[B.$$indexRemoved]}catch{m+=1}u++}})()}),E.on("end",async()=>{if(await p.guardian,u>0){const w=m/u;if(w>this.corruptAlertThreshold){const B=new Error(`${Math.floor(100*w)}% of the data file is corrupt, more than given corruptAlertThreshold (${Math.floor(100*this.corruptAlertThreshold)}%). Cautiously refusing to start NeDB to prevent dataloss.`);B.corruptionRate=w,B.corruptItems=m,B.dataLength=u,v(B,null);return}}const x=Object.values(h);I({data:x,indexes:y})}),E.on("error",function(x){v(x,null)})})}async loadDatabaseAsync(){if(this.db._resetIndexes(),this.inMemoryOnly)return;await d.ensureParentDirectoryExistsAsync(this.filename,this.modes.dirMode),await i.ensureDatafileIntegrityAsync(this.filename,this.modes.fileMode);let b;if(i.readFileStream){const I=i.readFileStream(this.filename,{encoding:"utf8",mode:this.modes.fileMode});b=await this.treatRawStreamAsync(I)}else{const I=await i.readFileAsync(this.filename,{encoding:"utf8",mode:this.modes.fileMode});b=await this.treatRawData(I)}Object.keys(b.indexes).forEach(I=>{this.db.indexes[I]=new r(b.indexes[I])});try{this.db._resetIndexes(b.data)}catch(I){throw this.db._resetIndexes(),I}await this.db.persistence.persistCachedDatabaseAsync(),this.db.executor.processBuffer()}async dropDatabaseAsync(){this.db.stopAutocompaction(),this.db.executor.ready=!1,this.db.executor.resetBuffer(),await this.db.executor.queue.guardian,this.db.indexes={},this.db.indexes._id=new r({fieldName:"_id",unique:!0}),this.db.ttlIndexes={},this.db.inMemoryOnly||await this.db.executor.pushAsync(async()=>{await i.existsAsync(this.filename)&&await i.unlinkAsync(this.filename)},!0)}static async ensureParentDirectoryExistsAsync(b,I=c){return i.ensureParentDirectoryExistsAsync(b,I)}}return ni=d,ni}var ai,bc;function dh(){if(bc)return ai;bc=1;const{EventEmitter:e}=require("events"),{callbackify:t,deprecate:r}=require("util"),a=nh(),i=ah(),s=ih(),c=Kl(),n=Aa(),d=fh(),{isDate:f,pick:b,filterIndexNames:I}=fo();class v extends e{constructor(y){super();let m;typeof y=="string"?r(()=>{m=y,this.inMemoryOnly=!1},"@seald-io/nedb: Giving a string to the Datastore constructor is deprecated and will be removed in the next major version. Please use an options object with an argument 'filename'.")():(y=y||{},m=y.filename,this.inMemoryOnly=y.inMemoryOnly||!1,this.autoload=y.autoload||!1,this.timestampData=y.timestampData||!1),!m||typeof m!="string"||m.length===0?(this.filename=null,this.inMemoryOnly=!0):this.filename=m,this.compareStrings=y.compareStrings,this.persistence=new d({db:this,afterSerialization:y.afterSerialization,beforeDeserialization:y.beforeDeserialization,corruptAlertThreshold:y.corruptAlertThreshold,modes:y.modes,testSerializationHooks:y.testSerializationHooks}),this.executor=new s,this.inMemoryOnly&&(this.executor.ready=!0),this.indexes={},this.indexes._id=new c({fieldName:"_id",unique:!0}),this.ttlIndexes={},this.autoload?(this.autoloadPromise=this.loadDatabaseAsync(),this.autoloadPromise.then(()=>{y.onload&&y.onload()},E=>{if(y.onload)y.onload(E);else throw E})):this.autoloadPromise=null,this._autocompactionIntervalId=null}compactDatafileAsync(){return this.executor.pushAsync(()=>this.persistence.persistCachedDatabaseAsync())}compactDatafile(y){const m=this.compactDatafileAsync();typeof y=="function"&&t(()=>m)(y)}setAutocompactionInterval(y){if(Number.isNaN(Number(y)))throw new Error("Interval must be a non-NaN number");const E=Math.max(Number(y),5e3);this.stopAutocompaction(),this._autocompactionIntervalId=setInterval(()=>{this.compactDatafile()},E)}stopAutocompaction(){this._autocompactionIntervalId&&(clearInterval(this._autocompactionIntervalId),this._autocompactionIntervalId=null)}loadDatabase(y){const m=this.loadDatabaseAsync();typeof y=="function"&&t(()=>m)(y)}dropDatabaseAsync(){return this.persistence.dropDatabaseAsync()}dropDatabase(y){const m=this.dropDatabaseAsync();typeof y=="function"&&t(()=>m)(y)}loadDatabaseAsync(){return this.executor.pushAsync(()=>this.persistence.loadDatabaseAsync(),!0)}getAllData(){return this.indexes._id.getAll()}_resetIndexes(y){for(const m of Object.values(this.indexes))m.reset(y)}ensureIndex(y={},m){const E=this.ensureIndexAsync(y);typeof m=="function"&&t(()=>E)(m)}async ensureIndexAsync(y={}){if(!y.fieldName){const u=new Error("Cannot create an index without a fieldName");throw u.missingFieldName=!0,u}const m=[].concat(y.fieldName).sort();if(m.some(u=>u.includes(",")))throw new Error("Cannot use comma in index fieldName");const E={...y,fieldName:m.join(",")};if(!this.indexes[E.fieldName]){this.indexes[E.fieldName]=new c(E),y.expireAfterSeconds!==void 0&&(this.ttlIndexes[E.fieldName]=E.expireAfterSeconds);try{this.indexes[E.fieldName].insert(this.getAllData())}catch(u){throw delete this.indexes[E.fieldName],u}await this.executor.pushAsync(()=>this.persistence.persistNewStateAsync([{$$indexCreated:E}]),!0)}}removeIndex(y,m=()=>{}){const E=this.removeIndexAsync(y);t(()=>E)(m)}async removeIndexAsync(y){delete this.indexes[y],await this.executor.pushAsync(()=>this.persistence.persistNewStateAsync([{$$indexRemoved:y}]),!0)}_addToIndexes(y){let m,E;const u=Object.keys(this.indexes);for(let p=0;p<u.length;p+=1)try{this.indexes[u[p]].insert(y)}catch(x){m=p,E=x;break}if(E){for(let p=0;p<m;p+=1)this.indexes[u[p]].remove(y);throw E}}_removeFromIndexes(y){for(const m of Object.values(this.indexes))m.remove(y)}_updateIndexes(y,m){let E,u;const p=Object.keys(this.indexes);for(let x=0;x<p.length;x+=1)try{this.indexes[p[x]].update(y,m)}catch(w){E=x,u=w;break}if(u){for(let x=0;x<E;x+=1)this.indexes[p[x]].revertUpdate(y,m);throw u}}_getRawCandidates(y){const m=Object.keys(this.indexes);let E;if(E=Object.entries(y).filter(I(m)).pop(),E)return this.indexes[E[0]].getMatching(E[1]);const u=m.filter(p=>p.indexOf(",")!==-1).map(p=>p.split(",")).filter(p=>Object.entries(y).filter(I(p)).length===p.length);return u.length>0?this.indexes[u[0]].getMatching(b(y,u[0])):(E=Object.entries(y).filter(([p,x])=>!!(y[p]&&Object.prototype.hasOwnProperty.call(y[p],"$in"))&&m.includes(p)).pop(),E?this.indexes[E[0]].getMatching(E[1].$in):(E=Object.entries(y).filter(([p,x])=>!!(y[p]&&(Object.prototype.hasOwnProperty.call(y[p],"$lt")||Object.prototype.hasOwnProperty.call(y[p],"$lte")||Object.prototype.hasOwnProperty.call(y[p],"$gt")||Object.prototype.hasOwnProperty.call(y[p],"$gte")))&&m.includes(p)).pop(),E?this.indexes[E[0]].getBetweenBounds(E[1]):this.getAllData()))}async _getCandidatesAsync(y,m=!1){const E=[],u=this._getRawCandidates(y);if(m)E.push(...u);else{const p=[],x=Object.keys(this.ttlIndexes);u.forEach(w=>{x.every(B=>!(w[B]!==void 0&&f(w[B])&&Date.now()>w[B].getTime()+this.ttlIndexes[B]*1e3))?E.push(w):p.push(w._id)});for(const w of p)await this._removeAsync({_id:w},{})}return E}async _insertAsync(y){const m=this._prepareDocumentForInsertion(y);return this._insertInCache(m),await this.persistence.persistNewStateAsync(Array.isArray(m)?m:[m]),n.deepCopy(m)}_createNewId(){let y=i.uid(16);return this.indexes._id.getMatching(y).length>0&&(y=this._createNewId()),y}_prepareDocumentForInsertion(y){let m;if(Array.isArray(y))m=[],y.forEach(E=>{m.push(this._prepareDocumentForInsertion(E))});else{m=n.deepCopy(y),m._id===void 0&&(m._id=this._createNewId());const E=new Date;this.timestampData&&m.createdAt===void 0&&(m.createdAt=E),this.timestampData&&m.updatedAt===void 0&&(m.updatedAt=E),n.checkObject(m)}return m}_insertInCache(y){Array.isArray(y)?this._insertMultipleDocsInCache(y):this._addToIndexes(y)}_insertMultipleDocsInCache(y){let m,E;for(let u=0;u<y.length;u+=1)try{this._addToIndexes(y[u])}catch(p){E=p,m=u;break}if(E){for(let u=0;u<m;u+=1)this._removeFromIndexes(y[u]);throw E}}insert(y,m){const E=this.insertAsync(y);typeof m=="function"&&t(()=>E)(m)}insertAsync(y){return this.executor.pushAsync(()=>this._insertAsync(y))}count(y,m){const E=this.countAsync(y);if(typeof m=="function")t(E.execAsync.bind(E))(m);else return E}countAsync(y){return new a(this,y,m=>m.length)}find(y,m,E){arguments.length===1?m={}:arguments.length===2&&typeof m=="function"&&(E=m,m={});const u=this.findAsync(y,m);if(typeof E=="function")t(u.execAsync.bind(u))(E);else return u}findAsync(y,m={}){const E=new a(this,y,u=>u.map(p=>n.deepCopy(p)));return E.projection(m),E}findOne(y,m,E){arguments.length===1?m={}:arguments.length===2&&typeof m=="function"&&(E=m,m={});const u=this.findOneAsync(y,m);if(typeof E=="function")t(u.execAsync.bind(u))(E);else return u}findOneAsync(y,m={}){const E=new a(this,y,u=>u.length===1?n.deepCopy(u[0]):null);return E.projection(m).limit(1),E}async _updateAsync(y,m,E){const u=E.multi!==void 0?E.multi:!1;if((E.upsert!==void 0?E.upsert:!1)&&(await new a(this,y).limit(1)._execAsync()).length!==1){let N;try{n.checkObject(m),N=m}catch{N=n.modify(n.deepCopy(y,!0),m)}return{numAffected:1,affectedDocuments:await this._insertAsync(N),upsert:!0}}let x=0,w;const B=[];let C;const l=await this._getCandidatesAsync(y);for(const S of l)n.match(S,y)&&(u||x===0)&&(x+=1,this.timestampData&&(C=S.createdAt),w=n.modify(S,m),this.timestampData&&(w.createdAt=C,w.updatedAt=new Date),B.push({oldDoc:S,newDoc:w}));this._updateIndexes(B);const o=B.map(S=>S.newDoc);if(await this.persistence.persistNewStateAsync(o),E.returnUpdatedDocs){let S=[];return o.forEach(A=>{S.push(n.deepCopy(A))}),u||(S=S[0]),{numAffected:x,affectedDocuments:S,upsert:!1}}else return{numAffected:x,upsert:!1,affectedDocuments:null}}update(y,m,E,u){typeof E=="function"&&(u=E,E={});const p=(x,w={})=>{u&&u(x,w.numAffected,w.affectedDocuments,w.upsert)};t((x,w,B)=>this.updateAsync(x,w,B))(y,m,E,p)}updateAsync(y,m,E={}){return this.executor.pushAsync(()=>this._updateAsync(y,m,E))}async _removeAsync(y,m={}){const E=m.multi!==void 0?m.multi:!1,u=await this._getCandidatesAsync(y,!0),p=[];let x=0;return u.forEach(w=>{n.match(w,y)&&(E||x===0)&&(x+=1,p.push({$$deleted:!0,_id:w._id}),this._removeFromIndexes(w))}),await this.persistence.persistNewStateAsync(p),x}remove(y,m,E){typeof m=="function"&&(E=m,m={});const u=E||(()=>{});t((p,x)=>this.removeAsync(p,x))(y,m,u)}removeAsync(y,m={}){return this.executor.pushAsync(()=>this._removeAsync(y,m))}}return ai=v,ai}var ii,Tc;function ph(){return Tc||(Tc=1,ii=dh()),ii}var hh=ph();const Oe=Un(hh),Ut=require("electron");Ut.clipboard;Ut.contextBridge;Ut.crashReporter;Ut.ipcRenderer;Ut.nativeImage;Ut.shell;Ut.webFrame;Ut.deprecate;const Ee=require("node:crypto");Ee.checkPrime;Ee.checkPrimeSync;Ee.createCipheriv;Ee.createDecipheriv;Ee.createDiffieHellman;Ee.createDiffieHellmanGroup;Ee.createECDH;const yh=Ee.createHash;Ee.createHmac;Ee.createPrivateKey;Ee.createPublicKey;Ee.createSecretKey;Ee.createSign;Ee.createVerify;Ee.diffieHellman;Ee.generatePrime;Ee.generatePrimeSync;Ee.getCiphers;Ee.getCipherInfo;Ee.getCurves;Ee.getDiffieHellman;Ee.getHashes;Ee.hkdf;Ee.hkdfSync;Ee.pbkdf2;Ee.pbkdf2Sync;Ee.generateKeyPair;Ee.generateKeyPairSync;Ee.generateKey;Ee.generateKeySync;Ee.privateDecrypt;Ee.privateEncrypt;Ee.publicDecrypt;Ee.publicEncrypt;Ee.randomBytes;Ee.randomFill;Ee.randomFillSync;Ee.randomInt;Ee.randomUUID;Ee.scrypt;Ee.scryptSync;Ee.sign;Ee.setEngine;Ee.timingSafeEqual;Ee.getFips;Ee.setFips;Ee.verify;Ee.hash;Ee.Certificate;Ee.Cipher;Ee.Cipheriv;Ee.Decipher;Ee.Decipheriv;Ee.DiffieHellman;Ee.DiffieHellmanGroup;Ee.ECDH;Ee.Hash;Ee.Hmac;Ee.KeyObject;Ee.Sign;Ee.Verify;Ee.X509Certificate;Ee.secureHeapUsed;Ee.constants;Ee.webcrypto;Ee.subtle;Ee.getRandomValues;var Hr={},zr={},Nn={exports:{}};Nn.exports;var Ic;function gh(){return Ic||(Ic=1,(function(e,t){var r=200,a="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",c="[object Array]",n="[object Boolean]",d="[object Date]",f="[object Error]",b="[object Function]",I="[object GeneratorFunction]",v="[object Map]",h="[object Number]",y="[object Object]",m="[object Promise]",E="[object RegExp]",u="[object Set]",p="[object String]",x="[object Symbol]",w="[object WeakMap]",B="[object ArrayBuffer]",C="[object DataView]",l="[object Float32Array]",o="[object Float64Array]",S="[object Int8Array]",A="[object Int16Array]",N="[object Int32Array]",D="[object Uint8Array]",q="[object Uint8ClampedArray]",H="[object Uint16Array]",Y="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,J=/\w*$/,ne=/^\[object .+?Constructor\]$/,se=/^(?:0|[1-9]\d*)$/,fe={};fe[s]=fe[c]=fe[B]=fe[C]=fe[n]=fe[d]=fe[l]=fe[o]=fe[S]=fe[A]=fe[N]=fe[v]=fe[h]=fe[y]=fe[E]=fe[u]=fe[p]=fe[x]=fe[D]=fe[q]=fe[H]=fe[Y]=!0,fe[f]=fe[b]=fe[w]=!1;var he=typeof ur=="object"&&ur&&ur.Object===Object&&ur,we=typeof self=="object"&&self&&self.Object===Object&&self,Se=he||we||Function("return this")(),le=t&&!t.nodeType&&t,Ne=le&&!0&&e&&!e.nodeType&&e,pe=Ne&&Ne.exports===le;function tt(V,X){return V.set(X[0],X[1]),V}function ke(V,X){return V.add(X),V}function T(V,X){for(var oe=-1,be=V?V.length:0;++oe<be&&X(V[oe],oe,V)!==!1;);return V}function U(V,X){for(var oe=-1,be=X.length,bt=V.length;++oe<be;)V[bt+oe]=X[oe];return V}function O(V,X,oe,be){for(var bt=-1,kt=V?V.length:0;++bt<kt;)oe=X(oe,V[bt],bt,V);return oe}function g(V,X){for(var oe=-1,be=Array(V);++oe<V;)be[oe]=X(oe);return be}function k(V,X){return V?.[X]}function z(V){var X=!1;if(V!=null&&typeof V.toString!="function")try{X=!!(V+"")}catch{}return X}function K(V){var X=-1,oe=Array(V.size);return V.forEach(function(be,bt){oe[++X]=[bt,be]}),oe}function te(V,X){return function(oe){return V(X(oe))}}function ge(V){var X=-1,oe=Array(V.size);return V.forEach(function(be){oe[++X]=be}),oe}var me=Array.prototype,Z=Function.prototype,ye=Object.prototype,xe=Se["__core-js_shared__"],Re=(function(){var V=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""})(),Ie=Z.toString,Le=ye.hasOwnProperty,je=ye.toString,ze=RegExp("^"+Ie.call(Le).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=pe?Se.Buffer:void 0,Ke=Se.Symbol,qe=Se.Uint8Array,Ye=te(Object.getPrototypeOf,Object),rt=Object.create,nt=ye.propertyIsEnumerable,yt=me.splice,at=Object.getOwnPropertySymbols,xt=Ge?Ge.isBuffer:void 0,It=te(Object.keys,Object),mt=Me(Se,"DataView"),Ct=Me(Se,"Map"),_t=Me(Se,"Promise"),ht=Me(Se,"Set"),Ot=Me(Se,"WeakMap"),Rt=Me(Object,"create"),Qt=rr(mt),pr=rr(Ct),it=rr(_t),st=rr(ht),ot=rr(Ot),Xe=Ke?Ke.prototype:void 0,Je=Xe?Xe.valueOf:void 0;function He(V){var X=-1,oe=V?V.length:0;for(this.clear();++X<oe;){var be=V[X];this.set(be[0],be[1])}}function ct(){this.__data__=Rt?Rt(null):{}}function ut(V){return this.has(V)&&delete this.__data__[V]}function lt(V){var X=this.__data__;if(Rt){var oe=X[V];return oe===a?void 0:oe}return Le.call(X,V)?X[V]:void 0}function Ze(V){var X=this.__data__;return Rt?X[V]!==void 0:Le.call(X,V)}function ft(V,X){var oe=this.__data__;return oe[V]=Rt&&X===void 0?a:X,this}He.prototype.clear=ct,He.prototype.delete=ut,He.prototype.get=lt,He.prototype.has=Ze,He.prototype.set=ft;function Ve(V){var X=-1,oe=V?V.length:0;for(this.clear();++X<oe;){var be=V[X];this.set(be[0],be[1])}}function We(){this.__data__=[]}function et(V){var X=this.__data__,oe=tr(X,V);if(oe<0)return!1;var be=X.length-1;return oe==be?X.pop():yt.call(X,oe,1),!0}function dt(V){var X=this.__data__,oe=tr(X,V);return oe<0?void 0:X[oe][1]}function pt(V){return tr(this.__data__,V)>-1}function mn(V,X){var oe=this.__data__,be=tr(oe,V);return be<0?oe.push([V,X]):oe[be][1]=X,this}Ve.prototype.clear=We,Ve.prototype.delete=et,Ve.prototype.get=dt,Ve.prototype.has=pt,Ve.prototype.set=mn;function Xt(V){var X=-1,oe=V?V.length:0;for(this.clear();++X<oe;){var be=V[X];this.set(be[0],be[1])}}function Cn(){this.__data__={hash:new He,map:new(Ct||Ve),string:new He}}function Jt(V){return De(this,V).delete(V)}function En(V){return De(this,V).get(V)}function Sn(V){return De(this,V).has(V)}function xn(V,X){return De(this,V).set(V,X),this}Xt.prototype.clear=Cn,Xt.prototype.delete=Jt,Xt.prototype.get=En,Xt.prototype.has=Sn,Xt.prototype.set=xn;function Zt(V){this.__data__=new Ve(V)}function bn(){this.__data__=new Ve}function qr(V){return this.__data__.delete(V)}function sr(V){return this.__data__.get(V)}function jr(V){return this.__data__.has(V)}function er(V,X){var oe=this.__data__;if(oe instanceof Ve){var be=oe.__data__;if(!Ct||be.length<r-1)return be.push([V,X]),this;oe=this.__data__=new Xt(be)}return oe.set(V,X),this}Zt.prototype.clear=bn,Zt.prototype.delete=qr,Zt.prototype.get=sr,Zt.prototype.has=jr,Zt.prototype.set=er;function wt(V,X){var oe=Ga(V)||ep(V)?g(V.length,String):[],be=oe.length,bt=!!be;for(var kt in V)Le.call(V,kt)&&!(bt&&(kt=="length"||An(kt,be)))&&oe.push(kt);return oe}function or(V,X,oe){var be=V[X];(!(Le.call(V,X)&&Zo(be,oe))||oe===void 0&&!(X in V))&&(V[X]=oe)}function tr(V,X){for(var oe=V.length;oe--;)if(Zo(V[oe][0],X))return oe;return-1}function Tn(V,X){return V&&ve(X,Ha(X),V)}function mr(V,X,oe,be,bt,kt,cr){var Dt;if(be&&(Dt=kt?be(V,bt,kt,cr):be(V)),Dt!==void 0)return Dt;if(!ta(V))return V;var rc=Ga(V);if(rc){if(Dt=Cr(V),!X)return de(V,Dt)}else{var Gr=gt(V),nc=Gr==b||Gr==I;if(rp(V))return P(V,X);if(Gr==y||Gr==s||nc&&!kt){if(z(V))return kt?V:{};if(Dt=In(nc?{}:V),!X)return Ae(V,Tn(Dt,V))}else{if(!fe[Gr])return kt?V:{};Dt=qa(V,Gr,mr,X)}}cr||(cr=new Zt);var ac=cr.get(V);if(ac)return ac;if(cr.set(V,Dt),!rc)var ic=oe?$e(V):Ha(V);return T(ic||V,function(za,ra){ic&&(ra=za,za=V[ra]),or(Dt,ra,mr(za,X,oe,be,ra,V,cr))}),Dt}function R(V){return ta(V)?rt(V):{}}function L(V,X,oe){var be=X(V);return Ga(V)?be:U(be,oe(V))}function M(V){return je.call(V)}function _(V){if(!ta(V)||ja(V))return!1;var X=tc(V)||z(V)?ze:ne;return X.test(rr(V))}function $(V){if(!ea(V))return It(V);var X=[];for(var oe in Object(V))Le.call(V,oe)&&oe!="constructor"&&X.push(oe);return X}function P(V,X){if(X)return V.slice();var oe=new V.constructor(V.length);return V.copy(oe),oe}function j(V){var X=new V.constructor(V.byteLength);return new qe(X).set(new qe(V)),X}function G(V,X){var oe=X?j(V.buffer):V.buffer;return new V.constructor(oe,V.byteOffset,V.byteLength)}function W(V,X,oe){var be=X?oe(K(V),!0):K(V);return O(be,tt,new V.constructor)}function ee(V){var X=new V.constructor(V.source,J.exec(V));return X.lastIndex=V.lastIndex,X}function ie(V,X,oe){var be=X?oe(ge(V),!0):ge(V);return O(be,ke,new V.constructor)}function ce(V){return Je?Object(Je.call(V)):{}}function ue(V,X){var oe=X?j(V.buffer):V.buffer;return new V.constructor(oe,V.byteOffset,V.length)}function de(V,X){var oe=-1,be=V.length;for(X||(X=Array(be));++oe<be;)X[oe]=V[oe];return X}function ve(V,X,oe,be){oe||(oe={});for(var bt=-1,kt=X.length;++bt<kt;){var cr=X[bt],Dt=void 0;or(oe,cr,Dt===void 0?V[cr]:Dt)}return oe}function Ae(V,X){return ve(V,Qe(V),X)}function $e(V){return L(V,Ha,Qe)}function De(V,X){var oe=V.__data__;return Jo(X)?oe[typeof X=="string"?"string":"hash"]:oe.map}function Me(V,X){var oe=k(V,X);return _(oe)?oe:void 0}var Qe=at?te(at,Object):ip,gt=M;(mt&&gt(new mt(new ArrayBuffer(1)))!=C||Ct&&gt(new Ct)!=v||_t&&gt(_t.resolve())!=m||ht&&gt(new ht)!=u||Ot&&gt(new Ot)!=w)&&(gt=function(V){var X=je.call(V),oe=X==y?V.constructor:void 0,be=oe?rr(oe):void 0;if(be)switch(be){case Qt:return C;case pr:return v;case it:return m;case st:return u;case ot:return w}return X});function Cr(V){var X=V.length,oe=V.constructor(X);return X&&typeof V[0]=="string"&&Le.call(V,"index")&&(oe.index=V.index,oe.input=V.input),oe}function In(V){return typeof V.constructor=="function"&&!ea(V)?R(Ye(V)):{}}function qa(V,X,oe,be){var bt=V.constructor;switch(X){case B:return j(V);case n:case d:return new bt(+V);case C:return G(V,be);case l:case o:case S:case A:case N:case D:case q:case H:case Y:return ue(V,be);case v:return W(V,be,oe);case h:case p:return new bt(V);case E:return ee(V);case u:return ie(V,be,oe);case x:return ce(V)}}function An(V,X){return X=X??i,!!X&&(typeof V=="number"||se.test(V))&&V>-1&&V%1==0&&V<X}function Jo(V){var X=typeof V;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?V!=="__proto__":V===null}function ja(V){return!!Re&&Re in V}function ea(V){var X=V&&V.constructor,oe=typeof X=="function"&&X.prototype||ye;return V===oe}function rr(V){if(V!=null){try{return Ie.call(V)}catch{}try{return V+""}catch{}}return""}function Zd(V){return mr(V,!0,!0)}function Zo(V,X){return V===X||V!==V&&X!==X}function ep(V){return tp(V)&&Le.call(V,"callee")&&(!nt.call(V,"callee")||je.call(V)==s)}var Ga=Array.isArray;function ec(V){return V!=null&&np(V.length)&&!tc(V)}function tp(V){return ap(V)&&ec(V)}var rp=xt||sp;function tc(V){var X=ta(V)?je.call(V):"";return X==b||X==I}function np(V){return typeof V=="number"&&V>-1&&V%1==0&&V<=i}function ta(V){var X=typeof V;return!!V&&(X=="object"||X=="function")}function ap(V){return!!V&&typeof V=="object"}function Ha(V){return ec(V)?wt(V):$(V)}function ip(){return[]}function sp(){return!1}e.exports=Zd})(Nn,Nn.exports)),Nn.exports}var Ac;function ql(){if(Ac)return zr;Ac=1;var e=zr&&zr.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(zr,"__esModule",{value:!0});var t=e(gh()),r=function(c,n,d){var f=!0,b=n.split(d).filter(function(I){return I.length>0}).reduce(function(I,v){if(f=I&&I.hasOwnProperty(v),!!f)return I[v]},c);return{exists:f,value:b}},a=function(c,n,d,f){n.split(f).filter(function(b){return b.length>0}).reduce(function(b,I,v,h){if(v===h.length-1){var y=Array.isArray(d)?t.default(d).map(function(m){return typeof m=="object"?{}:m}):d;b[I]=y}return b[I]},c)},i=function(c,n,d,f){var b=r(c,d,f);b.exists&&a(n,d,b.value,f)},s=function(c,n,d){if(d===void 0&&(d="~"),d.length<1)throw new Error("Separator should not be an empty string.");if(!n)return c;var f=Object.keys(n),b=f[0]&&f[0].length||0,I={};return f.forEach(function(v){var h=n[v],y=v.substr(b),m=r(c,y,d);if(m.exists){var E=Array.isArray(m.value)?m.value:{};a(I,y,E,d),h.forEach(function(u){return i(c,I,""+y+d+u,d)})}}),I};return zr.default=s,zr}var sa={},_c;function vh(){if(_c)return sa;_c=1,Object.defineProperty(sa,"__esModule",{value:!0});var e=function(r,a,i,s){var c=Object.keys(r);c.length!==0&&(Array.isArray(r)||(a[""+i]=c),c.forEach(function(n){var d=r[n];typeof d=="object"&&e(d,a,""+i+s+n,s)}))},t=function(r,a,i){if(a===void 0&&(a="$"),i===void 0&&(i="~"),a.length<1)throw new Error("Prefix should not be an empty string.");if(i.length<1)throw new Error("Separator should not be an empty string.");var s=JSON.parse(r),c={};return e(s,c,a,i),{object:s,map:c}};return sa.default=t,sa}var Wr={},wc;function mh(){if(wc)return Wr;wc=1;var e=Wr&&Wr.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Wr,"__esModule",{value:!0});var t=e(ql()),r=function(a,i,s,c){return s===void 0&&(s="~"),JSON.stringify(t.default(a,i,s),null,c)};return Wr.default=r,Wr}var Bc;function Ch(){if(Bc)return Hr;Bc=1;var e=Hr&&Hr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Hr,"__esModule",{value:!0});var t=e(ql()),r=e(vh()),a=e(mh()),i={parse:r.default,stringify:a.default,order:t.default};return Hr.default=i,Hr}var Eh=Ch();const Sh=Un(Eh);var si,Nc;function xh(){if(Nc)return si;Nc=1;var e=require("crypto");function t(a){var i=new Buffer(a);return i.fill(0),i.toString()}function r(a,i,s){this.hashAlg=a;var c=e.createHash(this.hashAlg);this.hashLength=c.digest().length,this.salt=i||t(this.hashLength),this.ikm=s;var n=e.createHmac(this.hashAlg,this.salt);n.update(this.ikm),this.prk=n.digest()}return r.prototype={derive:function(a,i,s){var c=new Buffer(0),n,d=[],f=Math.ceil(i/this.hashLength);a=new Buffer(a);for(var b=0;b<f;b++){var I=e.createHmac(this.hashAlg,this.prk);I.update(c),I.update(a),I.update(new Buffer([b+1])),c=I.digest(),d.push(c)}n=Buffer.concat(d,i),process.nextTick(function(){s(n)})}},si=r,si}var oi,Rc;function bh(){return Rc||(Rc=1,oi=xh()),oi}bh();var ci,kc;function Ue(){return kc||(kc=1,ci={options:{usePureJavaScript:!1}}),ci}var ui={exports:{}},li,Dc;function Th(){if(Dc)return li;Dc=1;var e={};li=e;var t={};e.encode=function(a,i,s){if(typeof i!="string")throw new TypeError('"alphabet" must be a string.');if(s!==void 0&&typeof s!="number")throw new TypeError('"maxline" must be a number.');var c="";if(!(a instanceof Uint8Array))c=r(a,i);else{var n=0,d=i.length,f=i.charAt(0),b=[0];for(n=0;n<a.length;++n){for(var I=0,v=a[n];I<b.length;++I)v+=b[I]<<8,b[I]=v%d,v=v/d|0;for(;v>0;)b.push(v%d),v=v/d|0}for(n=0;a[n]===0&&n<a.length-1;++n)c+=f;for(n=b.length-1;n>=0;--n)c+=i[b[n]]}if(s){var h=new RegExp(".{1,"+s+"}","g");c=c.match(h).join(`\r
`)}return c},e.decode=function(a,i){if(typeof a!="string")throw new TypeError('"input" must be a string.');if(typeof i!="string")throw new TypeError('"alphabet" must be a string.');var s=t[i];if(!s){s=t[i]=[];for(var c=0;c<i.length;++c)s[i.charCodeAt(c)]=c}a=a.replace(/\s/g,"");for(var n=i.length,d=i.charAt(0),f=[0],c=0;c<a.length;c++){var b=s[a.charCodeAt(c)];if(b===void 0)return;for(var I=0,v=b;I<f.length;++I)v+=f[I]*n,f[I]=v&255,v>>=8;for(;v>0;)f.push(v&255),v>>=8}for(var h=0;a[h]===d&&h<a.length-1;++h)f.push(0);return typeof Buffer<"u"?Buffer.from(f.reverse()):new Uint8Array(f.reverse())};function r(a,i){var s=0,c=i.length,n=i.charAt(0),d=[0];for(s=0;s<a.length();++s){for(var f=0,b=a.at(s);f<d.length;++f)b+=d[f]<<8,d[f]=b%c,b=b/c|0;for(;b>0;)d.push(b%c),b=b/c|0}var I="";for(s=0;a.at(s)===0&&s<a.length()-1;++s)I+=n;for(s=d.length-1;s>=0;--s)I+=i[d[s]];return I}return li}var Pc;function Fe(){if(Pc)return ui.exports;Pc=1;var e=Ue(),t=Th(),r=ui.exports=e.util=e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){r.nextTick=process.nextTick,typeof setImmediate=="function"?r.setImmediate=setImmediate:r.setImmediate=r.nextTick;return}if(typeof setImmediate=="function"){r.setImmediate=function(){return setImmediate.apply(void 0,arguments)},r.nextTick=function(l){return setImmediate(l)};return}if(r.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(o){if(o.source===window&&o.data===u){o.stopPropagation();var S=p.slice();p.length=0,S.forEach(function(A){A()})}};var u="forge.setImmediate",p=[];r.setImmediate=function(o){p.push(o),p.length===1&&window.postMessage(u,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var x=Date.now(),w=!0,B=document.createElement("div"),p=[];new MutationObserver(function(){var o=p.slice();p.length=0,o.forEach(function(S){S()})}).observe(B,{attributes:!0});var C=r.setImmediate;r.setImmediate=function(o){Date.now()-x>15?(x=Date.now(),C(o)):(p.push(o),p.length===1&&B.setAttribute("a",w=!w))}}r.nextTick=r.setImmediate})(),r.isNodejs=typeof process<"u"&&process.versions&&process.versions.node,r.globalScope=(function(){return r.isNodejs?ur:typeof self>"u"?window:self})(),r.isArray=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"},r.isArrayBuffer=function(u){return typeof ArrayBuffer<"u"&&u instanceof ArrayBuffer},r.isArrayBufferView=function(u){return u&&r.isArrayBuffer(u.buffer)&&u.byteLength!==void 0};function a(u){if(!(u===8||u===16||u===24||u===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+u)}r.ByteBuffer=i;function i(u){if(this.data="",this.read=0,typeof u=="string")this.data=u;else if(r.isArrayBuffer(u)||r.isArrayBufferView(u))if(typeof Buffer<"u"&&u instanceof Buffer)this.data=u.toString("binary");else{var p=new Uint8Array(u);try{this.data=String.fromCharCode.apply(null,p)}catch{for(var x=0;x<p.length;++x)this.putByte(p[x])}}else(u instanceof i||typeof u=="object"&&typeof u.data=="string"&&typeof u.read=="number")&&(this.data=u.data,this.read=u.read);this._constructedStringLength=0}r.ByteStringBuffer=i;var s=4096;r.ByteStringBuffer.prototype._optimizeConstructedString=function(u){this._constructedStringLength+=u,this._constructedStringLength>s&&(this.data.substr(0,1),this._constructedStringLength=0)},r.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},r.ByteStringBuffer.prototype.putByte=function(u){return this.putBytes(String.fromCharCode(u))},r.ByteStringBuffer.prototype.fillWithByte=function(u,p){u=String.fromCharCode(u);for(var x=this.data;p>0;)p&1&&(x+=u),p>>>=1,p>0&&(u+=u);return this.data=x,this._optimizeConstructedString(p),this},r.ByteStringBuffer.prototype.putBytes=function(u){return this.data+=u,this._optimizeConstructedString(u.length),this},r.ByteStringBuffer.prototype.putString=function(u){return this.putBytes(r.encodeUtf8(u))},r.ByteStringBuffer.prototype.putInt16=function(u){return this.putBytes(String.fromCharCode(u>>8&255)+String.fromCharCode(u&255))},r.ByteStringBuffer.prototype.putInt24=function(u){return this.putBytes(String.fromCharCode(u>>16&255)+String.fromCharCode(u>>8&255)+String.fromCharCode(u&255))},r.ByteStringBuffer.prototype.putInt32=function(u){return this.putBytes(String.fromCharCode(u>>24&255)+String.fromCharCode(u>>16&255)+String.fromCharCode(u>>8&255)+String.fromCharCode(u&255))},r.ByteStringBuffer.prototype.putInt16Le=function(u){return this.putBytes(String.fromCharCode(u&255)+String.fromCharCode(u>>8&255))},r.ByteStringBuffer.prototype.putInt24Le=function(u){return this.putBytes(String.fromCharCode(u&255)+String.fromCharCode(u>>8&255)+String.fromCharCode(u>>16&255))},r.ByteStringBuffer.prototype.putInt32Le=function(u){return this.putBytes(String.fromCharCode(u&255)+String.fromCharCode(u>>8&255)+String.fromCharCode(u>>16&255)+String.fromCharCode(u>>24&255))},r.ByteStringBuffer.prototype.putInt=function(u,p){a(p);var x="";do p-=8,x+=String.fromCharCode(u>>p&255);while(p>0);return this.putBytes(x)},r.ByteStringBuffer.prototype.putSignedInt=function(u,p){return u<0&&(u+=2<<p-1),this.putInt(u,p)},r.ByteStringBuffer.prototype.putBuffer=function(u){return this.putBytes(u.getBytes())},r.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},r.ByteStringBuffer.prototype.getInt16=function(){var u=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,u},r.ByteStringBuffer.prototype.getInt24=function(){var u=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,u},r.ByteStringBuffer.prototype.getInt32=function(){var u=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,u},r.ByteStringBuffer.prototype.getInt16Le=function(){var u=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,u},r.ByteStringBuffer.prototype.getInt24Le=function(){var u=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,u},r.ByteStringBuffer.prototype.getInt32Le=function(){var u=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,u},r.ByteStringBuffer.prototype.getInt=function(u){a(u);var p=0;do p=(p<<8)+this.data.charCodeAt(this.read++),u-=8;while(u>0);return p},r.ByteStringBuffer.prototype.getSignedInt=function(u){var p=this.getInt(u),x=2<<u-2;return p>=x&&(p-=x<<1),p},r.ByteStringBuffer.prototype.getBytes=function(u){var p;return u?(u=Math.min(this.length(),u),p=this.data.slice(this.read,this.read+u),this.read+=u):u===0?p="":(p=this.read===0?this.data:this.data.slice(this.read),this.clear()),p},r.ByteStringBuffer.prototype.bytes=function(u){return typeof u>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+u)},r.ByteStringBuffer.prototype.at=function(u){return this.data.charCodeAt(this.read+u)},r.ByteStringBuffer.prototype.setAt=function(u,p){return this.data=this.data.substr(0,this.read+u)+String.fromCharCode(p)+this.data.substr(this.read+u+1),this},r.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},r.ByteStringBuffer.prototype.copy=function(){var u=r.createBuffer(this.data);return u.read=this.read,u},r.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},r.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},r.ByteStringBuffer.prototype.truncate=function(u){var p=Math.max(0,this.length()-u);return this.data=this.data.substr(this.read,p),this.read=0,this},r.ByteStringBuffer.prototype.toHex=function(){for(var u="",p=this.read;p<this.data.length;++p){var x=this.data.charCodeAt(p);x<16&&(u+="0"),u+=x.toString(16)}return u},r.ByteStringBuffer.prototype.toString=function(){return r.decodeUtf8(this.bytes())};function c(u,p){p=p||{},this.read=p.readOffset||0,this.growSize=p.growSize||1024;var x=r.isArrayBuffer(u),w=r.isArrayBufferView(u);if(x||w){x?this.data=new DataView(u):this.data=new DataView(u.buffer,u.byteOffset,u.byteLength),this.write="writeOffset"in p?p.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,u!=null&&this.putBytes(u),"writeOffset"in p&&(this.write=p.writeOffset)}r.DataBuffer=c,r.DataBuffer.prototype.length=function(){return this.write-this.read},r.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},r.DataBuffer.prototype.accommodate=function(u,p){if(this.length()>=u)return this;p=Math.max(p||this.growSize,u);var x=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),w=new Uint8Array(this.length()+p);return w.set(x),this.data=new DataView(w.buffer),this},r.DataBuffer.prototype.putByte=function(u){return this.accommodate(1),this.data.setUint8(this.write++,u),this},r.DataBuffer.prototype.fillWithByte=function(u,p){this.accommodate(p);for(var x=0;x<p;++x)this.data.setUint8(u);return this},r.DataBuffer.prototype.putBytes=function(u,p){if(r.isArrayBufferView(u)){var x=new Uint8Array(u.buffer,u.byteOffset,u.byteLength),w=x.byteLength-x.byteOffset;this.accommodate(w);var B=new Uint8Array(this.data.buffer,this.write);return B.set(x),this.write+=w,this}if(r.isArrayBuffer(u)){var x=new Uint8Array(u);this.accommodate(x.byteLength);var B=new Uint8Array(this.data.buffer);return B.set(x,this.write),this.write+=x.byteLength,this}if(u instanceof r.DataBuffer||typeof u=="object"&&typeof u.read=="number"&&typeof u.write=="number"&&r.isArrayBufferView(u.data)){var x=new Uint8Array(u.data.byteLength,u.read,u.length());this.accommodate(x.byteLength);var B=new Uint8Array(u.data.byteLength,this.write);return B.set(x),this.write+=x.byteLength,this}if(u instanceof r.ByteStringBuffer&&(u=u.data,p="binary"),p=p||"binary",typeof u=="string"){var C;if(p==="hex")return this.accommodate(Math.ceil(u.length/2)),C=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.hex.decode(u,C,this.write),this;if(p==="base64")return this.accommodate(Math.ceil(u.length/4)*3),C=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.base64.decode(u,C,this.write),this;if(p==="utf8"&&(u=r.encodeUtf8(u),p="binary"),p==="binary"||p==="raw")return this.accommodate(u.length),C=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.raw.decode(C),this;if(p==="utf16")return this.accommodate(u.length*2),C=new Uint16Array(this.data.buffer,this.write),this.write+=r.text.utf16.encode(C),this;throw new Error("Invalid encoding: "+p)}throw Error("Invalid parameter: "+u)},r.DataBuffer.prototype.putBuffer=function(u){return this.putBytes(u),u.clear(),this},r.DataBuffer.prototype.putString=function(u){return this.putBytes(u,"utf16")},r.DataBuffer.prototype.putInt16=function(u){return this.accommodate(2),this.data.setInt16(this.write,u),this.write+=2,this},r.DataBuffer.prototype.putInt24=function(u){return this.accommodate(3),this.data.setInt16(this.write,u>>8&65535),this.data.setInt8(this.write,u>>16&255),this.write+=3,this},r.DataBuffer.prototype.putInt32=function(u){return this.accommodate(4),this.data.setInt32(this.write,u),this.write+=4,this},r.DataBuffer.prototype.putInt16Le=function(u){return this.accommodate(2),this.data.setInt16(this.write,u,!0),this.write+=2,this},r.DataBuffer.prototype.putInt24Le=function(u){return this.accommodate(3),this.data.setInt8(this.write,u>>16&255),this.data.setInt16(this.write,u>>8&65535,!0),this.write+=3,this},r.DataBuffer.prototype.putInt32Le=function(u){return this.accommodate(4),this.data.setInt32(this.write,u,!0),this.write+=4,this},r.DataBuffer.prototype.putInt=function(u,p){a(p),this.accommodate(p/8);do p-=8,this.data.setInt8(this.write++,u>>p&255);while(p>0);return this},r.DataBuffer.prototype.putSignedInt=function(u,p){return a(p),this.accommodate(p/8),u<0&&(u+=2<<p-1),this.putInt(u,p)},r.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},r.DataBuffer.prototype.getInt16=function(){var u=this.data.getInt16(this.read);return this.read+=2,u},r.DataBuffer.prototype.getInt24=function(){var u=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,u},r.DataBuffer.prototype.getInt32=function(){var u=this.data.getInt32(this.read);return this.read+=4,u},r.DataBuffer.prototype.getInt16Le=function(){var u=this.data.getInt16(this.read,!0);return this.read+=2,u},r.DataBuffer.prototype.getInt24Le=function(){var u=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,u},r.DataBuffer.prototype.getInt32Le=function(){var u=this.data.getInt32(this.read,!0);return this.read+=4,u},r.DataBuffer.prototype.getInt=function(u){a(u);var p=0;do p=(p<<8)+this.data.getInt8(this.read++),u-=8;while(u>0);return p},r.DataBuffer.prototype.getSignedInt=function(u){var p=this.getInt(u),x=2<<u-2;return p>=x&&(p-=x<<1),p},r.DataBuffer.prototype.getBytes=function(u){var p;return u?(u=Math.min(this.length(),u),p=this.data.slice(this.read,this.read+u),this.read+=u):u===0?p="":(p=this.read===0?this.data:this.data.slice(this.read),this.clear()),p},r.DataBuffer.prototype.bytes=function(u){return typeof u>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+u)},r.DataBuffer.prototype.at=function(u){return this.data.getUint8(this.read+u)},r.DataBuffer.prototype.setAt=function(u,p){return this.data.setUint8(u,p),this},r.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},r.DataBuffer.prototype.copy=function(){return new r.DataBuffer(this)},r.DataBuffer.prototype.compact=function(){if(this.read>0){var u=new Uint8Array(this.data.buffer,this.read),p=new Uint8Array(u.byteLength);p.set(u),this.data=new DataView(p),this.write-=this.read,this.read=0}return this},r.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},r.DataBuffer.prototype.truncate=function(u){return this.write=Math.max(0,this.length()-u),this.read=Math.min(this.read,this.write),this},r.DataBuffer.prototype.toHex=function(){for(var u="",p=this.read;p<this.data.byteLength;++p){var x=this.data.getUint8(p);x<16&&(u+="0"),u+=x.toString(16)}return u},r.DataBuffer.prototype.toString=function(u){var p=new Uint8Array(this.data,this.read,this.length());if(u=u||"utf8",u==="binary"||u==="raw")return r.binary.raw.encode(p);if(u==="hex")return r.binary.hex.encode(p);if(u==="base64")return r.binary.base64.encode(p);if(u==="utf8")return r.text.utf8.decode(p);if(u==="utf16")return r.text.utf16.decode(p);throw new Error("Invalid encoding: "+u)},r.createBuffer=function(u,p){return p=p||"raw",u!==void 0&&p==="utf8"&&(u=r.encodeUtf8(u)),new r.ByteBuffer(u)},r.fillString=function(u,p){for(var x="";p>0;)p&1&&(x+=u),p>>>=1,p>0&&(u+=u);return x},r.xorBytes=function(u,p,x){for(var w="",B="",C="",l=0,o=0;x>0;--x,++l)B=u.charCodeAt(l)^p.charCodeAt(l),o>=10&&(w+=C,C="",o=0),C+=String.fromCharCode(B),++o;return w+=C,w},r.hexToBytes=function(u){var p="",x=0;for(u.length&!0&&(x=1,p+=String.fromCharCode(parseInt(u[0],16)));x<u.length;x+=2)p+=String.fromCharCode(parseInt(u.substr(x,2),16));return p},r.bytesToHex=function(u){return r.createBuffer(u).toHex()},r.int32ToBytes=function(u){return String.fromCharCode(u>>24&255)+String.fromCharCode(u>>16&255)+String.fromCharCode(u>>8&255)+String.fromCharCode(u&255)};var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";r.encode64=function(u,p){for(var x="",w="",B,C,l,o=0;o<u.length;)B=u.charCodeAt(o++),C=u.charCodeAt(o++),l=u.charCodeAt(o++),x+=n.charAt(B>>2),x+=n.charAt((B&3)<<4|C>>4),isNaN(C)?x+="==":(x+=n.charAt((C&15)<<2|l>>6),x+=isNaN(l)?"=":n.charAt(l&63)),p&&x.length>p&&(w+=x.substr(0,p)+`\r
`,x=x.substr(p));return w+=x,w},r.decode64=function(u){u=u.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var p="",x,w,B,C,l=0;l<u.length;)x=d[u.charCodeAt(l++)-43],w=d[u.charCodeAt(l++)-43],B=d[u.charCodeAt(l++)-43],C=d[u.charCodeAt(l++)-43],p+=String.fromCharCode(x<<2|w>>4),B!==64&&(p+=String.fromCharCode((w&15)<<4|B>>2),C!==64&&(p+=String.fromCharCode((B&3)<<6|C)));return p},r.encodeUtf8=function(u){return unescape(encodeURIComponent(u))},r.decodeUtf8=function(u){return decodeURIComponent(escape(u))},r.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:t.encode,decode:t.decode}},r.binary.raw.encode=function(u){return String.fromCharCode.apply(null,u)},r.binary.raw.decode=function(u,p,x){var w=p;w||(w=new Uint8Array(u.length)),x=x||0;for(var B=x,C=0;C<u.length;++C)w[B++]=u.charCodeAt(C);return p?B-x:w},r.binary.hex.encode=r.bytesToHex,r.binary.hex.decode=function(u,p,x){var w=p;w||(w=new Uint8Array(Math.ceil(u.length/2))),x=x||0;var B=0,C=x;for(u.length&1&&(B=1,w[C++]=parseInt(u[0],16));B<u.length;B+=2)w[C++]=parseInt(u.substr(B,2),16);return p?C-x:w},r.binary.base64.encode=function(u,p){for(var x="",w="",B,C,l,o=0;o<u.byteLength;)B=u[o++],C=u[o++],l=u[o++],x+=n.charAt(B>>2),x+=n.charAt((B&3)<<4|C>>4),isNaN(C)?x+="==":(x+=n.charAt((C&15)<<2|l>>6),x+=isNaN(l)?"=":n.charAt(l&63)),p&&x.length>p&&(w+=x.substr(0,p)+`\r
`,x=x.substr(p));return w+=x,w},r.binary.base64.decode=function(u,p,x){var w=p;w||(w=new Uint8Array(Math.ceil(u.length/4)*3)),u=u.replace(/[^A-Za-z0-9\+\/\=]/g,""),x=x||0;for(var B,C,l,o,S=0,A=x;S<u.length;)B=d[u.charCodeAt(S++)-43],C=d[u.charCodeAt(S++)-43],l=d[u.charCodeAt(S++)-43],o=d[u.charCodeAt(S++)-43],w[A++]=B<<2|C>>4,l!==64&&(w[A++]=(C&15)<<4|l>>2,o!==64&&(w[A++]=(l&3)<<6|o));return p?A-x:w.subarray(0,A)},r.binary.base58.encode=function(u,p){return r.binary.baseN.encode(u,f,p)},r.binary.base58.decode=function(u,p){return r.binary.baseN.decode(u,f,p)},r.text={utf8:{},utf16:{}},r.text.utf8.encode=function(u,p,x){u=r.encodeUtf8(u);var w=p;w||(w=new Uint8Array(u.length)),x=x||0;for(var B=x,C=0;C<u.length;++C)w[B++]=u.charCodeAt(C);return p?B-x:w},r.text.utf8.decode=function(u){return r.decodeUtf8(String.fromCharCode.apply(null,u))},r.text.utf16.encode=function(u,p,x){var w=p;w||(w=new Uint8Array(u.length*2));var B=new Uint16Array(w.buffer);x=x||0;for(var C=x,l=x,o=0;o<u.length;++o)B[l++]=u.charCodeAt(o),C+=2;return p?C-x:w},r.text.utf16.decode=function(u){return String.fromCharCode.apply(null,new Uint16Array(u.buffer))},r.deflate=function(u,p,x){if(p=r.decode64(u.deflate(r.encode64(p)).rval),x){var w=2,B=p.charCodeAt(1);B&32&&(w=6),p=p.substring(w,p.length-4)}return p},r.inflate=function(u,p,x){var w=u.inflate(r.encode64(p)).rval;return w===null?null:r.decode64(w)};var b=function(u,p,x){if(!u)throw new Error("WebStorage not available.");var w;if(x===null?w=u.removeItem(p):(x=r.encode64(JSON.stringify(x)),w=u.setItem(p,x)),typeof w<"u"&&w.rval!==!0){var B=new Error(w.error.message);throw B.id=w.error.id,B.name=w.error.name,B}},I=function(u,p){if(!u)throw new Error("WebStorage not available.");var x=u.getItem(p);if(u.init)if(x.rval===null){if(x.error){var w=new Error(x.error.message);throw w.id=x.error.id,w.name=x.error.name,w}x=null}else x=x.rval;return x!==null&&(x=JSON.parse(r.decode64(x))),x},v=function(u,p,x,w){var B=I(u,p);B===null&&(B={}),B[x]=w,b(u,p,B)},h=function(u,p,x){var w=I(u,p);return w!==null&&(w=x in w?w[x]:null),w},y=function(u,p,x){var w=I(u,p);if(w!==null&&x in w){delete w[x];var B=!0;for(var C in w){B=!1;break}B&&(w=null),b(u,p,w)}},m=function(u,p){b(u,p,null)},E=function(u,p,x){var w=null;typeof x>"u"&&(x=["web","flash"]);var B,C=!1,l=null;for(var o in x){B=x[o];try{if(B==="flash"||B==="both"){if(p[0]===null)throw new Error("Flash local storage not available.");w=u.apply(this,p),C=B==="flash"}(B==="web"||B==="both")&&(p[0]=localStorage,w=u.apply(this,p),C=!0)}catch(S){l=S}if(C)break}if(!C)throw l;return w};return r.setItem=function(u,p,x,w,B){E(v,arguments,B)},r.getItem=function(u,p,x,w){return E(h,arguments,w)},r.removeItem=function(u,p,x,w){E(y,arguments,w)},r.clearItems=function(u,p,x){E(m,arguments,x)},r.isEmpty=function(u){for(var p in u)if(u.hasOwnProperty(p))return!1;return!0},r.format=function(u){for(var p=/%./g,x,w,B=0,C=[],l=0;x=p.exec(u);){w=u.substring(l,p.lastIndex-2),w.length>0&&C.push(w),l=p.lastIndex;var o=x[0][1];switch(o){case"s":case"o":B<arguments.length?C.push(arguments[B+++1]):C.push("<?>");break;case"%":C.push("%");break;default:C.push("<%"+o+"?>")}}return C.push(u.substring(l)),C.join("")},r.formatNumber=function(u,p,x,w){var B=u,C=isNaN(p=Math.abs(p))?2:p,l=x===void 0?",":x,o=w===void 0?".":w,S=B<0?"-":"",A=parseInt(B=Math.abs(+B||0).toFixed(C),10)+"",N=A.length>3?A.length%3:0;return S+(N?A.substr(0,N)+o:"")+A.substr(N).replace(/(\d{3})(?=\d)/g,"$1"+o)+(C?l+Math.abs(B-A).toFixed(C).slice(2):"")},r.formatSize=function(u){return u>=1073741824?u=r.formatNumber(u/1073741824,2,".","")+" GiB":u>=1048576?u=r.formatNumber(u/1048576,2,".","")+" MiB":u>=1024?u=r.formatNumber(u/1024,0)+" KiB":u=r.formatNumber(u,0)+" bytes",u},r.bytesFromIP=function(u){return u.indexOf(".")!==-1?r.bytesFromIPv4(u):u.indexOf(":")!==-1?r.bytesFromIPv6(u):null},r.bytesFromIPv4=function(u){if(u=u.split("."),u.length!==4)return null;for(var p=r.createBuffer(),x=0;x<u.length;++x){var w=parseInt(u[x],10);if(isNaN(w))return null;p.putByte(w)}return p.getBytes()},r.bytesFromIPv6=function(u){var p=0;u=u.split(":").filter(function(l){return l.length===0&&++p,!0});for(var x=(8-u.length+p)*2,w=r.createBuffer(),B=0;B<8;++B){if(!u[B]||u[B].length===0){w.fillWithByte(0,x),x=0;continue}var C=r.hexToBytes(u[B]);C.length<2&&w.putByte(0),w.putBytes(C)}return w.getBytes()},r.bytesToIP=function(u){return u.length===4?r.bytesToIPv4(u):u.length===16?r.bytesToIPv6(u):null},r.bytesToIPv4=function(u){if(u.length!==4)return null;for(var p=[],x=0;x<u.length;++x)p.push(u.charCodeAt(x));return p.join(".")},r.bytesToIPv6=function(u){if(u.length!==16)return null;for(var p=[],x=[],w=0,B=0;B<u.length;B+=2){for(var C=r.bytesToHex(u[B]+u[B+1]);C[0]==="0"&&C!=="0";)C=C.substr(1);if(C==="0"){var l=x[x.length-1],o=p.length;!l||o!==l.end+1?x.push({start:o,end:o}):(l.end=o,l.end-l.start>x[w].end-x[w].start&&(w=x.length-1))}p.push(C)}if(x.length>0){var S=x[w];S.end-S.start>0&&(p.splice(S.start,S.end-S.start+1,""),S.start===0&&p.unshift(""),S.end===7&&p.push(""))}return p.join(":")},r.estimateCores=function(u,p){if(typeof u=="function"&&(p=u,u={}),u=u||{},"cores"in r&&!u.update)return p(null,r.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return r.cores=navigator.hardwareConcurrency,p(null,r.cores);if(typeof Worker>"u")return r.cores=1,p(null,r.cores);if(typeof Blob>"u")return r.cores=2,p(null,r.cores);var x=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(l){var o=Date.now(),S=o+4;self.postMessage({st:o,et:S})})}.toString(),")()"],{type:"application/javascript"}));w([],5,16);function w(l,o,S){if(o===0){var A=Math.floor(l.reduce(function(N,D){return N+D},0)/l.length);return r.cores=Math.max(1,A),URL.revokeObjectURL(x),p(null,r.cores)}B(S,function(N,D){l.push(C(S,D)),w(l,o-1,S)})}function B(l,o){for(var S=[],A=[],N=0;N<l;++N){var D=new Worker(x);D.addEventListener("message",function(q){if(A.push(q.data),A.length===l){for(var H=0;H<l;++H)S[H].terminate();o(null,A)}}),S.push(D)}for(var N=0;N<l;++N)S[N].postMessage(N)}function C(l,o){for(var S=[],A=0;A<l;++A)for(var N=o[A],D=S[A]=[],q=0;q<l;++q)if(A!==q){var H=o[q];(N.st>H.st&&N.st<H.et||H.st>N.st&&H.st<N.et)&&D.push(q)}return S.reduce(function(Y,Q){return Math.max(Y,Q.length)},0)}},ui.exports}var fi,Oc;function po(){if(Oc)return fi;Oc=1;var e=Ue();Fe(),fi=e.cipher=e.cipher||{},e.cipher.algorithms=e.cipher.algorithms||{},e.cipher.createCipher=function(r,a){var i=r;if(typeof i=="string"&&(i=e.cipher.getAlgorithm(i),i&&(i=i())),!i)throw new Error("Unsupported algorithm: "+r);return new e.cipher.BlockCipher({algorithm:i,key:a,decrypt:!1})},e.cipher.createDecipher=function(r,a){var i=r;if(typeof i=="string"&&(i=e.cipher.getAlgorithm(i),i&&(i=i())),!i)throw new Error("Unsupported algorithm: "+r);return new e.cipher.BlockCipher({algorithm:i,key:a,decrypt:!0})},e.cipher.registerAlgorithm=function(r,a){r=r.toUpperCase(),e.cipher.algorithms[r]=a},e.cipher.getAlgorithm=function(r){return r=r.toUpperCase(),r in e.cipher.algorithms?e.cipher.algorithms[r]:null};var t=e.cipher.BlockCipher=function(r){this.algorithm=r.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=r.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=r.decrypt,this.algorithm.initialize(r)};return t.prototype.start=function(r){r=r||{};var a={};for(var i in r)a[i]=r[i];a.decrypt=this._decrypt,this._finish=!1,this._input=e.util.createBuffer(),this.output=r.output||e.util.createBuffer(),this.mode.start(a)},t.prototype.update=function(r){for(r&&this._input.putBuffer(r);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},t.prototype.finish=function(r){r&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(i){return r(this.blockSize,i,!1)},this.mode.unpad=function(i){return r(this.blockSize,i,!0)});var a={};return a.decrypt=this._decrypt,a.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,a)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,a))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,a))},fi}var di={exports:{}},Lc;function jl(){if(Lc)return di.exports;Lc=1;var e=Ue();Fe(),e.cipher=e.cipher||{};var t=di.exports=e.cipher.modes=e.cipher.modes||{};t.ecb=function(s){s=s||{},this.name="ECB",this.cipher=s.cipher,this.blockSize=s.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(s){},t.ecb.prototype.encrypt=function(s,c,n){if(s.length()<this.blockSize&&!(n&&s.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=s.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)c.putInt32(this._outBlock[d])},t.ecb.prototype.decrypt=function(s,c,n){if(s.length()<this.blockSize&&!(n&&s.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=s.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)c.putInt32(this._outBlock[d])},t.ecb.prototype.pad=function(s,c){var n=s.length()===this.blockSize?this.blockSize:this.blockSize-s.length();return s.fillWithByte(n,n),!0},t.ecb.prototype.unpad=function(s,c){if(c.overflow>0)return!1;var n=s.length(),d=s.at(n-1);return d>this.blockSize<<2?!1:(s.truncate(d),!0)},t.cbc=function(s){s=s||{},this.name="CBC",this.cipher=s.cipher,this.blockSize=s.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(s){if(s.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in s)this._iv=r(s.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")},t.cbc.prototype.encrypt=function(s,c,n){if(s.length()<this.blockSize&&!(n&&s.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=this._prev[d]^s.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)c.putInt32(this._outBlock[d]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(s,c,n){if(s.length()<this.blockSize&&!(n&&s.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=s.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)c.putInt32(this._prev[d]^this._outBlock[d]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(s,c){var n=s.length()===this.blockSize?this.blockSize:this.blockSize-s.length();return s.fillWithByte(n,n),!0},t.cbc.prototype.unpad=function(s,c){if(c.overflow>0)return!1;var n=s.length(),d=s.at(n-1);return d>this.blockSize<<2?!1:(s.truncate(d),!0)},t.cfb=function(s){s=s||{},this.name="CFB",this.cipher=s.cipher,this.blockSize=s.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(s){if(!("iv"in s))throw new Error("Invalid IV parameter.");this._iv=r(s.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(s,c,n){var d=s.length();if(d===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&d>=this.blockSize){for(var f=0;f<this._ints;++f)this._inBlock[f]=s.getInt32()^this._outBlock[f],c.putInt32(this._inBlock[f]);return}var b=(this.blockSize-d)%this.blockSize;b>0&&(b=this.blockSize-b),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialBlock[f]=s.getInt32()^this._outBlock[f],this._partialOutput.putInt32(this._partialBlock[f]);if(b>0)s.read-=this.blockSize;else for(var f=0;f<this._ints;++f)this._inBlock[f]=this._partialBlock[f];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),b>0&&!n)return c.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=b,!0;c.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0},t.cfb.prototype.decrypt=function(s,c,n){var d=s.length();if(d===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&d>=this.blockSize){for(var f=0;f<this._ints;++f)this._inBlock[f]=s.getInt32(),c.putInt32(this._inBlock[f]^this._outBlock[f]);return}var b=(this.blockSize-d)%this.blockSize;b>0&&(b=this.blockSize-b),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialBlock[f]=s.getInt32(),this._partialOutput.putInt32(this._partialBlock[f]^this._outBlock[f]);if(b>0)s.read-=this.blockSize;else for(var f=0;f<this._ints;++f)this._inBlock[f]=this._partialBlock[f];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),b>0&&!n)return c.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=b,!0;c.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0},t.ofb=function(s){s=s||{},this.name="OFB",this.cipher=s.cipher,this.blockSize=s.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(s){if(!("iv"in s))throw new Error("Invalid IV parameter.");this._iv=r(s.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(s,c,n){var d=s.length();if(s.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&d>=this.blockSize){for(var f=0;f<this._ints;++f)c.putInt32(s.getInt32()^this._outBlock[f]),this._inBlock[f]=this._outBlock[f];return}var b=(this.blockSize-d)%this.blockSize;b>0&&(b=this.blockSize-b),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(s.getInt32()^this._outBlock[f]);if(b>0)s.read-=this.blockSize;else for(var f=0;f<this._ints;++f)this._inBlock[f]=this._outBlock[f];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),b>0&&!n)return c.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=b,!0;c.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(s){s=s||{},this.name="CTR",this.cipher=s.cipher,this.blockSize=s.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(s){if(!("iv"in s))throw new Error("Invalid IV parameter.");this._iv=r(s.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(s,c,n){var d=s.length();if(d===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&d>=this.blockSize)for(var f=0;f<this._ints;++f)c.putInt32(s.getInt32()^this._outBlock[f]);else{var b=(this.blockSize-d)%this.blockSize;b>0&&(b=this.blockSize-b),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(s.getInt32()^this._outBlock[f]);if(b>0&&(s.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),b>0&&!n)return c.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=b,!0;c.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(s){s=s||{},this.name="GCM",this.cipher=s.cipher,this.blockSize=s.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=e.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(s){if(!("iv"in s))throw new Error("Invalid IV parameter.");var c=e.util.createBuffer(s.iv);this._cipherLength=0;var n;if("additionalData"in s?n=e.util.createBuffer(s.additionalData):n=e.util.createBuffer(),"tagLength"in s?this._tagLength=s.tagLength:this._tagLength=128,this._tag=null,s.decrypt&&(this._tag=e.util.createBuffer(s.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var d=c.length();if(d===12)this._j0=[c.getInt32(),c.getInt32(),c.getInt32(),1];else{for(this._j0=[0,0,0,0];c.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[c.getInt32(),c.getInt32(),c.getInt32(),c.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(d*8)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,n=e.util.createBuffer(n),this._aDataLength=i(n.length()*8);var f=n.length()%this.blockSize;for(f&&n.fillWithByte(0,this.blockSize-f),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])},t.gcm.prototype.encrypt=function(s,c,n){var d=s.length();if(d===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&d>=this.blockSize){for(var f=0;f<this._ints;++f)c.putInt32(this._outBlock[f]^=s.getInt32());this._cipherLength+=this.blockSize}else{var b=(this.blockSize-d)%this.blockSize;b>0&&(b=this.blockSize-b),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(s.getInt32()^this._outBlock[f]);if(b<=0||n){if(n){var I=d%this.blockSize;this._cipherLength+=I,this._partialOutput.truncate(this.blockSize-I)}else this._cipherLength+=this.blockSize;for(var f=0;f<this._ints;++f)this._outBlock[f]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),b>0&&!n)return s.read-=this.blockSize,c.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=b,!0;c.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},t.gcm.prototype.decrypt=function(s,c,n){var d=s.length();if(d<this.blockSize&&!(n&&d>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=s.getInt32(),this._hashBlock[1]=s.getInt32(),this._hashBlock[2]=s.getInt32(),this._hashBlock[3]=s.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var f=0;f<this._ints;++f)c.putInt32(this._outBlock[f]^this._hashBlock[f]);d<this.blockSize?this._cipherLength+=d%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(s,c){var n=!0;c.decrypt&&c.overflow&&s.truncate(this.blockSize-c.overflow),this.tag=e.util.createBuffer();var d=this._aDataLength.concat(i(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,d);var f=[];this.cipher.encrypt(this._j0,f);for(var b=0;b<this._ints;++b)this.tag.putInt32(this._s[b]^f[b]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),c.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},t.gcm.prototype.multiply=function(s,c){for(var n=[0,0,0,0],d=c.slice(0),f=0;f<128;++f){var b=s[f/32|0]&1<<31-f%32;b&&(n[0]^=d[0],n[1]^=d[1],n[2]^=d[2],n[3]^=d[3]),this.pow(d,d)}return n},t.gcm.prototype.pow=function(s,c){for(var n=s[3]&1,d=3;d>0;--d)c[d]=s[d]>>>1|(s[d-1]&1)<<31;c[0]=s[0]>>>1,n&&(c[0]^=this._R)},t.gcm.prototype.tableMultiply=function(s){for(var c=[0,0,0,0],n=0;n<32;++n){var d=n/8|0,f=s[d]>>>(7-n%8)*4&15,b=this._m[n][f];c[0]^=b[0],c[1]^=b[1],c[2]^=b[2],c[3]^=b[3]}return c},t.gcm.prototype.ghash=function(s,c,n){return c[0]^=n[0],c[1]^=n[1],c[2]^=n[2],c[3]^=n[3],this.tableMultiply(c)},t.gcm.prototype.generateHashTable=function(s,c){for(var n=8/c,d=4*n,f=16*n,b=new Array(f),I=0;I<f;++I){var v=[0,0,0,0],h=I/d|0,y=(d-1-I%d)*c;v[h]=1<<c-1<<y,b[I]=this.generateSubHashTable(this.multiply(v,s),c)}return b},t.gcm.prototype.generateSubHashTable=function(s,c){var n=1<<c,d=n>>>1,f=new Array(n);f[d]=s.slice(0);for(var b=d>>>1;b>0;)this.pow(f[2*b],f[b]=[]),b>>=1;for(b=2;b<d;){for(var I=1;I<b;++I){var v=f[b],h=f[I];f[b+I]=[v[0]^h[0],v[1]^h[1],v[2]^h[2],v[3]^h[3]]}b*=2}for(f[0]=[0,0,0,0],b=d+1;b<n;++b){var y=f[b^d];f[b]=[s[0]^y[0],s[1]^y[1],s[2]^y[2],s[3]^y[3]]}return f};function r(s,c){if(typeof s=="string"&&(s=e.util.createBuffer(s)),e.util.isArray(s)&&s.length>4){var n=s;s=e.util.createBuffer();for(var d=0;d<n.length;++d)s.putByte(n[d])}if(s.length()<c)throw new Error("Invalid IV length; got "+s.length()+" bytes and expected "+c+" bytes.");if(!e.util.isArray(s)){for(var f=[],b=c/4,d=0;d<b;++d)f.push(s.getInt32());s=f}return s}function a(s){s[s.length-1]=s[s.length-1]+1&4294967295}function i(s){return[s/4294967296|0,s&4294967295]}return di.exports}var pi,Uc;function wr(){if(Uc)return pi;Uc=1;var e=Ue();po(),jl(),Fe(),pi=e.aes=e.aes||{},e.aes.startEncrypting=function(h,y,m,E){var u=v({key:h,output:m,decrypt:!1,mode:E});return u.start(y),u},e.aes.createEncryptionCipher=function(h,y){return v({key:h,output:null,decrypt:!1,mode:y})},e.aes.startDecrypting=function(h,y,m,E){var u=v({key:h,output:m,decrypt:!0,mode:E});return u.start(y),u},e.aes.createDecryptionCipher=function(h,y){return v({key:h,output:null,decrypt:!0,mode:y})},e.aes.Algorithm=function(h,y){r||f();var m=this;m.name=h,m.mode=new y({blockSize:16,cipher:{encrypt:function(E,u){return I(m._w,E,u,!1)},decrypt:function(E,u){return I(m._w,E,u,!0)}}}),m._init=!1},e.aes.Algorithm.prototype.initialize=function(h){if(!this._init){var y=h.key,m;if(typeof y=="string"&&(y.length===16||y.length===24||y.length===32))y=e.util.createBuffer(y);else if(e.util.isArray(y)&&(y.length===16||y.length===24||y.length===32)){m=y,y=e.util.createBuffer();for(var E=0;E<m.length;++E)y.putByte(m[E])}if(!e.util.isArray(y)){m=y,y=[];var u=m.length();if(u===16||u===24||u===32){u=u>>>2;for(var E=0;E<u;++E)y.push(m.getInt32())}}if(!e.util.isArray(y)||!(y.length===4||y.length===6||y.length===8))throw new Error("Invalid key parameter.");var p=this.mode.name,x=["CFB","OFB","CTR","GCM"].indexOf(p)!==-1;this._w=b(y,h.decrypt&&!x),this._init=!0}},e.aes._expandKey=function(h,y){return r||f(),b(h,y)},e.aes._updateBlock=I,t("AES-ECB",e.cipher.modes.ecb),t("AES-CBC",e.cipher.modes.cbc),t("AES-CFB",e.cipher.modes.cfb),t("AES-OFB",e.cipher.modes.ofb),t("AES-CTR",e.cipher.modes.ctr),t("AES-GCM",e.cipher.modes.gcm);function t(h,y){var m=function(){return new e.aes.Algorithm(h,y)};e.cipher.registerAlgorithm(h,m)}var r=!1,a=4,i,s,c,n,d;function f(){r=!0,c=[0,1,2,4,8,16,32,64,128,27,54];for(var h=new Array(256),y=0;y<128;++y)h[y]=y<<1,h[y+128]=y+128<<1^283;i=new Array(256),s=new Array(256),n=new Array(4),d=new Array(4);for(var y=0;y<4;++y)n[y]=new Array(256),d[y]=new Array(256);for(var m=0,E=0,u,p,x,w,B,C,l,y=0;y<256;++y){w=E^E<<1^E<<2^E<<3^E<<4,w=w>>8^w&255^99,i[m]=w,s[w]=m,B=h[w],u=h[m],p=h[u],x=h[p],C=B<<24^w<<16^w<<8^(w^B),l=(u^p^x)<<24^(m^x)<<16^(m^p^x)<<8^(m^u^x);for(var o=0;o<4;++o)n[o][m]=C,d[o][w]=l,C=C<<24|C>>>8,l=l<<24|l>>>8;m===0?m=E=1:(m=u^h[h[h[u^x]]],E^=h[h[E]])}}function b(h,y){for(var m=h.slice(0),E,u=1,p=m.length,x=p+6+1,w=a*x,B=p;B<w;++B)E=m[B-1],B%p===0?(E=i[E>>>16&255]<<24^i[E>>>8&255]<<16^i[E&255]<<8^i[E>>>24]^c[u]<<24,u++):p>6&&B%p===4&&(E=i[E>>>24]<<24^i[E>>>16&255]<<16^i[E>>>8&255]<<8^i[E&255]),m[B]=m[B-p]^E;if(y){var C,l=d[0],o=d[1],S=d[2],A=d[3],N=m.slice(0);w=m.length;for(var B=0,D=w-a;B<w;B+=a,D-=a)if(B===0||B===w-a)N[B]=m[D],N[B+1]=m[D+3],N[B+2]=m[D+2],N[B+3]=m[D+1];else for(var q=0;q<a;++q)C=m[D+q],N[B+(3&-q)]=l[i[C>>>24]]^o[i[C>>>16&255]]^S[i[C>>>8&255]]^A[i[C&255]];m=N}return m}function I(h,y,m,E){var u=h.length/4-1,p,x,w,B,C;E?(p=d[0],x=d[1],w=d[2],B=d[3],C=s):(p=n[0],x=n[1],w=n[2],B=n[3],C=i);var l,o,S,A,N,D,q;l=y[0]^h[0],o=y[E?3:1]^h[1],S=y[2]^h[2],A=y[E?1:3]^h[3];for(var H=3,Y=1;Y<u;++Y)N=p[l>>>24]^x[o>>>16&255]^w[S>>>8&255]^B[A&255]^h[++H],D=p[o>>>24]^x[S>>>16&255]^w[A>>>8&255]^B[l&255]^h[++H],q=p[S>>>24]^x[A>>>16&255]^w[l>>>8&255]^B[o&255]^h[++H],A=p[A>>>24]^x[l>>>16&255]^w[o>>>8&255]^B[S&255]^h[++H],l=N,o=D,S=q;m[0]=C[l>>>24]<<24^C[o>>>16&255]<<16^C[S>>>8&255]<<8^C[A&255]^h[++H],m[E?3:1]=C[o>>>24]<<24^C[S>>>16&255]<<16^C[A>>>8&255]<<8^C[l&255]^h[++H],m[2]=C[S>>>24]<<24^C[A>>>16&255]<<16^C[l>>>8&255]<<8^C[o&255]^h[++H],m[E?1:3]=C[A>>>24]<<24^C[l>>>16&255]<<16^C[o>>>8&255]<<8^C[S&255]^h[++H]}function v(h){h=h||{};var y=(h.mode||"CBC").toUpperCase(),m="AES-"+y,E;h.decrypt?E=e.cipher.createDecipher(m,h.key):E=e.cipher.createCipher(m,h.key);var u=E.start;return E.start=function(p,x){var w=null;x instanceof e.util.ByteBuffer&&(w=x,x={}),x=x||{},x.output=w,x.iv=p,u.call(E,x)},E}return pi}var hi={exports:{}},yi={exports:{}},gi={exports:{}},$c;function Br(){if($c)return gi.exports;$c=1;var e=Ue();e.pki=e.pki||{};var t=gi.exports=e.pki.oids=e.oids=e.oids||{};function r(i,s){t[i]=s,t[s]=i}function a(i,s){t[i]=s}return r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.3.101.112","EdDSA25519"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("1.3.14.3.2.29","sha1WithRSASignature"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("2.16.840.1.101.3.4.2.4","sha224"),r("2.16.840.1.101.3.4.2.5","sha512-224"),r("2.16.840.1.101.3.4.2.6","sha512-256"),r("1.2.840.113549.2.2","md2"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.4","surname"),r("2.5.4.5","serialNumber"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.9","streetAddress"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.5.4.12","title"),r("2.5.4.13","description"),r("2.5.4.15","businessCategory"),r("2.5.4.17","postalCode"),r("2.5.4.42","givenName"),r("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),r("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),r("2.16.840.1.113730.1.1","nsCertType"),r("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping"),gi.exports}var Fc;function ir(){if(Fc)return yi.exports;Fc=1;var e=Ue();Fe(),Br();var t=yi.exports=e.asn1=e.asn1||{};t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(c,n,d,f,b){if(e.util.isArray(f)){for(var I=[],v=0;v<f.length;++v)f[v]!==void 0&&I.push(f[v]);f=I}var h={tagClass:c,type:n,constructed:d,composed:d||e.util.isArray(f),value:f};return b&&"bitStringContents"in b&&(h.bitStringContents=b.bitStringContents,h.original=t.copy(h)),h},t.copy=function(c,n){var d;if(e.util.isArray(c)){d=[];for(var f=0;f<c.length;++f)d.push(t.copy(c[f],n));return d}return typeof c=="string"?c:(d={tagClass:c.tagClass,type:c.type,constructed:c.constructed,composed:c.composed,value:t.copy(c.value,n)},n&&!n.excludeBitStringContents&&(d.bitStringContents=c.bitStringContents),d)},t.equals=function(c,n,d){if(e.util.isArray(c)){if(!e.util.isArray(n)||c.length!==n.length)return!1;for(var f=0;f<c.length;++f)if(!t.equals(c[f],n[f]))return!1;return!0}if(typeof c!=typeof n)return!1;if(typeof c=="string")return c===n;var b=c.tagClass===n.tagClass&&c.type===n.type&&c.constructed===n.constructed&&c.composed===n.composed&&t.equals(c.value,n.value);return d&&d.includeBitStringContents&&(b=b&&c.bitStringContents===n.bitStringContents),b},t.getBerValueLength=function(c){var n=c.getByte();if(n!==128){var d,f=n&128;return f?d=c.getInt((n&127)<<3):d=n,d}};function r(c,n,d){if(d>n){var f=new Error("Too few bytes to parse DER.");throw f.available=c.length(),f.remaining=n,f.requested=d,f}}var a=function(c,n){var d=c.getByte();if(n--,d!==128){var f,b=d&128;if(!b)f=d;else{var I=d&127;r(c,n,I),f=c.getInt(I<<3)}if(f<0)throw new Error("Negative length: "+f);return f}};t.fromDer=function(c,n){n===void 0&&(n={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof n=="boolean"&&(n={strict:n,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in n||(n.strict=!0),"parseAllBytes"in n||(n.parseAllBytes=!0),"decodeBitStrings"in n||(n.decodeBitStrings=!0),typeof c=="string"&&(c=e.util.createBuffer(c));var d=c.length(),f=i(c,c.length(),0,n);if(n.parseAllBytes&&c.length()!==0){var b=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw b.byteCount=d,b.remaining=c.length(),b}return f};function i(c,n,d,f){var b;r(c,n,2);var I=c.getByte();n--;var v=I&192,h=I&31;b=c.length();var y=a(c,n);if(n-=b-c.length(),y!==void 0&&y>n){if(f.strict){var m=new Error("Too few bytes to read ASN.1 value.");throw m.available=c.length(),m.remaining=n,m.requested=y,m}y=n}var E,u,p=(I&32)===32;if(p)if(E=[],y===void 0)for(;;){if(r(c,n,2),c.bytes(2)==="\0\0"){c.getBytes(2),n-=2;break}b=c.length(),E.push(i(c,n,d+1,f)),n-=b-c.length()}else for(;y>0;)b=c.length(),E.push(i(c,y,d+1,f)),n-=b-c.length(),y-=b-c.length();if(E===void 0&&v===t.Class.UNIVERSAL&&h===t.Type.BITSTRING&&(u=c.bytes(y)),E===void 0&&f.decodeBitStrings&&v===t.Class.UNIVERSAL&&h===t.Type.BITSTRING&&y>1){var x=c.read,w=n,B=0;if(h===t.Type.BITSTRING&&(r(c,n,1),B=c.getByte(),n--),B===0)try{b=c.length();var C={strict:!0,decodeBitStrings:!0},l=i(c,n,d+1,C),o=b-c.length();n-=o,h==t.Type.BITSTRING&&o++;var S=l.tagClass;o===y&&(S===t.Class.UNIVERSAL||S===t.Class.CONTEXT_SPECIFIC)&&(E=[l])}catch{}E===void 0&&(c.read=x,n=w)}if(E===void 0){if(y===void 0){if(f.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");y=n}if(h===t.Type.BMPSTRING)for(E="";y>0;y-=2)r(c,n,2),E+=String.fromCharCode(c.getInt16()),n-=2;else E=c.getBytes(y),n-=y}var A=u===void 0?null:{bitStringContents:u};return t.create(v,h,p,E,A)}t.toDer=function(c){var n=e.util.createBuffer(),d=c.tagClass|c.type,f=e.util.createBuffer(),b=!1;if("bitStringContents"in c&&(b=!0,c.original&&(b=t.equals(c,c.original))),b)f.putBytes(c.bitStringContents);else if(c.composed){c.constructed?d|=32:f.putByte(0);for(var I=0;I<c.value.length;++I)c.value[I]!==void 0&&f.putBuffer(t.toDer(c.value[I]))}else if(c.type===t.Type.BMPSTRING)for(var I=0;I<c.value.length;++I)f.putInt16(c.value.charCodeAt(I));else c.type===t.Type.INTEGER&&c.value.length>1&&(c.value.charCodeAt(0)===0&&(c.value.charCodeAt(1)&128)===0||c.value.charCodeAt(0)===255&&(c.value.charCodeAt(1)&128)===128)?f.putBytes(c.value.substr(1)):f.putBytes(c.value);if(n.putByte(d),f.length()<=127)n.putByte(f.length()&127);else{var v=f.length(),h="";do h+=String.fromCharCode(v&255),v=v>>>8;while(v>0);n.putByte(h.length|128);for(var I=h.length-1;I>=0;--I)n.putByte(h.charCodeAt(I))}return n.putBuffer(f),n},t.oidToDer=function(c){var n=c.split("."),d=e.util.createBuffer();d.putByte(40*parseInt(n[0],10)+parseInt(n[1],10));for(var f,b,I,v,h=2;h<n.length;++h){f=!0,b=[],I=parseInt(n[h],10);do v=I&127,I=I>>>7,f||(v|=128),b.push(v),f=!1;while(I>0);for(var y=b.length-1;y>=0;--y)d.putByte(b[y])}return d},t.derToOid=function(c){var n;typeof c=="string"&&(c=e.util.createBuffer(c));var d=c.getByte();n=Math.floor(d/40)+"."+d%40;for(var f=0;c.length()>0;)d=c.getByte(),f=f<<7,d&128?f+=d&127:(n+="."+(f+d),f=0);return n},t.utcTimeToDate=function(c){var n=new Date,d=parseInt(c.substr(0,2),10);d=d>=50?1900+d:2e3+d;var f=parseInt(c.substr(2,2),10)-1,b=parseInt(c.substr(4,2),10),I=parseInt(c.substr(6,2),10),v=parseInt(c.substr(8,2),10),h=0;if(c.length>11){var y=c.charAt(10),m=10;y!=="+"&&y!=="-"&&(h=parseInt(c.substr(10,2),10),m+=2)}if(n.setUTCFullYear(d,f,b),n.setUTCHours(I,v,h,0),m&&(y=c.charAt(m),y==="+"||y==="-")){var E=parseInt(c.substr(m+1,2),10),u=parseInt(c.substr(m+4,2),10),p=E*60+u;p*=6e4,y==="+"?n.setTime(+n-p):n.setTime(+n+p)}return n},t.generalizedTimeToDate=function(c){var n=new Date,d=parseInt(c.substr(0,4),10),f=parseInt(c.substr(4,2),10)-1,b=parseInt(c.substr(6,2),10),I=parseInt(c.substr(8,2),10),v=parseInt(c.substr(10,2),10),h=parseInt(c.substr(12,2),10),y=0,m=0,E=!1;c.charAt(c.length-1)==="Z"&&(E=!0);var u=c.length-5,p=c.charAt(u);if(p==="+"||p==="-"){var x=parseInt(c.substr(u+1,2),10),w=parseInt(c.substr(u+4,2),10);m=x*60+w,m*=6e4,p==="+"&&(m*=-1),E=!0}return c.charAt(14)==="."&&(y=parseFloat(c.substr(14),10)*1e3),E?(n.setUTCFullYear(d,f,b),n.setUTCHours(I,v,h,y),n.setTime(+n+m)):(n.setFullYear(d,f,b),n.setHours(I,v,h,y)),n},t.dateToUtcTime=function(c){if(typeof c=="string")return c;var n="",d=[];d.push((""+c.getUTCFullYear()).substr(2)),d.push(""+(c.getUTCMonth()+1)),d.push(""+c.getUTCDate()),d.push(""+c.getUTCHours()),d.push(""+c.getUTCMinutes()),d.push(""+c.getUTCSeconds());for(var f=0;f<d.length;++f)d[f].length<2&&(n+="0"),n+=d[f];return n+="Z",n},t.dateToGeneralizedTime=function(c){if(typeof c=="string")return c;var n="",d=[];d.push(""+c.getUTCFullYear()),d.push(""+(c.getUTCMonth()+1)),d.push(""+c.getUTCDate()),d.push(""+c.getUTCHours()),d.push(""+c.getUTCMinutes()),d.push(""+c.getUTCSeconds());for(var f=0;f<d.length;++f)d[f].length<2&&(n+="0"),n+=d[f];return n+="Z",n},t.integerToDer=function(c){var n=e.util.createBuffer();if(c>=-128&&c<128)return n.putSignedInt(c,8);if(c>=-32768&&c<32768)return n.putSignedInt(c,16);if(c>=-8388608&&c<8388608)return n.putSignedInt(c,24);if(c>=-2147483648&&c<2147483648)return n.putSignedInt(c,32);var d=new Error("Integer too large; max is 32-bits.");throw d.integer=c,d},t.derToInteger=function(c){typeof c=="string"&&(c=e.util.createBuffer(c));var n=c.length()*8;if(n>32)throw new Error("Integer too large; max is 32-bits.");return c.getSignedInt(n)},t.validate=function(c,n,d,f){var b=!1;if((c.tagClass===n.tagClass||typeof n.tagClass>"u")&&(c.type===n.type||typeof n.type>"u"))if(c.constructed===n.constructed||typeof n.constructed>"u"){if(b=!0,n.value&&e.util.isArray(n.value))for(var I=0,v=0;b&&v<n.value.length;++v)b=n.value[v].optional||!1,c.value[I]&&(b=t.validate(c.value[I],n.value[v],d,f),b?++I:n.value[v].optional&&(b=!0)),!b&&f&&f.push("["+n.name+'] Tag class "'+n.tagClass+'", type "'+n.type+'" expected value length "'+n.value.length+'", got "'+c.value.length+'"');if(b&&d&&(n.capture&&(d[n.capture]=c.value),n.captureAsn1&&(d[n.captureAsn1]=c),n.captureBitStringContents&&"bitStringContents"in c&&(d[n.captureBitStringContents]=c.bitStringContents),n.captureBitStringValue&&"bitStringContents"in c))if(c.bitStringContents.length<2)d[n.captureBitStringValue]="";else{var h=c.bitStringContents.charCodeAt(0);if(h!==0)throw new Error("captureBitStringValue only supported for zero unused bits");d[n.captureBitStringValue]=c.bitStringContents.slice(1)}}else f&&f.push("["+n.name+'] Expected constructed "'+n.constructed+'", got "'+c.constructed+'"');else f&&(c.tagClass!==n.tagClass&&f.push("["+n.name+'] Expected tag class "'+n.tagClass+'", got "'+c.tagClass+'"'),c.type!==n.type&&f.push("["+n.name+'] Expected type "'+n.type+'", got "'+c.type+'"'));return b};var s=/[^\\u0000-\\u00ff]/;return t.prettyPrint=function(c,n,d){var f="";n=n||0,d=d||2,n>0&&(f+=`
`);for(var b="",I=0;I<n*d;++I)b+=" ";switch(f+=b+"Tag: ",c.tagClass){case t.Class.UNIVERSAL:f+="Universal:";break;case t.Class.APPLICATION:f+="Application:";break;case t.Class.CONTEXT_SPECIFIC:f+="Context-Specific:";break;case t.Class.PRIVATE:f+="Private:";break}if(c.tagClass===t.Class.UNIVERSAL)switch(f+=c.type,c.type){case t.Type.NONE:f+=" (None)";break;case t.Type.BOOLEAN:f+=" (Boolean)";break;case t.Type.INTEGER:f+=" (Integer)";break;case t.Type.BITSTRING:f+=" (Bit string)";break;case t.Type.OCTETSTRING:f+=" (Octet string)";break;case t.Type.NULL:f+=" (Null)";break;case t.Type.OID:f+=" (Object Identifier)";break;case t.Type.ODESC:f+=" (Object Descriptor)";break;case t.Type.EXTERNAL:f+=" (External or Instance of)";break;case t.Type.REAL:f+=" (Real)";break;case t.Type.ENUMERATED:f+=" (Enumerated)";break;case t.Type.EMBEDDED:f+=" (Embedded PDV)";break;case t.Type.UTF8:f+=" (UTF8)";break;case t.Type.ROID:f+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:f+=" (Sequence)";break;case t.Type.SET:f+=" (Set)";break;case t.Type.PRINTABLESTRING:f+=" (Printable String)";break;case t.Type.IA5String:f+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:f+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:f+=" (Generalized time)";break;case t.Type.BMPSTRING:f+=" (BMP String)";break}else f+=c.type;if(f+=`
`,f+=b+"Constructed: "+c.constructed+`
`,c.composed){for(var v=0,h="",I=0;I<c.value.length;++I)c.value[I]!==void 0&&(v+=1,h+=t.prettyPrint(c.value[I],n+1,d),I+1<c.value.length&&(h+=","));f+=b+"Sub values: "+v+h}else{if(f+=b+"Value: ",c.type===t.Type.OID){var y=t.derToOid(c.value);f+=y,e.pki&&e.pki.oids&&y in e.pki.oids&&(f+=" ("+e.pki.oids[y]+") ")}if(c.type===t.Type.INTEGER)try{f+=t.derToInteger(c.value)}catch{f+="0x"+e.util.bytesToHex(c.value)}else if(c.type===t.Type.BITSTRING){if(c.value.length>1?f+="0x"+e.util.bytesToHex(c.value.slice(1)):f+="(none)",c.value.length>0){var m=c.value.charCodeAt(0);m==1?f+=" (1 unused bit shown)":m>1&&(f+=" ("+m+" unused bits shown)")}}else if(c.type===t.Type.OCTETSTRING)s.test(c.value)||(f+="("+c.value+") "),f+="0x"+e.util.bytesToHex(c.value);else if(c.type===t.Type.UTF8)try{f+=e.util.decodeUtf8(c.value)}catch(E){if(E.message==="URI malformed")f+="0x"+e.util.bytesToHex(c.value)+" (malformed UTF8)";else throw E}else c.type===t.Type.PRINTABLESTRING||c.type===t.Type.IA5String?f+=c.value:s.test(c.value)?f+="0x"+e.util.bytesToHex(c.value):c.value.length===0?f+="[null]":f+=c.value}return f},yi.exports}var vi={exports:{}},mi,Mc;function dr(){if(Mc)return mi;Mc=1;var e=Ue();return mi=e.md=e.md||{},e.md.algorithms=e.md.algorithms||{},mi}var Vc;function Fn(){if(Vc)return vi.exports;Vc=1;var e=Ue();dr(),Fe();var t=vi.exports=e.hmac=e.hmac||{};return t.create=function(){var r=null,a=null,i=null,s=null,c={};return c.start=function(n,d){if(n!==null)if(typeof n=="string")if(n=n.toLowerCase(),n in e.md.algorithms)a=e.md.algorithms[n].create();else throw new Error('Unknown hash algorithm "'+n+'"');else a=n;if(d===null)d=r;else{if(typeof d=="string")d=e.util.createBuffer(d);else if(e.util.isArray(d)){var f=d;d=e.util.createBuffer();for(var b=0;b<f.length;++b)d.putByte(f[b])}var I=d.length();I>a.blockLength&&(a.start(),a.update(d.bytes()),d=a.digest()),i=e.util.createBuffer(),s=e.util.createBuffer(),I=d.length();for(var b=0;b<I;++b){var f=d.at(b);i.putByte(54^f),s.putByte(92^f)}if(I<a.blockLength)for(var f=a.blockLength-I,b=0;b<f;++b)i.putByte(54),s.putByte(92);r=d,i=i.bytes(),s=s.bytes()}a.start(),a.update(i)},c.update=function(n){a.update(n)},c.getMac=function(){var n=a.digest().bytes();return a.start(),a.update(s),a.update(n),a.digest()},c.digest=c.getMac,c},vi.exports}var Ci={exports:{}},Kc;function ho(){if(Kc)return Ci.exports;Kc=1;var e=Ue();dr(),Fe();var t=Ci.exports=e.md5=e.md5||{};e.md.md5=e.md.algorithms.md5=t,t.create=function(){c||n();var f=null,b=e.util.createBuffer(),I=new Array(16),v={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return v.start=function(){v.messageLength=0,v.fullMessageLength=v.messageLength64=[];for(var h=v.messageLengthSize/4,y=0;y<h;++y)v.fullMessageLength.push(0);return b=e.util.createBuffer(),f={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},v},v.start(),v.update=function(h,y){y==="utf8"&&(h=e.util.encodeUtf8(h));var m=h.length;v.messageLength+=m,m=[m/4294967296>>>0,m>>>0];for(var E=v.fullMessageLength.length-1;E>=0;--E)v.fullMessageLength[E]+=m[1],m[1]=m[0]+(v.fullMessageLength[E]/4294967296>>>0),v.fullMessageLength[E]=v.fullMessageLength[E]>>>0,m[0]=m[1]/4294967296>>>0;return b.putBytes(h),d(f,I,b),(b.read>2048||b.length()===0)&&b.compact(),v},v.digest=function(){var h=e.util.createBuffer();h.putBytes(b.bytes());var y=v.fullMessageLength[v.fullMessageLength.length-1]+v.messageLengthSize,m=y&v.blockLength-1;h.putBytes(r.substr(0,v.blockLength-m));for(var E,u=0,p=v.fullMessageLength.length-1;p>=0;--p)E=v.fullMessageLength[p]*8+u,u=E/4294967296>>>0,h.putInt32Le(E>>>0);var x={h0:f.h0,h1:f.h1,h2:f.h2,h3:f.h3};d(x,I,h);var w=e.util.createBuffer();return w.putInt32Le(x.h0),w.putInt32Le(x.h1),w.putInt32Le(x.h2),w.putInt32Le(x.h3),w},v};var r=null,a=null,i=null,s=null,c=!1;function n(){r="",r+=e.util.fillString("\0",64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],i=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],s=new Array(64);for(var f=0;f<64;++f)s[f]=Math.floor(Math.abs(Math.sin(f+1))*4294967296);c=!0}function d(f,b,I){for(var v,h,y,m,E,u,p,x,w=I.length();w>=64;){for(h=f.h0,y=f.h1,m=f.h2,E=f.h3,x=0;x<16;++x)b[x]=I.getInt32Le(),u=E^y&(m^E),v=h+u+s[x]+b[x],p=i[x],h=E,E=m,m=y,y+=v<<p|v>>>32-p;for(;x<32;++x)u=m^E&(y^m),v=h+u+s[x]+b[a[x]],p=i[x],h=E,E=m,m=y,y+=v<<p|v>>>32-p;for(;x<48;++x)u=y^m^E,v=h+u+s[x]+b[a[x]],p=i[x],h=E,E=m,m=y,y+=v<<p|v>>>32-p;for(;x<64;++x)u=m^(y|~E),v=h+u+s[x]+b[a[x]],p=i[x],h=E,E=m,m=y,y+=v<<p|v>>>32-p;f.h0=f.h0+h|0,f.h1=f.h1+y|0,f.h2=f.h2+m|0,f.h3=f.h3+E|0,w-=64}}return Ci.exports}var Ei={exports:{}},qc;function Zr(){if(qc)return Ei.exports;qc=1;var e=Ue();Fe();var t=Ei.exports=e.pem=e.pem||{};t.encode=function(i,s){s=s||{};var c="-----BEGIN "+i.type+`-----\r
`,n;if(i.procType&&(n={name:"Proc-Type",values:[String(i.procType.version),i.procType.type]},c+=r(n)),i.contentDomain&&(n={name:"Content-Domain",values:[i.contentDomain]},c+=r(n)),i.dekInfo&&(n={name:"DEK-Info",values:[i.dekInfo.algorithm]},i.dekInfo.parameters&&n.values.push(i.dekInfo.parameters),c+=r(n)),i.headers)for(var d=0;d<i.headers.length;++d)c+=r(i.headers[d]);return i.procType&&(c+=`\r
`),c+=e.util.encode64(i.body,s.maxline||64)+`\r
`,c+="-----END "+i.type+`-----\r
`,c},t.decode=function(i){for(var s=[],c=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,d=/\r?\n/,f;f=c.exec(i),!!f;){var b=f[1];b==="NEW CERTIFICATE REQUEST"&&(b="CERTIFICATE REQUEST");var I={type:b,procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(f[3])};if(s.push(I),!!f[2]){for(var v=f[2].split(d),h=0;f&&h<v.length;){for(var y=v[h].replace(/\s+$/,""),m=h+1;m<v.length;++m){var E=v[m];if(!/\s/.test(E[0]))break;y+=E,h=m}if(f=y.match(n),f){for(var u={name:f[1],values:[]},p=f[2].split(","),x=0;x<p.length;++x)u.values.push(a(p[x]));if(I.procType)if(!I.contentDomain&&u.name==="Content-Domain")I.contentDomain=p[0]||"";else if(!I.dekInfo&&u.name==="DEK-Info"){if(u.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');I.dekInfo={algorithm:p[0],parameters:p[1]||null}}else I.headers.push(u);else{if(u.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(u.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');I.procType={version:p[0],type:p[1]}}}++h}if(I.procType==="ENCRYPTED"&&!I.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(s.length===0)throw new Error("Invalid PEM formatted message.");return s};function r(i){for(var s=i.name+": ",c=[],n=function(v,h){return" "+h},d=0;d<i.values.length;++d)c.push(i.values[d].replace(/^(\S+\r\n)/,n));s+=c.join(",")+`\r
`;for(var f=0,b=-1,d=0;d<s.length;++d,++f)if(f>65&&b!==-1){var I=s[b];I===","?(++b,s=s.substr(0,b)+`\r
 `+s.substr(b)):s=s.substr(0,b)+`\r
`+I+s.substr(b+1),f=d-b-1,b=-1,++d}else(s[d]===" "||s[d]==="	"||s[d]===",")&&(b=d);return s}function a(i){return i.replace(/^\s+/,"")}return Ei.exports}var Si={exports:{}},xi,jc;function _a(){if(jc)return xi;jc=1;var e=Ue();po(),jl(),Fe(),xi=e.des=e.des||{},e.des.startEncrypting=function(h,y,m,E){var u=v({key:h,output:m,decrypt:!1,mode:E||(y===null?"ECB":"CBC")});return u.start(y),u},e.des.createEncryptionCipher=function(h,y){return v({key:h,output:null,decrypt:!1,mode:y})},e.des.startDecrypting=function(h,y,m,E){var u=v({key:h,output:m,decrypt:!0,mode:E||(y===null?"ECB":"CBC")});return u.start(y),u},e.des.createDecryptionCipher=function(h,y){return v({key:h,output:null,decrypt:!0,mode:y})},e.des.Algorithm=function(h,y){var m=this;m.name=h,m.mode=new y({blockSize:8,cipher:{encrypt:function(E,u){return I(m._keys,E,u,!1)},decrypt:function(E,u){return I(m._keys,E,u,!0)}}}),m._init=!1},e.des.Algorithm.prototype.initialize=function(h){if(!this._init){var y=e.util.createBuffer(h.key);if(this.name.indexOf("3DES")===0&&y.length()!==24)throw new Error("Invalid Triple-DES key size: "+y.length()*8);this._keys=b(y),this._init=!0}},t("DES-ECB",e.cipher.modes.ecb),t("DES-CBC",e.cipher.modes.cbc),t("DES-CFB",e.cipher.modes.cfb),t("DES-OFB",e.cipher.modes.ofb),t("DES-CTR",e.cipher.modes.ctr),t("3DES-ECB",e.cipher.modes.ecb),t("3DES-CBC",e.cipher.modes.cbc),t("3DES-CFB",e.cipher.modes.cfb),t("3DES-OFB",e.cipher.modes.ofb),t("3DES-CTR",e.cipher.modes.ctr);function t(h,y){var m=function(){return new e.des.Algorithm(h,y)};e.cipher.registerAlgorithm(h,m)}var r=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],i=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],s=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],n=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function b(h){for(var y=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],m=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],E=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],u=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],p=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],x=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],w=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],B=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],C=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],o=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],S=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],A=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],N=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],D=h.length()>8?3:1,q=[],H=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],Y=0,Q,J=0;J<D;J++){var ne=h.getInt32(),se=h.getInt32();Q=(ne>>>4^se)&252645135,se^=Q,ne^=Q<<4,Q=(se>>>-16^ne)&65535,ne^=Q,se^=Q<<-16,Q=(ne>>>2^se)&858993459,se^=Q,ne^=Q<<2,Q=(se>>>-16^ne)&65535,ne^=Q,se^=Q<<-16,Q=(ne>>>1^se)&1431655765,se^=Q,ne^=Q<<1,Q=(se>>>8^ne)&16711935,ne^=Q,se^=Q<<8,Q=(ne>>>1^se)&1431655765,se^=Q,ne^=Q<<1,Q=ne<<8|se>>>20&240,ne=se<<24|se<<8&16711680|se>>>8&65280|se>>>24&240,se=Q;for(var fe=0;fe<H.length;++fe){H[fe]?(ne=ne<<2|ne>>>26,se=se<<2|se>>>26):(ne=ne<<1|ne>>>27,se=se<<1|se>>>27),ne&=-15,se&=-15;var he=y[ne>>>28]|m[ne>>>24&15]|E[ne>>>20&15]|u[ne>>>16&15]|p[ne>>>12&15]|x[ne>>>8&15]|w[ne>>>4&15],we=B[se>>>28]|C[se>>>24&15]|l[se>>>20&15]|o[se>>>16&15]|S[se>>>12&15]|A[se>>>8&15]|N[se>>>4&15];Q=(we>>>16^he)&65535,q[Y++]=he^Q,q[Y++]=we^Q<<16}}return q}function I(h,y,m,E){var u=h.length===32?3:9,p;u===3?p=E?[30,-2,-2]:[0,32,2]:p=E?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var x,w=y[0],B=y[1];x=(w>>>4^B)&252645135,B^=x,w^=x<<4,x=(w>>>16^B)&65535,B^=x,w^=x<<16,x=(B>>>2^w)&858993459,w^=x,B^=x<<2,x=(B>>>8^w)&16711935,w^=x,B^=x<<8,x=(w>>>1^B)&1431655765,B^=x,w^=x<<1,w=w<<1|w>>>31,B=B<<1|B>>>31;for(var C=0;C<u;C+=3){for(var l=p[C+1],o=p[C+2],S=p[C];S!=l;S+=o){var A=B^h[S],N=(B>>>4|B<<28)^h[S+1];x=w,w=B,B=x^(a[A>>>24&63]|s[A>>>16&63]|n[A>>>8&63]|f[A&63]|r[N>>>24&63]|i[N>>>16&63]|c[N>>>8&63]|d[N&63])}x=w,w=B,B=x}w=w>>>1|w<<31,B=B>>>1|B<<31,x=(w>>>1^B)&1431655765,B^=x,w^=x<<1,x=(B>>>8^w)&16711935,w^=x,B^=x<<8,x=(B>>>2^w)&858993459,w^=x,B^=x<<2,x=(w>>>16^B)&65535,B^=x,w^=x<<16,x=(w>>>4^B)&252645135,B^=x,w^=x<<4,m[0]=w,m[1]=B}function v(h){h=h||{};var y=(h.mode||"CBC").toUpperCase(),m="DES-"+y,E;h.decrypt?E=e.cipher.createDecipher(m,h.key):E=e.cipher.createCipher(m,h.key);var u=E.start;return E.start=function(p,x){var w=null;x instanceof e.util.ByteBuffer&&(w=x,x={}),x=x||{},x.output=w,x.iv=p,u.call(E,x)},E}return xi}var bi,Gc;function yo(){if(Gc)return bi;Gc=1;var e=Ue();Fn(),dr(),Fe();var t=e.pkcs5=e.pkcs5||{},r;return e.util.isNodejs&&!e.options.usePureJavaScript&&(r=require("crypto")),bi=e.pbkdf2=t.pbkdf2=function(a,i,s,c,n,d){if(typeof n=="function"&&(d=n,n=null),e.util.isNodejs&&!e.options.usePureJavaScript&&r.pbkdf2&&(n===null||typeof n!="object")&&(r.pbkdf2Sync.length>4||!n||n==="sha1"))return typeof n!="string"&&(n="sha1"),a=Buffer.from(a,"binary"),i=Buffer.from(i,"binary"),d?r.pbkdf2Sync.length===4?r.pbkdf2(a,i,s,c,function(C,l){if(C)return d(C);d(null,l.toString("binary"))}):r.pbkdf2(a,i,s,c,n,function(C,l){if(C)return d(C);d(null,l.toString("binary"))}):r.pbkdf2Sync.length===4?r.pbkdf2Sync(a,i,s,c).toString("binary"):r.pbkdf2Sync(a,i,s,c,n).toString("binary");if((typeof n>"u"||n===null)&&(n="sha1"),typeof n=="string"){if(!(n in e.md.algorithms))throw new Error("Unknown hash algorithm: "+n);n=e.md[n].create()}var f=n.digestLength;if(c>4294967295*f){var b=new Error("Derived key is too long.");if(d)return d(b);throw b}var I=Math.ceil(c/f),v=c-(I-1)*f,h=e.hmac.create();h.start(n,a);var y="",m,E,u;if(!d){for(var p=1;p<=I;++p){h.start(null,null),h.update(i),h.update(e.util.int32ToBytes(p)),m=u=h.digest().getBytes();for(var x=2;x<=s;++x)h.start(null,null),h.update(u),E=h.digest().getBytes(),m=e.util.xorBytes(m,E,f),u=E;y+=p<I?m:m.substr(0,v)}return y}var p=1,x;function w(){if(p>I)return d(null,y);h.start(null,null),h.update(i),h.update(e.util.int32ToBytes(p)),m=u=h.digest().getBytes(),x=2,B()}function B(){if(x<=s)return h.start(null,null),h.update(u),E=h.digest().getBytes(),m=e.util.xorBytes(m,E,f),u=E,++x,e.util.setImmediate(B);y+=p<I?m:m.substr(0,v),++p,w()}w()},bi}var oa={exports:{}},Ti={exports:{}},Hc;function Gl(){if(Hc)return Ti.exports;Hc=1;var e=Ue();dr(),Fe();var t=Ti.exports=e.sha256=e.sha256||{};e.md.sha256=e.md.algorithms.sha256=t,t.create=function(){a||s();var n=null,d=e.util.createBuffer(),f=new Array(64),b={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return b.start=function(){b.messageLength=0,b.fullMessageLength=b.messageLength64=[];for(var I=b.messageLengthSize/4,v=0;v<I;++v)b.fullMessageLength.push(0);return d=e.util.createBuffer(),n={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},b},b.start(),b.update=function(I,v){v==="utf8"&&(I=e.util.encodeUtf8(I));var h=I.length;b.messageLength+=h,h=[h/4294967296>>>0,h>>>0];for(var y=b.fullMessageLength.length-1;y>=0;--y)b.fullMessageLength[y]+=h[1],h[1]=h[0]+(b.fullMessageLength[y]/4294967296>>>0),b.fullMessageLength[y]=b.fullMessageLength[y]>>>0,h[0]=h[1]/4294967296>>>0;return d.putBytes(I),c(n,f,d),(d.read>2048||d.length()===0)&&d.compact(),b},b.digest=function(){var I=e.util.createBuffer();I.putBytes(d.bytes());var v=b.fullMessageLength[b.fullMessageLength.length-1]+b.messageLengthSize,h=v&b.blockLength-1;I.putBytes(r.substr(0,b.blockLength-h));for(var y,m,E=b.fullMessageLength[0]*8,u=0;u<b.fullMessageLength.length-1;++u)y=b.fullMessageLength[u+1]*8,m=y/4294967296>>>0,E+=m,I.putInt32(E>>>0),E=y>>>0;I.putInt32(E);var p={h0:n.h0,h1:n.h1,h2:n.h2,h3:n.h3,h4:n.h4,h5:n.h5,h6:n.h6,h7:n.h7};c(p,f,I);var x=e.util.createBuffer();return x.putInt32(p.h0),x.putInt32(p.h1),x.putInt32(p.h2),x.putInt32(p.h3),x.putInt32(p.h4),x.putInt32(p.h5),x.putInt32(p.h6),x.putInt32(p.h7),x},b};var r=null,a=!1,i=null;function s(){r="",r+=e.util.fillString("\0",64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0}function c(n,d,f){for(var b,I,v,h,y,m,E,u,p,x,w,B,C,l,o,S=f.length();S>=64;){for(E=0;E<16;++E)d[E]=f.getInt32();for(;E<64;++E)b=d[E-2],b=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,I=d[E-15],I=(I>>>7|I<<25)^(I>>>18|I<<14)^I>>>3,d[E]=b+d[E-7]+I+d[E-16]|0;for(u=n.h0,p=n.h1,x=n.h2,w=n.h3,B=n.h4,C=n.h5,l=n.h6,o=n.h7,E=0;E<64;++E)h=(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7),y=l^B&(C^l),v=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),m=u&p|x&(u^p),b=o+h+y+i[E]+d[E],I=v+m,o=l,l=C,C=B,B=w+b>>>0,w=x,x=p,p=u,u=b+I>>>0;n.h0=n.h0+u|0,n.h1=n.h1+p|0,n.h2=n.h2+x|0,n.h3=n.h3+w|0,n.h4=n.h4+B|0,n.h5=n.h5+C|0,n.h6=n.h6+l|0,n.h7=n.h7+o|0,S-=64}}return Ti.exports}var Ii={exports:{}},zc;function Hl(){if(zc)return Ii.exports;zc=1;var e=Ue();Fe();var t=null;e.util.isNodejs&&!e.options.usePureJavaScript&&!process.versions["node-webkit"]&&(t=require("crypto"));var r=Ii.exports=e.prng=e.prng||{};return r.create=function(a){for(var i={plugin:a,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},s=a.md,c=new Array(32),n=0;n<32;++n)c[n]=s.create();i.pools=c,i.pool=0,i.generate=function(v,h){if(!h)return i.generateSync(v);var y=i.plugin.cipher,m=i.plugin.increment,E=i.plugin.formatKey,u=i.plugin.formatSeed,p=e.util.createBuffer();i.key=null,x();function x(w){if(w)return h(w);if(p.length()>=v)return h(null,p.getBytes(v));if(i.generated>1048575&&(i.key=null),i.key===null)return e.util.nextTick(function(){d(x)});var B=y(i.key,i.seed);i.generated+=B.length,p.putBytes(B),i.key=E(y(i.key,m(i.seed))),i.seed=u(y(i.key,i.seed)),e.util.setImmediate(x)}},i.generateSync=function(v){var h=i.plugin.cipher,y=i.plugin.increment,m=i.plugin.formatKey,E=i.plugin.formatSeed;i.key=null;for(var u=e.util.createBuffer();u.length()<v;){i.generated>1048575&&(i.key=null),i.key===null&&f();var p=h(i.key,i.seed);i.generated+=p.length,u.putBytes(p),i.key=m(h(i.key,y(i.seed))),i.seed=E(h(i.key,i.seed))}return u.getBytes(v)};function d(v){if(i.pools[0].messageLength>=32)return b(),v();var h=32-i.pools[0].messageLength<<5;i.seedFile(h,function(y,m){if(y)return v(y);i.collect(m),b(),v()})}function f(){if(i.pools[0].messageLength>=32)return b();var v=32-i.pools[0].messageLength<<5;i.collect(i.seedFileSync(v)),b()}function b(){i.reseeds=i.reseeds===4294967295?0:i.reseeds+1;var v=i.plugin.md.create();v.update(i.keyBytes);for(var h=1,y=0;y<32;++y)i.reseeds%h===0&&(v.update(i.pools[y].digest().getBytes()),i.pools[y].start()),h=h<<1;i.keyBytes=v.digest().getBytes(),v.start(),v.update(i.keyBytes);var m=v.digest().getBytes();i.key=i.plugin.formatKey(i.keyBytes),i.seed=i.plugin.formatSeed(m),i.generated=0}function I(v){var h=null,y=e.util.globalScope,m=y.crypto||y.msCrypto;m&&m.getRandomValues&&(h=function(o){return m.getRandomValues(o)});var E=e.util.createBuffer();if(h)for(;E.length()<v;){var u=Math.max(1,Math.min(v-E.length(),65536)/4),p=new Uint32Array(Math.floor(u));try{h(p);for(var x=0;x<p.length;++x)E.putInt32(p[x])}catch(o){if(!(typeof QuotaExceededError<"u"&&o instanceof QuotaExceededError))throw o}}if(E.length()<v)for(var w,B,C,l=Math.floor(Math.random()*65536);E.length()<v;){B=16807*(l&65535),w=16807*(l>>16),B+=(w&32767)<<16,B+=w>>15,B=(B&2147483647)+(B>>31),l=B&4294967295;for(var x=0;x<3;++x)C=l>>>(x<<3),C^=Math.floor(Math.random()*256),E.putByte(C&255)}return E.getBytes(v)}return t?(i.seedFile=function(v,h){t.randomBytes(v,function(y,m){if(y)return h(y);h(null,m.toString())})},i.seedFileSync=function(v){return t.randomBytes(v).toString()}):(i.seedFile=function(v,h){try{h(null,I(v))}catch(y){h(y)}},i.seedFileSync=I),i.collect=function(v){for(var h=v.length,y=0;y<h;++y)i.pools[i.pool].update(v.substr(y,1)),i.pool=i.pool===31?0:i.pool+1},i.collectInt=function(v,h){for(var y="",m=0;m<h;m+=8)y+=String.fromCharCode(v>>m&255);i.collect(y)},i.registerWorker=function(v){if(v===self)i.seedFile=function(y,m){function E(u){var p=u.data;p.forge&&p.forge.prng&&(self.removeEventListener("message",E),m(p.forge.prng.err,p.forge.prng.bytes))}self.addEventListener("message",E),self.postMessage({forge:{prng:{needed:y}}})};else{var h=function(y){var m=y.data;m.forge&&m.forge.prng&&i.seedFile(m.forge.prng.needed,function(E,u){v.postMessage({forge:{prng:{err:E,bytes:u}}})})};v.addEventListener("message",h)}},i},Ii.exports}var Wc;function Yt(){if(Wc)return oa.exports;Wc=1;var e=Ue();return wr(),Gl(),Hl(),Fe(),(function(){if(e.random&&e.random.getBytes){oa.exports=e.random;return}(function(t){var r={},a=new Array(4),i=e.util.createBuffer();r.formatKey=function(v){var h=e.util.createBuffer(v);return v=new Array(4),v[0]=h.getInt32(),v[1]=h.getInt32(),v[2]=h.getInt32(),v[3]=h.getInt32(),e.aes._expandKey(v,!1)},r.formatSeed=function(v){var h=e.util.createBuffer(v);return v=new Array(4),v[0]=h.getInt32(),v[1]=h.getInt32(),v[2]=h.getInt32(),v[3]=h.getInt32(),v},r.cipher=function(v,h){return e.aes._updateBlock(v,h,a,!1),i.putInt32(a[0]),i.putInt32(a[1]),i.putInt32(a[2]),i.putInt32(a[3]),i.getBytes()},r.increment=function(v){return++v[3],v},r.md=e.md.sha256;function s(){var v=e.prng.create(r);return v.getBytes=function(h,y){return v.generate(h,y)},v.getBytesSync=function(h){return v.generate(h)},v}var c=s(),n=null,d=e.util.globalScope,f=d.crypto||d.msCrypto;if(f&&f.getRandomValues&&(n=function(v){return f.getRandomValues(v)}),e.options.usePureJavaScript||!e.util.isNodejs&&!n){if(c.collectInt(+new Date,32),typeof navigator<"u"){var b="";for(var I in navigator)try{typeof navigator[I]=="string"&&(b+=navigator[I])}catch{}c.collect(b),b=null}t&&(t().mousemove(function(v){c.collectInt(v.clientX,16),c.collectInt(v.clientY,16)}),t().keypress(function(v){c.collectInt(v.charCode,8)}))}if(!e.random)e.random=c;else for(var I in c)e.random[I]=c[I];e.random.createInstance=s,oa.exports=e.random})(typeof jQuery<"u"?jQuery:null)})(),oa.exports}var Ai,Yc;function zl(){if(Yc)return Ai;Yc=1;var e=Ue();Fe();var t=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],r=[1,2,3,5],a=function(c,n){return c<<n&65535|(c&65535)>>16-n},i=function(c,n){return(c&65535)>>n|c<<16-n&65535};Ai=e.rc2=e.rc2||{},e.rc2.expandKey=function(c,n){typeof c=="string"&&(c=e.util.createBuffer(c)),n=n||128;var d=c,f=c.length(),b=n,I=Math.ceil(b/8),v=255>>(b&7),h;for(h=f;h<128;h++)d.putByte(t[d.at(h-1)+d.at(h-f)&255]);for(d.setAt(128-I,t[d.at(128-I)&v]),h=127-I;h>=0;h--)d.setAt(h,t[d.at(h+1)^d.at(h+I)]);return d};var s=function(c,n,d){var f=!1,b=null,I=null,v=null,h,y,m,E,u=[];for(c=e.rc2.expandKey(c,n),m=0;m<64;m++)u.push(c.getInt16Le());d?(h=function(w){for(m=0;m<4;m++)w[m]+=u[E]+(w[(m+3)%4]&w[(m+2)%4])+(~w[(m+3)%4]&w[(m+1)%4]),w[m]=a(w[m],r[m]),E++},y=function(w){for(m=0;m<4;m++)w[m]+=u[w[(m+3)%4]&63]}):(h=function(w){for(m=3;m>=0;m--)w[m]=i(w[m],r[m]),w[m]-=u[E]+(w[(m+3)%4]&w[(m+2)%4])+(~w[(m+3)%4]&w[(m+1)%4]),E--},y=function(w){for(m=3;m>=0;m--)w[m]-=u[w[(m+3)%4]&63]});var p=function(w){var B=[];for(m=0;m<4;m++){var C=b.getInt16Le();v!==null&&(d?C^=v.getInt16Le():v.putInt16Le(C)),B.push(C&65535)}E=d?0:63;for(var l=0;l<w.length;l++)for(var o=0;o<w[l][0];o++)w[l][1](B);for(m=0;m<4;m++)v!==null&&(d?v.putInt16Le(B[m]):B[m]^=v.getInt16Le()),I.putInt16Le(B[m])},x=null;return x={start:function(w,B){w&&typeof w=="string"&&(w=e.util.createBuffer(w)),f=!1,b=e.util.createBuffer(),I=B||new e.util.createBuffer,v=w,x.output=I},update:function(w){for(f||b.putBuffer(w);b.length()>=8;)p([[5,h],[1,y],[6,h],[1,y],[5,h]])},finish:function(w){var B=!0;if(d)if(w)B=w(8,b,!d);else{var C=b.length()===8?8:8-b.length();b.fillWithByte(C,C)}if(B&&(f=!0,x.update()),!d&&(B=b.length()===0,B))if(w)B=w(8,I,!d);else{var l=I.length(),o=I.at(l-1);o>l?B=!1:I.truncate(o)}return B}},x};return e.rc2.startEncrypting=function(c,n,d){var f=e.rc2.createEncryptionCipher(c,128);return f.start(n,d),f},e.rc2.createEncryptionCipher=function(c,n){return s(c,n,!0)},e.rc2.startDecrypting=function(c,n,d){var f=e.rc2.createDecryptionCipher(c,128);return f.start(n,d),f},e.rc2.createDecryptionCipher=function(c,n){return s(c,n,!1)},Ai}var _i,Qc;function wa(){if(Qc)return _i;Qc=1;var e=Ue();_i=e.jsbn=e.jsbn||{};var t;function r(R,L,M){this.data=[],R!=null&&(typeof R=="number"?this.fromNumber(R,L,M):L==null&&typeof R!="string"?this.fromString(R,256):this.fromString(R,L))}e.jsbn.BigInteger=r;function a(){return new r(null)}function i(R,L,M,_,$,P){for(;--P>=0;){var j=L*this.data[R++]+M.data[_]+$;$=Math.floor(j/67108864),M.data[_++]=j&67108863}return $}function s(R,L,M,_,$,P){for(var j=L&32767,G=L>>15;--P>=0;){var W=this.data[R]&32767,ee=this.data[R++]>>15,ie=G*W+ee*j;W=j*W+((ie&32767)<<15)+M.data[_]+($&1073741823),$=(W>>>30)+(ie>>>15)+G*ee+($>>>30),M.data[_++]=W&1073741823}return $}function c(R,L,M,_,$,P){for(var j=L&16383,G=L>>14;--P>=0;){var W=this.data[R]&16383,ee=this.data[R++]>>14,ie=G*W+ee*j;W=j*W+((ie&16383)<<14)+M.data[_]+$,$=(W>>28)+(ie>>14)+G*ee,M.data[_++]=W&268435455}return $}typeof navigator>"u"?(r.prototype.am=c,t=28):navigator.appName=="Microsoft Internet Explorer"?(r.prototype.am=s,t=30):navigator.appName!="Netscape"?(r.prototype.am=i,t=26):(r.prototype.am=c,t=28),r.prototype.DB=t,r.prototype.DM=(1<<t)-1,r.prototype.DV=1<<t;var n=52;r.prototype.FV=Math.pow(2,n),r.prototype.F1=n-t,r.prototype.F2=2*t-n;var d="0123456789abcdefghijklmnopqrstuvwxyz",f=new Array,b,I;for(b=48,I=0;I<=9;++I)f[b++]=I;for(b=97,I=10;I<36;++I)f[b++]=I;for(b=65,I=10;I<36;++I)f[b++]=I;function v(R){return d.charAt(R)}function h(R,L){var M=f[R.charCodeAt(L)];return M??-1}function y(R){for(var L=this.t-1;L>=0;--L)R.data[L]=this.data[L];R.t=this.t,R.s=this.s}function m(R){this.t=1,this.s=R<0?-1:0,R>0?this.data[0]=R:R<-1?this.data[0]=R+this.DV:this.t=0}function E(R){var L=a();return L.fromInt(R),L}function u(R,L){var M;if(L==16)M=4;else if(L==8)M=3;else if(L==256)M=8;else if(L==2)M=1;else if(L==32)M=5;else if(L==4)M=2;else{this.fromRadix(R,L);return}this.t=0,this.s=0;for(var _=R.length,$=!1,P=0;--_>=0;){var j=M==8?R[_]&255:h(R,_);if(j<0){R.charAt(_)=="-"&&($=!0);continue}$=!1,P==0?this.data[this.t++]=j:P+M>this.DB?(this.data[this.t-1]|=(j&(1<<this.DB-P)-1)<<P,this.data[this.t++]=j>>this.DB-P):this.data[this.t-1]|=j<<P,P+=M,P>=this.DB&&(P-=this.DB)}M==8&&(R[0]&128)!=0&&(this.s=-1,P>0&&(this.data[this.t-1]|=(1<<this.DB-P)-1<<P)),this.clamp(),$&&r.ZERO.subTo(this,this)}function p(){for(var R=this.s&this.DM;this.t>0&&this.data[this.t-1]==R;)--this.t}function x(R){if(this.s<0)return"-"+this.negate().toString(R);var L;if(R==16)L=4;else if(R==8)L=3;else if(R==2)L=1;else if(R==32)L=5;else if(R==4)L=2;else return this.toRadix(R);var M=(1<<L)-1,_,$=!1,P="",j=this.t,G=this.DB-j*this.DB%L;if(j-- >0)for(G<this.DB&&(_=this.data[j]>>G)>0&&($=!0,P=v(_));j>=0;)G<L?(_=(this.data[j]&(1<<G)-1)<<L-G,_|=this.data[--j]>>(G+=this.DB-L)):(_=this.data[j]>>(G-=L)&M,G<=0&&(G+=this.DB,--j)),_>0&&($=!0),$&&(P+=v(_));return $?P:"0"}function w(){var R=a();return r.ZERO.subTo(this,R),R}function B(){return this.s<0?this.negate():this}function C(R){var L=this.s-R.s;if(L!=0)return L;var M=this.t;if(L=M-R.t,L!=0)return this.s<0?-L:L;for(;--M>=0;)if((L=this.data[M]-R.data[M])!=0)return L;return 0}function l(R){var L=1,M;return(M=R>>>16)!=0&&(R=M,L+=16),(M=R>>8)!=0&&(R=M,L+=8),(M=R>>4)!=0&&(R=M,L+=4),(M=R>>2)!=0&&(R=M,L+=2),(M=R>>1)!=0&&(R=M,L+=1),L}function o(){return this.t<=0?0:this.DB*(this.t-1)+l(this.data[this.t-1]^this.s&this.DM)}function S(R,L){var M;for(M=this.t-1;M>=0;--M)L.data[M+R]=this.data[M];for(M=R-1;M>=0;--M)L.data[M]=0;L.t=this.t+R,L.s=this.s}function A(R,L){for(var M=R;M<this.t;++M)L.data[M-R]=this.data[M];L.t=Math.max(this.t-R,0),L.s=this.s}function N(R,L){var M=R%this.DB,_=this.DB-M,$=(1<<_)-1,P=Math.floor(R/this.DB),j=this.s<<M&this.DM,G;for(G=this.t-1;G>=0;--G)L.data[G+P+1]=this.data[G]>>_|j,j=(this.data[G]&$)<<M;for(G=P-1;G>=0;--G)L.data[G]=0;L.data[P]=j,L.t=this.t+P+1,L.s=this.s,L.clamp()}function D(R,L){L.s=this.s;var M=Math.floor(R/this.DB);if(M>=this.t){L.t=0;return}var _=R%this.DB,$=this.DB-_,P=(1<<_)-1;L.data[0]=this.data[M]>>_;for(var j=M+1;j<this.t;++j)L.data[j-M-1]|=(this.data[j]&P)<<$,L.data[j-M]=this.data[j]>>_;_>0&&(L.data[this.t-M-1]|=(this.s&P)<<$),L.t=this.t-M,L.clamp()}function q(R,L){for(var M=0,_=0,$=Math.min(R.t,this.t);M<$;)_+=this.data[M]-R.data[M],L.data[M++]=_&this.DM,_>>=this.DB;if(R.t<this.t){for(_-=R.s;M<this.t;)_+=this.data[M],L.data[M++]=_&this.DM,_>>=this.DB;_+=this.s}else{for(_+=this.s;M<R.t;)_-=R.data[M],L.data[M++]=_&this.DM,_>>=this.DB;_-=R.s}L.s=_<0?-1:0,_<-1?L.data[M++]=this.DV+_:_>0&&(L.data[M++]=_),L.t=M,L.clamp()}function H(R,L){var M=this.abs(),_=R.abs(),$=M.t;for(L.t=$+_.t;--$>=0;)L.data[$]=0;for($=0;$<_.t;++$)L.data[$+M.t]=M.am(0,_.data[$],L,$,0,M.t);L.s=0,L.clamp(),this.s!=R.s&&r.ZERO.subTo(L,L)}function Y(R){for(var L=this.abs(),M=R.t=2*L.t;--M>=0;)R.data[M]=0;for(M=0;M<L.t-1;++M){var _=L.am(M,L.data[M],R,2*M,0,1);(R.data[M+L.t]+=L.am(M+1,2*L.data[M],R,2*M+1,_,L.t-M-1))>=L.DV&&(R.data[M+L.t]-=L.DV,R.data[M+L.t+1]=1)}R.t>0&&(R.data[R.t-1]+=L.am(M,L.data[M],R,2*M,0,1)),R.s=0,R.clamp()}function Q(R,L,M){var _=R.abs();if(!(_.t<=0)){var $=this.abs();if($.t<_.t){L?.fromInt(0),M!=null&&this.copyTo(M);return}M==null&&(M=a());var P=a(),j=this.s,G=R.s,W=this.DB-l(_.data[_.t-1]);W>0?(_.lShiftTo(W,P),$.lShiftTo(W,M)):(_.copyTo(P),$.copyTo(M));var ee=P.t,ie=P.data[ee-1];if(ie!=0){var ce=ie*(1<<this.F1)+(ee>1?P.data[ee-2]>>this.F2:0),ue=this.FV/ce,de=(1<<this.F1)/ce,ve=1<<this.F2,Ae=M.t,$e=Ae-ee,De=L??a();for(P.dlShiftTo($e,De),M.compareTo(De)>=0&&(M.data[M.t++]=1,M.subTo(De,M)),r.ONE.dlShiftTo(ee,De),De.subTo(P,P);P.t<ee;)P.data[P.t++]=0;for(;--$e>=0;){var Me=M.data[--Ae]==ie?this.DM:Math.floor(M.data[Ae]*ue+(M.data[Ae-1]+ve)*de);if((M.data[Ae]+=P.am(0,Me,M,$e,0,ee))<Me)for(P.dlShiftTo($e,De),M.subTo(De,M);M.data[Ae]<--Me;)M.subTo(De,M)}L!=null&&(M.drShiftTo(ee,L),j!=G&&r.ZERO.subTo(L,L)),M.t=ee,M.clamp(),W>0&&M.rShiftTo(W,M),j<0&&r.ZERO.subTo(M,M)}}}function J(R){var L=a();return this.abs().divRemTo(R,null,L),this.s<0&&L.compareTo(r.ZERO)>0&&R.subTo(L,L),L}function ne(R){this.m=R}function se(R){return R.s<0||R.compareTo(this.m)>=0?R.mod(this.m):R}function fe(R){return R}function he(R){R.divRemTo(this.m,null,R)}function we(R,L,M){R.multiplyTo(L,M),this.reduce(M)}function Se(R,L){R.squareTo(L),this.reduce(L)}ne.prototype.convert=se,ne.prototype.revert=fe,ne.prototype.reduce=he,ne.prototype.mulTo=we,ne.prototype.sqrTo=Se;function le(){if(this.t<1)return 0;var R=this.data[0];if((R&1)==0)return 0;var L=R&3;return L=L*(2-(R&15)*L)&15,L=L*(2-(R&255)*L)&255,L=L*(2-((R&65535)*L&65535))&65535,L=L*(2-R*L%this.DV)%this.DV,L>0?this.DV-L:-L}function Ne(R){this.m=R,this.mp=R.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<R.DB-15)-1,this.mt2=2*R.t}function pe(R){var L=a();return R.abs().dlShiftTo(this.m.t,L),L.divRemTo(this.m,null,L),R.s<0&&L.compareTo(r.ZERO)>0&&this.m.subTo(L,L),L}function tt(R){var L=a();return R.copyTo(L),this.reduce(L),L}function ke(R){for(;R.t<=this.mt2;)R.data[R.t++]=0;for(var L=0;L<this.m.t;++L){var M=R.data[L]&32767,_=M*this.mpl+((M*this.mph+(R.data[L]>>15)*this.mpl&this.um)<<15)&R.DM;for(M=L+this.m.t,R.data[M]+=this.m.am(0,_,R,L,0,this.m.t);R.data[M]>=R.DV;)R.data[M]-=R.DV,R.data[++M]++}R.clamp(),R.drShiftTo(this.m.t,R),R.compareTo(this.m)>=0&&R.subTo(this.m,R)}function T(R,L){R.squareTo(L),this.reduce(L)}function U(R,L,M){R.multiplyTo(L,M),this.reduce(M)}Ne.prototype.convert=pe,Ne.prototype.revert=tt,Ne.prototype.reduce=ke,Ne.prototype.mulTo=U,Ne.prototype.sqrTo=T;function O(){return(this.t>0?this.data[0]&1:this.s)==0}function g(R,L){if(R>4294967295||R<1)return r.ONE;var M=a(),_=a(),$=L.convert(this),P=l(R)-1;for($.copyTo(M);--P>=0;)if(L.sqrTo(M,_),(R&1<<P)>0)L.mulTo(_,$,M);else{var j=M;M=_,_=j}return L.revert(M)}function k(R,L){var M;return R<256||L.isEven()?M=new ne(L):M=new Ne(L),this.exp(R,M)}r.prototype.copyTo=y,r.prototype.fromInt=m,r.prototype.fromString=u,r.prototype.clamp=p,r.prototype.dlShiftTo=S,r.prototype.drShiftTo=A,r.prototype.lShiftTo=N,r.prototype.rShiftTo=D,r.prototype.subTo=q,r.prototype.multiplyTo=H,r.prototype.squareTo=Y,r.prototype.divRemTo=Q,r.prototype.invDigit=le,r.prototype.isEven=O,r.prototype.exp=g,r.prototype.toString=x,r.prototype.negate=w,r.prototype.abs=B,r.prototype.compareTo=C,r.prototype.bitLength=o,r.prototype.mod=J,r.prototype.modPowInt=k,r.ZERO=E(0),r.ONE=E(1);function z(){var R=a();return this.copyTo(R),R}function K(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function te(){return this.t==0?this.s:this.data[0]<<24>>24}function ge(){return this.t==0?this.s:this.data[0]<<16>>16}function me(R){return Math.floor(Math.LN2*this.DB/Math.log(R))}function Z(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function ye(R){if(R==null&&(R=10),this.signum()==0||R<2||R>36)return"0";var L=this.chunkSize(R),M=Math.pow(R,L),_=E(M),$=a(),P=a(),j="";for(this.divRemTo(_,$,P);$.signum()>0;)j=(M+P.intValue()).toString(R).substr(1)+j,$.divRemTo(_,$,P);return P.intValue().toString(R)+j}function xe(R,L){this.fromInt(0),L==null&&(L=10);for(var M=this.chunkSize(L),_=Math.pow(L,M),$=!1,P=0,j=0,G=0;G<R.length;++G){var W=h(R,G);if(W<0){R.charAt(G)=="-"&&this.signum()==0&&($=!0);continue}j=L*j+W,++P>=M&&(this.dMultiply(_),this.dAddOffset(j,0),P=0,j=0)}P>0&&(this.dMultiply(Math.pow(L,P)),this.dAddOffset(j,0)),$&&r.ZERO.subTo(this,this)}function Re(R,L,M){if(typeof L=="number")if(R<2)this.fromInt(1);else for(this.fromNumber(R,M),this.testBit(R-1)||this.bitwiseTo(r.ONE.shiftLeft(R-1),Ye,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(L);)this.dAddOffset(2,0),this.bitLength()>R&&this.subTo(r.ONE.shiftLeft(R-1),this);else{var _=new Array,$=R&7;_.length=(R>>3)+1,L.nextBytes(_),$>0?_[0]&=(1<<$)-1:_[0]=0,this.fromString(_,256)}}function Ie(){var R=this.t,L=new Array;L[0]=this.s;var M=this.DB-R*this.DB%8,_,$=0;if(R-- >0)for(M<this.DB&&(_=this.data[R]>>M)!=(this.s&this.DM)>>M&&(L[$++]=_|this.s<<this.DB-M);R>=0;)M<8?(_=(this.data[R]&(1<<M)-1)<<8-M,_|=this.data[--R]>>(M+=this.DB-8)):(_=this.data[R]>>(M-=8)&255,M<=0&&(M+=this.DB,--R)),(_&128)!=0&&(_|=-256),$==0&&(this.s&128)!=(_&128)&&++$,($>0||_!=this.s)&&(L[$++]=_);return L}function Le(R){return this.compareTo(R)==0}function je(R){return this.compareTo(R)<0?this:R}function ze(R){return this.compareTo(R)>0?this:R}function Ge(R,L,M){var _,$,P=Math.min(R.t,this.t);for(_=0;_<P;++_)M.data[_]=L(this.data[_],R.data[_]);if(R.t<this.t){for($=R.s&this.DM,_=P;_<this.t;++_)M.data[_]=L(this.data[_],$);M.t=this.t}else{for($=this.s&this.DM,_=P;_<R.t;++_)M.data[_]=L($,R.data[_]);M.t=R.t}M.s=L(this.s,R.s),M.clamp()}function Ke(R,L){return R&L}function qe(R){var L=a();return this.bitwiseTo(R,Ke,L),L}function Ye(R,L){return R|L}function rt(R){var L=a();return this.bitwiseTo(R,Ye,L),L}function nt(R,L){return R^L}function yt(R){var L=a();return this.bitwiseTo(R,nt,L),L}function at(R,L){return R&~L}function xt(R){var L=a();return this.bitwiseTo(R,at,L),L}function It(){for(var R=a(),L=0;L<this.t;++L)R.data[L]=this.DM&~this.data[L];return R.t=this.t,R.s=~this.s,R}function mt(R){var L=a();return R<0?this.rShiftTo(-R,L):this.lShiftTo(R,L),L}function Ct(R){var L=a();return R<0?this.lShiftTo(-R,L):this.rShiftTo(R,L),L}function _t(R){if(R==0)return-1;var L=0;return(R&65535)==0&&(R>>=16,L+=16),(R&255)==0&&(R>>=8,L+=8),(R&15)==0&&(R>>=4,L+=4),(R&3)==0&&(R>>=2,L+=2),(R&1)==0&&++L,L}function ht(){for(var R=0;R<this.t;++R)if(this.data[R]!=0)return R*this.DB+_t(this.data[R]);return this.s<0?this.t*this.DB:-1}function Ot(R){for(var L=0;R!=0;)R&=R-1,++L;return L}function Rt(){for(var R=0,L=this.s&this.DM,M=0;M<this.t;++M)R+=Ot(this.data[M]^L);return R}function Qt(R){var L=Math.floor(R/this.DB);return L>=this.t?this.s!=0:(this.data[L]&1<<R%this.DB)!=0}function pr(R,L){var M=r.ONE.shiftLeft(R);return this.bitwiseTo(M,L,M),M}function it(R){return this.changeBit(R,Ye)}function st(R){return this.changeBit(R,at)}function ot(R){return this.changeBit(R,nt)}function Xe(R,L){for(var M=0,_=0,$=Math.min(R.t,this.t);M<$;)_+=this.data[M]+R.data[M],L.data[M++]=_&this.DM,_>>=this.DB;if(R.t<this.t){for(_+=R.s;M<this.t;)_+=this.data[M],L.data[M++]=_&this.DM,_>>=this.DB;_+=this.s}else{for(_+=this.s;M<R.t;)_+=R.data[M],L.data[M++]=_&this.DM,_>>=this.DB;_+=R.s}L.s=_<0?-1:0,_>0?L.data[M++]=_:_<-1&&(L.data[M++]=this.DV+_),L.t=M,L.clamp()}function Je(R){var L=a();return this.addTo(R,L),L}function He(R){var L=a();return this.subTo(R,L),L}function ct(R){var L=a();return this.multiplyTo(R,L),L}function ut(R){var L=a();return this.divRemTo(R,L,null),L}function lt(R){var L=a();return this.divRemTo(R,null,L),L}function Ze(R){var L=a(),M=a();return this.divRemTo(R,L,M),new Array(L,M)}function ft(R){this.data[this.t]=this.am(0,R-1,this,0,0,this.t),++this.t,this.clamp()}function Ve(R,L){if(R!=0){for(;this.t<=L;)this.data[this.t++]=0;for(this.data[L]+=R;this.data[L]>=this.DV;)this.data[L]-=this.DV,++L>=this.t&&(this.data[this.t++]=0),++this.data[L]}}function We(){}function et(R){return R}function dt(R,L,M){R.multiplyTo(L,M)}function pt(R,L){R.squareTo(L)}We.prototype.convert=et,We.prototype.revert=et,We.prototype.mulTo=dt,We.prototype.sqrTo=pt;function mn(R){return this.exp(R,new We)}function Xt(R,L,M){var _=Math.min(this.t+R.t,L);for(M.s=0,M.t=_;_>0;)M.data[--_]=0;var $;for($=M.t-this.t;_<$;++_)M.data[_+this.t]=this.am(0,R.data[_],M,_,0,this.t);for($=Math.min(R.t,L);_<$;++_)this.am(0,R.data[_],M,_,0,L-_);M.clamp()}function Cn(R,L,M){--L;var _=M.t=this.t+R.t-L;for(M.s=0;--_>=0;)M.data[_]=0;for(_=Math.max(L-this.t,0);_<R.t;++_)M.data[this.t+_-L]=this.am(L-_,R.data[_],M,0,0,this.t+_-L);M.clamp(),M.drShiftTo(1,M)}function Jt(R){this.r2=a(),this.q3=a(),r.ONE.dlShiftTo(2*R.t,this.r2),this.mu=this.r2.divide(R),this.m=R}function En(R){if(R.s<0||R.t>2*this.m.t)return R.mod(this.m);if(R.compareTo(this.m)<0)return R;var L=a();return R.copyTo(L),this.reduce(L),L}function Sn(R){return R}function xn(R){for(R.drShiftTo(this.m.t-1,this.r2),R.t>this.m.t+1&&(R.t=this.m.t+1,R.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);R.compareTo(this.r2)<0;)R.dAddOffset(1,this.m.t+1);for(R.subTo(this.r2,R);R.compareTo(this.m)>=0;)R.subTo(this.m,R)}function Zt(R,L){R.squareTo(L),this.reduce(L)}function bn(R,L,M){R.multiplyTo(L,M),this.reduce(M)}Jt.prototype.convert=En,Jt.prototype.revert=Sn,Jt.prototype.reduce=xn,Jt.prototype.mulTo=bn,Jt.prototype.sqrTo=Zt;function qr(R,L){var M=R.bitLength(),_,$=E(1),P;if(M<=0)return $;M<18?_=1:M<48?_=3:M<144?_=4:M<768?_=5:_=6,M<8?P=new ne(L):L.isEven()?P=new Jt(L):P=new Ne(L);var j=new Array,G=3,W=_-1,ee=(1<<_)-1;if(j[1]=P.convert(this),_>1){var ie=a();for(P.sqrTo(j[1],ie);G<=ee;)j[G]=a(),P.mulTo(ie,j[G-2],j[G]),G+=2}var ce=R.t-1,ue,de=!0,ve=a(),Ae;for(M=l(R.data[ce])-1;ce>=0;){for(M>=W?ue=R.data[ce]>>M-W&ee:(ue=(R.data[ce]&(1<<M+1)-1)<<W-M,ce>0&&(ue|=R.data[ce-1]>>this.DB+M-W)),G=_;(ue&1)==0;)ue>>=1,--G;if((M-=G)<0&&(M+=this.DB,--ce),de)j[ue].copyTo($),de=!1;else{for(;G>1;)P.sqrTo($,ve),P.sqrTo(ve,$),G-=2;G>0?P.sqrTo($,ve):(Ae=$,$=ve,ve=Ae),P.mulTo(ve,j[ue],$)}for(;ce>=0&&(R.data[ce]&1<<M)==0;)P.sqrTo($,ve),Ae=$,$=ve,ve=Ae,--M<0&&(M=this.DB-1,--ce)}return P.revert($)}function sr(R){var L=this.s<0?this.negate():this.clone(),M=R.s<0?R.negate():R.clone();if(L.compareTo(M)<0){var _=L;L=M,M=_}var $=L.getLowestSetBit(),P=M.getLowestSetBit();if(P<0)return L;for($<P&&(P=$),P>0&&(L.rShiftTo(P,L),M.rShiftTo(P,M));L.signum()>0;)($=L.getLowestSetBit())>0&&L.rShiftTo($,L),($=M.getLowestSetBit())>0&&M.rShiftTo($,M),L.compareTo(M)>=0?(L.subTo(M,L),L.rShiftTo(1,L)):(M.subTo(L,M),M.rShiftTo(1,M));return P>0&&M.lShiftTo(P,M),M}function jr(R){if(R<=0)return 0;var L=this.DV%R,M=this.s<0?R-1:0;if(this.t>0)if(L==0)M=this.data[0]%R;else for(var _=this.t-1;_>=0;--_)M=(L*M+this.data[_])%R;return M}function er(R){var L=R.isEven();if(this.isEven()&&L||R.signum()==0)return r.ZERO;for(var M=R.clone(),_=this.clone(),$=E(1),P=E(0),j=E(0),G=E(1);M.signum()!=0;){for(;M.isEven();)M.rShiftTo(1,M),L?((!$.isEven()||!P.isEven())&&($.addTo(this,$),P.subTo(R,P)),$.rShiftTo(1,$)):P.isEven()||P.subTo(R,P),P.rShiftTo(1,P);for(;_.isEven();)_.rShiftTo(1,_),L?((!j.isEven()||!G.isEven())&&(j.addTo(this,j),G.subTo(R,G)),j.rShiftTo(1,j)):G.isEven()||G.subTo(R,G),G.rShiftTo(1,G);M.compareTo(_)>=0?(M.subTo(_,M),L&&$.subTo(j,$),P.subTo(G,P)):(_.subTo(M,_),L&&j.subTo($,j),G.subTo(P,G))}if(_.compareTo(r.ONE)!=0)return r.ZERO;if(G.compareTo(R)>=0)return G.subtract(R);if(G.signum()<0)G.addTo(R,G);else return G;return G.signum()<0?G.add(R):G}var wt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],or=(1<<26)/wt[wt.length-1];function tr(R){var L,M=this.abs();if(M.t==1&&M.data[0]<=wt[wt.length-1]){for(L=0;L<wt.length;++L)if(M.data[0]==wt[L])return!0;return!1}if(M.isEven())return!1;for(L=1;L<wt.length;){for(var _=wt[L],$=L+1;$<wt.length&&_<or;)_*=wt[$++];for(_=M.modInt(_);L<$;)if(_%wt[L++]==0)return!1}return M.millerRabin(R)}function Tn(R){var L=this.subtract(r.ONE),M=L.getLowestSetBit();if(M<=0)return!1;for(var _=L.shiftRight(M),$=mr(),P,j=0;j<R;++j){do P=new r(this.bitLength(),$);while(P.compareTo(r.ONE)<=0||P.compareTo(L)>=0);var G=P.modPow(_,this);if(G.compareTo(r.ONE)!=0&&G.compareTo(L)!=0){for(var W=1;W++<M&&G.compareTo(L)!=0;)if(G=G.modPowInt(2,this),G.compareTo(r.ONE)==0)return!1;if(G.compareTo(L)!=0)return!1}}return!0}function mr(){return{nextBytes:function(R){for(var L=0;L<R.length;++L)R[L]=Math.floor(Math.random()*256)}}}return r.prototype.chunkSize=me,r.prototype.toRadix=ye,r.prototype.fromRadix=xe,r.prototype.fromNumber=Re,r.prototype.bitwiseTo=Ge,r.prototype.changeBit=pr,r.prototype.addTo=Xe,r.prototype.dMultiply=ft,r.prototype.dAddOffset=Ve,r.prototype.multiplyLowerTo=Xt,r.prototype.multiplyUpperTo=Cn,r.prototype.modInt=jr,r.prototype.millerRabin=Tn,r.prototype.clone=z,r.prototype.intValue=K,r.prototype.byteValue=te,r.prototype.shortValue=ge,r.prototype.signum=Z,r.prototype.toByteArray=Ie,r.prototype.equals=Le,r.prototype.min=je,r.prototype.max=ze,r.prototype.and=qe,r.prototype.or=rt,r.prototype.xor=yt,r.prototype.andNot=xt,r.prototype.not=It,r.prototype.shiftLeft=mt,r.prototype.shiftRight=Ct,r.prototype.getLowestSetBit=ht,r.prototype.bitCount=Rt,r.prototype.testBit=Qt,r.prototype.setBit=it,r.prototype.clearBit=st,r.prototype.flipBit=ot,r.prototype.add=Je,r.prototype.subtract=He,r.prototype.multiply=ct,r.prototype.divide=ut,r.prototype.remainder=lt,r.prototype.divideAndRemainder=Ze,r.prototype.modPow=qr,r.prototype.modInverse=er,r.prototype.pow=mn,r.prototype.gcd=sr,r.prototype.isProbablePrime=tr,_i}var wi={exports:{}},Bi={exports:{}},Xc;function Mn(){if(Xc)return Bi.exports;Xc=1;var e=Ue();dr(),Fe();var t=Bi.exports=e.sha1=e.sha1||{};e.md.sha1=e.md.algorithms.sha1=t,t.create=function(){a||i();var c=null,n=e.util.createBuffer(),d=new Array(80),f={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return f.start=function(){f.messageLength=0,f.fullMessageLength=f.messageLength64=[];for(var b=f.messageLengthSize/4,I=0;I<b;++I)f.fullMessageLength.push(0);return n=e.util.createBuffer(),c={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},f},f.start(),f.update=function(b,I){I==="utf8"&&(b=e.util.encodeUtf8(b));var v=b.length;f.messageLength+=v,v=[v/4294967296>>>0,v>>>0];for(var h=f.fullMessageLength.length-1;h>=0;--h)f.fullMessageLength[h]+=v[1],v[1]=v[0]+(f.fullMessageLength[h]/4294967296>>>0),f.fullMessageLength[h]=f.fullMessageLength[h]>>>0,v[0]=v[1]/4294967296>>>0;return n.putBytes(b),s(c,d,n),(n.read>2048||n.length()===0)&&n.compact(),f},f.digest=function(){var b=e.util.createBuffer();b.putBytes(n.bytes());var I=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize,v=I&f.blockLength-1;b.putBytes(r.substr(0,f.blockLength-v));for(var h,y,m=f.fullMessageLength[0]*8,E=0;E<f.fullMessageLength.length-1;++E)h=f.fullMessageLength[E+1]*8,y=h/4294967296>>>0,m+=y,b.putInt32(m>>>0),m=h>>>0;b.putInt32(m);var u={h0:c.h0,h1:c.h1,h2:c.h2,h3:c.h3,h4:c.h4};s(u,d,b);var p=e.util.createBuffer();return p.putInt32(u.h0),p.putInt32(u.h1),p.putInt32(u.h2),p.putInt32(u.h3),p.putInt32(u.h4),p},f};var r=null,a=!1;function i(){r="",r+=e.util.fillString("\0",64),a=!0}function s(c,n,d){for(var f,b,I,v,h,y,m,E,u=d.length();u>=64;){for(b=c.h0,I=c.h1,v=c.h2,h=c.h3,y=c.h4,E=0;E<16;++E)f=d.getInt32(),n[E]=f,m=h^I&(v^h),f=(b<<5|b>>>27)+m+y+1518500249+f,y=h,h=v,v=(I<<30|I>>>2)>>>0,I=b,b=f;for(;E<20;++E)f=n[E-3]^n[E-8]^n[E-14]^n[E-16],f=f<<1|f>>>31,n[E]=f,m=h^I&(v^h),f=(b<<5|b>>>27)+m+y+1518500249+f,y=h,h=v,v=(I<<30|I>>>2)>>>0,I=b,b=f;for(;E<32;++E)f=n[E-3]^n[E-8]^n[E-14]^n[E-16],f=f<<1|f>>>31,n[E]=f,m=I^v^h,f=(b<<5|b>>>27)+m+y+1859775393+f,y=h,h=v,v=(I<<30|I>>>2)>>>0,I=b,b=f;for(;E<40;++E)f=n[E-6]^n[E-16]^n[E-28]^n[E-32],f=f<<2|f>>>30,n[E]=f,m=I^v^h,f=(b<<5|b>>>27)+m+y+1859775393+f,y=h,h=v,v=(I<<30|I>>>2)>>>0,I=b,b=f;for(;E<60;++E)f=n[E-6]^n[E-16]^n[E-28]^n[E-32],f=f<<2|f>>>30,n[E]=f,m=I&v|h&(I^v),f=(b<<5|b>>>27)+m+y+2400959708+f,y=h,h=v,v=(I<<30|I>>>2)>>>0,I=b,b=f;for(;E<80;++E)f=n[E-6]^n[E-16]^n[E-28]^n[E-32],f=f<<2|f>>>30,n[E]=f,m=I^v^h,f=(b<<5|b>>>27)+m+y+3395469782+f,y=h,h=v,v=(I<<30|I>>>2)>>>0,I=b,b=f;c.h0=c.h0+b|0,c.h1=c.h1+I|0,c.h2=c.h2+v|0,c.h3=c.h3+h|0,c.h4=c.h4+y|0,u-=64}}return Bi.exports}var Jc;function Wl(){if(Jc)return wi.exports;Jc=1;var e=Ue();Fe(),Yt(),Mn();var t=wi.exports=e.pkcs1=e.pkcs1||{};t.encode_rsa_oaep=function(a,i,s){var c,n,d,f;typeof s=="string"?(c=s,n=arguments[3]||void 0,d=arguments[4]||void 0):s&&(c=s.label||void 0,n=s.seed||void 0,d=s.md||void 0,s.mgf1&&s.mgf1.md&&(f=s.mgf1.md)),d?d.start():d=e.md.sha1.create(),f||(f=d);var b=Math.ceil(a.n.bitLength()/8),I=b-2*d.digestLength-2;if(i.length>I){var v=new Error("RSAES-OAEP input message length is too long.");throw v.length=i.length,v.maxLength=I,v}c||(c=""),d.update(c,"raw");for(var h=d.digest(),y="",m=I-i.length,E=0;E<m;E++)y+="\0";var u=h.getBytes()+y+""+i;if(!n)n=e.random.getBytes(d.digestLength);else if(n.length!==d.digestLength){var v=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw v.seedLength=n.length,v.digestLength=d.digestLength,v}var p=r(n,b-d.digestLength-1,f),x=e.util.xorBytes(u,p,u.length),w=r(x,d.digestLength,f),B=e.util.xorBytes(n,w,n.length);return"\0"+B+x},t.decode_rsa_oaep=function(a,i,s){var c,n,d;typeof s=="string"?(c=s,n=arguments[3]||void 0):s&&(c=s.label||void 0,n=s.md||void 0,s.mgf1&&s.mgf1.md&&(d=s.mgf1.md));var f=Math.ceil(a.n.bitLength()/8);if(i.length!==f){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=i.length,x.expectedLength=f,x}if(n===void 0?n=e.md.sha1.create():n.start(),d||(d=n),f<2*n.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");c||(c=""),n.update(c,"raw");for(var b=n.digest().getBytes(),I=i.charAt(0),v=i.substring(1,n.digestLength+1),h=i.substring(1+n.digestLength),y=r(h,n.digestLength,d),m=e.util.xorBytes(v,y,v.length),E=r(m,f-n.digestLength-1,d),u=e.util.xorBytes(h,E,h.length),p=u.substring(0,n.digestLength),x=I!=="\0",w=0;w<n.digestLength;++w)x|=b.charAt(w)!==p.charAt(w);for(var B=1,C=n.digestLength,l=n.digestLength;l<u.length;l++){var o=u.charCodeAt(l),S=o&1^1,A=B?65534:0;x|=o&A,B=B&S,C+=B}if(x||u.charCodeAt(C)!==1)throw new Error("Invalid RSAES-OAEP padding.");return u.substring(C+1)};function r(a,i,s){s||(s=e.md.sha1.create());for(var c="",n=Math.ceil(i/s.digestLength),d=0;d<n;++d){var f=String.fromCharCode(d>>24&255,d>>16&255,d>>8&255,d&255);s.start(),s.update(a+f),c+=s.digest().getBytes()}return c.substring(0,i)}return wi.exports}var ca={exports:{}},Zc;function Yl(){if(Zc)return ca.exports;Zc=1;var e=Ue();return Fe(),wa(),Yt(),(function(){if(e.prime){ca.exports=e.prime;return}var t=ca.exports=e.prime=e.prime||{},r=e.jsbn.BigInteger,a=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var s=function(v,h){return v|h};t.generateProbablePrime=function(v,h,y){typeof h=="function"&&(y=h,h={}),h=h||{};var m=h.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var E=h.prng||e.random,u={nextBytes:function(p){for(var x=E.getBytesSync(p.length),w=0;w<p.length;++w)p[w]=x.charCodeAt(w)}};if(m.name==="PRIMEINC")return c(v,u,m.options,y);throw new Error("Invalid prime generation algorithm: "+m.name)};function c(v,h,y,m){return"workers"in y?f(v,h,y,m):n(v,h,y,m)}function n(v,h,y,m){var E=b(v,h),u=0,p=I(E.bitLength());"millerRabinTests"in y&&(p=y.millerRabinTests);var x=10;"maxBlockTime"in y&&(x=y.maxBlockTime),d(E,v,h,u,p,x,m)}function d(v,h,y,m,E,u,p){var x=+new Date;do{if(v.bitLength()>h&&(v=b(h,y)),v.isProbablePrime(E))return p(null,v);v.dAddOffset(a[m++%8],0)}while(u<0||+new Date-x<u);e.util.setImmediate(function(){d(v,h,y,m,E,u,p)})}function f(v,h,y,m){if(typeof Worker>"u")return n(v,h,y,m);var E=b(v,h),u=y.workers,p=y.workLoad||100,x=p*30/8,w=y.workerScript||"forge/prime.worker.js";if(u===-1)return e.util.estimateCores(function(C,l){C&&(l=2),u=l-1,B()});B();function B(){u=Math.max(1,u);for(var C=[],l=0;l<u;++l)C[l]=new Worker(w);for(var l=0;l<u;++l)C[l].addEventListener("message",S);var o=!1;function S(A){if(!o){var N=A.data;if(N.found){for(var D=0;D<C.length;++D)C[D].terminate();return o=!0,m(null,new r(N.prime,16))}E.bitLength()>v&&(E=b(v,h));var q=E.toString(16);A.target.postMessage({hex:q,workLoad:p}),E.dAddOffset(x,0)}}}}function b(v,h){var y=new r(v,h),m=v-1;return y.testBit(m)||y.bitwiseTo(r.ONE.shiftLeft(m),s,y),y.dAddOffset(31-y.mod(i).byteValue(),0),y}function I(v){return v<=100?27:v<=150?18:v<=200?15:v<=250?12:v<=300?9:v<=350?8:v<=400?7:v<=500?6:v<=600?5:v<=800?4:v<=1250?3:2}})(),ca.exports}var Ni,eu;function Ba(){if(eu)return Ni;eu=1;var e=Ue();if(ir(),wa(),Br(),Wl(),Yl(),Yt(),Fe(),typeof t>"u")var t=e.jsbn.BigInteger;var r=e.util.isNodejs?require("crypto"):null,a=e.asn1,i=e.util;e.pki=e.pki||{},Ni=e.pki.rsa=e.rsa=e.rsa||{};var s=e.pki,c=[6,4,2,4,2,4,6,2],n={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},f={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},b=e.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},I={name:"DigestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},v=function(l){var o;if(l.algorithm in s.oids)o=s.oids[l.algorithm];else{var S=new Error("Unknown message digest algorithm.");throw S.algorithm=l.algorithm,S}var A=a.oidToDer(o).getBytes(),N=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),D=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);D.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,A)),D.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var q=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,l.digest().getBytes());return N.value.push(D),N.value.push(q),a.toDer(N).getBytes()},h=function(l,o,S){if(S)return l.modPow(o.e,o.n);if(!o.p||!o.q)return l.modPow(o.d,o.n);o.dP||(o.dP=o.d.mod(o.p.subtract(t.ONE))),o.dQ||(o.dQ=o.d.mod(o.q.subtract(t.ONE))),o.qInv||(o.qInv=o.q.modInverse(o.p));var A;do A=new t(e.util.bytesToHex(e.random.getBytes(o.n.bitLength()/8)),16);while(A.compareTo(o.n)>=0||!A.gcd(o.n).equals(t.ONE));l=l.multiply(A.modPow(o.e,o.n)).mod(o.n);for(var N=l.mod(o.p).modPow(o.dP,o.p),D=l.mod(o.q).modPow(o.dQ,o.q);N.compareTo(D)<0;)N=N.add(o.p);var q=N.subtract(D).multiply(o.qInv).mod(o.p).multiply(o.q).add(D);return q=q.multiply(A.modInverse(o.n)).mod(o.n),q};s.rsa.encrypt=function(l,o,S){var A=S,N,D=Math.ceil(o.n.bitLength()/8);S!==!1&&S!==!0?(A=S===2,N=y(l,o,S)):(N=e.util.createBuffer(),N.putBytes(l));for(var q=new t(N.toHex(),16),H=h(q,o,A),Y=H.toString(16),Q=e.util.createBuffer(),J=D-Math.ceil(Y.length/2);J>0;)Q.putByte(0),--J;return Q.putBytes(e.util.hexToBytes(Y)),Q.getBytes()},s.rsa.decrypt=function(l,o,S,A){var N=Math.ceil(o.n.bitLength()/8);if(l.length!==N){var D=new Error("Encrypted message length is invalid.");throw D.length=l.length,D.expected=N,D}var q=new t(e.util.createBuffer(l).toHex(),16);if(q.compareTo(o.n)>=0)throw new Error("Encrypted message is invalid.");for(var H=h(q,o,S),Y=H.toString(16),Q=e.util.createBuffer(),J=N-Math.ceil(Y.length/2);J>0;)Q.putByte(0),--J;return Q.putBytes(e.util.hexToBytes(Y)),A!==!1?m(Q.getBytes(),o,S):Q.getBytes()},s.rsa.createKeyPairGenerationState=function(l,o,S){typeof l=="string"&&(l=parseInt(l,10)),l=l||2048,S=S||{};var A=S.prng||e.random,N={nextBytes:function(H){for(var Y=A.getBytesSync(H.length),Q=0;Q<H.length;++Q)H[Q]=Y.charCodeAt(Q)}},D=S.algorithm||"PRIMEINC",q;if(D==="PRIMEINC")q={algorithm:D,state:0,bits:l,rng:N,eInt:o||65537,e:new t(null),p:null,q:null,qBits:l>>1,pBits:l-(l>>1),pqState:0,num:null,keys:null},q.e.fromInt(q.eInt);else throw new Error("Invalid key generation algorithm: "+D);return q},s.rsa.stepKeyPairGenerationState=function(l,o){"algorithm"in l||(l.algorithm="PRIMEINC");var S=new t(null);S.fromInt(30);for(var A=0,N=function(ne,se){return ne|se},D=+new Date,q,H=0;l.keys===null&&(o<=0||H<o);){if(l.state===0){var Y=l.p===null?l.pBits:l.qBits,Q=Y-1;l.pqState===0?(l.num=new t(Y,l.rng),l.num.testBit(Q)||l.num.bitwiseTo(t.ONE.shiftLeft(Q),N,l.num),l.num.dAddOffset(31-l.num.mod(S).byteValue(),0),A=0,++l.pqState):l.pqState===1?l.num.bitLength()>Y?l.pqState=0:l.num.isProbablePrime(p(l.num.bitLength()))?++l.pqState:l.num.dAddOffset(c[A++%8],0):l.pqState===2?l.pqState=l.num.subtract(t.ONE).gcd(l.e).compareTo(t.ONE)===0?3:0:l.pqState===3&&(l.pqState=0,l.p===null?l.p=l.num:l.q=l.num,l.p!==null&&l.q!==null&&++l.state,l.num=null)}else if(l.state===1)l.p.compareTo(l.q)<0&&(l.num=l.p,l.p=l.q,l.q=l.num),++l.state;else if(l.state===2)l.p1=l.p.subtract(t.ONE),l.q1=l.q.subtract(t.ONE),l.phi=l.p1.multiply(l.q1),++l.state;else if(l.state===3)l.phi.gcd(l.e).compareTo(t.ONE)===0?++l.state:(l.p=null,l.q=null,l.state=0);else if(l.state===4)l.n=l.p.multiply(l.q),l.n.bitLength()===l.bits?++l.state:(l.q=null,l.state=0);else if(l.state===5){var J=l.e.modInverse(l.phi);l.keys={privateKey:s.rsa.setPrivateKey(l.n,l.e,J,l.p,l.q,J.mod(l.p1),J.mod(l.q1),l.q.modInverse(l.p)),publicKey:s.rsa.setPublicKey(l.n,l.e)}}q=+new Date,H+=q-D,D=q}return l.keys!==null},s.rsa.generateKeyPair=function(l,o,S,A){if(arguments.length===1?typeof l=="object"?(S=l,l=void 0):typeof l=="function"&&(A=l,l=void 0):arguments.length===2?typeof l=="number"?typeof o=="function"?(A=o,o=void 0):typeof o!="number"&&(S=o,o=void 0):(S=l,A=o,l=void 0,o=void 0):arguments.length===3&&(typeof o=="number"?typeof S=="function"&&(A=S,S=void 0):(A=S,S=o,o=void 0)),S=S||{},l===void 0&&(l=S.bits||2048),o===void 0&&(o=S.e||65537),!e.options.usePureJavaScript&&!S.prng&&l>=256&&l<=16384&&(o===65537||o===3)){if(A){if(x("generateKeyPair"))return r.generateKeyPair("rsa",{modulusLength:l,publicExponent:o,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(H,Y,Q){if(H)return A(H);A(null,{privateKey:s.privateKeyFromPem(Q),publicKey:s.publicKeyFromPem(Y)})});if(w("generateKey")&&w("exportKey"))return i.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:l,publicExponent:C(o),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(H){return i.globalScope.crypto.subtle.exportKey("pkcs8",H.privateKey)}).then(void 0,function(H){A(H)}).then(function(H){if(H){var Y=s.privateKeyFromAsn1(a.fromDer(e.util.createBuffer(H)));A(null,{privateKey:Y,publicKey:s.setRsaPublicKey(Y.n,Y.e)})}});if(B("generateKey")&&B("exportKey")){var N=i.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:l,publicExponent:C(o),hash:{name:"SHA-256"}},!0,["sign","verify"]);N.oncomplete=function(H){var Y=H.target.result,Q=i.globalScope.msCrypto.subtle.exportKey("pkcs8",Y.privateKey);Q.oncomplete=function(J){var ne=J.target.result,se=s.privateKeyFromAsn1(a.fromDer(e.util.createBuffer(ne)));A(null,{privateKey:se,publicKey:s.setRsaPublicKey(se.n,se.e)})},Q.onerror=function(J){A(J)}},N.onerror=function(H){A(H)};return}}else if(x("generateKeyPairSync")){var D=r.generateKeyPairSync("rsa",{modulusLength:l,publicExponent:o,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:s.privateKeyFromPem(D.privateKey),publicKey:s.publicKeyFromPem(D.publicKey)}}}var q=s.rsa.createKeyPairGenerationState(l,o,S);if(!A)return s.rsa.stepKeyPairGenerationState(q,0),q.keys;E(q,S,A)},s.setRsaPublicKey=s.rsa.setPublicKey=function(l,o){var S={n:l,e:o};return S.encrypt=function(A,N,D){if(typeof N=="string"?N=N.toUpperCase():N===void 0&&(N="RSAES-PKCS1-V1_5"),N==="RSAES-PKCS1-V1_5")N={encode:function(H,Y,Q){return y(H,Y,2).getBytes()}};else if(N==="RSA-OAEP"||N==="RSAES-OAEP")N={encode:function(H,Y){return e.pkcs1.encode_rsa_oaep(Y,H,D)}};else if(["RAW","NONE","NULL",null].indexOf(N)!==-1)N={encode:function(H){return H}};else if(typeof N=="string")throw new Error('Unsupported encryption scheme: "'+N+'".');var q=N.encode(A,S,!0);return s.rsa.encrypt(q,S,!0)},S.verify=function(A,N,D,q){typeof D=="string"?D=D.toUpperCase():D===void 0&&(D="RSASSA-PKCS1-V1_5"),q===void 0&&(q={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in q||(q._parseAllDigestBytes=!0),D==="RSASSA-PKCS1-V1_5"?D={verify:function(Y,Q){Q=m(Q,S,!0);var J=a.fromDer(Q,{parseAllBytes:q._parseAllDigestBytes}),ne={},se=[];if(!a.validate(J,I,ne,se)){var fe=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw fe.errors=se,fe}var he=a.derToOid(ne.algorithmIdentifier);if(!(he===e.oids.md2||he===e.oids.md5||he===e.oids.sha1||he===e.oids.sha224||he===e.oids.sha256||he===e.oids.sha384||he===e.oids.sha512||he===e.oids["sha512-224"]||he===e.oids["sha512-256"])){var fe=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw fe.oid=he,fe}if((he===e.oids.md2||he===e.oids.md5)&&!("parameters"in ne))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return Y===ne.digest}}:(D==="NONE"||D==="NULL"||D===null)&&(D={verify:function(Y,Q){return Q=m(Q,S,!0),Y===Q}});var H=s.rsa.decrypt(N,S,!0,!1);return D.verify(A,H,S.n.bitLength())},S},s.setRsaPrivateKey=s.rsa.setPrivateKey=function(l,o,S,A,N,D,q,H){var Y={n:l,e:o,d:S,p:A,q:N,dP:D,dQ:q,qInv:H};return Y.decrypt=function(Q,J,ne){typeof J=="string"?J=J.toUpperCase():J===void 0&&(J="RSAES-PKCS1-V1_5");var se=s.rsa.decrypt(Q,Y,!1,!1);if(J==="RSAES-PKCS1-V1_5")J={decode:m};else if(J==="RSA-OAEP"||J==="RSAES-OAEP")J={decode:function(fe,he){return e.pkcs1.decode_rsa_oaep(he,fe,ne)}};else if(["RAW","NONE","NULL",null].indexOf(J)!==-1)J={decode:function(fe){return fe}};else throw new Error('Unsupported encryption scheme: "'+J+'".');return J.decode(se,Y,!1)},Y.sign=function(Q,J){var ne=!1;typeof J=="string"&&(J=J.toUpperCase()),J===void 0||J==="RSASSA-PKCS1-V1_5"?(J={encode:v},ne=1):(J==="NONE"||J==="NULL"||J===null)&&(J={encode:function(){return Q}},ne=1);var se=J.encode(Q,Y.n.bitLength());return s.rsa.encrypt(se,Y,ne)},Y},s.wrapRsaPrivateKey=function(l){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(l).getBytes())])},s.privateKeyFromAsn1=function(l){var o={},S=[];if(a.validate(l,n,o,S)&&(l=a.fromDer(e.util.createBuffer(o.privateKey))),o={},S=[],!a.validate(l,d,o,S)){var A=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw A.errors=S,A}var N,D,q,H,Y,Q,J,ne;return N=e.util.createBuffer(o.privateKeyModulus).toHex(),D=e.util.createBuffer(o.privateKeyPublicExponent).toHex(),q=e.util.createBuffer(o.privateKeyPrivateExponent).toHex(),H=e.util.createBuffer(o.privateKeyPrime1).toHex(),Y=e.util.createBuffer(o.privateKeyPrime2).toHex(),Q=e.util.createBuffer(o.privateKeyExponent1).toHex(),J=e.util.createBuffer(o.privateKeyExponent2).toHex(),ne=e.util.createBuffer(o.privateKeyCoefficient).toHex(),s.setRsaPrivateKey(new t(N,16),new t(D,16),new t(q,16),new t(H,16),new t(Y,16),new t(Q,16),new t(J,16),new t(ne,16))},s.privateKeyToAsn1=s.privateKeyToRSAPrivateKey=function(l){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.qInv))])},s.publicKeyFromAsn1=function(l){var o={},S=[];if(a.validate(l,b,o,S)){var A=a.derToOid(o.publicKeyOid);if(A!==s.oids.rsaEncryption){var N=new Error("Cannot read public key. Unknown OID.");throw N.oid=A,N}l=o.rsaPublicKey}if(S=[],!a.validate(l,f,o,S)){var N=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw N.errors=S,N}var D=e.util.createBuffer(o.publicKeyModulus).toHex(),q=e.util.createBuffer(o.publicKeyExponent).toHex();return s.setRsaPublicKey(new t(D,16),new t(q,16))},s.publicKeyToAsn1=s.publicKeyToSubjectPublicKeyInfo=function(l){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[s.publicKeyToRSAPublicKey(l)])])},s.publicKeyToRSAPublicKey=function(l){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,u(l.e))])};function y(l,o,S){var A=e.util.createBuffer(),N=Math.ceil(o.n.bitLength()/8);if(l.length>N-11){var D=new Error("Message is too long for PKCS#1 v1.5 padding.");throw D.length=l.length,D.max=N-11,D}A.putByte(0),A.putByte(S);var q=N-3-l.length,H;if(S===0||S===1){H=S===0?0:255;for(var Y=0;Y<q;++Y)A.putByte(H)}else for(;q>0;){for(var Q=0,J=e.random.getBytes(q),Y=0;Y<q;++Y)H=J.charCodeAt(Y),H===0?++Q:A.putByte(H);q=Q}return A.putByte(0),A.putBytes(l),A}function m(l,o,S,A){var N=Math.ceil(o.n.bitLength()/8),D=e.util.createBuffer(l),q=D.getByte(),H=D.getByte();if(q!==0||S&&H!==0&&H!==1||!S&&H!=2||S&&H===0&&typeof A>"u")throw new Error("Encryption block is invalid.");var Y=0;if(H===0){Y=N-3-A;for(var Q=0;Q<Y;++Q)if(D.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(H===1)for(Y=0;D.length()>1;){if(D.getByte()!==255){--D.read;break}++Y}else if(H===2)for(Y=0;D.length()>1;){if(D.getByte()===0){--D.read;break}++Y}var J=D.getByte();if(J!==0||Y!==N-3-D.length())throw new Error("Encryption block is invalid.");return D.getBytes()}function E(l,o,S){typeof o=="function"&&(S=o,o={}),o=o||{};var A={algorithm:{name:o.algorithm||"PRIMEINC",options:{workers:o.workers||2,workLoad:o.workLoad||100,workerScript:o.workerScript}}};"prng"in o&&(A.prng=o.prng),N();function N(){D(l.pBits,function(H,Y){if(H)return S(H);if(l.p=Y,l.q!==null)return q(H,l.q);D(l.qBits,q)})}function D(H,Y){e.prime.generateProbablePrime(H,A,Y)}function q(H,Y){if(H)return S(H);if(l.q=Y,l.p.compareTo(l.q)<0){var Q=l.p;l.p=l.q,l.q=Q}if(l.p.subtract(t.ONE).gcd(l.e).compareTo(t.ONE)!==0){l.p=null,N();return}if(l.q.subtract(t.ONE).gcd(l.e).compareTo(t.ONE)!==0){l.q=null,D(l.qBits,q);return}if(l.p1=l.p.subtract(t.ONE),l.q1=l.q.subtract(t.ONE),l.phi=l.p1.multiply(l.q1),l.phi.gcd(l.e).compareTo(t.ONE)!==0){l.p=l.q=null,N();return}if(l.n=l.p.multiply(l.q),l.n.bitLength()!==l.bits){l.q=null,D(l.qBits,q);return}var J=l.e.modInverse(l.phi);l.keys={privateKey:s.rsa.setPrivateKey(l.n,l.e,J,l.p,l.q,J.mod(l.p1),J.mod(l.q1),l.q.modInverse(l.p)),publicKey:s.rsa.setPublicKey(l.n,l.e)},S(null,l.keys)}}function u(l){var o=l.toString(16);o[0]>="8"&&(o="00"+o);var S=e.util.hexToBytes(o);return S.length>1&&(S.charCodeAt(0)===0&&(S.charCodeAt(1)&128)===0||S.charCodeAt(0)===255&&(S.charCodeAt(1)&128)===128)?S.substr(1):S}function p(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}function x(l){return e.util.isNodejs&&typeof r[l]=="function"}function w(l){return typeof i.globalScope<"u"&&typeof i.globalScope.crypto=="object"&&typeof i.globalScope.crypto.subtle=="object"&&typeof i.globalScope.crypto.subtle[l]=="function"}function B(l){return typeof i.globalScope<"u"&&typeof i.globalScope.msCrypto=="object"&&typeof i.globalScope.msCrypto.subtle=="object"&&typeof i.globalScope.msCrypto.subtle[l]=="function"}function C(l){for(var o=e.util.hexToBytes(l.toString(16)),S=new Uint8Array(o.length),A=0;A<o.length;++A)S[A]=o.charCodeAt(A);return S}return Ni}var Ri,tu;function Ql(){if(tu)return Ri;tu=1;var e=Ue();if(wr(),ir(),_a(),dr(),Br(),yo(),Zr(),Yt(),zl(),Ba(),Fe(),typeof t>"u")var t=e.jsbn.BigInteger;var r=e.asn1,a=e.pki=e.pki||{};Ri=a.pbe=e.pbe=e.pbe||{};var i=a.oids,s={name:"EncryptedPrivateKeyInfo",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:r.Class.UNIVERSAL,type:r.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},n={name:"pkcs-12PbeParams",tagClass:r.Class.UNIVERSAL,type:r.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:r.Class.UNIVERSAL,type:r.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:r.Class.UNIVERSAL,type:r.Type.INTEGER,constructed:!1,capture:"iterations"}]};a.encryptPrivateKeyInfo=function(v,h,y){y=y||{},y.saltSize=y.saltSize||8,y.count=y.count||2048,y.algorithm=y.algorithm||"aes128",y.prfAlgorithm=y.prfAlgorithm||"sha1";var m=e.random.getBytesSync(y.saltSize),E=y.count,u=r.integerToDer(E),p,x,w;if(y.algorithm.indexOf("aes")===0||y.algorithm==="des"){var B,C,l;switch(y.algorithm){case"aes128":p=16,B=16,C=i["aes128-CBC"],l=e.aes.createEncryptionCipher;break;case"aes192":p=24,B=16,C=i["aes192-CBC"],l=e.aes.createEncryptionCipher;break;case"aes256":p=32,B=16,C=i["aes256-CBC"],l=e.aes.createEncryptionCipher;break;case"des":p=8,B=8,C=i.desCBC,l=e.des.createEncryptionCipher;break;default:var o=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw o.algorithm=y.algorithm,o}var S="hmacWith"+y.prfAlgorithm.toUpperCase(),A=b(S),N=e.pkcs5.pbkdf2(h,m,E,p,A),D=e.random.getBytesSync(B),q=l(N);q.start(D),q.update(r.toDer(v)),q.finish(),w=q.output.getBytes();var H=I(m,u,p,S);x=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(i.pkcs5PBES2).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(i.pkcs5PBKDF2).getBytes()),H]),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(C).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,D)])])])}else if(y.algorithm==="3des"){p=24;var Y=new e.util.ByteBuffer(m),N=a.pbe.generatePkcs12Key(h,Y,1,E,p),D=a.pbe.generatePkcs12Key(h,Y,2,E,p),q=e.des.createEncryptionCipher(N);q.start(D),q.update(r.toDer(v)),q.finish(),w=q.output.getBytes(),x=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(i["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,m),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,u.getBytes())])])}else{var o=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw o.algorithm=y.algorithm,o}var Q=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[x,r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,w)]);return Q},a.decryptPrivateKeyInfo=function(v,h){var y=null,m={},E=[];if(!r.validate(v,s,m,E)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=E,u}var p=r.derToOid(m.encryptionOid),x=a.pbe.getCipher(p,m.encryptionParams,h),w=e.util.createBuffer(m.encryptedData);return x.update(w),x.finish()&&(y=r.fromDer(x.output)),y},a.encryptedPrivateKeyToPem=function(v,h){var y={type:"ENCRYPTED PRIVATE KEY",body:r.toDer(v).getBytes()};return e.pem.encode(y,{maxline:h})},a.encryptedPrivateKeyFromPem=function(v){var h=e.pem.decode(v)[0];if(h.type!=="ENCRYPTED PRIVATE KEY"){var y=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw y.headerType=h.type,y}if(h.procType&&h.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return r.fromDer(h.body)},a.encryptRsaPrivateKey=function(v,h,y){if(y=y||{},!y.legacy){var m=a.wrapRsaPrivateKey(a.privateKeyToAsn1(v));return m=a.encryptPrivateKeyInfo(m,h,y),a.encryptedPrivateKeyToPem(m)}var E,u,p,x;switch(y.algorithm){case"aes128":E="AES-128-CBC",p=16,u=e.random.getBytesSync(16),x=e.aes.createEncryptionCipher;break;case"aes192":E="AES-192-CBC",p=24,u=e.random.getBytesSync(16),x=e.aes.createEncryptionCipher;break;case"aes256":E="AES-256-CBC",p=32,u=e.random.getBytesSync(16),x=e.aes.createEncryptionCipher;break;case"3des":E="DES-EDE3-CBC",p=24,u=e.random.getBytesSync(8),x=e.des.createEncryptionCipher;break;case"des":E="DES-CBC",p=8,u=e.random.getBytesSync(8),x=e.des.createEncryptionCipher;break;default:var w=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+y.algorithm+'".');throw w.algorithm=y.algorithm,w}var B=e.pbe.opensslDeriveBytes(h,u.substr(0,8),p),C=x(B);C.start(u),C.update(r.toDer(a.privateKeyToAsn1(v))),C.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:E,parameters:e.util.bytesToHex(u).toUpperCase()},body:C.output.getBytes()};return e.pem.encode(l)},a.decryptRsaPrivateKey=function(v,h){var y=null,m=e.pem.decode(v)[0];if(m.type!=="ENCRYPTED PRIVATE KEY"&&m.type!=="PRIVATE KEY"&&m.type!=="RSA PRIVATE KEY"){var E=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw E.headerType=E,E}if(m.procType&&m.procType.type==="ENCRYPTED"){var u,p;switch(m.dekInfo.algorithm){case"DES-CBC":u=8,p=e.des.createDecryptionCipher;break;case"DES-EDE3-CBC":u=24,p=e.des.createDecryptionCipher;break;case"AES-128-CBC":u=16,p=e.aes.createDecryptionCipher;break;case"AES-192-CBC":u=24,p=e.aes.createDecryptionCipher;break;case"AES-256-CBC":u=32,p=e.aes.createDecryptionCipher;break;case"RC2-40-CBC":u=5,p=function(l){return e.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":u=8,p=function(l){return e.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":u=16,p=function(l){return e.rc2.createDecryptionCipher(l,128)};break;default:var E=new Error('Could not decrypt private key; unsupported encryption algorithm "'+m.dekInfo.algorithm+'".');throw E.algorithm=m.dekInfo.algorithm,E}var x=e.util.hexToBytes(m.dekInfo.parameters),w=e.pbe.opensslDeriveBytes(h,x.substr(0,8),u),B=p(w);if(B.start(x),B.update(e.util.createBuffer(m.body)),B.finish())y=B.output.getBytes();else return y}else y=m.body;return m.type==="ENCRYPTED PRIVATE KEY"?y=a.decryptPrivateKeyInfo(r.fromDer(y),h):y=r.fromDer(y),y!==null&&(y=a.privateKeyFromAsn1(y)),y},a.pbe.generatePkcs12Key=function(v,h,y,m,E,u){var p,x;if(typeof u>"u"||u===null){if(!("sha1"in e.md))throw new Error('"sha1" hash algorithm unavailable.');u=e.md.sha1.create()}var w=u.digestLength,B=u.blockLength,C=new e.util.ByteBuffer,l=new e.util.ByteBuffer;if(v!=null){for(x=0;x<v.length;x++)l.putInt16(v.charCodeAt(x));l.putInt16(0)}var o=l.length(),S=h.length(),A=new e.util.ByteBuffer;A.fillWithByte(y,B);var N=B*Math.ceil(S/B),D=new e.util.ByteBuffer;for(x=0;x<N;x++)D.putByte(h.at(x%S));var q=B*Math.ceil(o/B),H=new e.util.ByteBuffer;for(x=0;x<q;x++)H.putByte(l.at(x%o));var Y=D;Y.putBuffer(H);for(var Q=Math.ceil(E/w),J=1;J<=Q;J++){var ne=new e.util.ByteBuffer;ne.putBytes(A.bytes()),ne.putBytes(Y.bytes());for(var se=0;se<m;se++)u.start(),u.update(ne.getBytes()),ne=u.digest();var fe=new e.util.ByteBuffer;for(x=0;x<B;x++)fe.putByte(ne.at(x%w));var he=Math.ceil(S/B)+Math.ceil(o/B),we=new e.util.ByteBuffer;for(p=0;p<he;p++){var Se=new e.util.ByteBuffer(Y.getBytes(B)),le=511;for(x=fe.length()-1;x>=0;x--)le=le>>8,le+=fe.at(x)+Se.at(x),Se.setAt(x,le&255);we.putBuffer(Se)}Y=we,C.putBuffer(ne)}return C.truncate(C.length()-E),C},a.pbe.getCipher=function(v,h,y){switch(v){case a.oids.pkcs5PBES2:return a.pbe.getCipherForPBES2(v,h,y);case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case a.oids["pbewithSHAAnd40BitRC2-CBC"]:return a.pbe.getCipherForPKCS12PBE(v,h,y);default:var m=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw m.oid=v,m.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],m}},a.pbe.getCipherForPBES2=function(v,h,y){var m={},E=[];if(!r.validate(h,c,m,E)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=E,u}if(v=r.derToOid(m.kdfOid),v!==a.oids.pkcs5PBKDF2){var u=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw u.oid=v,u.supportedOids=["pkcs5PBKDF2"],u}if(v=r.derToOid(m.encOid),v!==a.oids["aes128-CBC"]&&v!==a.oids["aes192-CBC"]&&v!==a.oids["aes256-CBC"]&&v!==a.oids["des-EDE3-CBC"]&&v!==a.oids.desCBC){var u=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw u.oid=v,u.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],u}var p=m.kdfSalt,x=e.util.createBuffer(m.kdfIterationCount);x=x.getInt(x.length()<<3);var w,B;switch(a.oids[v]){case"aes128-CBC":w=16,B=e.aes.createDecryptionCipher;break;case"aes192-CBC":w=24,B=e.aes.createDecryptionCipher;break;case"aes256-CBC":w=32,B=e.aes.createDecryptionCipher;break;case"des-EDE3-CBC":w=24,B=e.des.createDecryptionCipher;break;case"desCBC":w=8,B=e.des.createDecryptionCipher;break}var C=f(m.prfOid),l=e.pkcs5.pbkdf2(y,p,x,w,C),o=m.encIv,S=B(l);return S.start(o),S},a.pbe.getCipherForPKCS12PBE=function(v,h,y){var m={},E=[];if(!r.validate(h,n,m,E)){var u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=E,u}var p=e.util.createBuffer(m.salt),x=e.util.createBuffer(m.iterations);x=x.getInt(x.length()<<3);var w,B,C;switch(v){case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:w=24,B=8,C=e.des.startDecrypting;break;case a.oids["pbewithSHAAnd40BitRC2-CBC"]:w=5,B=8,C=function(N,D){var q=e.rc2.createDecryptionCipher(N,40);return q.start(D,null),q};break;default:var u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw u.oid=v,u}var l=f(m.prfOid),o=a.pbe.generatePkcs12Key(y,p,1,x,w,l);l.start();var S=a.pbe.generatePkcs12Key(y,p,2,x,B,l);return C(o,S)},a.pbe.opensslDeriveBytes=function(v,h,y,m){if(typeof m>"u"||m===null){if(!("md5"in e.md))throw new Error('"md5" hash algorithm unavailable.');m=e.md.md5.create()}h===null&&(h="");for(var E=[d(m,v+h)],u=16,p=1;u<y;++p,u+=16)E.push(d(m,E[p-1]+v+h));return E.join("").substr(0,y)};function d(v,h){return v.start().update(h).digest().getBytes()}function f(v){var h;if(!v)h="hmacWithSHA1";else if(h=a.oids[r.derToOid(v)],!h){var y=new Error("Unsupported PRF OID.");throw y.oid=v,y.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],y}return b(h)}function b(v){var h=e.md;switch(v){case"hmacWithSHA224":h=e.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":v=v.substr(8).toLowerCase();break;default:var y=new Error("Unsupported PRF algorithm.");throw y.algorithm=v,y.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],y}if(!h||!(v in h))throw new Error("Unknown hash algorithm: "+v);return h[v].create()}function I(v,h,y,m){var E=r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OCTETSTRING,!1,v),r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,h.getBytes())]);return m!=="hmacWithSHA1"&&E.value.push(r.create(r.Class.UNIVERSAL,r.Type.INTEGER,!1,e.util.hexToBytes(y.toString(16))),r.create(r.Class.UNIVERSAL,r.Type.SEQUENCE,!0,[r.create(r.Class.UNIVERSAL,r.Type.OID,!1,r.oidToDer(a.oids[m]).getBytes()),r.create(r.Class.UNIVERSAL,r.Type.NULL,!1,"")])),E}return Ri}var ki={exports:{}},Di={exports:{}},ru;function Xl(){if(ru)return Di.exports;ru=1;var e=Ue();ir(),Fe();var t=e.asn1,r=Di.exports=e.pkcs7asn1=e.pkcs7asn1||{};e.pkcs7=e.pkcs7||{},e.pkcs7.asn1=r;var a={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=a;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},r.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var s={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};return r.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},a,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[s]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]},Di.exports}var Pi={exports:{}},Oi={exports:{}},nu;function Jl(){if(nu)return Oi.exports;nu=1;var e=Ue();Fe(),e.mgf=e.mgf||{};var t=Oi.exports=e.mgf.mgf1=e.mgf1=e.mgf1||{};return t.create=function(r){var a={generate:function(i,s){for(var c=new e.util.ByteBuffer,n=Math.ceil(s/r.digestLength),d=0;d<n;d++){var f=new e.util.ByteBuffer;f.putInt32(d),r.start(),r.update(i+f.getBytes()),c.putBuffer(r.digest())}return c.truncate(c.length()-s),c.getBytes()}};return a},Oi.exports}var Li,au;function Ih(){if(au)return Li;au=1;var e=Ue();return Jl(),Li=e.mgf=e.mgf||{},e.mgf.mgf1=e.mgf1,Li}var Ui={exports:{}},iu;function go(){if(iu)return Ui.exports;iu=1;var e=Ue();Yt(),Fe();var t=Ui.exports=e.pss=e.pss||{};return t.create=function(r){arguments.length===3&&(r={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var a=r.md,i=r.mgf,s=a.digestLength,c=r.salt||null;typeof c=="string"&&(c=e.util.createBuffer(c));var n;if("saltLength"in r)n=r.saltLength;else if(c!==null)n=c.length();else throw new Error("Salt length not specified or specific salt not given.");if(c!==null&&c.length()!==n)throw new Error("Given salt length does not match length of given salt.");var d=r.prng||e.random,f={};return f.encode=function(b,I){var v,h=I-1,y=Math.ceil(h/8),m=b.digest().getBytes();if(y<s+n+2)throw new Error("Message is too long to encrypt.");var E;c===null?E=d.getBytesSync(n):E=c.bytes();var u=new e.util.ByteBuffer;u.fillWithByte(0,8),u.putBytes(m),u.putBytes(E),a.start(),a.update(u.getBytes());var p=a.digest().getBytes(),x=new e.util.ByteBuffer;x.fillWithByte(0,y-n-s-2),x.putByte(1),x.putBytes(E);var w=x.getBytes(),B=y-s-1,C=i.generate(p,B),l="";for(v=0;v<B;v++)l+=String.fromCharCode(w.charCodeAt(v)^C.charCodeAt(v));var o=65280>>8*y-h&255;return l=String.fromCharCode(l.charCodeAt(0)&~o)+l.substr(1),l+p+"¼"},f.verify=function(b,I,v){var h,y=v-1,m=Math.ceil(y/8);if(I=I.substr(-m),m<s+n+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(I.charCodeAt(m-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var E=m-s-1,u=I.substr(0,E),p=I.substr(E,s),x=65280>>8*m-y&255;if((u.charCodeAt(0)&x)!==0)throw new Error("Bits beyond keysize not zero as expected.");var w=i.generate(p,E),B="";for(h=0;h<E;h++)B+=String.fromCharCode(u.charCodeAt(h)^w.charCodeAt(h));B=String.fromCharCode(B.charCodeAt(0)&~x)+B.substr(1);var C=m-s-n-2;for(h=0;h<C;h++)if(B.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(B.charCodeAt(C)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var l=B.substr(-n),o=new e.util.ByteBuffer;o.fillWithByte(0,8),o.putBytes(b),o.putBytes(l),a.start(),a.update(o.getBytes());var S=a.digest().getBytes();return p===S},f},Ui.exports}var su;function vo(){if(su)return Pi.exports;su=1;var e=Ue();wr(),ir(),_a(),dr(),Ih(),Br(),Zr(),go(),Ba(),Fe();var t=e.asn1,r=Pi.exports=e.pki=e.pki||{},a=r.oids,i={};i.CN=a.commonName,i.commonName="CN",i.C=a.countryName,i.countryName="C",i.L=a.localityName,i.localityName="L",i.ST=a.stateOrProvinceName,i.stateOrProvinceName="ST",i.O=a.organizationName,i.organizationName="O",i.OU=a.organizationalUnitName,i.organizationalUnitName="OU",i.E=a.emailAddress,i.emailAddress="E";var s=e.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},s,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},n={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},d={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},s,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[d,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};r.RDNAttributesAsArray=function(C,l){for(var o=[],S,A,N,D=0;D<C.value.length;++D){S=C.value[D];for(var q=0;q<S.value.length;++q)N={},A=S.value[q],N.type=t.derToOid(A.value[0].value),N.value=A.value[1].value,N.valueTagClass=A.value[1].type,N.type in a&&(N.name=a[N.type],N.name in i&&(N.shortName=i[N.name])),l&&(l.update(N.type),l.update(N.value)),o.push(N)}return o},r.CRIAttributesAsArray=function(C){for(var l=[],o=0;o<C.length;++o)for(var S=C[o],A=t.derToOid(S.value[0].value),N=S.value[1].value,D=0;D<N.length;++D){var q={};if(q.type=A,q.value=N[D].value,q.valueTagClass=N[D].type,q.type in a&&(q.name=a[q.type],q.name in i&&(q.shortName=i[q.name])),q.type===a.extensionRequest){q.extensions=[];for(var H=0;H<q.value.length;++H)q.extensions.push(r.certificateExtensionFromAsn1(q.value[H]))}l.push(q)}return l};function b(C,l){typeof l=="string"&&(l={shortName:l});for(var o=null,S,A=0;o===null&&A<C.attributes.length;++A)S=C.attributes[A],(l.type&&l.type===S.type||l.name&&l.name===S.name||l.shortName&&l.shortName===S.shortName)&&(o=S);return o}var I=function(C,l,o){var S={};if(C!==a["RSASSA-PSS"])return S;o&&(S={hash:{algorithmOid:a.sha1},mgf:{algorithmOid:a.mgf1,hash:{algorithmOid:a.sha1}},saltLength:20});var A={},N=[];if(!t.validate(l,n,A,N)){var D=new Error("Cannot read RSASSA-PSS parameter block.");throw D.errors=N,D}return A.hashOid!==void 0&&(S.hash=S.hash||{},S.hash.algorithmOid=t.derToOid(A.hashOid)),A.maskGenOid!==void 0&&(S.mgf=S.mgf||{},S.mgf.algorithmOid=t.derToOid(A.maskGenOid),S.mgf.hash=S.mgf.hash||{},S.mgf.hash.algorithmOid=t.derToOid(A.maskGenHashOid)),A.saltLength!==void 0&&(S.saltLength=A.saltLength.charCodeAt(0)),S},v=function(C){switch(a[C.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return e.md.sha1.create();case"md5WithRSAEncryption":return e.md.md5.create();case"sha256WithRSAEncryption":return e.md.sha256.create();case"sha384WithRSAEncryption":return e.md.sha384.create();case"sha512WithRSAEncryption":return e.md.sha512.create();case"RSASSA-PSS":return e.md.sha256.create();default:var l=new Error("Could not compute "+C.type+" digest. Unknown signature OID.");throw l.signatureOid=C.signatureOid,l}},h=function(C){var l=C.certificate,o;switch(l.signatureOid){case a.sha1WithRSAEncryption:case a.sha1WithRSASignature:break;case a["RSASSA-PSS"]:var S,A;if(S=a[l.signatureParameters.mgf.hash.algorithmOid],S===void 0||e.md[S]===void 0){var N=new Error("Unsupported MGF hash function.");throw N.oid=l.signatureParameters.mgf.hash.algorithmOid,N.name=S,N}if(A=a[l.signatureParameters.mgf.algorithmOid],A===void 0||e.mgf[A]===void 0){var N=new Error("Unsupported MGF function.");throw N.oid=l.signatureParameters.mgf.algorithmOid,N.name=A,N}if(A=e.mgf[A].create(e.md[S].create()),S=a[l.signatureParameters.hash.algorithmOid],S===void 0||e.md[S]===void 0){var N=new Error("Unsupported RSASSA-PSS hash function.");throw N.oid=l.signatureParameters.hash.algorithmOid,N.name=S,N}o=e.pss.create(e.md[S].create(),A,l.signatureParameters.saltLength);break}return l.publicKey.verify(C.md.digest().getBytes(),C.signature,o)};r.certificateFromPem=function(C,l,o){var S=e.pem.decode(C)[0];if(S.type!=="CERTIFICATE"&&S.type!=="X509 CERTIFICATE"&&S.type!=="TRUSTED CERTIFICATE"){var A=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw A.headerType=S.type,A}if(S.procType&&S.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var N=t.fromDer(S.body,o);return r.certificateFromAsn1(N,l)},r.certificateToPem=function(C,l){var o={type:"CERTIFICATE",body:t.toDer(r.certificateToAsn1(C)).getBytes()};return e.pem.encode(o,{maxline:l})},r.publicKeyFromPem=function(C){var l=e.pem.decode(C)[0];if(l.type!=="PUBLIC KEY"&&l.type!=="RSA PUBLIC KEY"){var o=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw o.headerType=l.type,o}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var S=t.fromDer(l.body);return r.publicKeyFromAsn1(S)},r.publicKeyToPem=function(C,l){var o={type:"PUBLIC KEY",body:t.toDer(r.publicKeyToAsn1(C)).getBytes()};return e.pem.encode(o,{maxline:l})},r.publicKeyToRSAPublicKeyPem=function(C,l){var o={type:"RSA PUBLIC KEY",body:t.toDer(r.publicKeyToRSAPublicKey(C)).getBytes()};return e.pem.encode(o,{maxline:l})},r.getPublicKeyFingerprint=function(C,l){l=l||{};var o=l.md||e.md.sha1.create(),S=l.type||"RSAPublicKey",A;switch(S){case"RSAPublicKey":A=t.toDer(r.publicKeyToRSAPublicKey(C)).getBytes();break;case"SubjectPublicKeyInfo":A=t.toDer(r.publicKeyToAsn1(C)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+l.type+'".')}o.start(),o.update(A);var N=o.digest();if(l.encoding==="hex"){var D=N.toHex();return l.delimiter?D.match(/.{2}/g).join(l.delimiter):D}else{if(l.encoding==="binary")return N.getBytes();if(l.encoding)throw new Error('Unknown encoding "'+l.encoding+'".')}return N},r.certificationRequestFromPem=function(C,l,o){var S=e.pem.decode(C)[0];if(S.type!=="CERTIFICATE REQUEST"){var A=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw A.headerType=S.type,A}if(S.procType&&S.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var N=t.fromDer(S.body,o);return r.certificationRequestFromAsn1(N,l)},r.certificationRequestToPem=function(C,l){var o={type:"CERTIFICATE REQUEST",body:t.toDer(r.certificationRequestToAsn1(C)).getBytes()};return e.pem.encode(o,{maxline:l})},r.createCertificate=function(){var C={};return C.version=2,C.serialNumber="00",C.signatureOid=null,C.signature=null,C.siginfo={},C.siginfo.algorithmOid=null,C.validity={},C.validity.notBefore=new Date,C.validity.notAfter=new Date,C.issuer={},C.issuer.getField=function(l){return b(C.issuer,l)},C.issuer.addField=function(l){m([l]),C.issuer.attributes.push(l)},C.issuer.attributes=[],C.issuer.hash=null,C.subject={},C.subject.getField=function(l){return b(C.subject,l)},C.subject.addField=function(l){m([l]),C.subject.attributes.push(l)},C.subject.attributes=[],C.subject.hash=null,C.extensions=[],C.publicKey=null,C.md=null,C.setSubject=function(l,o){m(l),C.subject.attributes=l,delete C.subject.uniqueId,o&&(C.subject.uniqueId=o),C.subject.hash=null},C.setIssuer=function(l,o){m(l),C.issuer.attributes=l,delete C.issuer.uniqueId,o&&(C.issuer.uniqueId=o),C.issuer.hash=null},C.setExtensions=function(l){for(var o=0;o<l.length;++o)E(l[o],{cert:C});C.extensions=l},C.getExtension=function(l){typeof l=="string"&&(l={name:l});for(var o=null,S,A=0;o===null&&A<C.extensions.length;++A)S=C.extensions[A],(l.id&&S.id===l.id||l.name&&S.name===l.name)&&(o=S);return o},C.sign=function(l,o){C.md=o||e.md.sha1.create();var S=a[C.md.algorithm+"WithRSAEncryption"];if(!S){var A=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw A.algorithm=C.md.algorithm,A}C.signatureOid=C.siginfo.algorithmOid=S,C.tbsCertificate=r.getTBSCertificate(C);var N=t.toDer(C.tbsCertificate);C.md.update(N.getBytes()),C.signature=l.sign(C.md)},C.verify=function(l){var o=!1;if(!C.issued(l)){var S=l.issuer,A=C.subject,N=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw N.expectedIssuer=A.attributes,N.actualIssuer=S.attributes,N}var D=l.md;if(D===null){D=v({signatureOid:l.signatureOid,type:"certificate"});var q=l.tbsCertificate||r.getTBSCertificate(l),H=t.toDer(q);D.update(H.getBytes())}return D!==null&&(o=h({certificate:C,md:D,signature:l.signature})),o},C.isIssuer=function(l){var o=!1,S=C.issuer,A=l.subject;if(S.hash&&A.hash)o=S.hash===A.hash;else if(S.attributes.length===A.attributes.length){o=!0;for(var N,D,q=0;o&&q<S.attributes.length;++q)N=S.attributes[q],D=A.attributes[q],(N.type!==D.type||N.value!==D.value)&&(o=!1)}return o},C.issued=function(l){return l.isIssuer(C)},C.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(C.publicKey,{type:"RSAPublicKey"})},C.verifySubjectKeyIdentifier=function(){for(var l=a.subjectKeyIdentifier,o=0;o<C.extensions.length;++o){var S=C.extensions[o];if(S.id===l){var A=C.generateSubjectKeyIdentifier().getBytes();return e.util.hexToBytes(S.subjectKeyIdentifier)===A}}return!1},C},r.certificateFromAsn1=function(C,l){var o={},S=[];if(!t.validate(C,c,o,S)){var A=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw A.errors=S,A}var N=t.derToOid(o.publicKeyOid);if(N!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var D=r.createCertificate();D.version=o.certVersion?o.certVersion.charCodeAt(0):0;var q=e.util.createBuffer(o.certSerialNumber);D.serialNumber=q.toHex(),D.signatureOid=e.asn1.derToOid(o.certSignatureOid),D.signatureParameters=I(D.signatureOid,o.certSignatureParams,!0),D.siginfo.algorithmOid=e.asn1.derToOid(o.certinfoSignatureOid),D.siginfo.parameters=I(D.siginfo.algorithmOid,o.certinfoSignatureParams,!1),D.signature=o.certSignature;var H=[];if(o.certValidity1UTCTime!==void 0&&H.push(t.utcTimeToDate(o.certValidity1UTCTime)),o.certValidity2GeneralizedTime!==void 0&&H.push(t.generalizedTimeToDate(o.certValidity2GeneralizedTime)),o.certValidity3UTCTime!==void 0&&H.push(t.utcTimeToDate(o.certValidity3UTCTime)),o.certValidity4GeneralizedTime!==void 0&&H.push(t.generalizedTimeToDate(o.certValidity4GeneralizedTime)),H.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(H.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(D.validity.notBefore=H[0],D.validity.notAfter=H[1],D.tbsCertificate=o.tbsCertificate,l){D.md=v({signatureOid:D.signatureOid,type:"certificate"});var Y=t.toDer(D.tbsCertificate);D.md.update(Y.getBytes())}var Q=e.md.sha1.create(),J=t.toDer(o.certIssuer);Q.update(J.getBytes()),D.issuer.getField=function(fe){return b(D.issuer,fe)},D.issuer.addField=function(fe){m([fe]),D.issuer.attributes.push(fe)},D.issuer.attributes=r.RDNAttributesAsArray(o.certIssuer),o.certIssuerUniqueId&&(D.issuer.uniqueId=o.certIssuerUniqueId),D.issuer.hash=Q.digest().toHex();var ne=e.md.sha1.create(),se=t.toDer(o.certSubject);return ne.update(se.getBytes()),D.subject.getField=function(fe){return b(D.subject,fe)},D.subject.addField=function(fe){m([fe]),D.subject.attributes.push(fe)},D.subject.attributes=r.RDNAttributesAsArray(o.certSubject),o.certSubjectUniqueId&&(D.subject.uniqueId=o.certSubjectUniqueId),D.subject.hash=ne.digest().toHex(),o.certExtensions?D.extensions=r.certificateExtensionsFromAsn1(o.certExtensions):D.extensions=[],D.publicKey=r.publicKeyFromAsn1(o.subjectPublicKeyInfo),D},r.certificateExtensionsFromAsn1=function(C){for(var l=[],o=0;o<C.value.length;++o)for(var S=C.value[o],A=0;A<S.value.length;++A)l.push(r.certificateExtensionFromAsn1(S.value[A]));return l},r.certificateExtensionFromAsn1=function(C){var l={};if(l.id=t.derToOid(C.value[0].value),l.critical=!1,C.value[1].type===t.Type.BOOLEAN?(l.critical=C.value[1].value.charCodeAt(0)!==0,l.value=C.value[2].value):l.value=C.value[1].value,l.id in a){if(l.name=a[l.id],l.name==="keyUsage"){var o=t.fromDer(l.value),S=0,A=0;o.value.length>1&&(S=o.value.charCodeAt(1),A=o.value.length>2?o.value.charCodeAt(2):0),l.digitalSignature=(S&128)===128,l.nonRepudiation=(S&64)===64,l.keyEncipherment=(S&32)===32,l.dataEncipherment=(S&16)===16,l.keyAgreement=(S&8)===8,l.keyCertSign=(S&4)===4,l.cRLSign=(S&2)===2,l.encipherOnly=(S&1)===1,l.decipherOnly=(A&128)===128}else if(l.name==="basicConstraints"){var o=t.fromDer(l.value);o.value.length>0&&o.value[0].type===t.Type.BOOLEAN?l.cA=o.value[0].value.charCodeAt(0)!==0:l.cA=!1;var N=null;o.value.length>0&&o.value[0].type===t.Type.INTEGER?N=o.value[0].value:o.value.length>1&&(N=o.value[1].value),N!==null&&(l.pathLenConstraint=t.derToInteger(N))}else if(l.name==="extKeyUsage")for(var o=t.fromDer(l.value),D=0;D<o.value.length;++D){var q=t.derToOid(o.value[D].value);q in a?l[a[q]]=!0:l[q]=!0}else if(l.name==="nsCertType"){var o=t.fromDer(l.value),S=0;o.value.length>1&&(S=o.value.charCodeAt(1)),l.client=(S&128)===128,l.server=(S&64)===64,l.email=(S&32)===32,l.objsign=(S&16)===16,l.reserved=(S&8)===8,l.sslCA=(S&4)===4,l.emailCA=(S&2)===2,l.objCA=(S&1)===1}else if(l.name==="subjectAltName"||l.name==="issuerAltName"){l.altNames=[];for(var H,o=t.fromDer(l.value),Y=0;Y<o.value.length;++Y){H=o.value[Y];var Q={type:H.type,value:H.value};switch(l.altNames.push(Q),H.type){case 1:case 2:case 6:break;case 7:Q.ip=e.util.bytesToIP(H.value);break;case 8:Q.oid=t.derToOid(H.value);break}}}else if(l.name==="subjectKeyIdentifier"){var o=t.fromDer(l.value);l.subjectKeyIdentifier=e.util.bytesToHex(o.value)}}return l},r.certificationRequestFromAsn1=function(C,l){var o={},S=[];if(!t.validate(C,f,o,S)){var A=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw A.errors=S,A}var N=t.derToOid(o.publicKeyOid);if(N!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var D=r.createCertificationRequest();if(D.version=o.csrVersion?o.csrVersion.charCodeAt(0):0,D.signatureOid=e.asn1.derToOid(o.csrSignatureOid),D.signatureParameters=I(D.signatureOid,o.csrSignatureParams,!0),D.siginfo.algorithmOid=e.asn1.derToOid(o.csrSignatureOid),D.siginfo.parameters=I(D.siginfo.algorithmOid,o.csrSignatureParams,!1),D.signature=o.csrSignature,D.certificationRequestInfo=o.certificationRequestInfo,l){D.md=v({signatureOid:D.signatureOid,type:"certification request"});var q=t.toDer(D.certificationRequestInfo);D.md.update(q.getBytes())}var H=e.md.sha1.create();return D.subject.getField=function(Y){return b(D.subject,Y)},D.subject.addField=function(Y){m([Y]),D.subject.attributes.push(Y)},D.subject.attributes=r.RDNAttributesAsArray(o.certificationRequestInfoSubject,H),D.subject.hash=H.digest().toHex(),D.publicKey=r.publicKeyFromAsn1(o.subjectPublicKeyInfo),D.getAttribute=function(Y){return b(D,Y)},D.addAttribute=function(Y){m([Y]),D.attributes.push(Y)},D.attributes=r.CRIAttributesAsArray(o.certificationRequestInfoAttributes||[]),D},r.createCertificationRequest=function(){var C={};return C.version=0,C.signatureOid=null,C.signature=null,C.siginfo={},C.siginfo.algorithmOid=null,C.subject={},C.subject.getField=function(l){return b(C.subject,l)},C.subject.addField=function(l){m([l]),C.subject.attributes.push(l)},C.subject.attributes=[],C.subject.hash=null,C.publicKey=null,C.attributes=[],C.getAttribute=function(l){return b(C,l)},C.addAttribute=function(l){m([l]),C.attributes.push(l)},C.md=null,C.setSubject=function(l){m(l),C.subject.attributes=l,C.subject.hash=null},C.setAttributes=function(l){m(l),C.attributes=l},C.sign=function(l,o){C.md=o||e.md.sha1.create();var S=a[C.md.algorithm+"WithRSAEncryption"];if(!S){var A=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw A.algorithm=C.md.algorithm,A}C.signatureOid=C.siginfo.algorithmOid=S,C.certificationRequestInfo=r.getCertificationRequestInfo(C);var N=t.toDer(C.certificationRequestInfo);C.md.update(N.getBytes()),C.signature=l.sign(C.md)},C.verify=function(){var l=!1,o=C.md;if(o===null){o=v({signatureOid:C.signatureOid,type:"certification request"});var S=C.certificationRequestInfo||r.getCertificationRequestInfo(C),A=t.toDer(S);o.update(A.getBytes())}return o!==null&&(l=h({certificate:C,md:o,signature:C.signature})),l},C};function y(C){for(var l=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),o,S,A=C.attributes,N=0;N<A.length;++N){o=A[N];var D=o.value,q=t.Type.PRINTABLESTRING;"valueTagClass"in o&&(q=o.valueTagClass,q===t.Type.UTF8&&(D=e.util.encodeUtf8(D))),S=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(o.type).getBytes()),t.create(t.Class.UNIVERSAL,q,!1,D)])]),l.value.push(S)}return l}function m(C){for(var l,o=0;o<C.length;++o){if(l=C[o],typeof l.name>"u"&&(l.type&&l.type in r.oids?l.name=r.oids[l.type]:l.shortName&&l.shortName in i&&(l.name=r.oids[i[l.shortName]])),typeof l.type>"u")if(l.name&&l.name in r.oids)l.type=r.oids[l.name];else{var S=new Error("Attribute type not specified.");throw S.attribute=l,S}if(typeof l.shortName>"u"&&l.name&&l.name in i&&(l.shortName=i[l.name]),l.type===a.extensionRequest&&(l.valueConstructed=!0,l.valueTagClass=t.Type.SEQUENCE,!l.value&&l.extensions)){l.value=[];for(var A=0;A<l.extensions.length;++A)l.value.push(r.certificateExtensionToAsn1(E(l.extensions[A])))}if(typeof l.value>"u"){var S=new Error("Attribute value not specified.");throw S.attribute=l,S}}}function E(C,l){if(l=l||{},typeof C.name>"u"&&C.id&&C.id in r.oids&&(C.name=r.oids[C.id]),typeof C.id>"u")if(C.name&&C.name in r.oids)C.id=r.oids[C.name];else{var o=new Error("Extension ID not specified.");throw o.extension=C,o}if(typeof C.value<"u")return C;if(C.name==="keyUsage"){var S=0,A=0,N=0;C.digitalSignature&&(A|=128,S=7),C.nonRepudiation&&(A|=64,S=6),C.keyEncipherment&&(A|=32,S=5),C.dataEncipherment&&(A|=16,S=4),C.keyAgreement&&(A|=8,S=3),C.keyCertSign&&(A|=4,S=2),C.cRLSign&&(A|=2,S=1),C.encipherOnly&&(A|=1,S=0),C.decipherOnly&&(N|=128,S=7);var D=String.fromCharCode(S);N!==0?D+=String.fromCharCode(A)+String.fromCharCode(N):A!==0&&(D+=String.fromCharCode(A)),C.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,D)}else if(C.name==="basicConstraints")C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),C.cA&&C.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,"ÿ")),"pathLenConstraint"in C&&C.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(C.pathLenConstraint).getBytes()));else if(C.name==="extKeyUsage"){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var q=C.value.value;for(var H in C)C[H]===!0&&(H in a?q.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(a[H]).getBytes())):H.indexOf(".")!==-1&&q.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(H).getBytes())))}else if(C.name==="nsCertType"){var S=0,A=0;C.client&&(A|=128,S=7),C.server&&(A|=64,S=6),C.email&&(A|=32,S=5),C.objsign&&(A|=16,S=4),C.reserved&&(A|=8,S=3),C.sslCA&&(A|=4,S=2),C.emailCA&&(A|=2,S=1),C.objCA&&(A|=1,S=0);var D=String.fromCharCode(S);A!==0&&(D+=String.fromCharCode(A)),C.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,D)}else if(C.name==="subjectAltName"||C.name==="issuerAltName"){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var Y,Q=0;Q<C.altNames.length;++Q){Y=C.altNames[Q];var D=Y.value;if(Y.type===7&&Y.ip){if(D=e.util.bytesFromIP(Y.ip),D===null){var o=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw o.extension=C,o}}else Y.type===8&&(Y.oid?D=t.oidToDer(t.oidToDer(Y.oid)):D=t.oidToDer(D));C.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,Y.type,!1,D))}}else if(C.name==="nsComment"&&l.cert){if(!/^[\x00-\x7F]*$/.test(C.comment)||C.comment.length<1||C.comment.length>128)throw new Error('Invalid "nsComment" content.');C.value=t.create(t.Class.UNIVERSAL,t.Type.IA5STRING,!1,C.comment)}else if(C.name==="subjectKeyIdentifier"&&l.cert){var J=l.cert.generateSubjectKeyIdentifier();C.subjectKeyIdentifier=J.toHex(),C.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,J.getBytes())}else if(C.name==="authorityKeyIdentifier"&&l.cert){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var q=C.value.value;if(C.keyIdentifier){var ne=C.keyIdentifier===!0?l.cert.generateSubjectKeyIdentifier().getBytes():C.keyIdentifier;q.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,ne))}if(C.authorityCertIssuer){var se=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[y(C.authorityCertIssuer===!0?l.cert.issuer:C.authorityCertIssuer)])];q.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,se))}if(C.serialNumber){var fe=e.util.hexToBytes(C.serialNumber===!0?l.cert.serialNumber:C.serialNumber);q.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,fe))}}else if(C.name==="cRLDistributionPoints"){C.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var q=C.value.value,he=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),we=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]),Y,Q=0;Q<C.altNames.length;++Q){Y=C.altNames[Q];var D=Y.value;if(Y.type===7&&Y.ip){if(D=e.util.bytesFromIP(Y.ip),D===null){var o=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw o.extension=C,o}}else Y.type===8&&(Y.oid?D=t.oidToDer(t.oidToDer(Y.oid)):D=t.oidToDer(D));we.value.push(t.create(t.Class.CONTEXT_SPECIFIC,Y.type,!1,D))}he.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[we])),q.push(he)}if(typeof C.value>"u"){var o=new Error("Extension value not specified.");throw o.extension=C,o}return C}function u(C,l){switch(C){case a["RSASSA-PSS"]:var o=[];return l.hash.algorithmOid!==void 0&&o.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),l.mgf.algorithmOid!==void 0&&o.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),l.saltLength!==void 0&&o.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(l.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,o);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function p(C){var l=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(C.attributes.length===0)return l;for(var o=C.attributes,S=0;S<o.length;++S){var A=o[S],N=A.value,D=t.Type.UTF8;"valueTagClass"in A&&(D=A.valueTagClass),D===t.Type.UTF8&&(N=e.util.encodeUtf8(N));var q=!1;"valueConstructed"in A&&(q=A.valueConstructed);var H=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(A.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,D,q,N)])]);l.value.push(H)}return l}var x=new Date("1950-01-01T00:00:00Z"),w=new Date("2050-01-01T00:00:00Z");function B(C){return C>=x&&C<w?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(C)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(C))}return r.getTBSCertificate=function(C){var l=B(C.validity.notBefore),o=B(C.validity.notAfter),S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(C.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(C.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.siginfo.algorithmOid).getBytes()),u(C.siginfo.algorithmOid,C.siginfo.parameters)]),y(C.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[l,o]),y(C.subject),r.publicKeyToAsn1(C.publicKey)]);return C.issuer.uniqueId&&S.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+C.issuer.uniqueId)])),C.subject.uniqueId&&S.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+C.subject.uniqueId)])),C.extensions.length>0&&S.value.push(r.certificateExtensionsToAsn1(C.extensions)),S},r.getCertificationRequestInfo=function(C){var l=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(C.version).getBytes()),y(C.subject),r.publicKeyToAsn1(C.publicKey),p(C)]);return l},r.distinguishedNameToAsn1=function(C){return y(C)},r.certificateToAsn1=function(C){var l=C.tbsCertificate||r.getTBSCertificate(C);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[l,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.signatureOid).getBytes()),u(C.signatureOid,C.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+C.signature)])},r.certificateExtensionsToAsn1=function(C){var l=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),o=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);l.value.push(o);for(var S=0;S<C.length;++S)o.value.push(r.certificateExtensionToAsn1(C[S]));return l},r.certificateExtensionToAsn1=function(C){var l=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);l.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.id).getBytes())),C.critical&&l.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,"ÿ"));var o=C.value;return typeof C.value!="string"&&(o=t.toDer(o).getBytes()),l.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,o)),l},r.certificationRequestToAsn1=function(C){var l=C.certificationRequestInfo||r.getCertificationRequestInfo(C);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[l,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(C.signatureOid).getBytes()),u(C.signatureOid,C.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,"\0"+C.signature)])},r.createCaStore=function(C){var l={certs:{}};l.getIssuer=function(D){var q=o(D.issuer);return q},l.addCertificate=function(D){if(typeof D=="string"&&(D=e.pki.certificateFromPem(D)),S(D.subject),!l.hasCertificate(D))if(D.subject.hash in l.certs){var q=l.certs[D.subject.hash];e.util.isArray(q)||(q=[q]),q.push(D),l.certs[D.subject.hash]=q}else l.certs[D.subject.hash]=D},l.hasCertificate=function(D){typeof D=="string"&&(D=e.pki.certificateFromPem(D));var q=o(D.subject);if(!q)return!1;e.util.isArray(q)||(q=[q]);for(var H=t.toDer(r.certificateToAsn1(D)).getBytes(),Y=0;Y<q.length;++Y){var Q=t.toDer(r.certificateToAsn1(q[Y])).getBytes();if(H===Q)return!0}return!1},l.listAllCertificates=function(){var D=[];for(var q in l.certs)if(l.certs.hasOwnProperty(q)){var H=l.certs[q];if(!e.util.isArray(H))D.push(H);else for(var Y=0;Y<H.length;++Y)D.push(H[Y])}return D},l.removeCertificate=function(D){var q;if(typeof D=="string"&&(D=e.pki.certificateFromPem(D)),S(D.subject),!l.hasCertificate(D))return null;var H=o(D.subject);if(!e.util.isArray(H))return q=l.certs[D.subject.hash],delete l.certs[D.subject.hash],q;for(var Y=t.toDer(r.certificateToAsn1(D)).getBytes(),Q=0;Q<H.length;++Q){var J=t.toDer(r.certificateToAsn1(H[Q])).getBytes();Y===J&&(q=H[Q],H.splice(Q,1))}return H.length===0&&delete l.certs[D.subject.hash],q};function o(D){return S(D),l.certs[D.hash]||null}function S(D){if(!D.hash){var q=e.md.sha1.create();D.attributes=r.RDNAttributesAsArray(y(D),q),D.hash=q.digest().toHex()}}if(C)for(var A=0;A<C.length;++A){var N=C[A];l.addCertificate(N)}return l},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(C,l,o){typeof o=="function"&&(o={verify:o}),o=o||{},l=l.slice(0);var S=l.slice(0),A=o.validityCheckDate;typeof A>"u"&&(A=new Date);var N=!0,D=null,q=0;do{var H=l.shift(),Y=null,Q=!1;if(A&&(A<H.validity.notBefore||A>H.validity.notAfter)&&(D={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:H.validity.notBefore,notAfter:H.validity.notAfter,now:A}),D===null){if(Y=l[0]||C.getIssuer(H),Y===null&&H.isIssuer(H)&&(Q=!0,Y=H),Y){var J=Y;e.util.isArray(J)||(J=[J]);for(var ne=!1;!ne&&J.length>0;){Y=J.shift();try{ne=Y.verify(H)}catch{}}ne||(D={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}D===null&&(!Y||Q)&&!C.hasCertificate(H)&&(D={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(D===null&&Y&&!H.isIssuer(Y)&&(D={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),D===null)for(var se={keyUsage:!0,basicConstraints:!0},fe=0;D===null&&fe<H.extensions.length;++fe){var he=H.extensions[fe];he.critical&&!(he.name in se)&&(D={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(D===null&&(!N||l.length===0&&(!Y||Q))){var we=H.getExtension("basicConstraints"),Se=H.getExtension("keyUsage");if(Se!==null&&(!Se.keyCertSign||we===null)&&(D={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate}),D===null&&we!==null&&!we.cA&&(D={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),D===null&&Se!==null&&"pathLenConstraint"in we){var le=q-1;le>we.pathLenConstraint&&(D={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}}var Ne=D===null?!0:D.error,pe=o.verify?o.verify(Ne,q,S):Ne;if(pe===!0)D=null;else throw Ne===!0&&(D={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(pe||pe===0)&&(typeof pe=="object"&&!e.util.isArray(pe)?(pe.message&&(D.message=pe.message),pe.error&&(D.error=pe.error)):typeof pe=="string"&&(D.error=pe)),D;N=!1,++q}while(l.length>0);return!0},Pi.exports}var ou;function Zl(){if(ou)return ki.exports;ou=1;var e=Ue();ir(),Fn(),Br(),Xl(),Ql(),Yt(),Ba(),Mn(),Fe(),vo();var t=e.asn1,r=e.pki,a=ki.exports=e.pkcs12=e.pkcs12||{},i={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},s={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},i,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},c={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},n={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},d={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function f(m,E,u,p){for(var x=[],w=0;w<m.length;w++)for(var B=0;B<m[w].safeBags.length;B++){var C=m[w].safeBags[B];if(!(p!==void 0&&C.type!==p)){if(E===null){x.push(C);continue}C.attributes[E]!==void 0&&C.attributes[E].indexOf(u)>=0&&x.push(C)}}return x}a.pkcs12FromAsn1=function(m,E,u){typeof E=="string"?(u=E,E=!0):E===void 0&&(E=!0);var p={},x=[];if(!t.validate(m,s,p,x)){var w=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw w.errors=w,w}var B={version:p.version.charCodeAt(0),safeContents:[],getBags:function(Y){var Q={},J;return"localKeyId"in Y?J=Y.localKeyId:"localKeyIdHex"in Y&&(J=e.util.hexToBytes(Y.localKeyIdHex)),J===void 0&&!("friendlyName"in Y)&&"bagType"in Y&&(Q[Y.bagType]=f(B.safeContents,null,null,Y.bagType)),J!==void 0&&(Q.localKeyId=f(B.safeContents,"localKeyId",J,Y.bagType)),"friendlyName"in Y&&(Q.friendlyName=f(B.safeContents,"friendlyName",Y.friendlyName,Y.bagType)),Q},getBagsByFriendlyName:function(Y,Q){return f(B.safeContents,"friendlyName",Y,Q)},getBagsByLocalKeyId:function(Y,Q){return f(B.safeContents,"localKeyId",Y,Q)}};if(p.version.charCodeAt(0)!==3){var w=new Error("PKCS#12 PFX of version other than 3 not supported.");throw w.version=p.version.charCodeAt(0),w}if(t.derToOid(p.contentType)!==r.oids.data){var w=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw w.oid=t.derToOid(p.contentType),w}var C=p.content.value[0];if(C.tagClass!==t.Class.UNIVERSAL||C.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(C=b(C),p.mac){var l=null,o=0,S=t.derToOid(p.macAlgorithm);switch(S){case r.oids.sha1:l=e.md.sha1.create(),o=20;break;case r.oids.sha256:l=e.md.sha256.create(),o=32;break;case r.oids.sha384:l=e.md.sha384.create(),o=48;break;case r.oids.sha512:l=e.md.sha512.create(),o=64;break;case r.oids.md5:l=e.md.md5.create(),o=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+S);var A=new e.util.ByteBuffer(p.macSalt),N="macIterations"in p?parseInt(e.util.bytesToHex(p.macIterations),16):1,D=a.generateKey(u,A,3,N,o,l),q=e.hmac.create();q.start(l,D),q.update(C.value);var H=q.getMac();if(H.getBytes()!==p.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return I(B,C.value,E,u),B};function b(m){if(m.composed||m.constructed){for(var E=e.util.createBuffer(),u=0;u<m.value.length;++u)E.putBytes(m.value[u].value);m.composed=m.constructed=!1,m.value=E.getBytes()}return m}function I(m,E,u,p){if(E=t.fromDer(E,u),E.tagClass!==t.Class.UNIVERSAL||E.type!==t.Type.SEQUENCE||E.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var x=0;x<E.value.length;x++){var w=E.value[x],B={},C=[];if(!t.validate(w,i,B,C)){var l=new Error("Cannot read ContentInfo.");throw l.errors=C,l}var o={encrypted:!1},S=null,A=B.content.value[0];switch(t.derToOid(B.contentType)){case r.oids.data:if(A.tagClass!==t.Class.UNIVERSAL||A.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");S=b(A).value;break;case r.oids.encryptedData:S=v(A,p),o.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=t.derToOid(B.contentType),l}o.safeBags=h(S,u,p),m.safeContents.push(o)}}function v(m,E){var u={},p=[];if(!t.validate(m,e.pkcs7.asn1.encryptedDataValidator,u,p)){var x=new Error("Cannot read EncryptedContentInfo.");throw x.errors=p,x}var w=t.derToOid(u.contentType);if(w!==r.oids.data){var x=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw x.oid=w,x}w=t.derToOid(u.encAlgorithm);var B=r.pbe.getCipher(w,u.encParameter,E),C=b(u.encryptedContentAsn1),l=e.util.createBuffer(C.value);if(B.update(l),!B.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return B.output.getBytes()}function h(m,E,u){if(!E&&m.length===0)return[];if(m=t.fromDer(m,E),m.tagClass!==t.Class.UNIVERSAL||m.type!==t.Type.SEQUENCE||m.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var p=[],x=0;x<m.value.length;x++){var w=m.value[x],B={},C=[];if(!t.validate(w,c,B,C)){var l=new Error("Cannot read SafeBag.");throw l.errors=C,l}var o={type:t.derToOid(B.bagId),attributes:y(B.bagAttributes)};p.push(o);var S,A,N=B.bagValue.value[0];switch(o.type){case r.oids.pkcs8ShroudedKeyBag:if(N=r.decryptPrivateKeyInfo(N,u),N===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case r.oids.keyBag:try{o.key=r.privateKeyFromAsn1(N)}catch{o.key=null,o.asn1=N}continue;case r.oids.certBag:S=d,A=function(){if(t.derToOid(B.certId)!==r.oids.x509Certificate){var q=new Error("Unsupported certificate type, only X.509 supported.");throw q.oid=t.derToOid(B.certId),q}var H=t.fromDer(B.cert,E);try{o.cert=r.certificateFromAsn1(H,!0)}catch{o.cert=null,o.asn1=H}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=o.type,l}if(S!==void 0&&!t.validate(N,S,B,C)){var l=new Error("Cannot read PKCS#12 "+S.name);throw l.errors=C,l}A()}return p}function y(m){var E={};if(m!==void 0)for(var u=0;u<m.length;++u){var p={},x=[];if(!t.validate(m[u],n,p,x)){var w=new Error("Cannot read PKCS#12 BagAttribute.");throw w.errors=x,w}var B=t.derToOid(p.oid);if(r.oids[B]!==void 0){E[r.oids[B]]=[];for(var C=0;C<p.values.length;++C)E[r.oids[B]].push(p.values[C].value)}}return E}return a.toPkcs12Asn1=function(m,E,u,p){p=p||{},p.saltSize=p.saltSize||8,p.count=p.count||2048,p.algorithm=p.algorithm||p.encAlgorithm||"aes128","useMac"in p||(p.useMac=!0),"localKeyId"in p||(p.localKeyId=null),"generateLocalKeyId"in p||(p.generateLocalKeyId=!0);var x=p.localKeyId,w;if(x!==null)x=e.util.hexToBytes(x);else if(p.generateLocalKeyId)if(E){var B=e.util.isArray(E)?E[0]:E;typeof B=="string"&&(B=r.certificateFromPem(B));var C=e.md.sha1.create();C.update(t.toDer(r.certificateToAsn1(B)).getBytes()),x=C.digest().getBytes()}else x=e.random.getBytes(20);var l=[];x!==null&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,x)])])),"friendlyName"in p&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,p.friendlyName)])])),l.length>0&&(w=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,l));var o=[],S=[];E!==null&&(e.util.isArray(E)?S=E:S=[E]);for(var A=[],N=0;N<S.length;++N){E=S[N],typeof E=="string"&&(E=r.certificateFromPem(E));var D=N===0?w:void 0,q=r.certificateToAsn1(E),H=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(q).getBytes())])])]),D]);A.push(H)}if(A.length>0){var Y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,A),Q=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(Y).getBytes())])]);o.push(Q)}var J=null;if(m!==null){var ne=r.wrapRsaPrivateKey(r.privateKeyToAsn1(m));u===null?J=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[ne]),w]):J=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[r.encryptPrivateKeyInfo(ne,u,p)]),w]);var se=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[J]),fe=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(se).getBytes())])]);o.push(fe)}var he=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,o),we;if(p.useMac){var C=e.md.sha1.create(),Se=new e.util.ByteBuffer(e.random.getBytes(p.saltSize)),le=p.count,m=a.generateKey(u,Se,3,le,20),Ne=e.hmac.create();Ne.start(C,m),Ne.update(t.toDer(he).getBytes());var pe=Ne.getMac();we=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,pe.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,Se.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(le).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(he).getBytes())])]),we])},a.generateKey=e.pbe.generatePkcs12Key,ki.exports}var cu;function ef(){if(cu)return Si.exports;cu=1;var e=Ue();ir(),Br(),Ql(),Zr(),yo(),Zl(),go(),Ba(),Fe(),vo();var t=e.asn1,r=Si.exports=e.pki=e.pki||{};return r.pemToDer=function(a){var i=e.pem.decode(a)[0];if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return e.util.createBuffer(i.body)},r.privateKeyFromPem=function(a){var i=e.pem.decode(a)[0];if(i.type!=="PRIVATE KEY"&&i.type!=="RSA PRIVATE KEY"){var s=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw s.headerType=i.type,s}if(i.procType&&i.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var c=t.fromDer(i.body);return r.privateKeyFromAsn1(c)},r.privateKeyToPem=function(a,i){var s={type:"RSA PRIVATE KEY",body:t.toDer(r.privateKeyToAsn1(a)).getBytes()};return e.pem.encode(s,{maxline:i})},r.privateKeyInfoToPem=function(a,i){var s={type:"PRIVATE KEY",body:t.toDer(a).getBytes()};return e.pem.encode(s,{maxline:i})},Si.exports}var $i,uu;function tf(){if(uu)return $i;uu=1;var e=Ue();ir(),Fn(),ho(),Zr(),ef(),Yt(),Mn(),Fe();var t=function(T,U,O,g){var k=e.util.createBuffer(),z=T.length>>1,K=z+(T.length&1),te=T.substr(0,K),ge=T.substr(z,K),me=e.util.createBuffer(),Z=e.hmac.create();O=U+O;var ye=Math.ceil(g/16),xe=Math.ceil(g/20);Z.start("MD5",te);var Re=e.util.createBuffer();me.putBytes(O);for(var Ie=0;Ie<ye;++Ie)Z.start(null,null),Z.update(me.getBytes()),me.putBuffer(Z.digest()),Z.start(null,null),Z.update(me.bytes()+O),Re.putBuffer(Z.digest());Z.start("SHA1",ge);var Le=e.util.createBuffer();me.clear(),me.putBytes(O);for(var Ie=0;Ie<xe;++Ie)Z.start(null,null),Z.update(me.getBytes()),me.putBuffer(Z.digest()),Z.start(null,null),Z.update(me.bytes()+O),Le.putBuffer(Z.digest());return k.putBytes(e.util.xorBytes(Re.getBytes(),Le.getBytes(),g)),k},r=function(T,U,O){var g=e.hmac.create();g.start("SHA1",T);var k=e.util.createBuffer();return k.putInt32(U[0]),k.putInt32(U[1]),k.putByte(O.type),k.putByte(O.version.major),k.putByte(O.version.minor),k.putInt16(O.length),k.putBytes(O.fragment.bytes()),g.update(k.getBytes()),g.digest().getBytes()},a=function(T,U,O){var g=!1;try{var k=T.deflate(U.fragment.getBytes());U.fragment=e.util.createBuffer(k),U.length=k.length,g=!0}catch{}return g},i=function(T,U,O){var g=!1;try{var k=T.inflate(U.fragment.getBytes());U.fragment=e.util.createBuffer(k),U.length=k.length,g=!0}catch{}return g},s=function(T,U){var O=0;switch(U){case 1:O=T.getByte();break;case 2:O=T.getInt16();break;case 3:O=T.getInt24();break;case 4:O=T.getInt32();break}return e.util.createBuffer(T.getBytes(O))},c=function(T,U,O){T.putInt(O.length(),U<<3),T.putBuffer(O)},n={};n.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},n.SupportedVersions=[n.Versions.TLS_1_1,n.Versions.TLS_1_0],n.Version=n.SupportedVersions[0],n.MaxFragment=15360,n.ConnectionEnd={server:0,client:1},n.PRFAlgorithm={tls_prf_sha256:0},n.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},n.CipherType={stream:0,block:1,aead:2},n.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},n.CompressionMethod={none:0,deflate:1},n.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},n.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},n.Alert={},n.Alert.Level={warning:1,fatal:2},n.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},n.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},n.CipherSuites={},n.getCipherSuite=function(T){var U=null;for(var O in n.CipherSuites){var g=n.CipherSuites[O];if(g.id[0]===T.charCodeAt(0)&&g.id[1]===T.charCodeAt(1)){U=g;break}}return U},n.handleUnexpected=function(T,U){var O=!T.open&&T.entity===n.ConnectionEnd.client;O||T.error(T,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unexpected_message}})},n.handleHelloRequest=function(T,U,O){!T.handshaking&&T.handshakes>0&&(n.queue(T,n.createAlert(T,{level:n.Alert.Level.warning,description:n.Alert.Description.no_renegotiation})),n.flush(T)),T.process()},n.parseHelloMessage=function(T,U,O){var g=null,k=T.entity===n.ConnectionEnd.client;if(O<38)T.error(T,{message:k?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});else{var z=U.fragment,K=z.length();if(g={version:{major:z.getByte(),minor:z.getByte()},random:e.util.createBuffer(z.getBytes(32)),session_id:s(z,1),extensions:[]},k?(g.cipher_suite=z.getBytes(2),g.compression_method=z.getByte()):(g.cipher_suites=s(z,2),g.compression_methods=s(z,1)),K=O-(K-z.length()),K>0){for(var te=s(z,2);te.length()>0;)g.extensions.push({type:[te.getByte(),te.getByte()],data:s(te,2)});if(!k)for(var ge=0;ge<g.extensions.length;++ge){var me=g.extensions[ge];if(me.type[0]===0&&me.type[1]===0)for(var Z=s(me.data,2);Z.length()>0;){var ye=Z.getByte();if(ye!==0)break;T.session.extensions.server_name.serverNameList.push(s(Z,2).getBytes())}}}if(T.session.version&&(g.version.major!==T.session.version.major||g.version.minor!==T.session.version.minor))return T.error(T,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.protocol_version}});if(k)T.session.cipherSuite=n.getCipherSuite(g.cipher_suite);else for(var xe=e.util.createBuffer(g.cipher_suites.bytes());xe.length()>0&&(T.session.cipherSuite=n.getCipherSuite(xe.getBytes(2)),T.session.cipherSuite===null););if(T.session.cipherSuite===null)return T.error(T,{message:"No cipher suites in common.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.handshake_failure},cipherSuite:e.util.bytesToHex(g.cipher_suite)});k?T.session.compressionMethod=g.compression_method:T.session.compressionMethod=n.CompressionMethod.none}return g},n.createSecurityParameters=function(T,U){var O=T.entity===n.ConnectionEnd.client,g=U.random.bytes(),k=O?T.session.sp.client_random:g,z=O?g:n.createRandom().getBytes();T.session.sp={entity:T.entity,prf_algorithm:n.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:T.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:k,server_random:z}},n.handleServerHello=function(T,U,O){var g=n.parseHelloMessage(T,U,O);if(!T.fail){if(g.version.minor<=T.version.minor)T.version.minor=g.version.minor;else return T.error(T,{message:"Incompatible TLS version.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.protocol_version}});T.session.version=T.version;var k=g.session_id.bytes();k.length>0&&k===T.session.id?(T.expect=h,T.session.resuming=!0,T.session.sp.server_random=g.random.bytes()):(T.expect=f,T.session.resuming=!1,n.createSecurityParameters(T,g)),T.session.id=k,T.process()}},n.handleClientHello=function(T,U,O){var g=n.parseHelloMessage(T,U,O);if(!T.fail){var k=g.session_id.bytes(),z=null;if(T.sessionCache&&(z=T.sessionCache.getSession(k),z===null?k="":(z.version.major!==g.version.major||z.version.minor>g.version.minor)&&(z=null,k="")),k.length===0&&(k=e.random.getBytes(32)),T.session.id=k,T.session.clientHelloVersion=g.version,T.session.sp={},z)T.version=T.session.version=z.version,T.session.sp=z.sp;else{for(var K,te=1;te<n.SupportedVersions.length&&(K=n.SupportedVersions[te],!(K.minor<=g.version.minor));++te);T.version={major:K.major,minor:K.minor},T.session.version=T.version}z!==null?(T.expect=B,T.session.resuming=!0,T.session.sp.client_random=g.random.bytes()):(T.expect=T.verifyClient!==!1?p:x,T.session.resuming=!1,n.createSecurityParameters(T,g)),T.open=!0,n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createServerHello(T)})),T.session.resuming?(n.queue(T,n.createRecord(T,{type:n.ContentType.change_cipher_spec,data:n.createChangeCipherSpec()})),T.state.pending=n.createConnectionState(T),T.state.current.write=T.state.pending.write,n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createFinished(T)}))):(n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createCertificate(T)})),T.fail||(n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createServerKeyExchange(T)})),T.verifyClient!==!1&&n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createCertificateRequest(T)})),n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createServerHelloDone(T)})))),n.flush(T),T.process()}},n.handleCertificate=function(T,U,O){if(O<3)return T.error(T,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var g=U.fragment,k={certificate_list:s(g,3)},z,K,te=[];try{for(;k.certificate_list.length()>0;)z=s(k.certificate_list,3),K=e.asn1.fromDer(z),z=e.pki.certificateFromAsn1(K,!0),te.push(z)}catch(me){return T.error(T,{message:"Could not parse certificate list.",cause:me,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.bad_certificate}})}var ge=T.entity===n.ConnectionEnd.client;(ge||T.verifyClient===!0)&&te.length===0?T.error(T,{message:ge?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}}):te.length===0?T.expect=ge?b:x:(ge?T.session.serverCertificate=te[0]:T.session.clientCertificate=te[0],n.verifyCertificateChain(T,te)&&(T.expect=ge?b:x)),T.process()},n.handleServerKeyExchange=function(T,U,O){if(O>0)return T.error(T,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unsupported_certificate}});T.expect=I,T.process()},n.handleClientKeyExchange=function(T,U,O){if(O<48)return T.error(T,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unsupported_certificate}});var g=U.fragment,k={enc_pre_master_secret:s(g,2).getBytes()},z=null;if(T.getPrivateKey)try{z=T.getPrivateKey(T,T.session.serverCertificate),z=e.pki.privateKeyFromPem(z)}catch(ge){T.error(T,{message:"Could not get private key.",cause:ge,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}})}if(z===null)return T.error(T,{message:"No private key set.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}});try{var K=T.session.sp;K.pre_master_secret=z.decrypt(k.enc_pre_master_secret);var te=T.session.clientHelloVersion;if(te.major!==K.pre_master_secret.charCodeAt(0)||te.minor!==K.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{K.pre_master_secret=e.random.getBytes(48)}T.expect=B,T.session.clientCertificate!==null&&(T.expect=w),T.process()},n.handleCertificateRequest=function(T,U,O){if(O<3)return T.error(T,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var g=U.fragment,k={certificate_types:s(g,1),certificate_authorities:s(g,2)};T.session.certificateRequest=k,T.expect=v,T.process()},n.handleCertificateVerify=function(T,U,O){if(O<2)return T.error(T,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var g=U.fragment;g.read-=4;var k=g.bytes();g.read+=4;var z={signature:s(g,2).getBytes()},K=e.util.createBuffer();K.putBuffer(T.session.md5.digest()),K.putBuffer(T.session.sha1.digest()),K=K.getBytes();try{var te=T.session.clientCertificate;if(!te.publicKey.verify(K,z.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");T.session.md5.update(k),T.session.sha1.update(k)}catch{return T.error(T,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.handshake_failure}})}T.expect=B,T.process()},n.handleServerHelloDone=function(T,U,O){if(O>0)return T.error(T,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.record_overflow}});if(T.serverCertificate===null){var g={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.insufficient_security}},k=0,z=T.verify(T,g.alert.description,k,[]);if(z!==!0)return(z||z===0)&&(typeof z=="object"&&!e.util.isArray(z)?(z.message&&(g.message=z.message),z.alert&&(g.alert.description=z.alert)):typeof z=="number"&&(g.alert.description=z)),T.error(T,g)}T.session.certificateRequest!==null&&(U=n.createRecord(T,{type:n.ContentType.handshake,data:n.createCertificate(T)}),n.queue(T,U)),U=n.createRecord(T,{type:n.ContentType.handshake,data:n.createClientKeyExchange(T)}),n.queue(T,U),T.expect=E;var K=function(te,ge){te.session.certificateRequest!==null&&te.session.clientCertificate!==null&&n.queue(te,n.createRecord(te,{type:n.ContentType.handshake,data:n.createCertificateVerify(te,ge)})),n.queue(te,n.createRecord(te,{type:n.ContentType.change_cipher_spec,data:n.createChangeCipherSpec()})),te.state.pending=n.createConnectionState(te),te.state.current.write=te.state.pending.write,n.queue(te,n.createRecord(te,{type:n.ContentType.handshake,data:n.createFinished(te)})),te.expect=h,n.flush(te),te.process()};if(T.session.certificateRequest===null||T.session.clientCertificate===null)return K(T,null);n.getClientSignature(T,K)},n.handleChangeCipherSpec=function(T,U){if(U.fragment.getByte()!==1)return T.error(T,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.illegal_parameter}});var O=T.entity===n.ConnectionEnd.client;(T.session.resuming&&O||!T.session.resuming&&!O)&&(T.state.pending=n.createConnectionState(T)),T.state.current.read=T.state.pending.read,(!T.session.resuming&&O||T.session.resuming&&!O)&&(T.state.pending=null),T.expect=O?y:C,T.process()},n.handleFinished=function(T,U,O){var g=U.fragment;g.read-=4;var k=g.bytes();g.read+=4;var z=U.fragment.getBytes();g=e.util.createBuffer(),g.putBuffer(T.session.md5.digest()),g.putBuffer(T.session.sha1.digest());var K=T.entity===n.ConnectionEnd.client,te=K?"server finished":"client finished",ge=T.session.sp,me=12,Z=t;if(g=Z(ge.master_secret,te,g.getBytes(),me),g.getBytes()!==z)return T.error(T,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.decrypt_error}});T.session.md5.update(k),T.session.sha1.update(k),(T.session.resuming&&K||!T.session.resuming&&!K)&&(n.queue(T,n.createRecord(T,{type:n.ContentType.change_cipher_spec,data:n.createChangeCipherSpec()})),T.state.current.write=T.state.pending.write,T.state.pending=null,n.queue(T,n.createRecord(T,{type:n.ContentType.handshake,data:n.createFinished(T)}))),T.expect=K?m:l,T.handshaking=!1,++T.handshakes,T.peerCertificate=K?T.session.serverCertificate:T.session.clientCertificate,n.flush(T),T.isConnected=!0,T.connected(T),T.process()},n.handleAlert=function(T,U){var O=U.fragment,g={level:O.getByte(),description:O.getByte()},k;switch(g.description){case n.Alert.Description.close_notify:k="Connection closed.";break;case n.Alert.Description.unexpected_message:k="Unexpected message.";break;case n.Alert.Description.bad_record_mac:k="Bad record MAC.";break;case n.Alert.Description.decryption_failed:k="Decryption failed.";break;case n.Alert.Description.record_overflow:k="Record overflow.";break;case n.Alert.Description.decompression_failure:k="Decompression failed.";break;case n.Alert.Description.handshake_failure:k="Handshake failure.";break;case n.Alert.Description.bad_certificate:k="Bad certificate.";break;case n.Alert.Description.unsupported_certificate:k="Unsupported certificate.";break;case n.Alert.Description.certificate_revoked:k="Certificate revoked.";break;case n.Alert.Description.certificate_expired:k="Certificate expired.";break;case n.Alert.Description.certificate_unknown:k="Certificate unknown.";break;case n.Alert.Description.illegal_parameter:k="Illegal parameter.";break;case n.Alert.Description.unknown_ca:k="Unknown certificate authority.";break;case n.Alert.Description.access_denied:k="Access denied.";break;case n.Alert.Description.decode_error:k="Decode error.";break;case n.Alert.Description.decrypt_error:k="Decrypt error.";break;case n.Alert.Description.export_restriction:k="Export restriction.";break;case n.Alert.Description.protocol_version:k="Unsupported protocol version.";break;case n.Alert.Description.insufficient_security:k="Insufficient security.";break;case n.Alert.Description.internal_error:k="Internal error.";break;case n.Alert.Description.user_canceled:k="User canceled.";break;case n.Alert.Description.no_renegotiation:k="Renegotiation not supported.";break;default:k="Unknown error.";break}if(g.description===n.Alert.Description.close_notify)return T.close();T.error(T,{message:k,send:!1,origin:T.entity===n.ConnectionEnd.client?"server":"client",alert:g}),T.process()},n.handleHandshake=function(T,U){var O=U.fragment,g=O.getByte(),k=O.getInt24();if(k>O.length())return T.fragmented=U,U.fragment=e.util.createBuffer(),O.read-=4,T.process();T.fragmented=null,O.read-=4;var z=O.bytes(k+4);O.read+=4,g in we[T.entity][T.expect]?(T.entity===n.ConnectionEnd.server&&!T.open&&!T.fail&&(T.handshaking=!0,T.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:e.md.md5.create(),sha1:e.md.sha1.create()}),g!==n.HandshakeType.hello_request&&g!==n.HandshakeType.certificate_verify&&g!==n.HandshakeType.finished&&(T.session.md5.update(z),T.session.sha1.update(z)),we[T.entity][T.expect][g](T,U,k)):n.handleUnexpected(T,U)},n.handleApplicationData=function(T,U){T.data.putBuffer(U.fragment),T.dataReady(T),T.process()},n.handleHeartbeat=function(T,U){var O=U.fragment,g=O.getByte(),k=O.getInt16(),z=O.getBytes(k);if(g===n.HeartbeatMessageType.heartbeat_request){if(T.handshaking||k>z.length)return T.process();n.queue(T,n.createRecord(T,{type:n.ContentType.heartbeat,data:n.createHeartbeat(n.HeartbeatMessageType.heartbeat_response,z)})),n.flush(T)}else if(g===n.HeartbeatMessageType.heartbeat_response){if(z!==T.expectedHeartbeatPayload)return T.process();T.heartbeatReceived&&T.heartbeatReceived(T,e.util.createBuffer(z))}T.process()};var d=0,f=1,b=2,I=3,v=4,h=5,y=6,m=7,E=8,u=0,p=1,x=2,w=3,B=4,C=5,l=6,o=n.handleUnexpected,S=n.handleChangeCipherSpec,A=n.handleAlert,N=n.handleHandshake,D=n.handleApplicationData,q=n.handleHeartbeat,H=[];H[n.ConnectionEnd.client]=[[o,A,N,o,q],[o,A,N,o,q],[o,A,N,o,q],[o,A,N,o,q],[o,A,N,o,q],[S,A,o,o,q],[o,A,N,o,q],[o,A,N,D,q],[o,A,N,o,q]],H[n.ConnectionEnd.server]=[[o,A,N,o,q],[o,A,N,o,q],[o,A,N,o,q],[o,A,N,o,q],[S,A,o,o,q],[o,A,N,o,q],[o,A,N,D,q],[o,A,N,o,q]];var Y=n.handleHelloRequest,Q=n.handleServerHello,J=n.handleCertificate,ne=n.handleServerKeyExchange,se=n.handleCertificateRequest,fe=n.handleServerHelloDone,he=n.handleFinished,we=[];we[n.ConnectionEnd.client]=[[o,o,Q,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,J,ne,se,fe,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,o,ne,se,fe,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,o,o,se,fe,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,o,o,o,fe,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,he],[Y,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[Y,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o]];var Se=n.handleClientHello,le=n.handleClientKeyExchange,Ne=n.handleCertificateVerify;we[n.ConnectionEnd.server]=[[o,Se,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[o,o,o,o,o,o,o,o,o,o,o,J,o,o,o,o,o,o,o,o,o],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,le,o,o,o,o],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,Ne,o,o,o,o,o],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,he],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o]],n.generateKeys=function(T,U){var O=t,g=U.client_random+U.server_random;T.session.resuming||(U.master_secret=O(U.pre_master_secret,"master secret",g,48).bytes(),U.pre_master_secret=null),g=U.server_random+U.client_random;var k=2*U.mac_key_length+2*U.enc_key_length,z=T.version.major===n.Versions.TLS_1_0.major&&T.version.minor===n.Versions.TLS_1_0.minor;z&&(k+=2*U.fixed_iv_length);var K=O(U.master_secret,"key expansion",g,k),te={client_write_MAC_key:K.getBytes(U.mac_key_length),server_write_MAC_key:K.getBytes(U.mac_key_length),client_write_key:K.getBytes(U.enc_key_length),server_write_key:K.getBytes(U.enc_key_length)};return z&&(te.client_write_IV=K.getBytes(U.fixed_iv_length),te.server_write_IV=K.getBytes(U.fixed_iv_length)),te},n.createConnectionState=function(T){var U=T.entity===n.ConnectionEnd.client,O=function(){var z={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(K){return!0},compressionState:null,compressFunction:function(K){return!0},updateSequenceNumber:function(){z.sequenceNumber[1]===4294967295?(z.sequenceNumber[1]=0,++z.sequenceNumber[0]):++z.sequenceNumber[1]}};return z},g={read:O(),write:O()};if(g.read.update=function(z,K){return g.read.cipherFunction(K,g.read)?g.read.compressFunction(z,K,g.read)||z.error(z,{message:"Could not decompress record.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.decompression_failure}}):z.error(z,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.bad_record_mac}}),!z.fail},g.write.update=function(z,K){return g.write.compressFunction(z,K,g.write)?g.write.cipherFunction(K,g.write)||z.error(z,{message:"Could not encrypt record.",send:!1,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}}):z.error(z,{message:"Could not compress record.",send:!1,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}}),!z.fail},T.session){var k=T.session.sp;switch(T.session.cipherSuite.initSecurityParameters(k),k.keys=n.generateKeys(T,k),g.read.macKey=U?k.keys.server_write_MAC_key:k.keys.client_write_MAC_key,g.write.macKey=U?k.keys.client_write_MAC_key:k.keys.server_write_MAC_key,T.session.cipherSuite.initConnectionState(g,T,k),k.compression_algorithm){case n.CompressionMethod.none:break;case n.CompressionMethod.deflate:g.read.compressFunction=i,g.write.compressFunction=a;break;default:throw new Error("Unsupported compression algorithm.")}}return g},n.createRandom=function(){var T=new Date,U=+T+T.getTimezoneOffset()*6e4,O=e.util.createBuffer();return O.putInt32(U),O.putBytes(e.random.getBytes(28)),O},n.createRecord=function(T,U){if(!U.data)return null;var O={type:U.type,version:{major:T.version.major,minor:T.version.minor},length:U.data.length(),fragment:U.data};return O},n.createAlert=function(T,U){var O=e.util.createBuffer();return O.putByte(U.level),O.putByte(U.description),n.createRecord(T,{type:n.ContentType.alert,data:O})},n.createClientHello=function(T){T.session.clientHelloVersion={major:T.version.major,minor:T.version.minor};for(var U=e.util.createBuffer(),O=0;O<T.cipherSuites.length;++O){var g=T.cipherSuites[O];U.putByte(g.id[0]),U.putByte(g.id[1])}var k=U.length(),z=e.util.createBuffer();z.putByte(n.CompressionMethod.none);var K=z.length(),te=e.util.createBuffer();if(T.virtualHost){var ge=e.util.createBuffer();ge.putByte(0),ge.putByte(0);var me=e.util.createBuffer();me.putByte(0),c(me,2,e.util.createBuffer(T.virtualHost));var Z=e.util.createBuffer();c(Z,2,me),c(ge,2,Z),te.putBuffer(ge)}var ye=te.length();ye>0&&(ye+=2);var xe=T.session.id,Re=xe.length+1+2+4+28+2+k+1+K+ye,Ie=e.util.createBuffer();return Ie.putByte(n.HandshakeType.client_hello),Ie.putInt24(Re),Ie.putByte(T.version.major),Ie.putByte(T.version.minor),Ie.putBytes(T.session.sp.client_random),c(Ie,1,e.util.createBuffer(xe)),c(Ie,2,U),c(Ie,1,z),ye>0&&c(Ie,2,te),Ie},n.createServerHello=function(T){var U=T.session.id,O=U.length+1+2+4+28+2+1,g=e.util.createBuffer();return g.putByte(n.HandshakeType.server_hello),g.putInt24(O),g.putByte(T.version.major),g.putByte(T.version.minor),g.putBytes(T.session.sp.server_random),c(g,1,e.util.createBuffer(U)),g.putByte(T.session.cipherSuite.id[0]),g.putByte(T.session.cipherSuite.id[1]),g.putByte(T.session.compressionMethod),g},n.createCertificate=function(T){var U=T.entity===n.ConnectionEnd.client,O=null;if(T.getCertificate){var g;U?g=T.session.certificateRequest:g=T.session.extensions.server_name.serverNameList,O=T.getCertificate(T,g)}var k=e.util.createBuffer();if(O!==null)try{e.util.isArray(O)||(O=[O]);for(var z=null,K=0;K<O.length;++K){var te=e.pem.decode(O[K])[0];if(te.type!=="CERTIFICATE"&&te.type!=="X509 CERTIFICATE"&&te.type!=="TRUSTED CERTIFICATE"){var ge=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw ge.headerType=te.type,ge}if(te.procType&&te.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var me=e.util.createBuffer(te.body);z===null&&(z=e.asn1.fromDer(me.bytes(),!1));var Z=e.util.createBuffer();c(Z,3,me),k.putBuffer(Z)}O=e.pki.certificateFromAsn1(z),U?T.session.clientCertificate=O:T.session.serverCertificate=O}catch(Re){return T.error(T,{message:"Could not send certificate list.",cause:Re,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.bad_certificate}})}var ye=3+k.length(),xe=e.util.createBuffer();return xe.putByte(n.HandshakeType.certificate),xe.putInt24(ye),c(xe,3,k),xe},n.createClientKeyExchange=function(T){var U=e.util.createBuffer();U.putByte(T.session.clientHelloVersion.major),U.putByte(T.session.clientHelloVersion.minor),U.putBytes(e.random.getBytes(46));var O=T.session.sp;O.pre_master_secret=U.getBytes();var g=T.session.serverCertificate.publicKey;U=g.encrypt(O.pre_master_secret);var k=U.length+2,z=e.util.createBuffer();return z.putByte(n.HandshakeType.client_key_exchange),z.putInt24(k),z.putInt16(U.length),z.putBytes(U),z},n.createServerKeyExchange=function(T){var U=e.util.createBuffer();return U},n.getClientSignature=function(T,U){var O=e.util.createBuffer();O.putBuffer(T.session.md5.digest()),O.putBuffer(T.session.sha1.digest()),O=O.getBytes(),T.getSignature=T.getSignature||function(g,k,z){var K=null;if(g.getPrivateKey)try{K=g.getPrivateKey(g,g.session.clientCertificate),K=e.pki.privateKeyFromPem(K)}catch(te){g.error(g,{message:"Could not get private key.",cause:te,send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}})}K===null?g.error(g,{message:"No private key set.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.internal_error}}):k=K.sign(k,null),z(g,k)},T.getSignature(T,O,U)},n.createCertificateVerify=function(T,U){var O=U.length+2,g=e.util.createBuffer();return g.putByte(n.HandshakeType.certificate_verify),g.putInt24(O),g.putInt16(U.length),g.putBytes(U),g},n.createCertificateRequest=function(T){var U=e.util.createBuffer();U.putByte(1);var O=e.util.createBuffer();for(var g in T.caStore.certs){var k=T.caStore.certs[g],z=e.pki.distinguishedNameToAsn1(k.subject),K=e.asn1.toDer(z);O.putInt16(K.length()),O.putBuffer(K)}var te=1+U.length()+2+O.length(),ge=e.util.createBuffer();return ge.putByte(n.HandshakeType.certificate_request),ge.putInt24(te),c(ge,1,U),c(ge,2,O),ge},n.createServerHelloDone=function(T){var U=e.util.createBuffer();return U.putByte(n.HandshakeType.server_hello_done),U.putInt24(0),U},n.createChangeCipherSpec=function(){var T=e.util.createBuffer();return T.putByte(1),T},n.createFinished=function(T){var U=e.util.createBuffer();U.putBuffer(T.session.md5.digest()),U.putBuffer(T.session.sha1.digest());var O=T.entity===n.ConnectionEnd.client,g=T.session.sp,k=12,z=t,K=O?"client finished":"server finished";U=z(g.master_secret,K,U.getBytes(),k);var te=e.util.createBuffer();return te.putByte(n.HandshakeType.finished),te.putInt24(U.length()),te.putBuffer(U),te},n.createHeartbeat=function(T,U,O){typeof O>"u"&&(O=U.length);var g=e.util.createBuffer();g.putByte(T),g.putInt16(O),g.putBytes(U);var k=g.length(),z=Math.max(16,k-O-3);return g.putBytes(e.random.getBytes(z)),g},n.queue=function(T,U){if(U&&!(U.fragment.length()===0&&(U.type===n.ContentType.handshake||U.type===n.ContentType.alert||U.type===n.ContentType.change_cipher_spec))){if(U.type===n.ContentType.handshake){var O=U.fragment.bytes();T.session.md5.update(O),T.session.sha1.update(O),O=null}var g;if(U.fragment.length()<=n.MaxFragment)g=[U];else{g=[];for(var k=U.fragment.bytes();k.length>n.MaxFragment;)g.push(n.createRecord(T,{type:U.type,data:e.util.createBuffer(k.slice(0,n.MaxFragment))})),k=k.slice(n.MaxFragment);k.length>0&&g.push(n.createRecord(T,{type:U.type,data:e.util.createBuffer(k)}))}for(var z=0;z<g.length&&!T.fail;++z){var K=g[z],te=T.state.current.write;te.update(T,K)&&T.records.push(K)}}},n.flush=function(T){for(var U=0;U<T.records.length;++U){var O=T.records[U];T.tlsData.putByte(O.type),T.tlsData.putByte(O.version.major),T.tlsData.putByte(O.version.minor),T.tlsData.putInt16(O.fragment.length()),T.tlsData.putBuffer(T.records[U].fragment)}return T.records=[],T.tlsDataReady(T)};var pe=function(T){switch(T){case!0:return!0;case e.pki.certificateError.bad_certificate:return n.Alert.Description.bad_certificate;case e.pki.certificateError.unsupported_certificate:return n.Alert.Description.unsupported_certificate;case e.pki.certificateError.certificate_revoked:return n.Alert.Description.certificate_revoked;case e.pki.certificateError.certificate_expired:return n.Alert.Description.certificate_expired;case e.pki.certificateError.certificate_unknown:return n.Alert.Description.certificate_unknown;case e.pki.certificateError.unknown_ca:return n.Alert.Description.unknown_ca;default:return n.Alert.Description.bad_certificate}},tt=function(T){switch(T){case!0:return!0;case n.Alert.Description.bad_certificate:return e.pki.certificateError.bad_certificate;case n.Alert.Description.unsupported_certificate:return e.pki.certificateError.unsupported_certificate;case n.Alert.Description.certificate_revoked:return e.pki.certificateError.certificate_revoked;case n.Alert.Description.certificate_expired:return e.pki.certificateError.certificate_expired;case n.Alert.Description.certificate_unknown:return e.pki.certificateError.certificate_unknown;case n.Alert.Description.unknown_ca:return e.pki.certificateError.unknown_ca;default:return e.pki.certificateError.bad_certificate}};n.verifyCertificateChain=function(T,U){try{var O={};for(var g in T.verifyOptions)O[g]=T.verifyOptions[g];O.verify=function(z,K,te){var ge=pe(z),me=T.verify(T,z,K,te);if(me!==!0){if(typeof me=="object"&&!e.util.isArray(me)){var Z=new Error("The application rejected the certificate.");throw Z.send=!0,Z.alert={level:n.Alert.Level.fatal,description:n.Alert.Description.bad_certificate},me.message&&(Z.message=me.message),me.alert&&(Z.alert.description=me.alert),Z}me!==z&&(me=tt(me))}return me},e.pki.verifyCertificateChain(T.caStore,U,O)}catch(z){var k=z;(typeof k!="object"||e.util.isArray(k))&&(k={send:!0,alert:{level:n.Alert.Level.fatal,description:pe(z)}}),"send"in k||(k.send=!0),"alert"in k||(k.alert={level:n.Alert.Level.fatal,description:pe(k.error)}),T.error(T,k)}return!T.fail},n.createSessionCache=function(T,U){var O=null;if(T&&T.getSession&&T.setSession&&T.order)O=T;else{O={},O.cache=T||{},O.capacity=Math.max(U||100,1),O.order=[];for(var g in T)O.order.length<=U?O.order.push(g):delete T[g];O.getSession=function(k){var z=null,K=null;if(k?K=e.util.bytesToHex(k):O.order.length>0&&(K=O.order[0]),K!==null&&K in O.cache){z=O.cache[K],delete O.cache[K];for(var te in O.order)if(O.order[te]===K){O.order.splice(te,1);break}}return z},O.setSession=function(k,z){if(O.order.length===O.capacity){var K=O.order.shift();delete O.cache[K]}var K=e.util.bytesToHex(k);O.order.push(K),O.cache[K]=z}}return O},n.createConnection=function(T){var U=null;T.caStore?e.util.isArray(T.caStore)?U=e.pki.createCaStore(T.caStore):U=T.caStore:U=e.pki.createCaStore();var O=T.cipherSuites||null;if(O===null){O=[];for(var g in n.CipherSuites)O.push(n.CipherSuites[g])}var k=T.server?n.ConnectionEnd.server:n.ConnectionEnd.client,z=T.sessionCache?n.createSessionCache(T.sessionCache):null,K={version:{major:n.Version.major,minor:n.Version.minor},entity:k,sessionId:T.sessionId,caStore:U,sessionCache:z,cipherSuites:O,connected:T.connected,virtualHost:T.virtualHost||null,verifyClient:T.verifyClient||!1,verify:T.verify||function(Z,ye,xe,Re){return ye},verifyOptions:T.verifyOptions||{},getCertificate:T.getCertificate||null,getPrivateKey:T.getPrivateKey||null,getSignature:T.getSignature||null,input:e.util.createBuffer(),tlsData:e.util.createBuffer(),data:e.util.createBuffer(),tlsDataReady:T.tlsDataReady,dataReady:T.dataReady,heartbeatReceived:T.heartbeatReceived,closed:T.closed,error:function(Z,ye){ye.origin=ye.origin||(Z.entity===n.ConnectionEnd.client?"client":"server"),ye.send&&(n.queue(Z,n.createAlert(Z,ye.alert)),n.flush(Z));var xe=ye.fatal!==!1;xe&&(Z.fail=!0),T.error(Z,ye),xe&&Z.close(!1)},deflate:T.deflate||null,inflate:T.inflate||null};K.reset=function(Z){K.version={major:n.Version.major,minor:n.Version.minor},K.record=null,K.session=null,K.peerCertificate=null,K.state={pending:null,current:null},K.expect=K.entity===n.ConnectionEnd.client?d:u,K.fragmented=null,K.records=[],K.open=!1,K.handshakes=0,K.handshaking=!1,K.isConnected=!1,K.fail=!(Z||typeof Z>"u"),K.input.clear(),K.tlsData.clear(),K.data.clear(),K.state.current=n.createConnectionState(K)},K.reset();var te=function(Z,ye){var xe=ye.type-n.ContentType.change_cipher_spec,Re=H[Z.entity][Z.expect];xe in Re?Re[xe](Z,ye):n.handleUnexpected(Z,ye)},ge=function(Z){var ye=0,xe=Z.input,Re=xe.length();if(Re<5)ye=5-Re;else{Z.record={type:xe.getByte(),version:{major:xe.getByte(),minor:xe.getByte()},length:xe.getInt16(),fragment:e.util.createBuffer(),ready:!1};var Ie=Z.record.version.major===Z.version.major;Ie&&Z.session&&Z.session.version&&(Ie=Z.record.version.minor===Z.version.minor),Ie||Z.error(Z,{message:"Incompatible TLS version.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.protocol_version}})}return ye},me=function(Z){var ye=0,xe=Z.input,Re=xe.length();if(Re<Z.record.length)ye=Z.record.length-Re;else{Z.record.fragment.putBytes(xe.getBytes(Z.record.length)),xe.compact();var Ie=Z.state.current.read;Ie.update(Z,Z.record)&&(Z.fragmented!==null&&(Z.fragmented.type===Z.record.type?(Z.fragmented.fragment.putBuffer(Z.record.fragment),Z.record=Z.fragmented):Z.error(Z,{message:"Invalid fragmented record.",send:!0,alert:{level:n.Alert.Level.fatal,description:n.Alert.Description.unexpected_message}})),Z.record.ready=!0)}return ye};return K.handshake=function(Z){if(K.entity!==n.ConnectionEnd.client)K.error(K,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(K.handshaking)K.error(K,{message:"Handshake already in progress.",fatal:!1});else{K.fail&&!K.open&&K.handshakes===0&&(K.fail=!1),K.handshaking=!0,Z=Z||"";var ye=null;Z.length>0&&(K.sessionCache&&(ye=K.sessionCache.getSession(Z)),ye===null&&(Z="")),Z.length===0&&K.sessionCache&&(ye=K.sessionCache.getSession(),ye!==null&&(Z=ye.id)),K.session={id:Z,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:e.md.md5.create(),sha1:e.md.sha1.create()},ye&&(K.version=ye.version,K.session.sp=ye.sp),K.session.sp.client_random=n.createRandom().getBytes(),K.open=!0,n.queue(K,n.createRecord(K,{type:n.ContentType.handshake,data:n.createClientHello(K)})),n.flush(K)}},K.process=function(Z){var ye=0;return Z&&K.input.putBytes(Z),K.fail||(K.record!==null&&K.record.ready&&K.record.fragment.isEmpty()&&(K.record=null),K.record===null&&(ye=ge(K)),!K.fail&&K.record!==null&&!K.record.ready&&(ye=me(K)),!K.fail&&K.record!==null&&K.record.ready&&te(K,K.record)),ye},K.prepare=function(Z){return n.queue(K,n.createRecord(K,{type:n.ContentType.application_data,data:e.util.createBuffer(Z)})),n.flush(K)},K.prepareHeartbeatRequest=function(Z,ye){return Z instanceof e.util.ByteBuffer&&(Z=Z.bytes()),typeof ye>"u"&&(ye=Z.length),K.expectedHeartbeatPayload=Z,n.queue(K,n.createRecord(K,{type:n.ContentType.heartbeat,data:n.createHeartbeat(n.HeartbeatMessageType.heartbeat_request,Z,ye)})),n.flush(K)},K.close=function(Z){if(!K.fail&&K.sessionCache&&K.session){var ye={id:K.session.id,version:K.session.version,sp:K.session.sp};ye.sp.keys=null,K.sessionCache.setSession(ye.id,ye)}K.open&&(K.open=!1,K.input.clear(),(K.isConnected||K.handshaking)&&(K.isConnected=K.handshaking=!1,n.queue(K,n.createAlert(K,{level:n.Alert.Level.warning,description:n.Alert.Description.close_notify})),n.flush(K)),K.closed(K)),K.reset(Z)},K},$i=e.tls=e.tls||{};for(var ke in n)typeof n[ke]!="function"&&(e.tls[ke]=n[ke]);return e.tls.prf_tls1=t,e.tls.hmac_sha1=r,e.tls.createSessionCache=n.createSessionCache,e.tls.createConnection=n.createConnection,$i}var lu;function Ah(){if(lu)return hi.exports;lu=1;var e=Ue();wr(),tf();var t=hi.exports=e.tls;t.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(d){d.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,d.cipher_type=t.CipherType.block,d.enc_key_length=16,d.block_length=16,d.fixed_iv_length=16,d.record_iv_length=16,d.mac_algorithm=t.MACAlgorithm.hmac_sha1,d.mac_length=20,d.mac_key_length=20},initConnectionState:r},t.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(d){d.bulk_cipher_algorithm=t.BulkCipherAlgorithm.aes,d.cipher_type=t.CipherType.block,d.enc_key_length=32,d.block_length=16,d.fixed_iv_length=16,d.record_iv_length=16,d.mac_algorithm=t.MACAlgorithm.hmac_sha1,d.mac_length=20,d.mac_key_length=20},initConnectionState:r};function r(d,f,b){var I=f.entity===e.tls.ConnectionEnd.client;d.read.cipherState={init:!1,cipher:e.cipher.createDecipher("AES-CBC",I?b.keys.server_write_key:b.keys.client_write_key),iv:I?b.keys.server_write_IV:b.keys.client_write_IV},d.write.cipherState={init:!1,cipher:e.cipher.createCipher("AES-CBC",I?b.keys.client_write_key:b.keys.server_write_key),iv:I?b.keys.client_write_IV:b.keys.server_write_IV},d.read.cipherFunction=c,d.write.cipherFunction=a,d.read.macLength=d.write.macLength=b.mac_length,d.read.macFunction=d.write.macFunction=t.hmac_sha1}function a(d,f){var b=!1,I=f.macFunction(f.macKey,f.sequenceNumber,d);d.fragment.putBytes(I),f.updateSequenceNumber();var v;d.version.minor===t.Versions.TLS_1_0.minor?v=f.cipherState.init?null:f.cipherState.iv:v=e.random.getBytesSync(16),f.cipherState.init=!0;var h=f.cipherState.cipher;return h.start({iv:v}),d.version.minor>=t.Versions.TLS_1_1.minor&&h.output.putBytes(v),h.update(d.fragment),h.finish(i)&&(d.fragment=h.output,d.length=d.fragment.length(),b=!0),b}function i(d,f,b){if(!b){var I=d-f.length()%d;f.fillWithByte(I-1,I)}return!0}function s(d,f,b){var I=!0;if(b){for(var v=f.length(),h=f.last(),y=v-1-h;y<v-1;++y)I=I&&f.at(y)==h;I&&f.truncate(h+1)}return I}function c(d,f){var b=!1,I;d.version.minor===t.Versions.TLS_1_0.minor?I=f.cipherState.init?null:f.cipherState.iv:I=d.fragment.getBytes(16),f.cipherState.init=!0;var v=f.cipherState.cipher;v.start({iv:I}),v.update(d.fragment),b=v.finish(s);var h=f.macLength,y=e.random.getBytesSync(h),m=v.output.length();m>=h?(d.fragment=v.output.getBytes(m-h),y=v.output.getBytes(h)):d.fragment=v.output.getBytes(),d.fragment=e.util.createBuffer(d.fragment),d.length=d.fragment.length();var E=f.macFunction(f.macKey,f.sequenceNumber,d);return f.updateSequenceNumber(),b=n(f.macKey,y,E)&&b,b}function n(d,f,b){var I=e.hmac.create();return I.start("SHA1",d),I.update(f),f=I.digest().getBytes(),I.start(null,null),I.update(b),b=I.digest().getBytes(),f===b}return hi.exports}var Fi={exports:{}},fu;function rf(){if(fu)return Fi.exports;fu=1;var e=Ue();dr(),Fe();var t=Fi.exports=e.sha512=e.sha512||{};e.md.sha512=e.md.algorithms.sha512=t;var r=e.sha384=e.sha512.sha384=e.sha512.sha384||{};r.create=function(){return t.create("SHA-384")},e.md.sha384=e.md.algorithms.sha384=r,e.sha512.sha256=e.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},e.md["sha512/256"]=e.md.algorithms["sha512/256"]=e.sha512.sha256,e.sha512.sha224=e.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},e.md["sha512/224"]=e.md.algorithms["sha512/224"]=e.sha512.sha224,t.create=function(f){if(i||n(),typeof f>"u"&&(f="SHA-512"),!(f in c))throw new Error("Invalid SHA-512 algorithm: "+f);for(var b=c[f],I=null,v=e.util.createBuffer(),h=new Array(80),y=0;y<80;++y)h[y]=new Array(2);var m=64;switch(f){case"SHA-384":m=48;break;case"SHA-512/256":m=32;break;case"SHA-512/224":m=28;break}var E={algorithm:f.replace("-","").toLowerCase(),blockLength:128,digestLength:m,messageLength:0,fullMessageLength:null,messageLengthSize:16};return E.start=function(){E.messageLength=0,E.fullMessageLength=E.messageLength128=[];for(var u=E.messageLengthSize/4,p=0;p<u;++p)E.fullMessageLength.push(0);v=e.util.createBuffer(),I=new Array(b.length);for(var p=0;p<b.length;++p)I[p]=b[p].slice(0);return E},E.start(),E.update=function(u,p){p==="utf8"&&(u=e.util.encodeUtf8(u));var x=u.length;E.messageLength+=x,x=[x/4294967296>>>0,x>>>0];for(var w=E.fullMessageLength.length-1;w>=0;--w)E.fullMessageLength[w]+=x[1],x[1]=x[0]+(E.fullMessageLength[w]/4294967296>>>0),E.fullMessageLength[w]=E.fullMessageLength[w]>>>0,x[0]=x[1]/4294967296>>>0;return v.putBytes(u),d(I,h,v),(v.read>2048||v.length()===0)&&v.compact(),E},E.digest=function(){var u=e.util.createBuffer();u.putBytes(v.bytes());var p=E.fullMessageLength[E.fullMessageLength.length-1]+E.messageLengthSize,x=p&E.blockLength-1;u.putBytes(a.substr(0,E.blockLength-x));for(var w,B,C=E.fullMessageLength[0]*8,l=0;l<E.fullMessageLength.length-1;++l)w=E.fullMessageLength[l+1]*8,B=w/4294967296>>>0,C+=B,u.putInt32(C>>>0),C=w>>>0;u.putInt32(C);for(var o=new Array(I.length),l=0;l<I.length;++l)o[l]=I[l].slice(0);d(o,h,u);var S=e.util.createBuffer(),A;f==="SHA-512"?A=o.length:f==="SHA-384"?A=o.length-2:A=o.length-4;for(var l=0;l<A;++l)S.putInt32(o[l][0]),(l!==A-1||f!=="SHA-512/224")&&S.putInt32(o[l][1]);return S},E};var a=null,i=!1,s=null,c=null;function n(){a="",a+=e.util.fillString("\0",128),s=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],c={},c["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],i=!0}function d(f,b,I){for(var v,h,y,m,E,u,p,x,w,B,C,l,o,S,A,N,D,q,H,Y,Q,J,ne,se,fe,he,we,Se,le,Ne,pe,tt,ke,T,U,O=I.length();O>=128;){for(le=0;le<16;++le)b[le][0]=I.getInt32()>>>0,b[le][1]=I.getInt32()>>>0;for(;le<80;++le)tt=b[le-2],Ne=tt[0],pe=tt[1],v=((Ne>>>19|pe<<13)^(pe>>>29|Ne<<3)^Ne>>>6)>>>0,h=((Ne<<13|pe>>>19)^(pe<<3|Ne>>>29)^(Ne<<26|pe>>>6))>>>0,T=b[le-15],Ne=T[0],pe=T[1],y=((Ne>>>1|pe<<31)^(Ne>>>8|pe<<24)^Ne>>>7)>>>0,m=((Ne<<31|pe>>>1)^(Ne<<24|pe>>>8)^(Ne<<25|pe>>>7))>>>0,ke=b[le-7],U=b[le-16],pe=h+ke[1]+m+U[1],b[le][0]=v+ke[0]+y+U[0]+(pe/4294967296>>>0)>>>0,b[le][1]=pe>>>0;for(o=f[0][0],S=f[0][1],A=f[1][0],N=f[1][1],D=f[2][0],q=f[2][1],H=f[3][0],Y=f[3][1],Q=f[4][0],J=f[4][1],ne=f[5][0],se=f[5][1],fe=f[6][0],he=f[6][1],we=f[7][0],Se=f[7][1],le=0;le<80;++le)p=((Q>>>14|J<<18)^(Q>>>18|J<<14)^(J>>>9|Q<<23))>>>0,x=((Q<<18|J>>>14)^(Q<<14|J>>>18)^(J<<23|Q>>>9))>>>0,w=(fe^Q&(ne^fe))>>>0,B=(he^J&(se^he))>>>0,E=((o>>>28|S<<4)^(S>>>2|o<<30)^(S>>>7|o<<25))>>>0,u=((o<<4|S>>>28)^(S<<30|o>>>2)^(S<<25|o>>>7))>>>0,C=(o&A|D&(o^A))>>>0,l=(S&N|q&(S^N))>>>0,pe=Se+x+B+s[le][1]+b[le][1],v=we+p+w+s[le][0]+b[le][0]+(pe/4294967296>>>0)>>>0,h=pe>>>0,pe=u+l,y=E+C+(pe/4294967296>>>0)>>>0,m=pe>>>0,we=fe,Se=he,fe=ne,he=se,ne=Q,se=J,pe=Y+h,Q=H+v+(pe/4294967296>>>0)>>>0,J=pe>>>0,H=D,Y=q,D=A,q=N,A=o,N=S,pe=h+m,o=v+y+(pe/4294967296>>>0)>>>0,S=pe>>>0;pe=f[0][1]+S,f[0][0]=f[0][0]+o+(pe/4294967296>>>0)>>>0,f[0][1]=pe>>>0,pe=f[1][1]+N,f[1][0]=f[1][0]+A+(pe/4294967296>>>0)>>>0,f[1][1]=pe>>>0,pe=f[2][1]+q,f[2][0]=f[2][0]+D+(pe/4294967296>>>0)>>>0,f[2][1]=pe>>>0,pe=f[3][1]+Y,f[3][0]=f[3][0]+H+(pe/4294967296>>>0)>>>0,f[3][1]=pe>>>0,pe=f[4][1]+J,f[4][0]=f[4][0]+Q+(pe/4294967296>>>0)>>>0,f[4][1]=pe>>>0,pe=f[5][1]+se,f[5][0]=f[5][0]+ne+(pe/4294967296>>>0)>>>0,f[5][1]=pe>>>0,pe=f[6][1]+he,f[6][0]=f[6][0]+fe+(pe/4294967296>>>0)>>>0,f[6][1]=pe>>>0,pe=f[7][1]+Se,f[7][0]=f[7][0]+we+(pe/4294967296>>>0)>>>0,f[7][1]=pe>>>0,O-=128}}return Fi.exports}var ua={},du;function _h(){if(du)return ua;du=1;var e=Ue();ir();var t=e.asn1;return ua.privateKeyValidator={name:"PrivateKeyInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},ua.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]},ua}var Mi,pu;function wh(){if(pu)return Mi;pu=1;var e=Ue();wa(),Yt(),rf(),Fe();var t=_h(),r=t.publicKeyValidator,a=t.privateKeyValidator;if(typeof i>"u")var i=e.jsbn.BigInteger;var s=e.util.ByteBuffer,c=typeof Buffer>"u"?Uint8Array:Buffer;e.pki=e.pki||{},Mi=e.pki.ed25519=e.ed25519=e.ed25519||{};var n=e.ed25519;n.constants={},n.constants.PUBLIC_KEY_BYTE_LENGTH=32,n.constants.PRIVATE_KEY_BYTE_LENGTH=64,n.constants.SEED_BYTE_LENGTH=32,n.constants.SIGN_BYTE_LENGTH=64,n.constants.HASH_BYTE_LENGTH=64,n.generateKeyPair=function(T){T=T||{};var U=T.seed;if(U===void 0)U=e.random.getBytesSync(n.constants.SEED_BYTE_LENGTH);else if(typeof U=="string"){if(U.length!==n.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+n.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(U instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');U=d({message:U,encoding:"binary"});for(var O=new c(n.constants.PUBLIC_KEY_BYTE_LENGTH),g=new c(n.constants.PRIVATE_KEY_BYTE_LENGTH),k=0;k<32;++k)g[k]=U[k];return p(O,g),{publicKey:O,privateKey:g}},n.privateKeyFromAsn1=function(T){var U={},O=[],g=e.asn1.validate(T,a,U,O);if(!g){var k=new Error("Invalid Key.");throw k.errors=O,k}var z=e.asn1.derToOid(U.privateKeyOid),K=e.oids.EdDSA25519;if(z!==K)throw new Error('Invalid OID "'+z+'"; OID must be "'+K+'".');var te=U.privateKey,ge=d({message:e.asn1.fromDer(te).value,encoding:"binary"});return{privateKeyBytes:ge}},n.publicKeyFromAsn1=function(T){var U={},O=[],g=e.asn1.validate(T,r,U,O);if(!g){var k=new Error("Invalid Key.");throw k.errors=O,k}var z=e.asn1.derToOid(U.publicKeyOid),K=e.oids.EdDSA25519;if(z!==K)throw new Error('Invalid OID "'+z+'"; OID must be "'+K+'".');var te=U.ed25519PublicKey;if(te.length!==n.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return d({message:te,encoding:"binary"})},n.publicKeyFromPrivateKey=function(T){T=T||{};var U=d({message:T.privateKey,encoding:"binary"});if(U.length!==n.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+n.constants.PRIVATE_KEY_BYTE_LENGTH);for(var O=new c(n.constants.PUBLIC_KEY_BYTE_LENGTH),g=0;g<O.length;++g)O[g]=U[32+g];return O},n.sign=function(T){T=T||{};var U=d(T),O=d({message:T.privateKey,encoding:"binary"});if(O.length===n.constants.SEED_BYTE_LENGTH){var g=n.generateKeyPair({seed:O});O=g.privateKey}else if(O.length!==n.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+n.constants.SEED_BYTE_LENGTH+" or "+n.constants.PRIVATE_KEY_BYTE_LENGTH);var k=new c(n.constants.SIGN_BYTE_LENGTH+U.length);x(k,U,U.length,O);for(var z=new c(n.constants.SIGN_BYTE_LENGTH),K=0;K<z.length;++K)z[K]=k[K];return z},n.verify=function(T){T=T||{};var U=d(T);if(T.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var O=d({message:T.signature,encoding:"binary"});if(O.length!==n.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+n.constants.SIGN_BYTE_LENGTH);var g=d({message:T.publicKey,encoding:"binary"});if(g.length!==n.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+n.constants.PUBLIC_KEY_BYTE_LENGTH);var k=new c(n.constants.SIGN_BYTE_LENGTH+U.length),z=new c(n.constants.SIGN_BYTE_LENGTH+U.length),K;for(K=0;K<n.constants.SIGN_BYTE_LENGTH;++K)k[K]=O[K];for(K=0;K<U.length;++K)k[K+n.constants.SIGN_BYTE_LENGTH]=U[K];return w(z,k,k.length,g)>=0};function d(T){var U=T.message;if(U instanceof Uint8Array||U instanceof c)return U;var O=T.encoding;if(U===void 0)if(T.md)U=T.md.digest().getBytes(),O="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof U=="string"&&!O)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof U=="string"){if(typeof Buffer<"u")return Buffer.from(U,O);U=new s(U,O)}else if(!(U instanceof s))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var g=new c(U.length()),k=0;k<g.length;++k)g[k]=U.at(k);return g}var f=le(),b=le([1]),I=le([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),v=le([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=le([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=le([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),E=le([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(T,U){var O=e.md.sha512.create(),g=new s(T);O.update(g.getBytes(U),"binary");var k=O.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(k,"binary");for(var z=new c(n.constants.HASH_BYTE_LENGTH),K=0;K<64;++K)z[K]=k.charCodeAt(K);return z}function p(T,U){var O=[le(),le(),le(),le()],g,k=u(U,32);for(k[0]&=248,k[31]&=127,k[31]|=64,se(O,k),S(T,O),g=0;g<32;++g)U[g+32]=T[g];return 0}function x(T,U,O,g){var k,z,K=new Float64Array(64),te=[le(),le(),le(),le()],ge=u(g,32);ge[0]&=248,ge[31]&=127,ge[31]|=64;var me=O+64;for(k=0;k<O;++k)T[64+k]=U[k];for(k=0;k<32;++k)T[32+k]=ge[32+k];var Z=u(T.subarray(32),O+32);for(C(Z),se(te,Z),S(T,te),k=32;k<64;++k)T[k]=g[k];var ye=u(T,O+64);for(C(ye),k=32;k<64;++k)K[k]=0;for(k=0;k<32;++k)K[k]=Z[k];for(k=0;k<32;++k)for(z=0;z<32;z++)K[k+z]+=ye[k]*ge[z];return B(T.subarray(32),K),me}function w(T,U,O,g){var k,z,K=new c(32),te=[le(),le(),le(),le()],ge=[le(),le(),le(),le()];if(z=-1,O<64||N(ge,g))return-1;for(k=0;k<O;++k)T[k]=U[k];for(k=0;k<32;++k)T[k+32]=g[k];var me=u(T,O);if(C(me),ne(te,ge,me),se(ge,U.subarray(32)),l(te,ge),S(K,te),O-=64,Y(U,0,K,0)){for(k=0;k<O;++k)T[k]=0;return-1}for(k=0;k<O;++k)T[k]=U[k+64];return z=O,z}function B(T,U){var O,g,k,z;for(g=63;g>=32;--g){for(O=0,k=g-32,z=g-12;k<z;++k)U[k]+=O-16*U[g]*m[k-(g-32)],O=U[k]+128>>8,U[k]-=O*256;U[k]+=O,U[g]=0}for(O=0,k=0;k<32;++k)U[k]+=O-(U[31]>>4)*m[k],O=U[k]>>8,U[k]&=255;for(k=0;k<32;++k)U[k]-=O*m[k];for(g=0;g<32;++g)U[g+1]+=U[g]>>8,T[g]=U[g]&255}function C(T){for(var U=new Float64Array(64),O=0;O<64;++O)U[O]=T[O],T[O]=0;B(T,U)}function l(T,U){var O=le(),g=le(),k=le(),z=le(),K=le(),te=le(),ge=le(),me=le(),Z=le();pe(O,T[1],T[0]),pe(Z,U[1],U[0]),ke(O,O,Z),Ne(g,T[0],T[1]),Ne(Z,U[0],U[1]),ke(g,g,Z),ke(k,T[3],U[3]),ke(k,k,v),ke(z,T[2],U[2]),Ne(z,z,z),pe(K,g,O),pe(te,z,k),Ne(ge,z,k),Ne(me,g,O),ke(T[0],K,te),ke(T[1],me,ge),ke(T[2],ge,te),ke(T[3],K,me)}function o(T,U,O){for(var g=0;g<4;++g)Se(T[g],U[g],O)}function S(T,U){var O=le(),g=le(),k=le();he(k,U[2]),ke(O,U[0],k),ke(g,U[1],k),A(T,g),T[31]^=J(O)<<7}function A(T,U){var O,g,k,z=le(),K=le();for(O=0;O<16;++O)K[O]=U[O];for(we(K),we(K),we(K),g=0;g<2;++g){for(z[0]=K[0]-65517,O=1;O<15;++O)z[O]=K[O]-65535-(z[O-1]>>16&1),z[O-1]&=65535;z[15]=K[15]-32767-(z[14]>>16&1),k=z[15]>>16&1,z[14]&=65535,Se(K,z,1-k)}for(O=0;O<16;O++)T[2*O]=K[O]&255,T[2*O+1]=K[O]>>8}function N(T,U){var O=le(),g=le(),k=le(),z=le(),K=le(),te=le(),ge=le();return fe(T[2],b),D(T[1],U),tt(k,T[1]),ke(z,k,I),pe(k,k,T[2]),Ne(z,T[2],z),tt(K,z),tt(te,K),ke(ge,te,K),ke(O,ge,k),ke(O,O,z),q(O,O),ke(O,O,k),ke(O,O,z),ke(O,O,z),ke(T[0],O,z),tt(g,T[0]),ke(g,g,z),H(g,k)&&ke(T[0],T[0],E),tt(g,T[0]),ke(g,g,z),H(g,k)?-1:(J(T[0])===U[31]>>7&&pe(T[0],f,T[0]),ke(T[3],T[0],T[1]),0)}function D(T,U){var O;for(O=0;O<16;++O)T[O]=U[2*O]+(U[2*O+1]<<8);T[15]&=32767}function q(T,U){var O=le(),g;for(g=0;g<16;++g)O[g]=U[g];for(g=250;g>=0;--g)tt(O,O),g!==1&&ke(O,O,U);for(g=0;g<16;++g)T[g]=O[g]}function H(T,U){var O=new c(32),g=new c(32);return A(O,T),A(g,U),Y(O,0,g,0)}function Y(T,U,O,g){return Q(T,U,O,g,32)}function Q(T,U,O,g,k){var z,K=0;for(z=0;z<k;++z)K|=T[U+z]^O[g+z];return(1&K-1>>>8)-1}function J(T){var U=new c(32);return A(U,T),U[0]&1}function ne(T,U,O){var g,k;for(fe(T[0],f),fe(T[1],b),fe(T[2],b),fe(T[3],f),k=255;k>=0;--k)g=O[k/8|0]>>(k&7)&1,o(T,U,g),l(U,T),l(T,T),o(T,U,g)}function se(T,U){var O=[le(),le(),le(),le()];fe(O[0],h),fe(O[1],y),fe(O[2],b),ke(O[3],h,y),ne(T,O,U)}function fe(T,U){var O;for(O=0;O<16;O++)T[O]=U[O]|0}function he(T,U){var O=le(),g;for(g=0;g<16;++g)O[g]=U[g];for(g=253;g>=0;--g)tt(O,O),g!==2&&g!==4&&ke(O,O,U);for(g=0;g<16;++g)T[g]=O[g]}function we(T){var U,O,g=1;for(U=0;U<16;++U)O=T[U]+g+65535,g=Math.floor(O/65536),T[U]=O-g*65536;T[0]+=g-1+37*(g-1)}function Se(T,U,O){for(var g,k=~(O-1),z=0;z<16;++z)g=k&(T[z]^U[z]),T[z]^=g,U[z]^=g}function le(T){var U,O=new Float64Array(16);if(T)for(U=0;U<T.length;++U)O[U]=T[U];return O}function Ne(T,U,O){for(var g=0;g<16;++g)T[g]=U[g]+O[g]}function pe(T,U,O){for(var g=0;g<16;++g)T[g]=U[g]-O[g]}function tt(T,U){ke(T,U,U)}function ke(T,U,O){var g,k,z=0,K=0,te=0,ge=0,me=0,Z=0,ye=0,xe=0,Re=0,Ie=0,Le=0,je=0,ze=0,Ge=0,Ke=0,qe=0,Ye=0,rt=0,nt=0,yt=0,at=0,xt=0,It=0,mt=0,Ct=0,_t=0,ht=0,Ot=0,Rt=0,Qt=0,pr=0,it=O[0],st=O[1],ot=O[2],Xe=O[3],Je=O[4],He=O[5],ct=O[6],ut=O[7],lt=O[8],Ze=O[9],ft=O[10],Ve=O[11],We=O[12],et=O[13],dt=O[14],pt=O[15];g=U[0],z+=g*it,K+=g*st,te+=g*ot,ge+=g*Xe,me+=g*Je,Z+=g*He,ye+=g*ct,xe+=g*ut,Re+=g*lt,Ie+=g*Ze,Le+=g*ft,je+=g*Ve,ze+=g*We,Ge+=g*et,Ke+=g*dt,qe+=g*pt,g=U[1],K+=g*it,te+=g*st,ge+=g*ot,me+=g*Xe,Z+=g*Je,ye+=g*He,xe+=g*ct,Re+=g*ut,Ie+=g*lt,Le+=g*Ze,je+=g*ft,ze+=g*Ve,Ge+=g*We,Ke+=g*et,qe+=g*dt,Ye+=g*pt,g=U[2],te+=g*it,ge+=g*st,me+=g*ot,Z+=g*Xe,ye+=g*Je,xe+=g*He,Re+=g*ct,Ie+=g*ut,Le+=g*lt,je+=g*Ze,ze+=g*ft,Ge+=g*Ve,Ke+=g*We,qe+=g*et,Ye+=g*dt,rt+=g*pt,g=U[3],ge+=g*it,me+=g*st,Z+=g*ot,ye+=g*Xe,xe+=g*Je,Re+=g*He,Ie+=g*ct,Le+=g*ut,je+=g*lt,ze+=g*Ze,Ge+=g*ft,Ke+=g*Ve,qe+=g*We,Ye+=g*et,rt+=g*dt,nt+=g*pt,g=U[4],me+=g*it,Z+=g*st,ye+=g*ot,xe+=g*Xe,Re+=g*Je,Ie+=g*He,Le+=g*ct,je+=g*ut,ze+=g*lt,Ge+=g*Ze,Ke+=g*ft,qe+=g*Ve,Ye+=g*We,rt+=g*et,nt+=g*dt,yt+=g*pt,g=U[5],Z+=g*it,ye+=g*st,xe+=g*ot,Re+=g*Xe,Ie+=g*Je,Le+=g*He,je+=g*ct,ze+=g*ut,Ge+=g*lt,Ke+=g*Ze,qe+=g*ft,Ye+=g*Ve,rt+=g*We,nt+=g*et,yt+=g*dt,at+=g*pt,g=U[6],ye+=g*it,xe+=g*st,Re+=g*ot,Ie+=g*Xe,Le+=g*Je,je+=g*He,ze+=g*ct,Ge+=g*ut,Ke+=g*lt,qe+=g*Ze,Ye+=g*ft,rt+=g*Ve,nt+=g*We,yt+=g*et,at+=g*dt,xt+=g*pt,g=U[7],xe+=g*it,Re+=g*st,Ie+=g*ot,Le+=g*Xe,je+=g*Je,ze+=g*He,Ge+=g*ct,Ke+=g*ut,qe+=g*lt,Ye+=g*Ze,rt+=g*ft,nt+=g*Ve,yt+=g*We,at+=g*et,xt+=g*dt,It+=g*pt,g=U[8],Re+=g*it,Ie+=g*st,Le+=g*ot,je+=g*Xe,ze+=g*Je,Ge+=g*He,Ke+=g*ct,qe+=g*ut,Ye+=g*lt,rt+=g*Ze,nt+=g*ft,yt+=g*Ve,at+=g*We,xt+=g*et,It+=g*dt,mt+=g*pt,g=U[9],Ie+=g*it,Le+=g*st,je+=g*ot,ze+=g*Xe,Ge+=g*Je,Ke+=g*He,qe+=g*ct,Ye+=g*ut,rt+=g*lt,nt+=g*Ze,yt+=g*ft,at+=g*Ve,xt+=g*We,It+=g*et,mt+=g*dt,Ct+=g*pt,g=U[10],Le+=g*it,je+=g*st,ze+=g*ot,Ge+=g*Xe,Ke+=g*Je,qe+=g*He,Ye+=g*ct,rt+=g*ut,nt+=g*lt,yt+=g*Ze,at+=g*ft,xt+=g*Ve,It+=g*We,mt+=g*et,Ct+=g*dt,_t+=g*pt,g=U[11],je+=g*it,ze+=g*st,Ge+=g*ot,Ke+=g*Xe,qe+=g*Je,Ye+=g*He,rt+=g*ct,nt+=g*ut,yt+=g*lt,at+=g*Ze,xt+=g*ft,It+=g*Ve,mt+=g*We,Ct+=g*et,_t+=g*dt,ht+=g*pt,g=U[12],ze+=g*it,Ge+=g*st,Ke+=g*ot,qe+=g*Xe,Ye+=g*Je,rt+=g*He,nt+=g*ct,yt+=g*ut,at+=g*lt,xt+=g*Ze,It+=g*ft,mt+=g*Ve,Ct+=g*We,_t+=g*et,ht+=g*dt,Ot+=g*pt,g=U[13],Ge+=g*it,Ke+=g*st,qe+=g*ot,Ye+=g*Xe,rt+=g*Je,nt+=g*He,yt+=g*ct,at+=g*ut,xt+=g*lt,It+=g*Ze,mt+=g*ft,Ct+=g*Ve,_t+=g*We,ht+=g*et,Ot+=g*dt,Rt+=g*pt,g=U[14],Ke+=g*it,qe+=g*st,Ye+=g*ot,rt+=g*Xe,nt+=g*Je,yt+=g*He,at+=g*ct,xt+=g*ut,It+=g*lt,mt+=g*Ze,Ct+=g*ft,_t+=g*Ve,ht+=g*We,Ot+=g*et,Rt+=g*dt,Qt+=g*pt,g=U[15],qe+=g*it,Ye+=g*st,rt+=g*ot,nt+=g*Xe,yt+=g*Je,at+=g*He,xt+=g*ct,It+=g*ut,mt+=g*lt,Ct+=g*Ze,_t+=g*ft,ht+=g*Ve,Ot+=g*We,Rt+=g*et,Qt+=g*dt,pr+=g*pt,z+=38*Ye,K+=38*rt,te+=38*nt,ge+=38*yt,me+=38*at,Z+=38*xt,ye+=38*It,xe+=38*mt,Re+=38*Ct,Ie+=38*_t,Le+=38*ht,je+=38*Ot,ze+=38*Rt,Ge+=38*Qt,Ke+=38*pr,k=1,g=z+k+65535,k=Math.floor(g/65536),z=g-k*65536,g=K+k+65535,k=Math.floor(g/65536),K=g-k*65536,g=te+k+65535,k=Math.floor(g/65536),te=g-k*65536,g=ge+k+65535,k=Math.floor(g/65536),ge=g-k*65536,g=me+k+65535,k=Math.floor(g/65536),me=g-k*65536,g=Z+k+65535,k=Math.floor(g/65536),Z=g-k*65536,g=ye+k+65535,k=Math.floor(g/65536),ye=g-k*65536,g=xe+k+65535,k=Math.floor(g/65536),xe=g-k*65536,g=Re+k+65535,k=Math.floor(g/65536),Re=g-k*65536,g=Ie+k+65535,k=Math.floor(g/65536),Ie=g-k*65536,g=Le+k+65535,k=Math.floor(g/65536),Le=g-k*65536,g=je+k+65535,k=Math.floor(g/65536),je=g-k*65536,g=ze+k+65535,k=Math.floor(g/65536),ze=g-k*65536,g=Ge+k+65535,k=Math.floor(g/65536),Ge=g-k*65536,g=Ke+k+65535,k=Math.floor(g/65536),Ke=g-k*65536,g=qe+k+65535,k=Math.floor(g/65536),qe=g-k*65536,z+=k-1+37*(k-1),k=1,g=z+k+65535,k=Math.floor(g/65536),z=g-k*65536,g=K+k+65535,k=Math.floor(g/65536),K=g-k*65536,g=te+k+65535,k=Math.floor(g/65536),te=g-k*65536,g=ge+k+65535,k=Math.floor(g/65536),ge=g-k*65536,g=me+k+65535,k=Math.floor(g/65536),me=g-k*65536,g=Z+k+65535,k=Math.floor(g/65536),Z=g-k*65536,g=ye+k+65535,k=Math.floor(g/65536),ye=g-k*65536,g=xe+k+65535,k=Math.floor(g/65536),xe=g-k*65536,g=Re+k+65535,k=Math.floor(g/65536),Re=g-k*65536,g=Ie+k+65535,k=Math.floor(g/65536),Ie=g-k*65536,g=Le+k+65535,k=Math.floor(g/65536),Le=g-k*65536,g=je+k+65535,k=Math.floor(g/65536),je=g-k*65536,g=ze+k+65535,k=Math.floor(g/65536),ze=g-k*65536,g=Ge+k+65535,k=Math.floor(g/65536),Ge=g-k*65536,g=Ke+k+65535,k=Math.floor(g/65536),Ke=g-k*65536,g=qe+k+65535,k=Math.floor(g/65536),qe=g-k*65536,z+=k-1+37*(k-1),T[0]=z,T[1]=K,T[2]=te,T[3]=ge,T[4]=me,T[5]=Z,T[6]=ye,T[7]=xe,T[8]=Re,T[9]=Ie,T[10]=Le,T[11]=je,T[12]=ze,T[13]=Ge,T[14]=Ke,T[15]=qe}return Mi}var Vi,hu;function Bh(){if(hu)return Vi;hu=1;var e=Ue();Fe(),Yt(),wa(),Vi=e.kem=e.kem||{};var t=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(a,i){i=i||{};var s=i.prng||e.random,c={};return c.encrypt=function(n,d){var f=Math.ceil(n.n.bitLength()/8),b;do b=new t(e.util.bytesToHex(s.getBytesSync(f)),16).mod(n.n);while(b.compareTo(t.ONE)<=0);b=e.util.hexToBytes(b.toString(16));var I=f-b.length;I>0&&(b=e.util.fillString("\0",I)+b);var v=n.encrypt(b,"NONE"),h=a.generate(b,d);return{encapsulation:v,key:h}},c.decrypt=function(n,d,f){var b=n.decrypt(d,"NONE");return a.generate(b,f)},c},e.kem.kdf1=function(a,i){r(this,a,0,i||a.digestLength)},e.kem.kdf2=function(a,i){r(this,a,1,i||a.digestLength)};function r(a,i,s,c){a.generate=function(n,d){for(var f=new e.util.ByteBuffer,b=Math.ceil(d/c)+s,I=new e.util.ByteBuffer,v=s;v<b;++v){I.putInt32(v),i.start(),i.update(n+I.getBytes());var h=i.digest();f.putBytes(h.getBytes(c))}return f.truncate(f.length()-d),f.getBytes()}}return Vi}var Ki,yu;function Nh(){if(yu)return Ki;yu=1;var e=Ue();Fe(),Ki=e.log=e.log||{},e.log.levels=["none","error","warning","info","debug","verbose","max"];var t={},r=[],a=null;e.log.LEVEL_LOCKED=2,e.log.NO_LEVEL_CHECK=4,e.log.INTERPOLATE=8;for(var i=0;i<e.log.levels.length;++i){var s=e.log.levels[i];t[s]={index:i,name:s.toUpperCase()}}e.log.logMessage=function(v){for(var h=t[v.level].index,y=0;y<r.length;++y){var m=r[y];if(m.flags&e.log.NO_LEVEL_CHECK)m.f(v);else{var E=t[m.level].index;h<=E&&m.f(m,v)}}},e.log.prepareStandard=function(v){"standard"in v||(v.standard=t[v.level].name+" ["+v.category+"] "+v.message)},e.log.prepareFull=function(v){if(!("full"in v)){var h=[v.message];h=h.concat([]),v.full=e.util.format.apply(this,h)}},e.log.prepareStandardFull=function(v){"standardFull"in v||(e.log.prepareStandard(v),v.standardFull=v.standard)};for(var c=["error","warning","info","debug","verbose"],i=0;i<c.length;++i)(function(h){e.log[h]=function(y,m){var E=Array.prototype.slice.call(arguments).slice(2),u={timestamp:new Date,level:h,category:y,message:m,arguments:E};e.log.logMessage(u)}})(c[i]);if(e.log.makeLogger=function(v){var h={flags:0,f:v};return e.log.setLevel(h,"none"),h},e.log.setLevel=function(v,h){var y=!1;if(v&&!(v.flags&e.log.LEVEL_LOCKED))for(var m=0;m<e.log.levels.length;++m){var E=e.log.levels[m];if(h==E){v.level=h,y=!0;break}}return y},e.log.lock=function(v,h){typeof h>"u"||h?v.flags|=e.log.LEVEL_LOCKED:v.flags&=~e.log.LEVEL_LOCKED},e.log.addLogger=function(v){r.push(v)},typeof console<"u"&&"log"in console){var n;if(console.error&&console.warn&&console.info&&console.debug){var d={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(v,h){e.log.prepareStandard(h);var y=d[h.level],m=[h.standard];m=m.concat(h.arguments.slice()),y.apply(console,m)};n=e.log.makeLogger(f)}else{var f=function(h,y){e.log.prepareStandardFull(y),console.log(y.standardFull)};n=e.log.makeLogger(f)}e.log.setLevel(n,"debug"),e.log.addLogger(n),a=n}else console={log:function(){}};if(a!==null&&typeof window<"u"&&window.location){var b=new URL(window.location.href).searchParams;if(b.has("console.level")&&e.log.setLevel(a,b.get("console.level").slice(-1)[0]),b.has("console.lock")){var I=b.get("console.lock").slice(-1)[0];I=="true"&&e.log.lock(a)}}return e.log.consoleLogger=a,Ki}var qi,gu;function Rh(){return gu||(gu=1,qi=dr(),ho(),Mn(),Gl(),rf()),qi}var ji={exports:{}},vu;function kh(){if(vu)return ji.exports;vu=1;var e=Ue();wr(),ir(),_a(),Br(),Zr(),Xl(),Yt(),Fe(),vo();var t=e.asn1,r=ji.exports=e.pkcs7=e.pkcs7||{};r.messageFromPem=function(h){var y=e.pem.decode(h)[0];if(y.type!=="PKCS7"){var m=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw m.headerType=y.type,m}if(y.procType&&y.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var E=t.fromDer(y.body);return r.messageFromAsn1(E)},r.messageToPem=function(h,y){var m={type:"PKCS7",body:t.toDer(h.toAsn1()).getBytes()};return e.pem.encode(m,{maxline:y})},r.messageFromAsn1=function(h){var y={},m=[];if(!t.validate(h,r.asn1.contentInfoValidator,y,m)){var E=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw E.errors=m,E}var u=t.derToOid(y.contentType),p;switch(u){case e.pki.oids.envelopedData:p=r.createEnvelopedData();break;case e.pki.oids.encryptedData:p=r.createEncryptedData();break;case e.pki.oids.signedData:p=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return p.fromAsn1(y.content.value[0]),p},r.createSignedData=function(){var h=null;return h={type:e.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(E){if(I(h,E,r.asn1.signedDataValidator),h.certificates=[],h.crls=[],h.digestAlgorithmIdentifiers=[],h.contentInfo=null,h.signerInfos=[],h.rawCapture.certificates)for(var u=h.rawCapture.certificates.value,p=0;p<u.length;++p)h.certificates.push(e.pki.certificateFromAsn1(u[p]))},toAsn1:function(){h.contentInfo||h.sign();for(var E=[],u=0;u<h.certificates.length;++u)E.push(e.pki.certificateToAsn1(h.certificates[u]));var p=[],x=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(h.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,h.digestAlgorithmIdentifiers),h.contentInfo])]);return E.length>0&&x.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,E)),p.length>0&&x.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,p)),x.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,h.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.type).getBytes()),x])},addSigner:function(E){var u=E.issuer,p=E.serialNumber;if(E.certificate){var x=E.certificate;typeof x=="string"&&(x=e.pki.certificateFromPem(x)),u=x.issuer.attributes,p=x.serialNumber}var w=E.key;if(!w)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof w=="string"&&(w=e.pki.privateKeyFromPem(w));var B=E.digestAlgorithm||e.pki.oids.sha1;switch(B){case e.pki.oids.sha1:case e.pki.oids.sha256:case e.pki.oids.sha384:case e.pki.oids.sha512:case e.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+B)}var C=E.authenticatedAttributes||[];if(C.length>0){for(var l=!1,o=!1,S=0;S<C.length;++S){var A=C[S];if(!l&&A.type===e.pki.oids.contentType){if(l=!0,o)break;continue}if(!o&&A.type===e.pki.oids.messageDigest){if(o=!0,l)break;continue}}if(!l||!o)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}h.signers.push({key:w,version:1,issuer:u,serialNumber:p,digestAlgorithm:B,signatureAlgorithm:e.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:C,unauthenticatedAttributes:[]})},sign:function(E){if(E=E||{},(typeof h.content!="object"||h.contentInfo===null)&&(h.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes())]),"content"in h)){var u;h.content instanceof e.util.ByteBuffer?u=h.content.bytes():typeof h.content=="string"&&(u=e.util.encodeUtf8(h.content)),E.detached?h.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u):h.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u)]))}if(h.signers.length!==0){var p=y();m(p)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(E){typeof E=="string"&&(E=e.pki.certificateFromPem(E)),h.certificates.push(E)},addCertificateRevokationList:function(E){throw new Error("PKCS#7 CRL support not yet implemented.")}},h;function y(){for(var E={},u=0;u<h.signers.length;++u){var p=h.signers[u],x=p.digestAlgorithm;x in E||(E[x]=e.md[e.pki.oids[x]].create()),p.authenticatedAttributes.length===0?p.md=E[x]:p.md=e.md[e.pki.oids[x]].create()}h.digestAlgorithmIdentifiers=[];for(var x in E)h.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(x).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return E}function m(E){var u;if(h.detachedContent?u=h.detachedContent:(u=h.contentInfo.value[1],u=u.value[0]),!u)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var p=t.derToOid(h.contentInfo.value[0].value),x=t.toDer(u);x.getByte(),t.getBerValueLength(x),x=x.getBytes();for(var w in E)E[w].start().update(x);for(var B=new Date,C=0;C<h.signers.length;++C){var l=h.signers[C];if(l.authenticatedAttributes.length===0){if(p!==e.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var o=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),S=0;S<l.authenticatedAttributes.length;++S){var A=l.authenticatedAttributes[S];A.type===e.pki.oids.messageDigest?A.value=E[l.digestAlgorithm].digest():A.type===e.pki.oids.signingTime&&(A.value||(A.value=B)),o.value.push(f(A)),l.authenticatedAttributesAsn1.value.push(f(A))}x=t.toDer(o).getBytes(),l.md.start().update(x)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}h.signerInfos=d(h.signers)}},r.createEncryptedData=function(){var h=null;return h={type:e.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(y){I(h,y,r.asn1.encryptedDataValidator)},decrypt:function(y){y!==void 0&&(h.encryptedContent.key=y),v(h)}},h},r.createEnvelopedData=function(){var h=null;return h={type:e.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:e.pki.oids["aes256-CBC"]},fromAsn1:function(y){var m=I(h,y,r.asn1.envelopedDataValidator);h.recipients=s(m.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(h.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,c(h.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,b(h.encryptedContent))])])])},findRecipient:function(y){for(var m=y.issuer.attributes,E=0;E<h.recipients.length;++E){var u=h.recipients[E],p=u.issuer;if(u.serialNumber===y.serialNumber&&p.length===m.length){for(var x=!0,w=0;w<m.length;++w)if(p[w].type!==m[w].type||p[w].value!==m[w].value){x=!1;break}if(x)return u}}return null},decrypt:function(y,m){if(h.encryptedContent.key===void 0&&y!==void 0&&m!==void 0)switch(y.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:case e.pki.oids.desCBC:var E=m.decrypt(y.encryptedContent.content);h.encryptedContent.key=e.util.createBuffer(E);break;default:throw new Error("Unsupported asymmetric cipher, OID "+y.encryptedContent.algorithm)}v(h)},addRecipient:function(y){h.recipients.push({version:0,issuer:y.issuer.attributes,serialNumber:y.serialNumber,encryptedContent:{algorithm:e.pki.oids.rsaEncryption,key:y.publicKey}})},encrypt:function(y,m){if(h.encryptedContent.content===void 0){m=m||h.encryptedContent.algorithm,y=y||h.encryptedContent.key;var E,u,p;switch(m){case e.pki.oids["aes128-CBC"]:E=16,u=16,p=e.aes.createEncryptionCipher;break;case e.pki.oids["aes192-CBC"]:E=24,u=16,p=e.aes.createEncryptionCipher;break;case e.pki.oids["aes256-CBC"]:E=32,u=16,p=e.aes.createEncryptionCipher;break;case e.pki.oids["des-EDE3-CBC"]:E=24,u=8,p=e.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+m)}if(y===void 0)y=e.util.createBuffer(e.random.getBytes(E));else if(y.length()!=E)throw new Error("Symmetric key has wrong length; got "+y.length()+" bytes, expected "+E+".");h.encryptedContent.algorithm=m,h.encryptedContent.key=y,h.encryptedContent.parameter=e.util.createBuffer(e.random.getBytes(u));var x=p(y);if(x.start(h.encryptedContent.parameter.copy()),x.update(h.content),!x.finish())throw new Error("Symmetric encryption failed.");h.encryptedContent.content=x.output}for(var w=0;w<h.recipients.length;++w){var B=h.recipients[w];if(B.encryptedContent.content===void 0)switch(B.encryptedContent.algorithm){case e.pki.oids.rsaEncryption:B.encryptedContent.content=B.encryptedContent.key.encrypt(h.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+B.encryptedContent.algorithm)}}}},h};function a(h){var y={},m=[];if(!t.validate(h,r.asn1.recipientInfoValidator,y,m)){var E=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw E.errors=m,E}return{version:y.version.charCodeAt(0),issuer:e.pki.RDNAttributesAsArray(y.issuer),serialNumber:e.util.createBuffer(y.serial).toHex(),encryptedContent:{algorithm:t.derToOid(y.encAlgorithm),parameter:y.encParameter?y.encParameter.value:void 0,content:y.encKey}}}function i(h){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(h.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:h.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(h.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h.encryptedContent.content)])}function s(h){for(var y=[],m=0;m<h.length;++m)y.push(a(h[m]));return y}function c(h){for(var y=[],m=0;m<h.length;++m)y.push(i(h[m]));return y}function n(h){var y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(h.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[e.pki.distinguishedNameToAsn1({attributes:h.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,e.util.hexToBytes(h.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(h.authenticatedAttributesAsn1&&y.value.push(h.authenticatedAttributesAsn1),y.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),y.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h.signature)),h.unauthenticatedAttributes.length>0){for(var m=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),E=0;E<h.unauthenticatedAttributes.length;++E){var u=h.unauthenticatedAttributes[E];m.values.push(f(u))}y.value.push(m)}return y}function d(h){for(var y=[],m=0;m<h.length;++m)y.push(n(h[m]));return y}function f(h){var y;if(h.type===e.pki.oids.contentType)y=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.value).getBytes());else if(h.type===e.pki.oids.messageDigest)y=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h.value.bytes());else if(h.type===e.pki.oids.signingTime){var m=new Date("1950-01-01T00:00:00Z"),E=new Date("2050-01-01T00:00:00Z"),u=h.value;if(typeof u=="string"){var p=Date.parse(u);isNaN(p)?u.length===13?u=t.utcTimeToDate(u):u=t.generalizedTimeToDate(u):u=new Date(p)}u>=m&&u<E?y=t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(u)):y=t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(u))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[y])])}function b(h){return[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(h.algorithm).getBytes()),h.parameter?t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h.parameter.getBytes()):void 0]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,h.content.getBytes())])]}function I(h,y,m){var E={},u=[];if(!t.validate(y,m,E,u)){var p=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw p.errors=p,p}var x=t.derToOid(E.contentType);if(x!==e.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(E.encryptedContent){var w="";if(e.util.isArray(E.encryptedContent))for(var B=0;B<E.encryptedContent.length;++B){if(E.encryptedContent[B].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");w+=E.encryptedContent[B].value}else w=E.encryptedContent;h.encryptedContent={algorithm:t.derToOid(E.encAlgorithm),parameter:e.util.createBuffer(E.encParameter.value),content:e.util.createBuffer(w)}}if(E.content){var w="";if(e.util.isArray(E.content))for(var B=0;B<E.content.length;++B){if(E.content[B].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");w+=E.content[B].value}else w=E.content;h.content=e.util.createBuffer(w)}return h.version=E.version.charCodeAt(0),h.rawCapture=E,E}function v(h){if(h.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(h.content===void 0){var y;switch(h.encryptedContent.algorithm){case e.pki.oids["aes128-CBC"]:case e.pki.oids["aes192-CBC"]:case e.pki.oids["aes256-CBC"]:y=e.aes.createDecryptionCipher(h.encryptedContent.key);break;case e.pki.oids.desCBC:case e.pki.oids["des-EDE3-CBC"]:y=e.des.createDecryptionCipher(h.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+h.encryptedContent.algorithm)}if(y.start(h.encryptedContent.parameter),y.update(h.encryptedContent.content),!y.finish())throw new Error("Symmetric decryption failed.");h.content=y.output}}return ji.exports}var Gi={exports:{}},mu;function Dh(){if(mu)return Gi.exports;mu=1;var e=Ue();wr(),Fn(),ho(),Mn(),Fe();var t=Gi.exports=e.ssh=e.ssh||{};t.privateKeyToPutty=function(s,c,n){n=n||"",c=c||"";var d="ssh-rsa",f=c===""?"none":"aes256-cbc",b="PuTTY-User-Key-File-2: "+d+`\r
`;b+="Encryption: "+f+`\r
`,b+="Comment: "+n+`\r
`;var I=e.util.createBuffer();a(I,d),r(I,s.e),r(I,s.n);var v=e.util.encode64(I.bytes(),64),h=Math.floor(v.length/66)+1;b+="Public-Lines: "+h+`\r
`,b+=v;var y=e.util.createBuffer();r(y,s.d),r(y,s.p),r(y,s.q),r(y,s.qInv);var m;if(!c)m=e.util.encode64(y.bytes(),64);else{var E=y.length()+16-1;E-=E%16;var u=i(y.bytes());u.truncate(u.length()-E+y.length()),y.putBuffer(u);var p=e.util.createBuffer();p.putBuffer(i("\0\0\0\0",c)),p.putBuffer(i("\0\0\0",c));var x=e.aes.createEncryptionCipher(p.truncate(8),"CBC");x.start(e.util.createBuffer().fillWithByte(0,16)),x.update(y.copy()),x.finish();var w=x.output;w.truncate(16),m=e.util.encode64(w.bytes(),64)}h=Math.floor(m.length/66)+1,b+=`\r
Private-Lines: `+h+`\r
`,b+=m;var B=i("putty-private-key-file-mac-key",c),C=e.util.createBuffer();a(C,d),a(C,f),a(C,n),C.putInt32(I.length()),C.putBuffer(I),C.putInt32(y.length()),C.putBuffer(y);var l=e.hmac.create();return l.start("sha1",B),l.update(C.bytes()),b+=`\r
Private-MAC: `+l.digest().toHex()+`\r
`,b},t.publicKeyToOpenSSH=function(s,c){var n="ssh-rsa";c=c||"";var d=e.util.createBuffer();return a(d,n),r(d,s.e),r(d,s.n),n+" "+e.util.encode64(d.bytes())+" "+c},t.privateKeyToOpenSSH=function(s,c){return c?e.pki.encryptRsaPrivateKey(s,c,{legacy:!0,algorithm:"aes128"}):e.pki.privateKeyToPem(s)},t.getPublicKeyFingerprint=function(s,c){c=c||{};var n=c.md||e.md.md5.create(),d="ssh-rsa",f=e.util.createBuffer();a(f,d),r(f,s.e),r(f,s.n),n.start(),n.update(f.getBytes());var b=n.digest();if(c.encoding==="hex"){var I=b.toHex();return c.delimiter?I.match(/.{2}/g).join(c.delimiter):I}else{if(c.encoding==="binary")return b.getBytes();if(c.encoding)throw new Error('Unknown encoding "'+c.encoding+'".')}return b};function r(s,c){var n=c.toString(16);n[0]>="8"&&(n="00"+n);var d=e.util.hexToBytes(n);s.putInt32(d.length),s.putBytes(d)}function a(s,c){s.putInt32(c.length),s.putString(c)}function i(){for(var s=e.md.sha1.create(),c=arguments.length,n=0;n<c;++n)s.update(arguments[n]);return s.digest()}return Gi.exports}var Hi,Cu;function Ph(){return Cu||(Cu=1,Hi=Ue(),wr(),Ah(),ir(),po(),_a(),wh(),Fn(),Bh(),Nh(),Rh(),Jl(),yo(),Zr(),Wl(),Zl(),kh(),ef(),Yl(),Hl(),go(),Yt(),zl(),Dh(),tf(),Fe()),Hi}var Oh=Ph();const Pe=Un(Oh);function JA(e,t){if(e.alg!=="RSA-OAEP-256")throw new Error("Public key algorithm was not RSA-OAEP-256");if(e.kty!=="RSA")throw new Error("Public key type was not RSA");if(!e.key_ops||!e.key_ops.find(n=>n==="encrypt"))throw new Error('Public key does not have "encrypt" op');if(!e.n||!e.e)throw new Error("Public key is missing parameters");const r=encodeURIComponent(t),a=nr(e.n),i=nr(e.e),c=Pe.rsa.setPublicKey(a,i).encrypt(r,"RSA-OAEP",{md:Pe.md.sha256.create()});return Pe.util.bytesToHex(c)}function ZA(e,t){if(!e.n||!e.e||!e.d||!e.p||!e.q||!e.dp||!e.dq||!e.qi)throw new Error("Private key is missing parameters");const r=nr(e.n),a=nr(e.e),i=nr(e.d),s=nr(e.p),c=nr(e.q),n=nr(e.dp),d=nr(e.dq),f=nr(e.qi),b=Pe.rsa.setPrivateKey(r,a,i,s,c,n,d,f),I=Pe.util.hexToBytes(t),v=b.decrypt(I,"RSA-OAEP",{md:Pe.md.sha256.create()});return decodeURIComponent(v)}function e2(e,t,r=""){const a=typeof e=="string"?e:Vn(e.k||""),i=Pe.util.hexToBytes(a),s=Pe.random.getBytesSync(12),c=Pe.cipher.createCipher("AES-GCM",i);return c.start({additionalData:r,iv:s,tagLength:128}),c.update(Pe.util.createBuffer(t)),c.finish(),{iv:Pe.util.bytesToHex(s),t:Pe.util.bytesToHex(c.mode.tag),ad:Pe.util.bytesToHex(r),d:Pe.util.bytesToHex(c.output)}}function Lh(e,t,r=""){const a=typeof e=="string"?e:Vn(e.k||""),i=Pe.util.hexToBytes(a),s=Pe.random.getBytesSync(12),c=Pe.cipher.createCipher("AES-GCM",i),n=encodeURIComponent(t);return c.start({additionalData:r,iv:s,tagLength:128}),c.update(Pe.util.createBuffer(n)),c.finish(),{iv:Pe.util.bytesToHex(s),t:Pe.util.bytesToHex(c.mode.tag),ad:Pe.util.bytesToHex(r),d:Pe.util.bytesToHex(c.output)}}function Uh(e,t){const r=typeof e=="string"?e:Vn(e.k||""),a=Pe.util.hexToBytes(r),i=Pe.cipher.createDecipher("AES-GCM",a);if(i.start({iv:Pe.util.hexToBytes(t.iv),tagLength:t.t.length*4,tag:Pe.util.hexToBytes(t.t),additionalData:Pe.util.hexToBytes(t.ad)}),i.update(Pe.util.createBuffer(Pe.util.hexToBytes(t.d))),i.finish())return decodeURIComponent(i.output.toString());throw new Error("Failed to decrypt data")}function t2(e,t){const r=typeof e=="string"?e:Vn(e.k||""),a=Pe.util.hexToBytes(r),i=Pe.cipher.createDecipher("AES-GCM",a);if(i.start({iv:Pe.util.hexToBytes(t.iv),tagLength:t.t.length*4,tag:Pe.util.hexToBytes(t.t),additionalData:Pe.util.hexToBytes(t.ad)}),i.update(Pe.util.createBuffer(Pe.util.hexToBytes(t.d))),i.finish())return Buffer.from(Pe.util.bytesToHex(i.output),"hex");throw new Error("Failed to decrypt data")}async function r2(){const e=window.crypto,t=e?e.subtle||e.webkitSubtle:null;if(t){console.log("[crypt] Using Native AES Key Generation");const a=await t.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return t.exportKey("jwk",a)}console.log("[crypt] Using Fallback Forge AES Key Generation");const r=Pe.util.bytesToHex(Pe.random.getBytesSync(32));return{kty:"oct",alg:"A256GCM",ext:!0,key_ops:["encrypt","decrypt"],k:$h(r)}}function $h(e){const t=Pe.util.hexToBytes(e);return window.btoa(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nr(e){return new Pe.jsbn.BigInteger(Vn(e),16)}function Vn(e){const t=e.replace(/-/g,"+").replace(/_/g,"/");return Pe.util.bytesToHex(window.atob(t))}const Fh=e=>{const t=typeof e=="string"?e:JSON.stringify(e);return Buffer.from(t,"utf-8").toString("base64")};function ao(e,t){try{const r=Buffer.from(e,"base64").toString("utf-8");return t?JSON.parse(r):r}catch{console.error(`failed to base64 decode string ${e}`)}return e}async function n2(e,t){if(Ap){const r=_p()||"";if(r)return t?ao(r,!0):r}if(e){const r=await window.main.secretStorage.decryptString(e);return t?ao(r,!0):r}return""}const mo=e=>`vault_${e}`,a2=async(e,t)=>{const r=await Nt.getOrCreate(),{saveVaultKeyLocally:a}=r;a&&await window.main.secretStorage.setSecret(mo(e),t)},i2=async e=>await window.main.secretStorage.getSecret(mo(e)),s2=async e=>{await window.main.secretStorage.deleteSecret(mo(e))},Mh="Environment",Wt="Environment",nf="env",lr="__insomnia_vault",Vh="vault",io="••••••",Kh=!0,qh=!0,jh=["kvPairData","environmentType"];var af=(e=>(e.JSON="json",e.KVPAIR="kv",e))(af||{}),sf=(e=>(e.JSON="json",e.STRING="str",e.SECRET="secret",e))(sf||{});function Gh(e,t){const r=Sh.order(e,t,Xp),a=[];return Object.keys(r).forEach(i=>{const s=r[i];if(i===lr&&typeof s=="object")Object.keys(s).forEach(c=>{a.push({id:Xr("envPair"),name:c,value:s[c],type:"secret",enabled:!0})});else{const c=s&&typeof s=="object"&&e!==null;a.push({id:Xr("envPair"),name:i,value:c?JSON.stringify(s):String(s),type:c?"json":"str",enabled:!0})}}),a}function Hh(e){const t={};return e.forEach(r=>{const{name:a,value:i,type:s,enabled:c}=r;c&&(s==="secret"?(t[lr]||(t[lr]={}),t[lr][a]=i):t[a]=s==="json"?JSON.parse(i):i)}),{data:t,dataPropertyOrder:null}}const zh=e=>{if(e.isPrivate){const{data:t,kvPairData:r}=e;r?.some(i=>i.type==="secret")&&(r?.forEach(i=>{const{type:s}=i;s==="secret"&&(i.value=io)}),Object.keys(t[lr]).forEach(i=>{t[lr][i]=io}))}return e},Wh=(e,t)=>{if(typeof t!="object"||Object.keys(t).length===0)return e;const r=Lh(t,e);return Fh(r)},Yh=(e,t)=>{if(typeof t!="object"||Object.keys(t).length===0)return e;try{const r=ao(e,!0);return Uh(t,r)}catch{return e}},Qh=async e=>{const r=(await F.find(Va.type,{parentId:{$in:e}})).map(d=>d._id),a=await F.find(hr.type,{parentId:{$in:r},scope:hr.WorkspaceScopeKeys.environment}),i=await F.find(Wt,{parentId:{$in:a.map(d=>d._id)}}),s=await F.find(Wt,{parentId:{$in:i.map(d=>d._id)}});i.concat(s).filter(d=>d.isPrivate).forEach(async d=>{const{kvPairData:f,data:b}=d;if(lr in b){const{[lr]:I,...v}=b,h=f?.filter(y=>y.type!=="secret");await cf(d,{data:v,kvPairData:h})}})},Xh=e=>e.type===Wt;function Jh(){return{name:"New Environment",data:{},dataPropertyOrder:null,color:null,isPrivate:!1,metaSortKey:Date.now()}}function Zh(e){return e}function of(e={}){if(!e.parentId)throw new Error(`New Environment missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(Wt,e)}function cf(e,t){return F.docUpdate(e,t)}function e0(e){return F.find(Wt,{parentId:e},{metaSortKey:1})}async function t0(e){const t=await F.find(Wt,{parentId:e});if(!t.length){const r=`${nf}_${yh("sha1").update(e).digest("hex")}`;try{return await of({parentId:e,name:"Base Environment",environmentType:"kv",_id:r})}catch(a){const i=await uf(r);if(i)return i;throw a}}return t[t.length-1]}function uf(e){return F.findOne(Wt,{_id:e})}function r0(e){return F.findOne(Wt,{parentId:e})}async function n0(e){const t=`${e.name} (Copy)`,r={metaSortKey:{$gt:e.metaSortKey}},[a]=await F.find(Wt,r,{metaSortKey:1}),i=a?a.metaSortKey:e.metaSortKey+100,s=(e.metaSortKey+i)/2;return F.duplicate(e,{name:t,metaSortKey:s})}function a0(e){return F.remove(e)}function i0(){return F.find(Wt)}const s0=Object.freeze(Object.defineProperty({__proto__:null,EnvironmentKvPairDataType:sf,EnvironmentType:af,all:i0,canDuplicate:Kh,canSync:qh,create:of,decryptSecretValue:Yh,duplicate:n0,encryptSecretValue:Wh,findByParentId:e0,getById:uf,getByParentId:r0,getDataFromKVPair:Hh,getKVPairFromData:Gh,getOrCreateForParentId:t0,init:Jh,isEnvironment:Xh,maskVaultEnvironmentData:zh,migrate:Zh,name:Mh,optionalKeys:jh,prefix:nf,remove:a0,removeAllSecrets:Qh,type:Wt,update:cf,vaultEnvironmentMaskValue:io,vaultEnvironmentPath:lr,vaultEnvironmentRuntimePath:Vh},Symbol.toStringTag,{value:"Module"}));var o0={};const F={batchModifyDocs:async function({upsert:e=[],remove:t=[]}){if(process.type==="renderer")return Bt("batchModifyDocs",...arguments);const r=await F.bufferChanges();await Promise.all(e.map(a=>F.update(a))),await Promise.all(t.map(a=>F.unsafeRemove(a))),await F.flushChanges(r)},bufferChanges:async function(e=1e3){return process.type==="renderer"?Bt("bufferChanges",...arguments):(pa=!0,setTimeout(F.flushChanges,e),++zi)},bufferChangesIndefinitely:async function(){return process.type==="renderer"?Bt("bufferChangesIndefinitely",...arguments):(pa=!0,++zi)},count:async function(e,t={}){return process.type==="renderer"?Bt("count",...arguments):Pt[e].countAsync(t)},docCreate:async(e,...t)=>{const r=await Sr(e,...t,{type:e});return F.insert(r)},docUpdate:async(e,...t)=>{const r=await Sr(e.type,e,{modified:Date.now()},...t);return F.update(r,t)},duplicate:async function(e,t={}){if(process.type==="renderer")return Bt("duplicate",...arguments);const r=await F.bufferChanges();async function a(s,c){const n=Qd(s.type),d={_id:Xr(n.prefix),modified:Date.now(),created:Date.now(),type:s.type},f={...s,...c,...d},b=await Pt[s.type].insertAsync(f);for(const I of Object.keys(Pt))if(Xd(I))for(const v of await F.find(I,{parentId:s._id}))await a(v,{parentId:b._id});return b}const i=await a(e,t);return await F.flushChanges(r),i},findOne:async function(e,t={},r={created:1}){if(process.type==="renderer")return Bt("findOne",...arguments);const a=await Pt[e].findOneAsync(t).sort(r);if(a!==null)return Sr(e,a)},find:async function(e,t={},r={created:1},a=0){if(process.type==="renderer")return Bt("find",...arguments);if(!Pt[e])return console.warn(`[db] No collection for type "${e}"`),[];const i=await Pt[e].findAsync(t).sort(r).limit(a),s=[];for(const c of i)s.push(await Sr(e,c));return s},flushChanges:async function(e=0,t=!1){if(process.type==="renderer")return Bt("flushChanges",...arguments);if(e!==0&&zi!==e)return;pa=!1;const r=[...so];if(so=[],r.length===0)return;if(t){console.log(`[db] Dropped ${r.length} changes.`);return}for(const i of Wi)await i(r);if(process.type==="browser"){const i=Ut.BrowserWindow.getAllWindows();for(const s of i)s.webContents.send("db.changes",r)}},init:async(e={},t=!1)=>{t&&(Wi=[],Pt={});const r={autoload:!0,corruptAlertThreshold:.9,...e},a=o0.INSOMNIA_DATA_PATH||Ut.app.getPath("userData");Pt={ApiSpec:new Oe({...r,filename:Te.join(a,"insomnia.ApiSpec.db")}),CaCertificate:new Oe({...r,filename:Te.join(a,"insomnia.CaCertificate.db")}),ClientCertificate:new Oe({...r,filename:Te.join(a,"insomnia.ClientCertificate.db")}),CloudCredential:new Oe({...r,filename:Te.join(a,"insomnia.CloudCredential.db")}),CookieJar:new Oe({...r,filename:Te.join(a,"insomnia.CookieJar.db")}),Environment:new Oe({...r,filename:Te.join(a,"insomnia.Environment.db")}),GitCredentials:new Oe({...r,filename:Te.join(a,"insomnia.GitCredentials.db")}),GitRepository:new Oe({...r,filename:Te.join(a,"insomnia.GitRepository.db")}),GrpcRequest:new Oe({...r,filename:Te.join(a,"insomnia.GrpcRequest.db")}),GrpcRequestMeta:new Oe({...r,filename:Te.join(a,"insomnia.GrpcRequestMeta.db")}),MockRoute:new Oe({...r,filename:Te.join(a,"insomnia.MockRoute.db")}),MockServer:new Oe({...r,filename:Te.join(a,"insomnia.MockServer.db")}),McpRequest:new Oe({...r,filename:Te.join(a,"insomnia.McpRequest.db")}),McpResponse:new Oe({...r,filename:Te.join(a,"insomnia.McpResponse.db")}),McpPayload:new Oe({...r,filename:Te.join(a,"insomnia.McpPayload.db")}),OAuth2Token:new Oe({...r,filename:Te.join(a,"insomnia.OAuth2Token.db")}),PluginData:new Oe({...r,filename:Te.join(a,"insomnia.PluginData.db")}),Project:new Oe({...r,filename:Te.join(a,"insomnia.Project.db")}),ProtoDirectory:new Oe({...r,filename:Te.join(a,"insomnia.ProtoDirectory.db")}),ProtoFile:new Oe({...r,filename:Te.join(a,"insomnia.ProtoFile.db")}),Request:new Oe({...r,filename:Te.join(a,"insomnia.Request.db")}),RequestGroup:new Oe({...r,filename:Te.join(a,"insomnia.RequestGroup.db")}),RequestGroupMeta:new Oe({...r,filename:Te.join(a,"insomnia.RequestGroupMeta.db")}),RequestMeta:new Oe({...r,filename:Te.join(a,"insomnia.RequestMeta.db")}),RequestVersion:new Oe({...r,filename:Te.join(a,"insomnia.RequestVersion.db")}),Response:new Oe({...r,filename:Te.join(a,"insomnia.Response.db")}),RunnerTestResult:new Oe({...r,filename:Te.join(a,"insomnia.RunnerTestResult.db")}),Settings:new Oe({...r,filename:Te.join(a,"insomnia.Settings.db")}),SocketIOPayload:new Oe({...r,filename:Te.join(a,"insomnia.SocketIOPayload.db")}),SocketIORequest:new Oe({...r,filename:Te.join(a,"insomnia.SocketIORequest.db")}),SocketIOResponse:new Oe({...r,filename:Te.join(a,"insomnia.SocketIOResponse.db")}),Stats:new Oe({...r,filename:Te.join(a,"insomnia.Stats.db")}),UnitTest:new Oe({...r,filename:Te.join(a,"insomnia.UnitTest.db")}),UnitTestResult:new Oe({...r,filename:Te.join(a,"insomnia.UnitTestResult.db")}),UnitTestSuite:new Oe({...r,filename:Te.join(a,"insomnia.UnitTestSuite.db")}),UserSession:new Oe({...r,filename:Te.join(a,"insomnia.UserSession.db")}),WebSocketPayload:new Oe({...r,filename:Te.join(a,"insomnia.WebSocketPayload.db")}),WebSocketRequest:new Oe({...r,filename:Te.join(a,"insomnia.WebSocketRequest.db")}),WebSocketResponse:new Oe({...r,filename:Te.join(a,"insomnia.WebSocketResponse.db")}),Workspace:new Oe({...r,filename:Te.join(a,"insomnia.Workspace.db")}),WorkspaceMeta:new Oe({...r,filename:Te.join(a,"insomnia.WorkspaceMeta.db")})},Ut.ipcMain.on("db.fn",async(i,s,c,...n)=>{try{const d=await F[s](...n);i.sender.send(c,null,d)}catch(d){i.sender.send(c,{message:d.message,stack:d.stack})}}),e.inMemoryOnly||await c0()},insert:async function(e){if(process.type==="renderer")return Bt("insert",...arguments);const t=await Sr(e.type,e),r=await Pt[e.type].insertAsync(t);return Bn("insert",r),r},onChange:e=>{Wi.push(e)},remove:async function(e){if(process.type==="renderer")return Bt("remove",...arguments);const t=await F.bufferChanges(),r=await F.getWithDescendants(e),a=r.map(s=>s._id);[...new Set(r.map(s=>s.type))].map(s=>Pt[s].remove({_id:{$in:a}},{multi:!0})),r.map(s=>Bn("remove",s)),await F.flushChanges(t)},removeWhere:async function(e,t){if(process.type==="renderer")return Bt("removeWhere",...arguments);const r=await F.bufferChanges();for(const a of await F.find(e,t)){const i=await F.getWithDescendants(a),s=i.map(n=>n._id);[...new Set(i.map(n=>n.type))].map(n=>Pt[n].remove({_id:{$in:s}},{multi:!0})),i.map(n=>Bn("remove",n))}await F.flushChanges(r)},unsafeRemove:async function(e){if(process.type==="renderer")return Bt("unsafeRemove",...arguments);Pt[e.type].remove({_id:e._id}),Bn("remove",e)},update:async function(e,t=[]){if(process.type==="renderer")return Bt("update",...arguments);const r=await Sr(e.type,e);return await Pt[e.type].updateAsync({_id:r._id},r,{upsert:!0}),Bn("update",r,t),r},withAncestors:async function(e,t=[]){if(process.type==="renderer")return Bt("withAncestors",...arguments);if(!e)return[];let r=e?[e]:[];t.length===0&&(t=Object.keys(Pt));async function a(i){const s=[];for(const c of i)for(const n of t){const d=await F.findOne(n,{_id:c.parentId});d&&s.push(d)}return s.length===0?r:(r=[...r,...s],a(s))}return a([e])},getWithDescendants:async function(e,t=[]){if(process.type==="renderer")return Bt("getWithDescendants",...arguments);if(!e)return[];let r=[e];const a=t.length?Jd(t):Xo();async function i(s){let c=[];if(s.length>0){const n=[],d=new Set,f=new Map;for(const v of s)v.type&&a[v.type]?.forEach(h=>{d.add(h),f.set(h,[...f.get(h)||[],v._id])});const b=Array.from(d);for(const v of b){const h=F.find(v,{parentId:{$in:f.get(v)||[]}});n.push(h)}const I=await Promise.all(n);c=[...c,...I.flat()]}return c.length===0?r:(r=[...r,...c],i(c))}return i([e])}};let Pt={},pa=!1,zi=1,so=[],Wi=[];async function Bn(e,t,r=[]){const a=t;so.push([e,a,r]),pa||await F.flushChanges()}async function Bt(e,...t){return new Promise((r,a)=>{const i=`db.fn.reply:${Ta()}`;Ut.ipcRenderer.send("db.fn",e,i,...t),Ut.ipcRenderer.once(i,(s,c,n)=>c?a(c):r(n))})}async function c0(){console.log("[fix] Running database repairs");for(const e of await F.find(hr.type))await l0(e),await f0(e),await u0(e);for(const e of await F.find(Fo.type))await d0(e)}async function u0(e){const t=await Qr.getByParentId(e._id);t&&(!t.fileName||t.fileName===Qr.init().fileName)&&await Qr.update(t,{fileName:e.name})}async function l0(e){const t=await F.find(br.type,{parentId:e._id});if(t.length<=1)return;const r=t[0];for(const a of t){if(a._id===r._id)continue;r.data=Object.assign(a.data,r.data);const i=await F.find(br.type,{parentId:a._id});for(const s of i)await F.docUpdate(s,{parentId:r._id});await F.remove(a)}await F.update(r),console.log(`[fix] Merged ${t.length} base environments under ${e.name}`)}async function f0(e){const t=await F.find(Ma.type,{parentId:e._id});if(t.length<=1)return;const r=t[0];for(const a of t)if(a._id!==r._id){for(const i of a.cookies)r.cookies.find(s=>s.id===i.id)||r.cookies.push(i);await F.remove(a)}await F.update(r),console.log(`[fix] Merged ${t.length} cookie jars under ${e.name}`)}async function d0(e){e.uriNeedsMigration&&(e.uri.endsWith(".git")||(e.uri+=".git"),e.uriNeedsMigration=!1,await F.update(e),console.log(`[fix] Fixed git URI for ${e._id}`))}const ha={collection:{singular:"Collection",plural:"Collections"},mock:{singular:"Mock",plural:"Mocks"},document:{singular:"Document",plural:"Documents"},organization:{singular:"Organization"},project:{singular:"Project",plural:"Projects"},environment:{singular:"Environment",plural:"Environments"},mcp:{singular:"MCP Client",plural:"MCP Clients"}},p0="ApiSpec",Tr="ApiSpec",h0="spc",y0=!0,g0=!0,v0=e=>e.type===Tr;function m0(){return{fileName:`New ${ha.document.singular}`,contents:"",contentType:"yaml"}}function C0(e){return e}function E0(e){return F.findOne(Tr,{parentId:e})}async function lf(e,t={}){const r=await F.findOne(Tr,{parentId:e});return r||F.docCreate(Tr,{...t,parentId:e})}async function S0(e,t={}){const r=await lf(e);return F.docUpdate(r,t)}async function x0(){return F.find(Tr)}function b0(e,t={}){return F.docUpdate(e,t)}function T0(e){return F.removeWhere(Tr,{parentId:e})}const I0=Object.freeze(Object.defineProperty({__proto__:null,all:x0,canDuplicate:y0,canSync:g0,getByParentId:E0,getOrCreateForParentId:lf,init:m0,isApiSpec:v0,migrate:C0,name:p0,prefix:h0,removeWhere:T0,type:Tr,update:b0,updateOrCreateForParentId:S0},Symbol.toStringTag,{value:"Module"})),A0="CA Certificate",Nr="CaCertificate",_0="crt",w0=!0,B0=!1;function N0(){return{parentId:"",disabled:!1,path:null,isPrivate:!1}}const R0=e=>e.type===Nr;function k0(e){return e}function D0(e={}){if(!e.parentId)throw new Error("New CaCertificate missing `parentId`: "+JSON.stringify(e));return F.docCreate(Nr,e)}function P0(e,t={}){return F.docUpdate(e,t)}function O0(e){return F.findOne(Nr,{_id:e})}function L0(e){return F.findOne(Nr,{parentId:e})}function U0(e){return F.removeWhere(Nr,{parentId:e})}function $0(){return F.find(Nr)}const F0=Object.freeze(Object.defineProperty({__proto__:null,all:$0,canDuplicate:w0,canSync:B0,create:D0,findByParentId:L0,getById:O0,init:N0,isCaCertificate:R0,migrate:k0,name:A0,prefix:_0,removeWhere:U0,type:Nr,update:P0},Symbol.toStringTag,{value:"Module"})),M0="Client Certificate",en="ClientCertificate",V0="crt",K0=!0,q0=!1;function j0(){return{parentId:"",host:"",passphrase:null,disabled:!1,cert:null,key:null,pfx:null,isPrivate:!1}}const G0=e=>e.type===en;function H0(e){return e}function z0(e={}){if(!e.parentId)throw new Error("New ClientCertificate missing `parentId`: "+JSON.stringify(e));return F.docCreate(en,e)}function W0(e,t={}){return F.docUpdate(e,t)}function Y0(e){return F.findOne(en,{_id:e})}function Q0(e){return F.find(en,{parentId:e})}function X0(e){return F.remove(e)}function J0(){return F.find(en)}const Z0=Object.freeze(Object.defineProperty({__proto__:null,all:J0,canDuplicate:K0,canSync:q0,create:z0,findByParentId:Q0,getById:Y0,init:j0,isClientCertificate:G0,migrate:H0,name:M0,prefix:V0,remove:X0,type:en,update:W0},Symbol.toStringTag,{value:"Module"}));var ff=(e=>(e.temp="temporary",e.file="file",e.sso="sso",e))(ff||{}),df=(e=>(e.cloudVaultSecrets="cloud",e.cloudVaultDedicated="cloudVaultDedicated",e.onPrem="onPrem",e))(df||{}),pf=(e=>(e.token="token",e.appRole="appRole",e))(pf||{});const ey="Cloud Credential",tn="CloudCredential",ty="cloudCred",ry=!1,ny=!1,ay=e=>e.type===tn;function iy(e){return{aws:"AWS",azure:"Azure",gcp:"GCP",hashicorp:"HashiCorp"}[e]||""}function sy(){return{name:"",provider:void 0,credentials:void 0}}function oy(e){return e}function cy(e={}){return F.docCreate(tn,e)}async function uy(e){return F.findOne(tn,{_id:e})}function ly(e,t){return F.docUpdate(e,t)}function fy(e){return F.remove(e)}function dy(e,t){return F.find(tn,{name:e,provider:t})}function py(){return F.find(tn)}const hy=Object.freeze(Object.defineProperty({__proto__:null,AWSCredentialType:ff,HashiCorpCredentialType:df,HashiCorpVaultAuthMethod:pf,all:py,canDuplicate:ry,canSync:ny,create:cy,getById:uy,getByName:dy,getProviderDisplayName:iy,init:sy,isCloudCredential:ay,migrate:oy,name:ey,prefix:ty,remove:fy,type:tn,update:ly},Symbol.toStringTag,{value:"Module"})),yy="Cookie Jar",rn="CookieJar",hf="jar",gy=!0,vy=!1,my=e=>e.type===rn;function Cy(){return{name:"Default Jar",cookies:[]}}function Ey(e){try{return e=Iy(e),e}catch(t){throw console.log("[db] Error during cookie jar migration",t),t}}async function yf(e){if(!e.parentId)throw new Error(`New CookieJar missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(rn,e)}async function Sy(e){const t=await F.find(rn,{parentId:e});return t.length===0?yf({parentId:e,_id:`${hf}_${Ee.createHash("sha1").update(e).digest("hex")}`}):t[0]}async function xy(){return F.find(rn)}async function by(e){return F.findOne(rn,{_id:e})}async function Ty(e,t={}){return F.docUpdate(e,t)}function Iy(e){for(const t of e.cookies)t.id||(t.id=Ta());return e}const Ay=Object.freeze(Object.defineProperty({__proto__:null,all:xy,canDuplicate:gy,canSync:vy,create:yf,getById:by,getOrCreateForParentId:Sy,init:Cy,isCookieJar:my,migrate:Ey,name:yy,prefix:hf,type:rn,update:Ty},Symbol.toStringTag,{value:"Module"})),_y="Git Credentials",nn="GitCredentials",wy="git_creds",By=!1,Ny=!1;function Ry(){return{token:"",refreshToken:"",provider:"github",author:{email:"",name:"",avatarUrl:""}}}function ky(e){return e}function Dy(e={}){return F.docCreate(nn,e)}async function Py(e){return F.findOne(nn,{_id:e})}async function Oy(e){return F.findOne(nn,e==="github"?{provider:"githubapp"}:{provider:"gitlab"})}function Ly(e,t){return F.docUpdate(e,t)}function Uy(e){return F.remove(e)}function $y(){return F.find(nn)}function Fy(){return F.removeWhere(nn,{})}const My=Object.freeze(Object.defineProperty({__proto__:null,all:$y,canDuplicate:By,canSync:Ny,create:Dy,getById:Py,getByProvider:Oy,init:Ry,migrate:ky,name:_y,prefix:wy,remove:Uy,removeAll:Fy,type:nn,update:Ly},Symbol.toStringTag,{value:"Module"})),Vy="Git Repository",Kn="GitRepository",Ky="git",qy=!1,jy=!1;function Gy(){return{needsFullClone:!1,uri:"",credentials:null,author:{name:"",email:""},cachedGitLastCommitTime:null,cachedGitRepositoryBranch:null,cachedGitLastAuthor:null,hasUncommittedChanges:!1,hasUnpushedChanges:!1,uriNeedsMigration:!0}}const Hy=e=>e.type===Kn;function zy(e){return e}function Wy(e={}){return F.docCreate(Kn,{uriNeedsMigration:!1,...e})}async function Yy(e){return F.findOne(Kn,{_id:e})}function Qy(e,t){return F.docUpdate(e,t)}function Xy(e){return F.remove(e)}function Jy(){return F.find(Kn)}const Zy=e=>"oauth2format"in e,eg=Object.freeze(Object.defineProperty({__proto__:null,all:Jy,canDuplicate:qy,canSync:jy,create:Wy,getById:Yy,init:Gy,isGitCredentialsOAuth:Zy,isGitRepository:Hy,migrate:zy,name:Vy,prefix:Ky,remove:Xy,type:Kn,update:Qy},Symbol.toStringTag,{value:"Module"})),gf="gRPC Request",yr="GrpcRequest",vf="greq",tg=!0,rg=!0,an=e=>e.type===yr,Co=e=>e?.startsWith(`${vf}_`);function ng(){return{url:"",name:"New gRPC Request",description:"",protoFileId:"",protoMethodName:"",metadata:[],body:{text:"{}"},metaSortKey:-1*Date.now(),isPrivate:!1,reflectionApi:{enabled:!1,url:"https://buf.build",apiKey:"",module:"buf.build/connectrpc/eliza"}}}function ag(e){return e}function ig(e={}){if(!e.parentId)throw new Error("New GrpcRequest missing `parentId`");return F.docCreate(yr,e)}function sg(e){return F.remove(e)}function og(e,t={}){return F.docUpdate(e,t)}function cg(e){return F.findOne(yr,{_id:e})}function ug(e){return F.find(yr,{protoFileId:e})}function lg(e){return F.find(yr,{parentId:e})}async function fg(e,t={}){!t.name&&e.name&&(t.name=`${e.name} (Copy)`);const r={metaSortKey:{$gt:e.metaSortKey}},[a]=await F.find(yr,r,{metaSortKey:1}),s=((a?a.metaSortKey:e.metaSortKey+100)-e.metaSortKey)/2,c=e.metaSortKey+s;return F.duplicate(e,{name:gf,metaSortKey:c,...t})}function dg(){return F.find(yr)}const pg=Object.freeze(Object.defineProperty({__proto__:null,all:dg,canDuplicate:tg,canSync:rg,create:ig,duplicate:fg,findByParentId:lg,findByProtoFileId:ug,getById:cg,init:ng,isGrpcRequest:an,isGrpcRequestId:Co,migrate:ag,name:gf,prefix:vf,remove:sg,type:yr,update:og},Symbol.toStringTag,{value:"Module"})),hg="gRPC Request Meta",qn="GrpcRequestMeta",yg="greqm",gg=!1,vg=!1,mg=e=>e.type===qn;function Cg(){return{pinned:!1,lastActive:0}}function Eg(e){return e}function Eo(e={}){if(!e.parentId)throw new Error("New GrpcRequestMeta missing `parentId`");return xo(e.parentId),F.docCreate(qn,e)}function mf(e,t){return xo(t.parentId||e.parentId),F.docUpdate(e,t)}function So(e){return xo(e),F.findOne(qn,{parentId:e})}async function Sg(e){const t=await So(e);return t||Eo({parentId:e})}async function xg(e,t){const r=await So(e);if(r)return mf(r,t);const a=Object.assign({parentId:e},t);return Eo(a)}function bg(){return F.find(qn)}function xo(e){if(!Co(e))throw new Error("Expected the parent of GrpcRequestMeta to be a GrpcRequest")}const Tg=Object.freeze(Object.defineProperty({__proto__:null,all:bg,canDuplicate:gg,canSync:vg,create:Eo,getByParentId:So,getOrCreateByParentId:Sg,init:Cg,isGrpcRequestMeta:mg,migrate:Eg,name:hg,prefix:yg,type:qn,update:mf,updateOrCreateByParentId:xg},Symbol.toStringTag,{value:"Module"})),Ig="MCP Request",sn="McpRequest",Cf="mcp-req",Ag=!0,_g=!1,On={STDIO:"stdio",HTTP:"streamable-http"},wg=[On.HTTP,On.STDIO],Na=e=>e.type===sn,Ef=e=>e?.startsWith(`${Cf}_`);function Bg(){return{url:"",transportType:On.HTTP,name:"New MCP Client",description:"",headers:[],authentication:{},env:[],mcpStdioAccess:!1,roots:[],subscribeResources:[],connected:!1}}function Ng(e){return e}function Rg(e={}){if(!e.parentId)throw new Error("New GrpcRequest missing `parentId`");return F.docCreate(sn,e)}function kg(e){return F.remove(e)}function Dg(){return F.find(sn)}function Pg(e){return F.findOne(sn,{parentId:e})}function Sf(e){return F.findOne(sn,{_id:e})}function xf(e,t={}){return F.docUpdate(e,t)}async function Og(e){const t=await Sf(e);return op(t,"McpRequest not found"),xf(t,{subscribeResources:[]})}const Lg=Object.freeze(Object.defineProperty({__proto__:null,MCP_TRANSPORT_TYPES:wg,TRANSPORT_TYPES:On,all:Dg,canDuplicate:Ag,canSync:_g,clearResourceSubscriptions:Og,create:Rg,getById:Sf,getByParentId:Pg,init:Bg,isMcpRequest:Na,isMcpRequestId:Ef,migrate:Ng,name:Ig,prefix:Cf,remove:kg,type:sn,update:xf},Symbol.toStringTag,{value:"Module"})),bf="MCP Payload",gr="McpPayload",Tf="mcp-payload",Ug=!0,$g=!1,Fg=e=>e.type===gr,Mg=e=>e?.startsWith(`${Tf}_`),Vg=()=>({params:{},url:""}),Kg=e=>e,bo=(e={})=>{if(!e.parentId)throw new Error(`New McpPayload missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(gr,e)},qg=e=>F.remove(e),If=(e,t={})=>F.docUpdate(e,t);async function jg(e,t={}){return!t.name&&e.name&&(t.name=`${e.name} (Copy)`),F.duplicate(e,{name:bf,...t})}const Gg=e=>F.findOne(gr,{_id:e}),Hg=e=>F.find(gr,{parentId:e}),Af=(e,t)=>F.findOne(gr,{parentId:e,url:t});async function zg(e,t){const r=await Af(e,t.url||"");if(r)return If(r,t);const a=Object.assign({parentId:e},t);return bo(a)}async function Wg(e,t){const r=await F.findOne(gr);return r||await bo({parentId:e,url:t})}const Yg=()=>F.find(gr),Qg=Object.freeze(Object.defineProperty({__proto__:null,all:Yg,canDuplicate:Ug,canSync:$g,create:bo,duplicate:jg,getById:Gg,getByParentId:Hg,getByParentIdAndUrl:Af,getOrCreateByParentIdAndUrl:Wg,init:Vg,isMcpPayloadId:Mg,isSocketIOPayload:Fg,migrate:Kg,name:bf,prefix:Tf,remove:qg,type:gr,update:If,updateOrCreateByParentIdAndUrl:zg},Symbol.toStringTag,{value:"Module"})),re=require("node:fs");re.appendFile;re.appendFileSync;re.access;re.accessSync;re.chown;re.chownSync;re.chmod;re.chmodSync;re.close;re.closeSync;re.copyFile;re.copyFileSync;re.cp;re.cpSync;re.createReadStream;const o2=re.createWriteStream;re.exists;re.existsSync;re.fchown;re.fchownSync;re.fchmod;re.fchmodSync;re.fdatasync;re.fdatasyncSync;re.fstat;re.fstatSync;re.fsync;re.fsyncSync;re.ftruncate;re.ftruncateSync;re.futimes;re.futimesSync;re.glob;re.globSync;re.lchown;re.lchownSync;re.lchmod;re.lchmodSync;re.link;re.linkSync;re.lstat;re.lstatSync;re.lutimes;re.lutimesSync;re.mkdir;re.mkdirSync;re.mkdtemp;re.mkdtempSync;re.open;re.openSync;re.openAsBlob;re.readdir;re.readdirSync;re.read;re.readSync;re.readv;re.readvSync;re.readFile;const c2=re.readFileSync;re.readlink;re.readlinkSync;re.realpath;re.realpathSync;re.rename;re.renameSync;re.rm;re.rmSync;re.rmdir;re.rmdirSync;re.stat;re.statfs;re.statSync;re.statfsSync;re.symlink;re.symlinkSync;re.truncate;re.truncateSync;re.unwatchFile;const u2=re.unlink;re.unlinkSync;re.utimes;re.utimesSync;re.watch;re.watchFile;re.writeFile;const l2=re.writeFileSync;re.write;re.writeSync;re.writev;re.writevSync;re.Dirent;re.Stats;re.ReadStream;re.WriteStream;re.FileReadStream;re.FileWriteStream;re._toUnixTimestamp;re.Dir;re.opendir;re.opendirSync;re.F_OK;re.R_OK;re.W_OK;re.X_OK;re.constants;re.promises;const _f="Socket.IO Request",jn="SocketIORequest",wf="socketio-req",Xg=!0,Jg=!0,Rr=e=>e.type===jn,Bf=e=>e?.startsWith(`${wf}_`),Zg=()=>({name:"New Socket.IO Request",url:"",metaSortKey:-1*Date.now(),headers:[],authentication:{},parameters:[],pathParameters:void 0,settingEncodeUrl:!0,settingStoreCookies:!0,settingSendCookies:!0,description:"",eventListeners:[]}),ev=(e={})=>{if(!e.parentId)throw new Error(`New Socket.IO Request missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(jn,e)},tv=e=>F.findOne(jn,{_id:e}),rv=e=>e,nv=e=>F.remove(e),av=(e,t={})=>F.docUpdate(e,t);async function iv(e,t={}){!t.name&&e.name&&(t.name=`${e.name} (Copy)`);const r={metaSortKey:{$gt:e.metaSortKey}},[a]=await F.find(jn,r,{metaSortKey:1}),s=((a?a.metaSortKey:e.metaSortKey+100)-e.metaSortKey)/2,c=e.metaSortKey+s;return F.duplicate(e,{name:_f,metaSortKey:c,...t})}const sv=Object.freeze(Object.defineProperty({__proto__:null,canDuplicate:Xg,canSync:Jg,create:ev,duplicate:iv,getById:tv,init:Zg,isSocketIORequest:Rr,isSocketIORequestId:Bf,migrate:rv,name:_f,prefix:wf,remove:nv,type:jn,update:av},Symbol.toStringTag,{value:"Module"})),Nf="WebSocket Request",kr="WebSocketRequest",Rf="ws-req",ov=!0,cv=!0,Dr=e=>e.type===kr,kf=e=>e?.startsWith(`${Rf}_`),uv=["settingUseProxy"],lv=()=>({name:"New WebSocket Request",url:"",metaSortKey:-1*Date.now(),headers:[],authentication:{},parameters:[],pathParameters:void 0,settingEncodeUrl:!0,settingStoreCookies:!0,settingSendCookies:!0,settingFollowRedirects:"global",description:""}),fv=e=>e,dv=(e={})=>{if(!e.parentId)throw new Error(`New WebSocketRequest missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(kr,e)},pv=e=>F.remove(e),hv=(e,t={})=>F.docUpdate(e,t);async function yv(e,t={}){!t.name&&e.name&&(t.name=`${e.name} (Copy)`);const r={metaSortKey:{$gt:e.metaSortKey}},[a]=await F.find(kr,r,{metaSortKey:1}),s=((a?a.metaSortKey:e.metaSortKey+100)-e.metaSortKey)/2,c=e.metaSortKey+s;return F.duplicate(e,{name:Nf,metaSortKey:c,...t})}const gv=e=>F.findOne(kr,{_id:e}),vv=e=>F.find(kr,{parentId:e}),mv=()=>F.find(kr),Cv=Object.freeze(Object.defineProperty({__proto__:null,all:mv,canDuplicate:ov,canSync:cv,create:dv,duplicate:yv,findByParentId:vv,getById:gv,init:lv,isWebSocketRequest:Dr,isWebSocketRequestId:kf,migrate:fv,name:Nf,optionalKeys:uv,prefix:Rf,remove:pv,type:kr,update:hv},Symbol.toStringTag,{value:"Module"}));function Gn(e){return Co(e)?Gt.getById(e):kf(e)?Ht.getById(e):Bf(e)?zt.getById(e):Ef(e)?_r.getById(e):jt.getById(e)}function f2(e){return an(e)?Gt.remove(e):Dr(e)?Ht.remove(e):Rr(e)?zt.remove(e):Na(e)?_r.remove(e):jt.remove(e)}function Ev(e,t={}){return an(e)?Gt.update(e,t):Dr(e)?Ht.update(e,t):Rr(e)?zt.update(e,t):Na(e)?_r.update(e,t):jt.update(e,t)}function d2(e,t={}){return an(e)?Gt.duplicate(e,t):Dr(e)?Ht.duplicate(e,t):Rr(e)?zt.duplicate(e,t):jt.duplicate(e,t)}const Sv="Mcp Response",Mt="McpResponse",xv="mcp-response",bv=!1,Tv=!1,Iv=e=>e.type===Mt;function Av(){return{url:"",elapsedTime:0,headers:[],timelinePath:"",eventLogPath:"",error:"",errorType:"",status:"",statusCode:0,statusMessage:"",requestVersionId:null,environmentId:null,transportType:On.HTTP}}function _v(e){return e}function Df(e){return F.findOne(Mt,{_id:e})}function wv(e){return F.find(Mt,{parentId:e})}async function Bv(){return F.find(Mt)}async function Nv(e,t){const r=await Nt.get(),a={parentId:e};t!==void 0&&r.filterResponsesByEnv&&(a.environmentId=t);const i=await F.find(Mt,a);for(const s of i)re.promises.unlink(s.eventLogPath),re.promises.unlink(s.timelinePath);await F.removeWhere(Mt,a)}function Rv(e){return re.promises.unlink(e.eventLogPath),re.promises.unlink(e.timelinePath),F.remove(e)}async function Pf(e={},t=20){if(!e.parentId)throw new Error("New Response missing `parentId`");const{parentId:r}=e,a=await Gn(r),i=a?await Kr.create(a):null;e.requestVersionId=i?i._id:null;const s={parentId:r};(await Nt.get()).filterResponsesByEnv&&"environmentId"in e&&(s.environmentId=e.environmentId);const c=Math.max(1,t),d=(await F.find(Mt,s,{modified:-1},c)).map(f=>f._id);return await F.removeWhere(Mt,{...s,_id:{$nin:d}}),F.docCreate(Mt,e)}async function kv(e,t=20){const r=e._id;if(!r)throw new Error("Cannot updateOrCreate McpResponse without _id");const a=await Df(r);return a?F.docUpdate(a,e):Pf(e,t)}async function Dv(e,t){const r=(await Nt.get()).filterResponsesByEnv;return await F.findOne(Mt,{parentId:e,...r?{environmentId:t}:{}},{modified:-1})}const Pv=Object.freeze(Object.defineProperty({__proto__:null,all:Bv,canDuplicate:bv,canSync:Tv,create:Pf,findByParentId:wv,getById:Df,getLatestForRequestId:Dv,init:Av,isMcpResponse:Iv,migrate:_v,name:Sv,prefix:xv,remove:Rv,removeForRequest:Nv,type:Mt,updateOrCreate:kv},Symbol.toStringTag,{value:"Module"})),Ov="Mock Route",Pr="MockRoute",Lv="mock-route",Uv=!0,$v=!0;function Fv(){return{body:"",headers:[],parentId:"",statusCode:200,statusText:"",name:"/",mimeType:"application/json",method:"GET"}}const Mv=e=>e.type===Pr;function Vv(e){return e}function Kv(e={}){if(!e.parentId)throw new Error("New MockRoute missing `parentId`: "+JSON.stringify(e));return F.docCreate(Pr,e)}function qv(e,t={}){return F.docUpdate(e,t)}function jv(e){return F.findOne(Pr,{_id:e})}function Gv(e){return F.find(Pr,{parentId:e})}function Hv(e){return F.removeWhere(Pr,{parentId:e})}function zv(e){return F.remove(e)}function Wv(){return F.find(Pr)}const Yv=Object.freeze(Object.defineProperty({__proto__:null,all:Wv,canDuplicate:Uv,canSync:$v,create:Kv,findByParentId:Gv,getById:jv,init:Fv,isMockRoute:Mv,migrate:Vv,name:Ov,prefix:Lv,remove:zv,removeWhere:Hv,type:Pr,update:qv},Symbol.toStringTag,{value:"Module"})),Qv="Mock Server",ar="MockServer",Xv="mock",Jv=!0,Zv=!0;function em(){return{parentId:"",name:"New Mock",url:"http://localhost:8080",useInsomniaCloud:!0}}const tm=e=>e.type===ar;function rm(e){return e}function nm(e={}){if(!e.parentId)throw new Error("New MockServer missing `parentId`: "+JSON.stringify(e));return F.docCreate(ar,e)}async function am(e,t={}){const r=await F.findOne(ar,{parentId:e});return r||F.docCreate(ar,{...t,parentId:e})}function im(e,t={}){return F.docUpdate(e,t)}function sm(e){return F.findOne(ar,{_id:e})}function om(e){return F.findOne(ar,{parentId:e})}async function cm(e){const t=await hr.findByParentId(e);return F.find(ar,{parentId:{$in:t.map(r=>r._id)}})}function um(e){return F.removeWhere(ar,{parentId:e})}function lm(e){return F.remove(e)}function fm(){return F.find(ar)}const dm=Object.freeze(Object.defineProperty({__proto__:null,all:fm,canDuplicate:Jv,canSync:Zv,create:nm,findByProjectId:cm,getById:sm,getByParentId:om,getOrCreateForParentId:am,init:em,isMockServer:tm,migrate:rm,name:Qv,prefix:Xv,remove:lm,removeWhere:um,type:ar,update:im},Symbol.toStringTag,{value:"Module"})),pm="OAuth 2.0 Token",on="OAuth2Token",hm="oa2",ym=!1,gm=!1,vm=e=>e.type===on;function mm(){return{refreshToken:"",accessToken:"",identityToken:"",expiresAt:null,xResponseId:null,xError:null,error:"",errorDescription:"",errorUri:""}}function Cm(e){return e}function Of(e={}){if(!e.parentId)throw new Error(`New OAuth2Token missing \`parentId\` ${JSON.stringify(e)}`);return F.docCreate(on,e)}function Em(e,t){return F.docUpdate(e,t)}function Sm(e){return F.remove(e)}function xm(e){return F.findOne(on,{parentId:e})}async function bm(e){let t=await F.findOne(on,{parentId:e});return t||(t=await Of({parentId:e})),t}function Tm(){return F.find(on)}const Im=Object.freeze(Object.defineProperty({__proto__:null,all:Tm,canDuplicate:ym,canSync:gm,create:Of,getByParentId:xm,getOrCreateByParentId:bm,init:mm,isOAuth2Token:vm,migrate:Cm,name:pm,prefix:hm,remove:Sm,type:on,update:Em},Symbol.toStringTag,{value:"Module"})),Am="PluginData",Or="PluginData",_m="plg",wm=!1,Bm=!1,Nm=e=>e.type===Or;function Rm(){return{plugin:"",key:"",value:""}}function km(e){return e}function Lf(e={}){return F.docCreate(Or,e)}async function Uf(e,t){return F.docUpdate(e,t)}async function Dm(e,t,r){const a=await $f(e,t);return a?Uf(a,{value:r}):Lf({plugin:e,key:t,value:r})}async function Pm(e,t){return F.removeWhere(Or,{plugin:e,key:t})}async function Om(e){return F.find(Or,{plugin:e})}async function Lm(e){return F.removeWhere(Or,{plugin:e})}async function $f(e,t){return F.findOne(Or,{plugin:e,key:t})}const Um=Object.freeze(Object.defineProperty({__proto__:null,all:Om,canDuplicate:wm,canSync:Bm,create:Lf,getByKey:$f,init:Rm,isPluginData:Nm,migrate:km,name:Am,prefix:_m,removeAll:Lm,removeByKey:Pm,type:Or,update:Uf,upsertByKey:Dm},Symbol.toStringTag,{value:"Module"})),$m="Project",cn="Project",Ra="proj",Fm=!1,Mm=!1,Ff=`${Ra}_scratchpad`,Mf="empty";function Vf(e){return e.gitRepositoryId===Mf}const Kf=e=>e._id===Ff,qf=e=>e.remoteId===null,ya=e=>!qf(e),ga=e=>"gitRepositoryId"in e&&(e.gitRepositoryId!==null||Vf(e)),Vm=e=>!Kf(e),Km=e=>e.type===cn,jf=e=>e?.startsWith(`${Ra}_`);function qm(){return{name:"My Project",remoteId:null,gitRepositoryId:null,mcpStdioAccess:!1}}function jm(e){return e}function Gm(){return Xr(Ra)}function Hm(e={}){return F.docCreate(cn,e)}function zm(e){return F.findOne(cn,{_id:e})}function Wm(e){return F.findOne(cn,{remoteId:e})}function Ym(e){return F.remove(e)}function Qm(e,t){return F.docUpdate(e,t)}async function Xm(){return await F.find(cn)}function Jm(e){return e.remoteId?.startsWith("proj_team")||e.remoteId?.startsWith("proj_org")}function Zm(e,t){return t?ga(t)?e.enableGitSync?"git":e.enableLocalVault?"local":"remote":ya(t)?e.enableCloudSync?"remote":e.enableLocalVault?"local":"git":e.enableLocalVault?"local":e.enableCloudSync?"remote":"git":e.enableLocalVault?"local":e.enableCloudSync?"remote":e.enableGitSync?"git":"local"}function e1(e,t){return!!(t==="git"&&!ga(e)||t==="local"&&(ya(e)||ga(e))||t==="remote"&&!ya(e))}function t1(e){const t={"Cloud Sync":e.enableCloudSync,"Local Vault":e.enableLocalVault,"Git Sync":e.enableGitSync},r=Object.entries(t).filter(([,a])=>a).map(([a])=>a);return r.length?r.join(", ").replace(/, ([^,]+)$/," and $1"):"No storage types selected"}const r1=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_GIT_PROJECT_ID:Mf,SCRATCHPAD_PROJECT_ID:Ff,all:Xm,canDuplicate:Fm,canSync:Mm,create:Hm,createId:Gm,getById:zm,getByRemoteId:Wm,getDefaultProjectStorageType:Zm,getProjectStorageTypeLabel:t1,init:qm,isDefaultOrganizationProject:Jm,isEmptyGitProject:Vf,isGitProject:ga,isLocalProject:qf,isProject:Km,isProjectId:jf,isRemoteProject:ya,isScratchpadProject:Kf,isSwitchingStorageType:e1,migrate:jm,name:$m,prefix:Ra,projectHasSettings:Vm,remove:Ym,type:cn,update:Qm},Symbol.toStringTag,{value:"Module"})),n1="Proto Directory",Lr="ProtoDirectory",Gf="pd",a1=!0,i1=!0,s1=e=>e.type===Lr;function o1(){return{name:"New Proto Directory"}}function c1(e){return e}function u1(){return Xr(Gf)}function l1(e={}){if(!e.parentId)throw new Error("New ProtoDirectory missing `parentId`");return F.docCreate(Lr,e)}function f1(e){return F.findOne(Lr,{_id:e})}function d1(e){return F.findOne(Lr,{parentId:e})}function p1(e){return F.find(Lr,{parentId:e})}function h1(e){return F.remove(e)}function y1(){return F.find(Lr)}const g1=Object.freeze(Object.defineProperty({__proto__:null,all:y1,canDuplicate:a1,canSync:i1,create:l1,createId:u1,findByParentId:p1,getById:f1,getByParentId:d1,init:o1,isProtoDirectory:s1,migrate:c1,name:n1,prefix:Gf,remove:h1,type:Lr},Symbol.toStringTag,{value:"Module"})),v1="Proto File",Ur="ProtoFile",m1="pf",C1=!0,E1=!0,S1=e=>e.type===Ur;function x1(){return{name:"New Proto File",protoText:""}}function b1(e){return e}function T1(e={}){if(!e.parentId)throw new Error("New ProtoFile missing `parentId`");return F.docCreate(Ur,e)}function I1(e){return F.remove(e)}function A1(e,t={}){return F.docUpdate(e,t)}function _1(e){return F.findOne(Ur,{_id:e})}function w1(e){return F.findOne(Ur,{parentId:e})}function B1(e){return F.find(Ur,{parentId:e})}function N1(){return F.find(Ur)}const R1=Object.freeze(Object.defineProperty({__proto__:null,all:N1,canDuplicate:C1,canSync:E1,create:T1,findByParentId:B1,getById:_1,getByParentId:w1,init:x1,isProtoFile:S1,migrate:b1,name:v1,prefix:m1,remove:I1,type:Ur,update:A1},Symbol.toStringTag,{value:"Module"}));function Yi(e,t){if(!!!e)throw new Error(t)}function k1(e){return typeof e=="object"&&e!==null}function D1(e,t){if(!!!e)throw new Error(t??"Unexpected invariant triggered.")}const P1=/\r\n|[\n\r]/g;function oo(e,t){let r=0,a=1;for(const i of e.body.matchAll(P1)){if(typeof i.index=="number"||D1(!1),i.index>=t)break;r=i.index+i[0].length,a+=1}return{line:a,column:t+1-r}}function O1(e){return Hf(e.source,oo(e.source,e.start))}function Hf(e,t){const r=e.locationOffset.column-1,a="".padStart(r)+e.body,i=t.line-1,s=e.locationOffset.line-1,c=t.line+s,n=t.line===1?r:0,d=t.column+n,f=`${e.name}:${c}:${d}
`,b=a.split(/\r\n|[\n\r]/g),I=b[i];if(I.length>120){const v=Math.floor(d/80),h=d%80,y=[];for(let m=0;m<I.length;m+=80)y.push(I.slice(m,m+80));return f+Eu([[`${c} |`,y[0]],...y.slice(1,v+1).map(m=>["|",m]),["|","^".padStart(h)],["|",y[v+1]]])}return f+Eu([[`${c-1} |`,b[i-1]],[`${c} |`,I],["|","^".padStart(d)],[`${c+1} |`,b[i+1]]])}function Eu(e){const t=e.filter(([a,i])=>i!==void 0),r=Math.max(...t.map(([a])=>a.length));return t.map(([a,i])=>a.padStart(r)+(i?" "+i:"")).join(`
`)}function L1(e){const t=e[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class To extends Error{constructor(t,...r){var a,i,s;const{nodes:c,source:n,positions:d,path:f,originalError:b,extensions:I}=L1(r);super(t),this.name="GraphQLError",this.path=f??void 0,this.originalError=b??void 0,this.nodes=Su(Array.isArray(c)?c:c?[c]:void 0);const v=Su((a=this.nodes)===null||a===void 0?void 0:a.map(y=>y.loc).filter(y=>y!=null));this.source=n??(v==null||(i=v[0])===null||i===void 0?void 0:i.source),this.positions=d??v?.map(y=>y.start),this.locations=d&&n?d.map(y=>oo(n,y)):v?.map(y=>oo(y.source,y.start));const h=k1(b?.extensions)?b?.extensions:void 0;this.extensions=(s=I??h)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),b!=null&&b.stack?Object.defineProperty(this,"stack",{value:b.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,To):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const r of this.nodes)r.loc&&(t+=`

`+O1(r.loc));else if(this.source&&this.locations)for(const r of this.locations)t+=`

`+Hf(this.source,r);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function Su(e){return e===void 0||e.length===0?void 0:e}function p2(e){return e.toString()}function h2(e){return e.toJSON()}function St(e,t,r){return new To(`Syntax Error: ${r}`,{source:e,positions:[t]})}class U1{constructor(t,r,a){this.start=t.start,this.end=r.end,this.startToken=t,this.endToken=r,this.source=a}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class zf{constructor(t,r,a,i,s,c){this.kind=t,this.start=r,this.end=a,this.line=i,this.column=s,this.value=c,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const $1={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},F1=new Set(Object.keys($1));function y2(e){const t=e?.kind;return typeof t=="string"&&F1.has(t)}var xr;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(xr||(xr={}));var co;(function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(co||(co={}));var Be;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Be||(Be={}));function uo(e){return e===9||e===32}function Ln(e){return e>=48&&e<=57}function Wf(e){return e>=97&&e<=122||e>=65&&e<=90}function Yf(e){return Wf(e)||e===95}function M1(e){return Wf(e)||Ln(e)||e===95}function V1(e){var t;let r=Number.MAX_SAFE_INTEGER,a=null,i=-1;for(let c=0;c<e.length;++c){var s;const n=e[c],d=K1(n);d!==n.length&&(a=(s=a)!==null&&s!==void 0?s:c,i=c,c!==0&&d<r&&(r=d))}return e.map((c,n)=>n===0?c:c.slice(r)).slice((t=a)!==null&&t!==void 0?t:0,i+1)}function K1(e){let t=0;for(;t<e.length&&uo(e.charCodeAt(t));)++t;return t}function g2(e){if(e==="")return!0;let t=!0,r=!1,a=!0,i=!1;for(let s=0;s<e.length;++s)switch(e.codePointAt(s)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 11:case 12:case 14:case 15:return!1;case 13:return!1;case 10:if(t&&!i)return!1;i=!0,t=!0,r=!1;break;case 9:case 32:r||(r=t);break;default:a&&(a=r),t=!1}return!(t||a&&i)}function v2(e,t){const r=e.replace(/"""/g,'\\"""'),a=r.split(/\r\n|[\n\r]/g),i=a.length===1,s=a.length>1&&a.slice(1).every(h=>h.length===0||uo(h.charCodeAt(0))),c=r.endsWith('\\"""'),n=e.endsWith('"')&&!c,d=e.endsWith("\\"),f=n||d,b=!(t!=null&&t.minimize)&&(!i||e.length>70||f||s||c);let I="";const v=i&&uo(e.charCodeAt(0));return(b&&!v||s)&&(I+=`
`),I+=r,(b||f)&&(I+=`
`),'"""'+I+'"""'}var ae;(function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"})(ae||(ae={}));class q1{constructor(t){const r=new zf(ae.SOF,0,0,0,0);this.source=t,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==ae.EOF)do if(t.next)t=t.next;else{const r=G1(this,t.end);t.next=r,r.prev=t,t=r}while(t.kind===ae.COMMENT);return t}}function j1(e){return e===ae.BANG||e===ae.DOLLAR||e===ae.AMP||e===ae.PAREN_L||e===ae.PAREN_R||e===ae.SPREAD||e===ae.COLON||e===ae.EQUALS||e===ae.AT||e===ae.BRACKET_L||e===ae.BRACKET_R||e===ae.BRACE_L||e===ae.PIPE||e===ae.BRACE_R}function un(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function ka(e,t){return Qf(e.charCodeAt(t))&&Xf(e.charCodeAt(t+1))}function Qf(e){return e>=55296&&e<=56319}function Xf(e){return e>=56320&&e<=57343}function Ir(e,t){const r=e.source.body.codePointAt(t);if(r===void 0)return ae.EOF;if(r>=32&&r<=126){const a=String.fromCodePoint(r);return a==='"'?`'"'`:`"${a}"`}return"U+"+r.toString(16).toUpperCase().padStart(4,"0")}function vt(e,t,r,a,i){const s=e.line,c=1+r-e.lineStart;return new zf(t,r,a,s,c,i)}function G1(e,t){const r=e.source.body,a=r.length;let i=t;for(;i<a;){const s=r.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++e.line,e.lineStart=i;continue;case 13:r.charCodeAt(i+1)===10?i+=2:++i,++e.line,e.lineStart=i;continue;case 35:return H1(e,i);case 33:return vt(e,ae.BANG,i,i+1);case 36:return vt(e,ae.DOLLAR,i,i+1);case 38:return vt(e,ae.AMP,i,i+1);case 40:return vt(e,ae.PAREN_L,i,i+1);case 41:return vt(e,ae.PAREN_R,i,i+1);case 46:if(r.charCodeAt(i+1)===46&&r.charCodeAt(i+2)===46)return vt(e,ae.SPREAD,i,i+3);break;case 58:return vt(e,ae.COLON,i,i+1);case 61:return vt(e,ae.EQUALS,i,i+1);case 64:return vt(e,ae.AT,i,i+1);case 91:return vt(e,ae.BRACKET_L,i,i+1);case 93:return vt(e,ae.BRACKET_R,i,i+1);case 123:return vt(e,ae.BRACE_L,i,i+1);case 124:return vt(e,ae.PIPE,i,i+1);case 125:return vt(e,ae.BRACE_R,i,i+1);case 34:return r.charCodeAt(i+1)===34&&r.charCodeAt(i+2)===34?J1(e,i):W1(e,i)}if(Ln(s)||s===45)return z1(e,i,s);if(Yf(s))return Z1(e,i);throw St(e.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:un(s)||ka(r,i)?`Unexpected character: ${Ir(e,i)}.`:`Invalid character: ${Ir(e,i)}.`)}return vt(e,ae.EOF,a,a)}function H1(e,t){const r=e.source.body,a=r.length;let i=t+1;for(;i<a;){const s=r.charCodeAt(i);if(s===10||s===13)break;if(un(s))++i;else if(ka(r,i))i+=2;else break}return vt(e,ae.COMMENT,t,i,r.slice(t+1,i))}function z1(e,t,r){const a=e.source.body;let i=t,s=r,c=!1;if(s===45&&(s=a.charCodeAt(++i)),s===48){if(s=a.charCodeAt(++i),Ln(s))throw St(e.source,i,`Invalid number, unexpected digit after 0: ${Ir(e,i)}.`)}else i=Qi(e,i,s),s=a.charCodeAt(i);if(s===46&&(c=!0,s=a.charCodeAt(++i),i=Qi(e,i,s),s=a.charCodeAt(i)),(s===69||s===101)&&(c=!0,s=a.charCodeAt(++i),(s===43||s===45)&&(s=a.charCodeAt(++i)),i=Qi(e,i,s),s=a.charCodeAt(i)),s===46||Yf(s))throw St(e.source,i,`Invalid number, expected digit but got: ${Ir(e,i)}.`);return vt(e,c?ae.FLOAT:ae.INT,t,i,a.slice(t,i))}function Qi(e,t,r){if(!Ln(r))throw St(e.source,t,`Invalid number, expected digit but got: ${Ir(e,t)}.`);const a=e.source.body;let i=t+1;for(;Ln(a.charCodeAt(i));)++i;return i}function W1(e,t){const r=e.source.body,a=r.length;let i=t+1,s=i,c="";for(;i<a;){const n=r.charCodeAt(i);if(n===34)return c+=r.slice(s,i),vt(e,ae.STRING,t,i+1,c);if(n===92){c+=r.slice(s,i);const d=r.charCodeAt(i+1)===117?r.charCodeAt(i+2)===123?Y1(e,i):Q1(e,i):X1(e,i);c+=d.value,i+=d.size,s=i;continue}if(n===10||n===13)break;if(un(n))++i;else if(ka(r,i))i+=2;else throw St(e.source,i,`Invalid character within String: ${Ir(e,i)}.`)}throw St(e.source,i,"Unterminated string.")}function Y1(e,t){const r=e.source.body;let a=0,i=3;for(;i<12;){const s=r.charCodeAt(t+i++);if(s===125){if(i<5||!un(a))break;return{value:String.fromCodePoint(a),size:i}}if(a=a<<4|Rn(s),a<0)break}throw St(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+i)}".`)}function Q1(e,t){const r=e.source.body,a=xu(r,t+2);if(un(a))return{value:String.fromCodePoint(a),size:6};if(Qf(a)&&r.charCodeAt(t+6)===92&&r.charCodeAt(t+7)===117){const i=xu(r,t+8);if(Xf(i))return{value:String.fromCodePoint(a,i),size:12}}throw St(e.source,t,`Invalid Unicode escape sequence: "${r.slice(t,t+6)}".`)}function xu(e,t){return Rn(e.charCodeAt(t))<<12|Rn(e.charCodeAt(t+1))<<8|Rn(e.charCodeAt(t+2))<<4|Rn(e.charCodeAt(t+3))}function Rn(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function X1(e,t){const r=e.source.body;switch(r.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw St(e.source,t,`Invalid character escape sequence: "${r.slice(t,t+2)}".`)}function J1(e,t){const r=e.source.body,a=r.length;let i=e.lineStart,s=t+3,c=s,n="";const d=[];for(;s<a;){const f=r.charCodeAt(s);if(f===34&&r.charCodeAt(s+1)===34&&r.charCodeAt(s+2)===34){n+=r.slice(c,s),d.push(n);const b=vt(e,ae.BLOCK_STRING,t,s+3,V1(d).join(`
`));return e.line+=d.length-1,e.lineStart=i,b}if(f===92&&r.charCodeAt(s+1)===34&&r.charCodeAt(s+2)===34&&r.charCodeAt(s+3)===34){n+=r.slice(c,s),c=s+1,s+=4;continue}if(f===10||f===13){n+=r.slice(c,s),d.push(n),f===13&&r.charCodeAt(s+1)===10?s+=2:++s,n="",c=s,i=s;continue}if(un(f))++s;else if(ka(r,s))s+=2;else throw St(e.source,s,`Invalid character within String: ${Ir(e,s)}.`)}throw St(e.source,s,"Unterminated string.")}function Z1(e,t){const r=e.source.body,a=r.length;let i=t+1;for(;i<a;){const s=r.charCodeAt(i);if(M1(s))++i;else break}return vt(e,ae.NAME,t,i,r.slice(t,i))}const eC=10,Jf=2;function Zf(e){return Da(e,[])}function Da(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return tC(e,t);default:return String(e)}}function tC(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";const r=[...t,e];if(rC(e)){const a=e.toJSON();if(a!==e)return typeof a=="string"?a:Da(a,r)}else if(Array.isArray(e))return aC(e,r);return nC(e,r)}function rC(e){return typeof e.toJSON=="function"}function nC(e,t){const r=Object.entries(e);return r.length===0?"{}":t.length>Jf?"["+iC(e)+"]":"{ "+r.map(([i,s])=>i+": "+Da(s,t)).join(", ")+" }"}function aC(e,t){if(e.length===0)return"[]";if(t.length>Jf)return"[Array]";const r=Math.min(eC,e.length),a=e.length-r,i=[];for(let s=0;s<r;++s)i.push(Da(e[s],t));return a===1?i.push("... 1 more item"):a>1&&i.push(`... ${a} more items`),"["+i.join(", ")+"]"}function iC(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){const r=e.constructor.name;if(typeof r=="string"&&r!=="")return r}return t}const sC=globalThis.process&&!0,oC=sC?function(t,r){return t instanceof r}:function(t,r){if(t instanceof r)return!0;if(typeof t=="object"&&t!==null){var a;const i=r.prototype[Symbol.toStringTag],s=Symbol.toStringTag in t?t[Symbol.toStringTag]:(a=t.constructor)===null||a===void 0?void 0:a.name;if(i===s){const c=Zf(t);throw new Error(`Cannot use ${i} "${c}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class ed{constructor(t,r="GraphQL request",a={line:1,column:1}){typeof t=="string"||Yi(!1,`Body must be a string. Received: ${Zf(t)}.`),this.body=t,this.name=r,this.locationOffset=a,this.locationOffset.line>0||Yi(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Yi(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function cC(e){return oC(e,ed)}function uC(e,t){const r=new Pa(e,t),a=r.parseDocument();return Object.defineProperty(a,"tokenCount",{enumerable:!1,value:r.tokenCount}),a}function m2(e,t){const r=new Pa(e,t);r.expectToken(ae.SOF);const a=r.parseValueLiteral(!1);return r.expectToken(ae.EOF),a}function C2(e,t){const r=new Pa(e,t);r.expectToken(ae.SOF);const a=r.parseConstValueLiteral();return r.expectToken(ae.EOF),a}function E2(e,t){const r=new Pa(e,t);r.expectToken(ae.SOF);const a=r.parseTypeReference();return r.expectToken(ae.EOF),a}class Pa{constructor(t,r={}){const a=cC(t)?t:new ed(t);this._lexer=new q1(a),this._options=r,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const t=this.expectToken(ae.NAME);return this.node(t,{kind:Be.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:Be.DOCUMENT,definitions:this.many(ae.SOF,this.parseDefinition,ae.EOF)})}parseDefinition(){if(this.peek(ae.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),r=t?this._lexer.lookahead():this._lexer.token;if(r.kind===ae.NAME){switch(r.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw St(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(r.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(r)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(ae.BRACE_L))return this.node(t,{kind:Be.OPERATION_DEFINITION,operation:xr.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const r=this.parseOperationType();let a;return this.peek(ae.NAME)&&(a=this.parseName()),this.node(t,{kind:Be.OPERATION_DEFINITION,operation:r,name:a,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(ae.NAME);switch(t.value){case"query":return xr.QUERY;case"mutation":return xr.MUTATION;case"subscription":return xr.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(ae.PAREN_L,this.parseVariableDefinition,ae.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Be.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(ae.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(ae.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(ae.DOLLAR),this.node(t,{kind:Be.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Be.SELECTION_SET,selections:this.many(ae.BRACE_L,this.parseSelection,ae.BRACE_R)})}parseSelection(){return this.peek(ae.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,r=this.parseName();let a,i;return this.expectOptionalToken(ae.COLON)?(a=r,i=this.parseName()):i=r,this.node(t,{kind:Be.FIELD,alias:a,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(ae.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const r=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(ae.PAREN_L,r,ae.PAREN_R)}parseArgument(t=!1){const r=this._lexer.token,a=this.parseName();return this.expectToken(ae.COLON),this.node(r,{kind:Be.ARGUMENT,name:a,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(ae.SPREAD);const r=this.expectOptionalKeyword("on");return!r&&this.peek(ae.NAME)?this.node(t,{kind:Be.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:Be.INLINE_FRAGMENT,typeCondition:r?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:Be.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:Be.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const r=this._lexer.token;switch(r.kind){case ae.BRACKET_L:return this.parseList(t);case ae.BRACE_L:return this.parseObject(t);case ae.INT:return this.advanceLexer(),this.node(r,{kind:Be.INT,value:r.value});case ae.FLOAT:return this.advanceLexer(),this.node(r,{kind:Be.FLOAT,value:r.value});case ae.STRING:case ae.BLOCK_STRING:return this.parseStringLiteral();case ae.NAME:switch(this.advanceLexer(),r.value){case"true":return this.node(r,{kind:Be.BOOLEAN,value:!0});case"false":return this.node(r,{kind:Be.BOOLEAN,value:!1});case"null":return this.node(r,{kind:Be.NULL});default:return this.node(r,{kind:Be.ENUM,value:r.value})}case ae.DOLLAR:if(t)if(this.expectToken(ae.DOLLAR),this._lexer.token.kind===ae.NAME){const a=this._lexer.token.value;throw St(this._lexer.source,r.start,`Unexpected variable "$${a}" in constant value.`)}else throw this.unexpected(r);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:Be.STRING,value:t.value,block:t.kind===ae.BLOCK_STRING})}parseList(t){const r=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:Be.LIST,values:this.any(ae.BRACKET_L,r,ae.BRACKET_R)})}parseObject(t){const r=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:Be.OBJECT,fields:this.any(ae.BRACE_L,r,ae.BRACE_R)})}parseObjectField(t){const r=this._lexer.token,a=this.parseName();return this.expectToken(ae.COLON),this.node(r,{kind:Be.OBJECT_FIELD,name:a,value:this.parseValueLiteral(t)})}parseDirectives(t){const r=[];for(;this.peek(ae.AT);)r.push(this.parseDirective(t));return r}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const r=this._lexer.token;return this.expectToken(ae.AT),this.node(r,{kind:Be.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let r;if(this.expectOptionalToken(ae.BRACKET_L)){const a=this.parseTypeReference();this.expectToken(ae.BRACKET_R),r=this.node(t,{kind:Be.LIST_TYPE,type:a})}else r=this.parseNamedType();return this.expectOptionalToken(ae.BANG)?this.node(t,{kind:Be.NON_NULL_TYPE,type:r}):r}parseNamedType(){return this.node(this._lexer.token,{kind:Be.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(ae.STRING)||this.peek(ae.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("schema");const a=this.parseConstDirectives(),i=this.many(ae.BRACE_L,this.parseOperationTypeDefinition,ae.BRACE_R);return this.node(t,{kind:Be.SCHEMA_DEFINITION,description:r,directives:a,operationTypes:i})}parseOperationTypeDefinition(){const t=this._lexer.token,r=this.parseOperationType();this.expectToken(ae.COLON);const a=this.parseNamedType();return this.node(t,{kind:Be.OPERATION_TYPE_DEFINITION,operation:r,type:a})}parseScalarTypeDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("scalar");const a=this.parseName(),i=this.parseConstDirectives();return this.node(t,{kind:Be.SCALAR_TYPE_DEFINITION,description:r,name:a,directives:i})}parseObjectTypeDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("type");const a=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),c=this.parseFieldsDefinition();return this.node(t,{kind:Be.OBJECT_TYPE_DEFINITION,description:r,name:a,interfaces:i,directives:s,fields:c})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(ae.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(ae.BRACE_L,this.parseFieldDefinition,ae.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,r=this.parseDescription(),a=this.parseName(),i=this.parseArgumentDefs();this.expectToken(ae.COLON);const s=this.parseTypeReference(),c=this.parseConstDirectives();return this.node(t,{kind:Be.FIELD_DEFINITION,description:r,name:a,arguments:i,type:s,directives:c})}parseArgumentDefs(){return this.optionalMany(ae.PAREN_L,this.parseInputValueDef,ae.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,r=this.parseDescription(),a=this.parseName();this.expectToken(ae.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(ae.EQUALS)&&(s=this.parseConstValueLiteral());const c=this.parseConstDirectives();return this.node(t,{kind:Be.INPUT_VALUE_DEFINITION,description:r,name:a,type:i,defaultValue:s,directives:c})}parseInterfaceTypeDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("interface");const a=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),c=this.parseFieldsDefinition();return this.node(t,{kind:Be.INTERFACE_TYPE_DEFINITION,description:r,name:a,interfaces:i,directives:s,fields:c})}parseUnionTypeDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("union");const a=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(t,{kind:Be.UNION_TYPE_DEFINITION,description:r,name:a,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(ae.EQUALS)?this.delimitedMany(ae.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("enum");const a=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(t,{kind:Be.ENUM_TYPE_DEFINITION,description:r,name:a,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(ae.BRACE_L,this.parseEnumValueDefinition,ae.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,r=this.parseDescription(),a=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(t,{kind:Be.ENUM_VALUE_DEFINITION,description:r,name:a,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw St(this._lexer.source,this._lexer.token.start,`${la(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("input");const a=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(t,{kind:Be.INPUT_OBJECT_TYPE_DEFINITION,description:r,name:a,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(ae.BRACE_L,this.parseInputValueDef,ae.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===ae.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const r=this.parseConstDirectives(),a=this.optionalMany(ae.BRACE_L,this.parseOperationTypeDefinition,ae.BRACE_R);if(r.length===0&&a.length===0)throw this.unexpected();return this.node(t,{kind:Be.SCHEMA_EXTENSION,directives:r,operationTypes:a})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const r=this.parseName(),a=this.parseConstDirectives();if(a.length===0)throw this.unexpected();return this.node(t,{kind:Be.SCALAR_TYPE_EXTENSION,name:r,directives:a})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(a.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:Be.OBJECT_TYPE_EXTENSION,name:r,interfaces:a,directives:i,fields:s})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const r=this.parseName(),a=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(a.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:Be.INTERFACE_TYPE_EXTENSION,name:r,interfaces:a,directives:i,fields:s})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(a.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:Be.UNION_TYPE_EXTENSION,name:r,directives:a,types:i})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(a.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:Be.ENUM_TYPE_EXTENSION,name:r,directives:a,values:i})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const r=this.parseName(),a=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(a.length===0&&i.length===0)throw this.unexpected();return this.node(t,{kind:Be.INPUT_OBJECT_TYPE_EXTENSION,name:r,directives:a,fields:i})}parseDirectiveDefinition(){const t=this._lexer.token,r=this.parseDescription();this.expectKeyword("directive"),this.expectToken(ae.AT);const a=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const c=this.parseDirectiveLocations();return this.node(t,{kind:Be.DIRECTIVE_DEFINITION,description:r,name:a,arguments:i,repeatable:s,locations:c})}parseDirectiveLocations(){return this.delimitedMany(ae.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,r=this.parseName();if(Object.prototype.hasOwnProperty.call(co,r.value))return r;throw this.unexpected(t)}node(t,r){return this._options.noLocation!==!0&&(r.loc=new U1(t,this._lexer.lastToken,this._lexer.source)),r}peek(t){return this._lexer.token.kind===t}expectToken(t){const r=this._lexer.token;if(r.kind===t)return this.advanceLexer(),r;throw St(this._lexer.source,r.start,`Expected ${td(t)}, found ${la(r)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const r=this._lexer.token;if(r.kind===ae.NAME&&r.value===t)this.advanceLexer();else throw St(this._lexer.source,r.start,`Expected "${t}", found ${la(r)}.`)}expectOptionalKeyword(t){const r=this._lexer.token;return r.kind===ae.NAME&&r.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const r=t??this._lexer.token;return St(this._lexer.source,r.start,`Unexpected ${la(r)}.`)}any(t,r,a){this.expectToken(t);const i=[];for(;!this.expectOptionalToken(a);)i.push(r.call(this));return i}optionalMany(t,r,a){if(this.expectOptionalToken(t)){const i=[];do i.push(r.call(this));while(!this.expectOptionalToken(a));return i}return[]}many(t,r,a){this.expectToken(t);const i=[];do i.push(r.call(this));while(!this.expectOptionalToken(a));return i}delimitedMany(t,r){this.expectOptionalToken(t);const a=[];do a.push(r.call(this));while(this.expectOptionalToken(t));return a}advanceLexer(){const{maxTokens:t}=this._options,r=this._lexer.advance();if(r.kind!==ae.EOF&&(++this._tokenCounter,t!==void 0&&this._tokenCounter>t))throw St(this._lexer.source,r.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function la(e){const t=e.value;return td(e.kind)+(t!=null?` "${t}"`:"")}function td(e){return j1(e)?`"${e}"`:e}function lC(e,t){let r=null;for(const i of e.definitions)if(i.kind===Be.OPERATION_DEFINITION){var a;if(t==null){if(r)return null;r=i}else if(((a=i.name)===null||a===void 0?void 0:a.value)===t)return i}return r}function S2(e){if(e&&e.body?.text&&e.body?.mimeType===lo)try{const t=JSON.parse(e.body.text);typeof t.variables=="string"&&(t.variables=JSON.parse(t.variables),e.body.text=JSON.stringify(t,null,2))}catch(t){console.error("Failed to parse GraphQL variables",t)}}function fC(e){if(e.body?.mimeType===lo){let t,r;try{r=JSON.parse(e.body.text||""),t=uC(r?.query||"")}catch{t=null}if(t){const a=lC(t,r?.operationName);if(a)return a.operation}}}const $t=require("node:url");$t.Url;const dC=$t.parse;$t.resolve;$t.resolveObject;const pC=$t.format,x2=$t.URL;$t.URLSearchParams;$t.domainToASCII;$t.domainToUnicode;$t.pathToFileURL;$t.fileURLToPath;$t.fileURLToPathBuffer;$t.urlToHttpOptions;const hC=(e,t)=>{const r=e.trim();return t=t||"http:",r?r.includes("://")?r:`${t}//${r}`:""},yC=/[-[\]/{}()*+?.\\^$|]/g,gC=":@",vC="$+,;=",mC=`${gC}${vC}`,CC=e=>(e=e||"",e.includes("?")?"&":"?"),b2=(e,t)=>{if(!t)return e;if(!e)return t;const[r,...a]=e.split("#"),i=r||"",s=CC(r),c=a.length?`#${a.join("#")}`:"";return`${i}${s}${t}${c}`},T2=e=>{if(!e)return"";const t=e.split("?");return t.length===1?"":t.slice(1).join("?").replace(/#.*/,"")},EC=(e,t,r)=>{t=t===void 0?!0:t;const{strictNullHandling:a=!1,encodeParams:i=!0}=r||{};if(t&&!e.name)return"";if(typeof e.value=="number"&&(e.value=String(e.value)),!t||e.value||a&&e.value===""){if(!i)return`${e.name}=${e.value}`;const s=Yr(e.value||"").replace(/%2C/gi,",");return`${Yr(e.name||"")}=${s}`}return Yr(e.name)},SC=(e,t,r)=>{t=t===void 0?!0:t;const{strictNullHandling:a=!1,encodeParams:i=!0}=r||{},s=[];for(const c of e){const n=EC(c,t,{strictNullHandling:a,encodeParams:i});n&&s.push(n)}return s.join("&")},rd=(e,t,r)=>{t=t===void 0?!0:t;const{strictNullHandling:a=!1}=r||{},i=[];if(!e)return i;const s=e.split("&");for(const c of s){const[n,...d]=c.split("="),f=d.length===0&&a?null:d.join("=");let b="";try{b=decodeURIComponent(n||"")}catch{b=n}let I="";try{I=a&&f===null?null:decodeURIComponent(f||"")}catch{I=f}t&&!b||i.push({name:b,value:I})}return i},I2=(e,t,r)=>{t=t===void 0?!0:t;const{strictNullHandling:a=!1}=r||{},i=hC(e);if(!t)return i;const s=dC(i);if(s.pathname){const c=s.pathname.split("/");s.pathname=c.map(n=>Yr(n,mC)).join("/")}if(s.query){const c=rd(s.query,!0,{strictNullHandling:a}),n=[];for(const{name:d,value:f}of c)n.push({name:Yr(d),value:a&&f===null?null:Yr(f)});s.query=SC(n,!0,{strictNullHandling:a}),s.search=`?${s.query}`}return pC(s)},Yr=(e="",t="")=>{e=e.replace(/%20/g," "),e=e.replace(/%([0-9a-fA-F]{2})/g,"__ENC__$1");const r=[];for(const a of t){const s=`__RAW__${encodeURIComponent(a).replace("%","")}`;r.push([s,a]);const c=a.replace(yC,"\\$&"),n=new RegExp(c,"g");e=e.replace(n,s)}e=encodeURIComponent(e);for(const[a,i]of r)e=e.replace(new RegExp(a,"g"),i);return e=e.replace(/__ENC__([0-9a-fA-F]{2})/g,"%$1"),e},nd="Request",vr="Request",ad="req",xC=!0,bC=!0,id=/\/:[^/?#:]+/g,sd=e=>{const t=e.match(id)?.map(String).map(a=>a.replace("/:",""))||[];return[...new Set(t)]},TC=(e,t)=>{const r=sd(e);let a=[];t&&(a=t.filter(s=>r.includes(s.name)));let i=new Set;return r&&(i=new Set(r.filter(s=>!a.map(c=>c.name).includes(s)).map(s=>({name:s,value:""})))),[...a,...i]},ln=e=>e.type===vr,IC=e=>e?.startsWith(`${ad}_`),AC=e=>ln(e)&&e.headers?.find(t=>t.name==="Accept")?.value==="text/event-stream",_C=e=>ln(e)&&fC(e)===xr.SUBSCRIPTION;function wC(){return{url:"",name:"New Request",description:"",method:Dl,body:{},parameters:[],headers:[],authentication:{},preRequestScript:void 0,metaSortKey:-1*Date.now(),isPrivate:!1,pathParameters:void 0,afterResponseScript:void 0,settingStoreCookies:!0,settingSendCookies:!0,settingDisableRenderRequestBody:!1,settingEncodeUrl:!0,settingRebuildPath:!0,settingFollowRedirects:"global"}}function BC(e){try{return e=$C(e),e=FC(e),e=MC(e),e}catch(t){throw console.log("[db] Error during request migration",t),t}}function NC(e={}){if(!e.parentId)throw new Error(`New Requests missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(vr,e)}function RC(e){return F.findOne(vr,{_id:e})}function kC(e){return F.findOne(vr,{parentId:e})}function DC(e){return F.find(vr,{parentId:e})}function PC(e,t){return F.docUpdate(e,t)}async function OC(e,t={}){!t.name&&e.name&&(t.name=`${e.name} (Copy)`);const r={metaSortKey:{$gt:e.metaSortKey}},[a]=await F.find(vr,r,{metaSortKey:1}),s=((a?a.metaSortKey:e.metaSortKey+100)-e.metaSortKey)/2,c=e.metaSortKey+s;return F.duplicate(e,{name:nd,metaSortKey:c,...t})}function LC(e){return F.remove(e)}async function UC(){return F.find(vr)}function $C(e){if(e.body&&typeof e.body=="object")return e;const t=Jp(e.headers)||"";if(!!t.match(/^application\/x-www-form-urlencoded/i))e.body={mimeType:Ll,params:rd(typeof e.body=="string"?e.body:"",!1)};else if(!e.body&&!t)e.body={};else{const a=typeof e.body=="string"?e.body:"";e.body=typeof t!="string"?{text:a}:{mimeType:t.split(";")[0],text:a}}return e}function FC(e){return typeof e.url!="string"&&(e.url=""),e}function MC(e){return e?.authentication&&"username"in e.authentication&&e.authentication.username&&!e.authentication.type&&(e.authentication.type="basic"),e}const VC=Object.freeze(Object.defineProperty({__proto__:null,PATH_PARAMETER_REGEX:id,all:UC,canDuplicate:xC,canSync:bC,create:NC,duplicate:OC,findByParentId:DC,getById:RC,getByParentId:kC,getCombinedPathParametersFromUrl:TC,getPathParametersFromUrl:sd,init:wC,isEventStreamRequest:AC,isGraphqlSubscriptionRequest:_C,isRequest:ln,isRequestId:IC,migrate:BC,name:nd,prefix:ad,remove:LC,type:vr,update:PC},Symbol.toStringTag,{value:"Module"})),KC="Folder",$r="RequestGroup",od="fld",qC=!0,jC=!0,GC=["kvPairData","environmentType"],HC=e=>e.type===$r;function zC(){return{name:"New Folder",description:"",environment:{},environmentPropertyOrder:null,metaSortKey:-1*Date.now(),preRequestScript:void 0,afterResponseScript:void 0,authentication:void 0,headers:void 0}}function WC(e){return e}function YC(e={}){if(!e.parentId)throw new Error("New RequestGroup missing `parentId`: "+JSON.stringify(e));return F.docCreate($r,e)}function QC(e,t={}){return F.docUpdate(e,t)}function XC(e){return F.findOne($r,{_id:e})}function JC(e){return F.find($r,{parentId:e})}function ZC(e){return F.remove(e)}function eE(){return F.find($r)}async function tE(e,t={}){t.name||(t.name=`${e.name} (Copy)`);const r={metaSortKey:{$gt:e.metaSortKey}},[a]=await F.find($r,r,{metaSortKey:1}),s=((a?a.metaSortKey:e.metaSortKey+100)-e.metaSortKey)/2,c=e.metaSortKey+s;return F.duplicate(e,{metaSortKey:c,...t})}const rE=e=>e?.startsWith(od),nE=Object.freeze(Object.defineProperty({__proto__:null,all:eE,canDuplicate:qC,canSync:jC,create:YC,duplicate:tE,findByParentId:JC,getById:XC,init:zC,isRequestGroup:HC,isRequestGroupId:rE,migrate:WC,name:KC,optionalKeys:GC,prefix:od,remove:ZC,type:$r,update:QC},Symbol.toStringTag,{value:"Module"})),aE="Folder Meta",Hn="RequestGroupMeta",iE="fldm",sE=!1,oE=!1,cE=e=>e.type===Hn;function uE(){return{parentId:null,collapsed:!1}}function lE(e){return e}function fE(e={}){if(!e.parentId)throw new Error("New RequestGroupMeta missing `parentId`: "+JSON.stringify(e));return F.docCreate(Hn,e)}function dE(e,t){return F.docUpdate(e,t)}function pE(e){return F.findOne(Hn,{parentId:e})}function hE(){return F.find(Hn)}const yE=Object.freeze(Object.defineProperty({__proto__:null,all:hE,canDuplicate:sE,canSync:oE,create:fE,getByParentId:pE,init:uE,isRequestGroupMeta:cE,migrate:lE,name:aE,prefix:iE,type:Hn,update:dE},Symbol.toStringTag,{value:"Module"})),gE="Request Meta",zn="RequestMeta",vE="reqm",mE=!1,CE=!1,EE=e=>e.type===zn;function SE(){return{parentId:null,previewMode:Pl,responseFilter:"",responseFilterHistory:[],activeResponseId:null,savedRequestBody:{},pinned:!1,lastActive:0,downloadPath:null,expandedAccordionKeys:{},activeMcpPrimitive:null}}function xE(e){return e}function Io(e={}){if(!e.parentId)throw new Error("New RequestMeta missing `parentId` "+JSON.stringify(e));return F.docCreate(zn,e)}function cd(e,t){return F.docUpdate(e,t)}function Ao(e){return F.findOne(zn,{parentId:e})}async function bE(e){const t=await Ao(e);return t||Io({parentId:e})}async function TE(e,t){const r=await Ao(e);if(r)return cd(r,t);const a=Object.assign({parentId:e},t);return Io(a)}function IE(){return F.find(zn)}const AE=Object.freeze(Object.defineProperty({__proto__:null,all:IE,canDuplicate:mE,canSync:CE,create:Io,getByParentId:Ao,getOrCreateByParentId:bE,init:SE,isRequestMeta:EE,migrate:xE,name:gE,prefix:vE,type:zn,update:cd,updateOrCreateByParentId:TE},Symbol.toStringTag,{value:"Module"}));var Xi,bu;function ud(){if(bu)return Xi;bu=1;var e=Object.prototype.toString;return Xi=function(r){var a=e.call(r),i=a==="[object Arguments]";return i||(i=a!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&e.call(r.callee)==="[object Function]"),i},Xi}var Ji,Tu;function _E(){if(Tu)return Ji;Tu=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=ud(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),c=i.call(function(){},"prototype"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(v){var h=v.constructor;return h&&h.prototype===v},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},b=(function(){if(typeof window>"u")return!1;for(var v in window)try{if(!f["$"+v]&&t.call(window,v)&&window[v]!==null&&typeof window[v]=="object")try{d(window[v])}catch{return!0}}catch{return!0}return!1})(),I=function(v){if(typeof window>"u"||!b)return d(v);try{return d(v)}catch{return!1}};e=function(h){var y=h!==null&&typeof h=="object",m=r.call(h)==="[object Function]",E=a(h),u=y&&r.call(h)==="[object String]",p=[];if(!y&&!m&&!E)throw new TypeError("Object.keys called on a non-object");var x=c&&m;if(u&&h.length>0&&!t.call(h,0))for(var w=0;w<h.length;++w)p.push(String(w));if(E&&h.length>0)for(var B=0;B<h.length;++B)p.push(String(B));else for(var C in h)!(x&&C==="prototype")&&t.call(h,C)&&p.push(String(C));if(s)for(var l=I(h),o=0;o<n.length;++o)!(l&&n[o]==="constructor")&&t.call(h,n[o])&&p.push(n[o]);return p}}return Ji=e,Ji}var Zi,Iu;function ld(){if(Iu)return Zi;Iu=1;var e=Array.prototype.slice,t=ud(),r=Object.keys,a=r?function(c){return r(c)}:_E(),i=Object.keys;return a.shim=function(){if(Object.keys){var c=(function(){var n=Object.keys(arguments);return n&&n.length===arguments.length})(1,2);c||(Object.keys=function(d){return t(d)?i(e.call(d)):i(d)})}else Object.keys=a;return Object.keys||a},Zi=a,Zi}var es,Au;function fd(){return Au||(Au=1,es=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),a=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var c=Object.getOwnPropertySymbols(t);if(c.length!==1||c[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var n=Object.getOwnPropertyDescriptor(t,r);if(n.value!==i||n.enumerable!==!0)return!1}return!0}),es}var ts,_u;function _o(){if(_u)return ts;_u=1;var e=fd();return ts=function(){return e()&&!!Symbol.toStringTag},ts}var rs,wu;function dd(){return wu||(wu=1,rs=Object),rs}var ns,Bu;function pd(){return Bu||(Bu=1,ns=Error),ns}var as,Nu;function wE(){return Nu||(Nu=1,as=EvalError),as}var is,Ru;function BE(){return Ru||(Ru=1,is=RangeError),is}var ss,ku;function NE(){return ku||(ku=1,ss=ReferenceError),ss}var os,Du;function hd(){return Du||(Du=1,os=SyntaxError),os}var cs,Pu;function fn(){return Pu||(Pu=1,cs=TypeError),cs}var us,Ou;function RE(){return Ou||(Ou=1,us=URIError),us}var ls,Lu;function kE(){return Lu||(Lu=1,ls=Math.abs),ls}var fs,Uu;function DE(){return Uu||(Uu=1,fs=Math.floor),fs}var ds,$u;function PE(){return $u||($u=1,ds=Math.max),ds}var ps,Fu;function OE(){return Fu||(Fu=1,ps=Math.min),ps}var hs,Mu;function LE(){return Mu||(Mu=1,hs=Math.pow),hs}var ys,Vu;function UE(){return Vu||(Vu=1,ys=Math.round),ys}var gs,Ku;function $E(){return Ku||(Ku=1,gs=Number.isNaN||function(t){return t!==t}),gs}var vs,qu;function FE(){if(qu)return vs;qu=1;var e=$E();return vs=function(r){return e(r)||r===0?r:r<0?-1:1},vs}var ms,ju;function ME(){return ju||(ju=1,ms=Object.getOwnPropertyDescriptor),ms}var Cs,Gu;function dn(){if(Gu)return Cs;Gu=1;var e=ME();if(e)try{e([],"length")}catch{e=null}return Cs=e,Cs}var Es,Hu;function Oa(){if(Hu)return Es;Hu=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Es=e,Es}var Ss,zu;function VE(){if(zu)return Ss;zu=1;var e=typeof Symbol<"u"&&Symbol,t=fd();return Ss=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Ss}var xs,Wu;function yd(){return Wu||(Wu=1,xs=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),xs}var bs,Yu;function gd(){if(Yu)return bs;Yu=1;var e=dd();return bs=e.getPrototypeOf||null,bs}var Ts,Qu;function KE(){if(Qu)return Ts;Qu=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,a="[object Function]",i=function(d,f){for(var b=[],I=0;I<d.length;I+=1)b[I]=d[I];for(var v=0;v<f.length;v+=1)b[v+d.length]=f[v];return b},s=function(d,f){for(var b=[],I=f,v=0;I<d.length;I+=1,v+=1)b[v]=d[I];return b},c=function(n,d){for(var f="",b=0;b<n.length;b+=1)f+=n[b],b+1<n.length&&(f+=d);return f};return Ts=function(d){var f=this;if(typeof f!="function"||t.apply(f)!==a)throw new TypeError(e+f);for(var b=s(arguments,1),I,v=function(){if(this instanceof I){var u=f.apply(this,i(b,arguments));return Object(u)===u?u:this}return f.apply(d,i(b,arguments))},h=r(0,f.length-b.length),y=[],m=0;m<h;m++)y[m]="$"+m;if(I=Function("binder","return function ("+c(y,",")+"){ return binder.apply(this,arguments); }")(v),f.prototype){var E=function(){};E.prototype=f.prototype,I.prototype=new E,E.prototype=null}return I},Ts}var Is,Xu;function Wn(){if(Xu)return Is;Xu=1;var e=KE();return Is=Function.prototype.bind||e,Is}var As,Ju;function wo(){return Ju||(Ju=1,As=Function.prototype.call),As}var _s,Zu;function Bo(){return Zu||(Zu=1,_s=Function.prototype.apply),_s}var ws,el;function qE(){return el||(el=1,ws=typeof Reflect<"u"&&Reflect&&Reflect.apply),ws}var Bs,tl;function vd(){if(tl)return Bs;tl=1;var e=Wn(),t=Bo(),r=wo(),a=qE();return Bs=a||e.call(r,t),Bs}var Ns,rl;function No(){if(rl)return Ns;rl=1;var e=Wn(),t=fn(),r=wo(),a=vd();return Ns=function(s){if(s.length<1||typeof s[0]!="function")throw new t("a function is required");return a(e,r,s)},Ns}var Rs,nl;function jE(){if(nl)return Rs;nl=1;var e=No(),t=dn(),r;try{r=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var a=!!r&&t&&t(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Rs=a&&typeof a.get=="function"?e([a.get]):typeof s=="function"?function(n){return s(n==null?n:i(n))}:!1,Rs}var ks,al;function md(){if(al)return ks;al=1;var e=yd(),t=gd(),r=jE();return ks=e?function(i){return e(i)}:t?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return t(i)}:r?function(i){return r(i)}:null,ks}var Ds,il;function Cd(){if(il)return Ds;il=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Wn();return Ds=r.call(e,t),Ds}var Ps,sl;function Ed(){if(sl)return Ps;sl=1;var e,t=dd(),r=pd(),a=wE(),i=BE(),s=NE(),c=hd(),n=fn(),d=RE(),f=kE(),b=DE(),I=PE(),v=OE(),h=LE(),y=UE(),m=FE(),E=Function,u=function(T){try{return E('"use strict"; return ('+T+").constructor;")()}catch{}},p=dn(),x=Oa(),w=function(){throw new n},B=p?(function(){try{return arguments.callee,w}catch{try{return p(arguments,"callee").get}catch{return w}}})():w,C=VE()(),l=md(),o=gd(),S=yd(),A=Bo(),N=wo(),D={},q=typeof Uint8Array>"u"||!l?e:l(Uint8Array),H={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":C&&l?l([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":D,"%AsyncGenerator%":D,"%AsyncGeneratorFunction%":D,"%AsyncIteratorPrototype%":D,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":a,"%Float16Array%":typeof Float16Array>"u"?e:Float16Array,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":E,"%GeneratorFunction%":D,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":C&&l?l(l([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!C||!l?e:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":p,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!C||!l?e:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":C&&l?l(""[Symbol.iterator]()):e,"%Symbol%":C?Symbol:e,"%SyntaxError%":c,"%ThrowTypeError%":B,"%TypedArray%":q,"%TypeError%":n,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":d,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":N,"%Function.prototype.apply%":A,"%Object.defineProperty%":x,"%Object.getPrototypeOf%":o,"%Math.abs%":f,"%Math.floor%":b,"%Math.max%":I,"%Math.min%":v,"%Math.pow%":h,"%Math.round%":y,"%Math.sign%":m,"%Reflect.getPrototypeOf%":S};if(l)try{null.error}catch(T){var Y=l(l(T));H["%Error.prototype%"]=Y}var Q=function T(U){var O;if(U==="%AsyncFunction%")O=u("async function () {}");else if(U==="%GeneratorFunction%")O=u("function* () {}");else if(U==="%AsyncGeneratorFunction%")O=u("async function* () {}");else if(U==="%AsyncGenerator%"){var g=T("%AsyncGeneratorFunction%");g&&(O=g.prototype)}else if(U==="%AsyncIteratorPrototype%"){var k=T("%AsyncGenerator%");k&&l&&(O=l(k.prototype))}return H[U]=O,O},J={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ne=Wn(),se=Cd(),fe=ne.call(N,Array.prototype.concat),he=ne.call(A,Array.prototype.splice),we=ne.call(N,String.prototype.replace),Se=ne.call(N,String.prototype.slice),le=ne.call(N,RegExp.prototype.exec),Ne=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pe=/\\(\\)?/g,tt=function(U){var O=Se(U,0,1),g=Se(U,-1);if(O==="%"&&g!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(g==="%"&&O!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var k=[];return we(U,Ne,function(z,K,te,ge){k[k.length]=te?we(ge,pe,"$1"):K||z}),k},ke=function(U,O){var g=U,k;if(se(J,g)&&(k=J[g],g="%"+k[0]+"%"),se(H,g)){var z=H[g];if(z===D&&(z=Q(g)),typeof z>"u"&&!O)throw new n("intrinsic "+U+" exists, but is not available. Please file an issue!");return{alias:k,name:g,value:z}}throw new c("intrinsic "+U+" does not exist!")};return Ps=function(U,O){if(typeof U!="string"||U.length===0)throw new n("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof O!="boolean")throw new n('"allowMissing" argument must be a boolean');if(le(/^%?[^%]*%?$/,U)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var g=tt(U),k=g.length>0?g[0]:"",z=ke("%"+k+"%",O),K=z.name,te=z.value,ge=!1,me=z.alias;me&&(k=me[0],he(g,fe([0,1],me)));for(var Z=1,ye=!0;Z<g.length;Z+=1){var xe=g[Z],Re=Se(xe,0,1),Ie=Se(xe,-1);if((Re==='"'||Re==="'"||Re==="`"||Ie==='"'||Ie==="'"||Ie==="`")&&Re!==Ie)throw new c("property names with quotes must have matching quotes");if((xe==="constructor"||!ye)&&(ge=!0),k+="."+xe,K="%"+k+"%",se(H,K))te=H[K];else if(te!=null){if(!(xe in te)){if(!O)throw new n("base intrinsic for "+U+" exists, but the property is not available.");return}if(p&&Z+1>=g.length){var Le=p(te,xe);ye=!!Le,ye&&"get"in Le&&!("originalValue"in Le.get)?te=Le.get:te=te[xe]}else ye=se(te,xe),te=te[xe];ye&&!ge&&(H[K]=te)}}return te},Ps}var Os,ol;function Ro(){if(ol)return Os;ol=1;var e=Ed(),t=No(),r=t([e("%String.prototype.indexOf%")]);return Os=function(i,s){var c=e(i,!!s);return typeof c=="function"&&r(i,".prototype.")>-1?t([c]):c},Os}var Ls,cl;function GE(){if(cl)return Ls;cl=1;var e=_o()(),t=Ro(),r=t("Object.prototype.toString"),a=function(n){return e&&n&&typeof n=="object"&&Symbol.toStringTag in n?!1:r(n)==="[object Arguments]"},i=function(n){return a(n)?!0:n!==null&&typeof n=="object"&&"length"in n&&typeof n.length=="number"&&n.length>=0&&r(n)!=="[object Array]"&&"callee"in n&&r(n.callee)==="[object Function]"},s=(function(){return a(arguments)})();return a.isLegacyArguments=i,Ls=s?a:i,Ls}var Us,ul;function ko(){if(ul)return Us;ul=1;var e=Oa(),t=hd(),r=fn(),a=dn();return Us=function(s,c,n){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`obj` must be an object or a function`");if(typeof c!="string"&&typeof c!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var d=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,b=arguments.length>5?arguments[5]:null,I=arguments.length>6?arguments[6]:!1,v=!!a&&a(s,c);if(e)e(s,c,{configurable:b===null&&v?v.configurable:!b,enumerable:d===null&&v?v.enumerable:!d,value:n,writable:f===null&&v?v.writable:!f});else if(I||!d&&!f&&!b)s[c]=n;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Us}var $s,ll;function Do(){if(ll)return $s;ll=1;var e=Oa(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},$s=t,$s}var Fs,fl;function Yn(){if(fl)return Fs;fl=1;var e=ld(),t=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,a=Array.prototype.concat,i=ko(),s=function(f){return typeof f=="function"&&r.call(f)==="[object Function]"},c=Do()(),n=function(f,b,I,v){if(b in f){if(v===!0){if(f[b]===I)return}else if(!s(v)||!v())return}c?i(f,b,I,!0):i(f,b,I)},d=function(f,b){var I=arguments.length>2?arguments[2]:{},v=e(b);t&&(v=a.call(v,Object.getOwnPropertySymbols(b)));for(var h=0;h<v.length;h+=1)n(f,v[h],b[v[h]],I[v[h]])};return d.supportsDescriptors=!!c,Fs=d,Fs}var Ms={exports:{}},Vs,dl;function HE(){if(dl)return Vs;dl=1;var e=Ed(),t=ko(),r=Do()(),a=dn(),i=fn(),s=e("%Math.floor%");return Vs=function(n,d){if(typeof n!="function")throw new i("`fn` is not a function");if(typeof d!="number"||d<0||d>4294967295||s(d)!==d)throw new i("`length` must be a positive 32-bit integer");var f=arguments.length>2&&!!arguments[2],b=!0,I=!0;if("length"in n&&a){var v=a(n,"length");v&&!v.configurable&&(b=!1),v&&!v.writable&&(I=!1)}return(b||I||!f)&&(r?t(n,"length",d,!0,!0):t(n,"length",d)),n},Vs}var Ks,pl;function zE(){if(pl)return Ks;pl=1;var e=Wn(),t=Bo(),r=vd();return Ks=function(){return r(e,t,arguments)},Ks}var hl;function Sd(){return hl||(hl=1,(function(e){var t=HE(),r=Oa(),a=No(),i=zE();e.exports=function(c){var n=a(arguments),d=c.length-(arguments.length-1);return t(n,1+(d>0?d:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i})(Ms)),Ms.exports}var qs,yl;function xd(){if(yl)return qs;yl=1;var e=function(t){return t!==t};return qs=function(r,a){return r===0&&a===0?1/r===1/a:!!(r===a||e(r)&&e(a))},qs}var js,gl;function bd(){if(gl)return js;gl=1;var e=xd();return js=function(){return typeof Object.is=="function"?Object.is:e},js}var Gs,vl;function WE(){if(vl)return Gs;vl=1;var e=bd(),t=Yn();return Gs=function(){var a=e();return t(Object,{is:a},{is:function(){return Object.is!==a}}),a},Gs}var Hs,ml;function YE(){if(ml)return Hs;ml=1;var e=Yn(),t=Sd(),r=xd(),a=bd(),i=WE(),s=t(a(),Object);return e(s,{getPolyfill:a,implementation:r,shim:i}),Hs=s,Hs}var zs,Cl;function QE(){if(Cl)return zs;Cl=1;var e=Ro(),t=_o()(),r=Cd(),a=dn(),i;if(t){var s=e("RegExp.prototype.exec"),c={},n=function(){throw c},d={toString:n,valueOf:n};typeof Symbol.toPrimitive=="symbol"&&(d[Symbol.toPrimitive]=n),i=function(v){if(!v||typeof v!="object")return!1;var h=a(v,"lastIndex"),y=h&&r(h,"value");if(!y)return!1;try{s(v,d)}catch(m){return m===c}}}else{var f=e("Object.prototype.toString"),b="[object RegExp]";i=function(v){return!v||typeof v!="object"&&typeof v!="function"?!1:f(v)===b}}return zs=i,zs}var Ws,El;function XE(){if(El)return Ws;El=1;var e=function(){return typeof function(){}.name=="string"},t=Object.getOwnPropertyDescriptor;if(t)try{t([],"length")}catch{t=null}e.functionsHaveConfigurableNames=function(){if(!e()||!t)return!1;var i=t(function(){},"name");return!!i&&!!i.configurable};var r=Function.prototype.bind;return e.boundFunctionsHaveNames=function(){return e()&&typeof r=="function"&&function(){}.bind().name!==""},Ws=e,Ws}var Ys,Sl;function JE(){if(Sl)return Ys;Sl=1;var e=ko(),t=Do()(),r=XE().functionsHaveConfigurableNames(),a=fn();return Ys=function(s,c){if(typeof s!="function")throw new a("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||r)&&(t?e(s,"name",c,!0,!0):e(s,"name",c)),s},Ys}var Qs,xl;function Td(){if(xl)return Qs;xl=1;var e=JE(),t=fn(),r=Object;return Qs=e(function(){if(this==null||this!==r(this))throw new t("RegExp.prototype.flags getter called on non-object");var i="";return this.hasIndices&&(i+="d"),this.global&&(i+="g"),this.ignoreCase&&(i+="i"),this.multiline&&(i+="m"),this.dotAll&&(i+="s"),this.unicode&&(i+="u"),this.unicodeSets&&(i+="v"),this.sticky&&(i+="y"),i},"get flags",!0),Qs}var Xs,bl;function Id(){if(bl)return Xs;bl=1;var e=Td(),t=Yn().supportsDescriptors,r=Object.getOwnPropertyDescriptor;return Xs=function(){if(t&&/a/mig.flags==="gim"){var i=r(RegExp.prototype,"flags");if(i&&typeof i.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var s="",c={};if(Object.defineProperty(c,"hasIndices",{get:function(){s+="d"}}),Object.defineProperty(c,"sticky",{get:function(){s+="y"}}),i.get.call(c),s==="dy")return i.get}}return e},Xs}var Js,Tl;function ZE(){if(Tl)return Js;Tl=1;var e=Yn().supportsDescriptors,t=Id(),r=dn(),a=Object.defineProperty,i=pd(),s=md(),c=/a/;return Js=function(){if(!e||!s)throw new i("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var d=t(),f=s(c),b=r(f,"flags");return(!b||b.get!==d)&&a(f,"flags",{configurable:!0,enumerable:!1,get:d}),d},Js}var Zs,Il;function eS(){if(Il)return Zs;Il=1;var e=Yn(),t=Sd(),r=Td(),a=Id(),i=ZE(),s=t(a());return e(s,{getPolyfill:a,implementation:r,shim:i}),Zs=s,Zs}var eo,Al;function tS(){if(Al)return eo;Al=1;var e=Ro(),t=e("Date.prototype.getDay"),r=function(n){try{return t(n),!0}catch{return!1}},a=e("Object.prototype.toString"),i="[object Date]",s=_o()();return eo=function(n){return typeof n!="object"||n===null?!1:s?r(n):a(n)===i},eo}var to,_l;function rS(){if(_l)return to;_l=1;var e=ld(),t=GE(),r=YE(),a=QE(),i=eS(),s=tS(),c=Date.prototype.getTime;function n(I,v,h){var y=h||{};return(y.strict?r(I,v):I===v)?!0:!I||!v||typeof I!="object"&&typeof v!="object"?y.strict?r(I,v):I==v:b(I,v,y)}function d(I){return I==null}function f(I){return!(!I||typeof I!="object"||typeof I.length!="number"||typeof I.copy!="function"||typeof I.slice!="function"||I.length>0&&typeof I[0]!="number")}function b(I,v,h){var y,m;if(typeof I!=typeof v||d(I)||d(v)||I.prototype!==v.prototype||t(I)!==t(v))return!1;var E=a(I),u=a(v);if(E!==u)return!1;if(E||u)return I.source===v.source&&i(I)===i(v);if(s(I)&&s(v))return c.call(I)===c.call(v);var p=f(I),x=f(v);if(p!==x)return!1;if(p||x){if(I.length!==v.length)return!1;for(y=0;y<I.length;y++)if(I[y]!==v[y])return!1;return!0}if(typeof I!=typeof v)return!1;try{var w=e(I),B=e(v)}catch{return!1}if(w.length!==B.length)return!1;for(w.sort(),B.sort(),y=w.length-1;y>=0;y--)if(w[y]!=B[y])return!1;for(y=w.length-1;y>=0;y--)if(m=w[y],!n(I[m],v[m],h))return!1;return!0}return to=n,to}var nS=rS();const aS=Un(nS),iS="Request Version",Ar="RequestVersion",sS="rvr",oS=!1,cS=!1,Ad=["_id","type","created","modified","metaSortKey","description","parentId","name"],uS=e=>e.type===Ar;function lS(){return{compressedRequest:null}}function fS(e){return e}function _d(e){return F.findOne(Ar,{_id:e})}function dS(e){return F.find(Ar,{parentId:e})}async function pS(e){if(!ln(e)&&!Dr(e)&&!Rr(e)&&!Na(e))throw new Error(`New ${Ar} was not given a valid ${e.type} instance`);const t=e._id,r=await F.findOne("RequestVersion",{parentId:t},{modified:-1}),a=r?Ul(r.compressedRequest):null;if(yS(a,e)||!r){const s=eh(e);return F.docCreate(Ar,{parentId:t,compressedRequest:s})}return r}async function hS(e){const t=await _d(e);if(!t)return null;const r=Ul(t.compressedRequest);if(!r)return null;const a=await Gn(r._id);if(!a)return null;for(const i of Ad)i in r&&delete r[i];return Ev(a,r)}function yS(e,t){if(!e)return!0;for(const r of Object.keys(e))if(!Ad.find(a=>a===r)&&!aS(e[r],t[r]))return!0;return!1}function gS(){return F.find(Ar)}const vS=Object.freeze(Object.defineProperty({__proto__:null,all:gS,canDuplicate:oS,canSync:cS,create:pS,findByParentId:dS,getById:_d,init:lS,isRequestVersion:uS,migrate:fS,name:iS,prefix:sS,restore:hS,type:Ar},Symbol.toStringTag,{value:"Module"})),A2=e=>e.map(t=>JSON.stringify(t)+`
`).join(""),mS=e=>{if(e?.trim()==="")return[];if(e.startsWith("["))try{return JSON.parse(e)}catch{return[]}return e.split(`
`).filter(t=>t?.trim()).map(t=>{try{return JSON.parse(t)}catch{return}}).filter(t=>t!==void 0)},CS="Response",Vt="Response",ES="res",SS=!1,xS=!1,bS=e=>e.type===Vt;function TS(){return{statusCode:0,statusMessage:"",httpVersion:"",contentType:"",url:"",bytesRead:0,bytesContent:-1,elapsedTime:0,headers:[],timelinePath:"",bodyPath:"",bodyCompression:"__NEEDS_MIGRATION__",error:"",requestVersionId:null,settingStoreCookies:null,settingSendCookies:null,environmentId:"__LEGACY__",requestTestResults:[],globalEnvironmentId:null}}function IS(e){try{return LS(e)}catch(t){throw console.log("[db] Error during response migration",t),t}}function AS(e){return F.findOne(Vt,{_id:e})}function _S(e){return F.find(Vt,{parentId:e})}async function wS(){return F.find(Vt)}async function BS(e,t){const r=await Nt.get(),a={parentId:e};t!==void 0&&r.filterResponsesByEnv&&(a.environmentId=t);const i=await F.find(Vt,a);for(const s of i)re.promises.unlink(s.bodyPath),re.promises.unlink(s.timelinePath);await F.removeWhere(Vt,a)}function NS(e){return re.promises.unlink(e.bodyPath),re.promises.unlink(e.timelinePath),F.remove(e)}async function RS(e,t){const r=(await Nt.get()).filterResponsesByEnv;return await F.findOne(Vt,{parentId:e,...r?{environmentId:t}:{}},{modified:-1})}async function kS(e={},t=20){if(!e.parentId)throw console.log("[db] Attempted to create response without `parentId`",e),new Error("New Response missing `parentId`");const{parentId:r}=e,a=await Gn(r),i=a?await Kr.create(a):null;e.requestVersionId=i?i._id:null;const s=await Nt.get(),c="environmentId"in e&&s.filterResponsesByEnv,n={parentId:r,...c?{environmentId:e.environmentId}:{}},d=Math.max(1,t),b=(await F.find(Vt,n,{modified:-1},d)).map(I=>I._id);return await F.removeWhere(Vt,{...n,_id:{$nin:b}}),F.docCreate(Vt,e)}const DS=(e,t)=>{if(!e?.bodyPath)return null;try{re.statSync(e?.bodyPath)}catch(r){return console.warn("Failed to read response body",r.message),t===void 0?null:t}return e?.bodyCompression==="zip"?re.createReadStream(e?.bodyPath).pipe(_e.createGunzip()):re.createReadStream(e?.bodyPath)},PS=async e=>{const t="[main/curlBridgeAPI] failed to read response body message",r=await wd(e,t);if(r){if(typeof r=="string")return r===t?{body:"",error:t}:{body:"",error:`unknown error in loading response body: ${r}`}}else return{body:"",error:t};return{body:r.toString("utf8"),error:""}},wd=async(e,t)=>{if(!e?.bodyPath)return Buffer.alloc(0);try{const r=await re.promises.readFile(e?.bodyPath);return e?.bodyCompression==="zip"?new Promise((a,i)=>_e.gunzip(r,(s,c)=>s?i(s):a(c))):r}catch(r){return console.warn("Failed to read response body",r.message),t===void 0?Buffer.alloc(0):t}};function OS(e,t){const{timelinePath:r,bodyPath:a}=e;if(!r)return[];try{const s=re.readFileSync(r).toString(),c=mS(s),n=t?[{name:"DataOut",timestamp:Date.now(),value:re.readFileSync(a).toString()}]:[];return[...c,...n]}catch(i){return console.warn("Failed to read response body",i.message),[]}}function LS(e){return e.bodyCompression==="__NEEDS_MIGRATION__"&&(e.bodyCompression="zip"),e}const US=Object.freeze(Object.defineProperty({__proto__:null,all:wS,canDuplicate:SS,canSync:xS,create:kS,findByParentId:_S,getBodyBuffer:wd,getBodyStream:DS,getById:AS,getLatestForRequestId:RS,getTimeline:OS,init:TS,isResponse:bS,migrate:IS,name:CS,prefix:ES,readCurlResponse:PS,remove:NS,removeForRequest:BS,type:Vt},Symbol.toStringTag,{value:"Module"})),$S="Runner Test Result",Fr="RunnerTestResult",FS="rtr",MS=!1,VS=!1,KS=e=>e.type===Fr;function qS(){return{source:"runner",iterations:0,duration:0,avgRespTime:0,iterationResults:[],responsesInfo:[],version:"1"}}function jS(e){return e}function GS(e={}){if(!e.parentId)throw new Error("New RunnerTestResult missing `parentId` "+JSON.stringify(e));return F.docCreate(Fr,e)}function HS(e,t){return F.docUpdate(e,t)}function zS(e){return F.findOne(Fr,{parentId:e})}function WS(e){return F.findOne(Fr,{_id:e})}function YS(){return F.find(Fr)}function QS(e){return F.remove(e)}function XS(e){return F.find(Fr,{parentId:e})}const JS=Object.freeze(Object.defineProperty({__proto__:null,all:YS,canDuplicate:MS,canSync:VS,create:GS,findByParentId:XS,getById:WS,getByParentId:zS,init:qS,isRunnerTestResult:KS,migrate:jS,name:$S,prefix:FS,remove:QS,type:Fr,update:HS},Symbol.toStringTag,{value:"Module"})),Ce={backspace:{keyCode:8,code:"Backspace",label:"Backspace"},tab:{keyCode:9,code:"Tab",label:"Tab"},enter:{keyCode:13,code:"Enter",label:"Enter"},shift:{keyCode:16,code:"Shift",label:"Shift"},ctrl:{keyCode:17,code:"Control",label:"Ctrl"},alt:{keyCode:18,code:"Alt",label:"Alt"},pausebreak:{keyCode:19,code:"Pause",label:"PauseBreak"},capslock:{keyCode:20,code:"CapsLock",label:"CapsLock"},esc:{keyCode:27,code:"Escape",label:"Escape"},space:{keyCode:32,code:"Space",label:"Space"},pageup:{keyCode:33,code:"PageUp",label:"PageUp"},pagedown:{keyCode:34,code:"PageDown",label:"PageDown"},end:{keyCode:35,code:"End",label:"End"},home:{keyCode:36,code:"Home",label:"Home"},leftarrow:{keyCode:37,code:"ArrowLeft",label:"Left"},uparrow:{keyCode:38,code:"ArrowUp",label:"Up"},rightarrow:{keyCode:39,code:"ArrowRight",label:"Right"},downarrow:{keyCode:40,code:"ArrowDown",label:"Down"},insert:{keyCode:45,code:"Numpad0",label:"Insert"},delete:{keyCode:46,code:"Delete",label:"Delete"},num0:{keyCode:48,code:"Digit0",label:"0"},num1:{keyCode:49,code:"Digit1",label:"1"},num2:{keyCode:50,code:"Digit2",label:"2"},num3:{keyCode:51,code:"Digit3",label:"3"},num4:{keyCode:52,code:"Digit4",label:"4"},num5:{keyCode:53,code:"Digit5",label:"5"},num6:{keyCode:54,code:"Digit6",label:"6"},num7:{keyCode:55,code:"Digit7",label:"7"},num8:{keyCode:56,code:"Digit8",label:"8"},num9:{keyCode:57,code:"Digit9",label:"9"},a:{keyCode:65,code:"KeyA",label:"A"},b:{keyCode:66,code:"KeyB",label:"B"},c:{keyCode:67,code:"KeyC",label:"C"},d:{keyCode:68,code:"KeyD",label:"D"},e:{keyCode:69,code:"KeyE",label:"E"},f:{keyCode:70,code:"KeyF",label:"F"},g:{keyCode:71,code:"KeyG",label:"G"},h:{keyCode:72,code:"KeyH",label:"H"},i:{keyCode:73,code:"KeyI",label:"I"},j:{keyCode:74,code:"KeyJ",label:"J"},k:{keyCode:75,code:"KeyK",label:"K"},l:{keyCode:76,code:"KeyL",label:"L"},m:{keyCode:77,code:"KeyM",label:"M"},n:{keyCode:78,code:"KeyN",label:"N"},o:{keyCode:79,code:"KeyO",label:"O"},p:{keyCode:80,code:"KeyP",label:"P"},q:{keyCode:81,code:"KeyQ",label:"Q"},r:{keyCode:82,code:"KeyR",label:"R"},s:{keyCode:83,code:"KeyS",label:"S"},t:{keyCode:84,code:"KeyT",label:"T"},u:{keyCode:85,code:"KeyU",label:"U"},v:{keyCode:86,code:"KeyV",label:"V"},w:{keyCode:87,code:"KeyW",label:"W"},x:{keyCode:88,code:"KeyX",label:"X"},y:{keyCode:89,code:"KeyY",label:"Y"},z:{keyCode:90,code:"KeyZ",label:"Z"},leftwindowkey:{keyCode:91,code:"MetaLeft",label:"LeftWindow"},rightwindowkey:{keyCode:92,code:"MetaRight",label:"RightWindow"},selectkey:{keyCode:93,code:"ContextMenu",label:"Select"},numpad0:{keyCode:96,code:"Numpad0",label:"NumPad0"},numpad1:{keyCode:97,code:"Numpad1",label:"NumPad1"},numpad2:{keyCode:98,code:"Numpad2",label:"NumPad2"},numpad3:{keyCode:99,code:"Numpad3",label:"NumPad3"},numpad4:{keyCode:100,code:"Numpad4",label:"NumPad4"},numpad5:{keyCode:101,code:"Numpad5",label:"NumPad5"},numpad6:{keyCode:102,code:"Numpad6",label:"NumPad6"},numpad7:{keyCode:103,code:"Numpad7",label:"NumPad7"},numpad8:{keyCode:104,code:"Numpad8",label:"NumPad8"},numpad9:{keyCode:105,code:"Numpad9",label:"NumPad9"},multiply:{keyCode:106,code:"NumpadMultiply",label:"NumPad_Multiply"},add:{keyCode:107,code:"NumpadAdd",label:"NumPad_Add"},separator:{keyCode:108,code:"NumpadDecimal",label:"NumPad_Separator"},subtract:{keyCode:109,code:"NumpadSubtract",label:"NumPad_Subtract"},decimalpoint:{keyCode:110,code:"NumpadDecimal",label:"NumPad_Decimal"},divide:{keyCode:111,code:"NumpadDivide",label:"NumPad_Divide"},f1:{keyCode:112,code:"F1",label:"F1"},f2:{keyCode:113,code:"F2",label:"F2"},f3:{keyCode:114,code:"F3",label:"F3"},f4:{keyCode:115,code:"F4",label:"F4"},f5:{keyCode:116,code:"F5",label:"F5"},f6:{keyCode:117,code:"F6",label:"F6"},f7:{keyCode:118,code:"F7",label:"F7"},f8:{keyCode:119,code:"F8",label:"F8"},f9:{keyCode:120,code:"F9",label:"F9"},f10:{keyCode:121,code:"F10",label:"F10"},f11:{keyCode:122,code:"F11",label:"F11"},f12:{keyCode:123,code:"F12",label:"F12"},numlock:{keyCode:144,code:"NumLock",label:"NumLock"},scrolllock:{keyCode:145,code:"ScrollLock",label:"ScrollLock"},semicolon:{keyCode:186,code:"Semicolon",label:";"},equalsign:{keyCode:187,code:"Equal",label:"="},comma:{keyCode:188,code:"Comma",label:","},dash:{keyCode:189,code:"Minus",label:"-"},period:{keyCode:190,code:"Period",label:"."},forwardslash:{keyCode:191,code:"Slash",label:"/"},graveaccent:{keyCode:192,code:"IntlBackslash",label:"`"},openbracket:{keyCode:219,code:"BracketLeft",label:"["},backslash:{keyCode:220,code:"Backslash",label:"\\"},closebracket:{keyCode:221,code:"BracketRight",label:"]"},singlequote:{keyCode:222,code:"Quote",label:"'"}},_2={workspace_showSettings:`Show ${ha.document.singular} / ${ha.collection.singular} Settings`,request_showSettings:"Show Request Settings",preferences_showKeyboardShortcuts:"Show Keyboard Shortcuts",preferences_showGeneral:"Show App Preferences",request_quickSwitch:"Quick search",plugin_reload:"Reload Plugins",showAutocomplete:"Show Autocomplete",request_send:"Send Request",request_showOptions:"Send Request (Options)",environment_showEditor:"Show Environment Editor",environment_showSwitchMenu:"Switch Environments",request_toggleHttpMethodMenu:"Change HTTP Method",request_toggleHistory:"Show Request History",request_focusUrl:"Focus URL",request_showGenerateCodeEditor:"Generate Code",sidebar_focusFilter:"Filter Sidebar",sidebar_toggle:"Toggle Sidebar",response_focus:"Focus Response",showCookiesEditor:"Edit Cookies",request_createHTTP:"Create HTTP Request",request_showDelete:"Delete Request",request_showCreateFolder:"Create Folder",request_showDuplicate:"Duplicate Request",request_togglePin:"Pin/Unpin Request",environment_showVariableSourceAndValue:"Show variable source and value",beautifyRequestBody:"Beautify Active Code Editors",graphql_explorer_focus_filter:"Focus GraphQL Explorer Filter",close_tab:"Close Tab"},ZS={workspace_showSettings:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.comma.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.comma.keyCode}]},request_showSettings:{macKeys:[{alt:!0,shift:!0,meta:!0,keyCode:Ce.comma.keyCode}],winLinuxKeys:[{ctrl:!0,alt:!0,shift:!0,keyCode:Ce.comma.keyCode}]},preferences_showKeyboardShortcuts:{macKeys:[{ctrl:!0,shift:!0,meta:!0,keyCode:Ce.forwardslash.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.forwardslash.keyCode}]},preferences_showGeneral:{macKeys:[{meta:!0,keyCode:Ce.comma.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.comma.keyCode}]},request_quickSwitch:{macKeys:[{meta:!0,keyCode:Ce.p.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.p.keyCode}]},plugin_reload:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.r.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.r.keyCode}]},showAutocomplete:{macKeys:[{ctrl:!0,keyCode:Ce.space.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.space.keyCode}]},request_send:{macKeys:[{meta:!0,keyCode:Ce.enter.keyCode},{meta:!0,keyCode:Ce.r.keyCode},{keyCode:Ce.f5.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.enter.keyCode},{ctrl:!0,keyCode:Ce.r.keyCode},{keyCode:Ce.f5.keyCode}]},request_showOptions:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.enter.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.enter.keyCode}]},environment_showEditor:{macKeys:[{meta:!0,keyCode:Ce.e.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.e.keyCode}]},environment_showSwitchMenu:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.e.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.e.keyCode}]},request_toggleHttpMethodMenu:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.l.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.l.keyCode}]},request_toggleHistory:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.h.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.h.keyCode}]},request_focusUrl:{macKeys:[{meta:!0,keyCode:Ce.l.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.l.keyCode}]},request_showGenerateCodeEditor:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.g.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.g.keyCode}]},sidebar_focusFilter:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.f.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.f.keyCode}]},sidebar_toggle:{macKeys:[{meta:!0,keyCode:Ce.backslash.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.backslash.keyCode}]},response_focus:{macKeys:[{meta:!0,keyCode:Ce.singlequote.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.singlequote.keyCode}]},showCookiesEditor:{macKeys:[{meta:!0,keyCode:Ce.k.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.k.keyCode}]},request_createHTTP:{macKeys:[{meta:!0,keyCode:Ce.n.keyCode},{alt:!0,meta:!0,keyCode:Ce.n.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.n.keyCode},{ctrl:!0,alt:!0,keyCode:Ce.n.keyCode}]},request_showDelete:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.backspace.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.backspace.keyCode}]},request_showCreateFolder:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.n.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.n.keyCode}]},request_showDuplicate:{macKeys:[{meta:!0,keyCode:Ce.d.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.d.keyCode}]},request_togglePin:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.p.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.p.keyCode}]},environment_showVariableSourceAndValue:{macKeys:[{alt:!0,shift:!0,keyCode:Ce.u.keyCode}],winLinuxKeys:[{alt:!0,shift:!0,keyCode:Ce.u.keyCode}]},beautifyRequestBody:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.f.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.f.keyCode}]},graphql_explorer_focus_filter:{macKeys:[{shift:!0,meta:!0,keyCode:Ce.i.keyCode}],winLinuxKeys:[{ctrl:!0,shift:!0,keyCode:Ce.i.keyCode}]},close_tab:{macKeys:[{meta:!0,keyCode:Ce.w.keyCode}],winLinuxKeys:[{ctrl:!0,keyCode:Ce.w.keyCode}]}};function Bd(){return JSON.parse(JSON.stringify(ZS))}function w2(e){return $n()?e.macKeys:e.winLinuxKeys}function B2(e,t){return e.keyCode===t.keyCode&&!!e.alt==!!t.alt&&!!e.shift==!!t.shift&&!!e.ctrl==!!t.ctrl&&!!e.meta==!!t.meta}function ex(e){let t;const r=Object.keys(Ce).find(a=>Ce[a].keyCode===e);return r?t=Ce[r].label:console.error("Invalid key code",e),t||"unknown"}function tx(e,t){return!e&&$n()?t.join(" "):t.join(" + ")}function wl(e){return e===Ce.alt.keyCode||e===Ce.shift.keyCode||e===Ce.ctrl.keyCode||e===Ce.leftwindowkey.keyCode||e===Ce.rightwindowkey.keyCode||e===Ce.selectkey.keyCode}function N2(e,t){const{keyCode:r}=e,a=[],i=c=>{c.forEach(n=>{e[n]&&a.push(Op(n))})};$n()?i(["ctrl","alt","shift","meta"]):i(["meta","ctrl","alt","shift"]),r!=null&&!wl(r)&&a.push(ex(r));let s=tx(t,a);return t&&wl(r)&&(s+=" +"),s}const rx={V1_0:"V1_0",V1_1:"V1_1",V2PriorKnowledge:"V2PriorKnowledge",V2_0:"V2_0",default:"default"};var Nd=(e=>(e.stable="stable",e.beta="beta",e))(Nd||{}),nx={};const ax="Settings",Qn="Settings",ix="set",sx=!1,ox=!1,cx=e=>e.type===Qn,ux=!!nx.PLAYWRIGHT;function lx(){return{autoDetectColorScheme:!1,autoHideMenuBar:!1,autocompleteDelay:1200,clearOAuth2SessionOnRestart:!0,darkTheme:Rp(),deviceId:null,disableHtmlPreviewJs:!1,disableResponsePreviewLinks:!1,disableAppVersionUserAgent:!1,disableUpdateNotification:!1,editorFontSize:11,editorIndentSize:2,editorIndentWithTabs:!0,editorKeyMap:"default",enableKeyMapForInlineTextEditors:!1,editorLineWrapping:!0,enableAnalytics:!0,showVariableSourceAndValue:!1,filterResponsesByEnv:!1,followRedirects:!0,fontInterface:null,fontMonospace:null,fontSize:13,fontVariantLigatures:!1,forceVerticalLayout:ux,hotKeyRegistry:Bd(),httpProxy:"",httpsProxy:"",lightTheme:Np(),maxHistoryResponses:20,maxRedirects:10,maxTimelineDataSizeKB:10,pluginNodeExtraCerts:"",pluginsAllowElevatedAccess:!1,noProxy:"",nunjucksPowerUserMode:!1,pluginConfig:{},pluginPath:"",preferredHttpVersion:rx.default,proxyEnabled:!1,showPasswords:!1,theme:Bp(),timeout:3e4,updateAutomatically:!0,updateChannel:Nd.stable,useBulkHeaderEditor:!1,useBulkParametersEditor:!1,validateAuthSSL:!0,validateSSL:!0,saveVaultKeyLocally:!0,enableVaultInScripts:!1,saveVaultKeyToOSSecretManager:!0,vaultSecretCacheDuration:30,dataFolders:[]}}function fx(e){try{return e=vx(e),e}catch(t){throw console.log("[db] Error during settings migration",t),t}}async function dx(){let e=await F.find(Qn);return e?.length===0&&(e=[await La()]),e}async function px(){return await F.docCreate(Qn)}async function hx(e,t){return await F.docUpdate(e,t)}async function yx(e){const t=await La();return await F.docUpdate(t,e)}async function La(){const e=await F.findOne(Qn);return e||await px()}async function gx(){return La()}function vx(e){const t=Bd(),r=Object.keys(e.hotKeyRegistry).reduce((a,i)=>(i in t&&(a[i]=e.hotKeyRegistry[i]),a),{});return e.hotKeyRegistry={...t,...r},e}const mx=Object.freeze(Object.defineProperty({__proto__:null,all:dx,canDuplicate:sx,canSync:ox,get:gx,getOrCreate:La,init:lx,isSettings:cx,migrate:fx,name:ax,patch:yx,prefix:ix,type:Qn,update:hx},Symbol.toStringTag,{value:"Module"})),Rd="SocketIO Payload",pn="SocketIOPayload",kd="socket-io-payload",Cx=!0,Ex=!0,Sx=e=>e.type===pn,xx=e=>e?.startsWith(`${kd}_`),bx=()=>({args:[{id:Ta(),value:"",mode:Ol}],eventName:"",ack:!1}),Tx=e=>e,Po=(e={})=>{if(!e.parentId)throw new Error(`New SocketIOPayload missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(pn,e)},Ix=e=>F.remove(e),Dd=(e,t={})=>F.docUpdate(e,t);async function Ax(e,t={}){return!t.name&&e.name&&(t.name=`${e.name} (Copy)`),F.duplicate(e,{name:Rd,...t})}const _x=e=>F.findOne(pn,{_id:e}),Oo=e=>F.findOne(pn,{parentId:e});async function wx(e,t){const r=await Oo(e);if(r)return Dd(r,t);const a=Object.assign({parentId:e},t);return Po(a)}async function Bx(e){return await Oo(e)||Po({parentId:e})}const Nx=()=>F.find(pn),Rx=Object.freeze(Object.defineProperty({__proto__:null,all:Nx,canDuplicate:Cx,canSync:Ex,create:Po,duplicate:Ax,getById:_x,getByParentId:Oo,getOrCreateByParentId:Bx,init:bx,isSocketIOPayload:Sx,isSocketIOPayloadId:xx,migrate:Tx,name:Rd,prefix:kd,remove:Ix,type:pn,update:Dd,updateOrCreateByParentId:wx},Symbol.toStringTag,{value:"Module"})),kx="SocketIO Response",Kt="SocketIOResponse",Dx="socketIO-res",Px=!1,Ox=!1,Lx=e=>e.type===Kt;function Ux(){return{timelinePath:"",eventLogPath:"",requestVersionId:null,environmentId:null,elapsedTime:0,error:"",url:""}}function $x(e){return e}function Fx(e,t){return F.docUpdate(e,t)}function Mx(e){return F.findOne(Kt,{_id:e})}function Vx(e){return F.find(Kt,{parentId:e})}async function Kx(){return F.find(Kt)}async function qx(e,t){const r=await Nt.get(),a={parentId:e};t!==void 0&&r.filterResponsesByEnv&&(a.environmentId=t);const i=await F.find(Kt,a);for(const s of i)re.promises.unlink(s.eventLogPath),re.promises.unlink(s.timelinePath);await F.removeWhere(Kt,a)}function jx(e){return re.promises.unlink(e.eventLogPath),re.promises.unlink(e.timelinePath),F.remove(e)}async function Gx(e={},t=20){if(!e.parentId)throw new Error("New Response missing `parentId`");const{parentId:r}=e,a=await Gn(r),i=a?await Kr.create(a):null;e.requestVersionId=i?i._id:null;const s={parentId:r};(await Nt.get()).filterResponsesByEnv&&"environmentId"in e&&(s.environmentId=e.environmentId);const n=(await F.find(Kt,s,{modified:-1},Math.max(1,t))).map(d=>d._id);return await F.removeWhere(Kt,{...s,_id:{$nin:n}}),F.docCreate(Kt,e)}async function Hx(e,t){const r=(await Nt.get()).filterResponsesByEnv;return await F.findOne(Kt,{parentId:e,...r?{environmentId:t}:{}},{modified:-1})}const zx=Object.freeze(Object.defineProperty({__proto__:null,all:Kx,canDuplicate:Px,canSync:Ox,create:Gx,findByParentId:Vx,getById:Mx,getLatestForRequestId:Hx,init:Ux,isSocketIOResponse:Lx,migrate:$x,name:kx,prefix:Dx,remove:jx,removeForRequest:qx,type:Kt,update:Fx},Symbol.toStringTag,{value:"Module"})),Wx="Stats",Xn="Stats",Yx="sta",Qx=!1,Xx=!1,Jx=e=>e.type===Xn;function Zx(){return{currentLaunch:null,lastLaunch:null,currentVersion:null,lastVersion:null,launches:0,createdRequests:0,deletedRequests:0,executedRequests:0}}function eb(e){return e}function Pd(e={}){return F.docCreate(Xn,e)}async function Od(e){const t=await Lo();return F.docUpdate(t,e)}async function Lo(){const e=await F.findOne(Xn);return e||Pd()}function tb(){return F.find(Xn)||[]}async function hn({createdRequests:e,deletedRequests:t,executedRequests:r}){const a=await Lo();await Od({...e&&{createdRequests:a.createdRequests+e},...t&&{deletedRequests:a.deletedRequests+t},...r&&{executedRequests:a.executedRequests+r}})}async function rb(){await hn({createdRequests:1})}async function nb(){await hn({deletedRequests:1})}async function ab(){await hn({executedRequests:1})}async function ib(e){const r=(await F.getWithDescendants(e,[jt.type,Gt.type,Ht.type,zt.type])).filter(a=>ln(a)||an(a)||Dr(a))||Rr(e);await hn({createdRequests:r.length})}async function sb(e){const r=(await F.getWithDescendants(e,[jt.type,Gt.type,Ht.type,zt.type])).filter(a=>ln(a)||an(a)||Dr(a))||Rr(e);await hn({deletedRequests:r.length})}const ob=Object.freeze(Object.defineProperty({__proto__:null,all:tb,canDuplicate:Qx,canSync:Xx,create:Pd,get:Lo,incrementCreatedRequests:rb,incrementCreatedRequestsForDescendents:ib,incrementDeletedRequests:nb,incrementDeletedRequestsForDescendents:sb,incrementExecutedRequests:ab,incrementRequestStats:hn,init:Zx,isStats:Jx,migrate:eb,name:Wx,prefix:Yx,type:Xn,update:Od},Symbol.toStringTag,{value:"Module"})),cb="Unit Test",Jn="UnitTest",ub="ut",lb=!0,fb=!0,db=e=>e.type===Jn;function pb(){return{requestId:null,name:"My Test",code:"",metaSortKey:-1*Date.now()}}function hb(e){return e}function yb(e={}){if(!e.parentId)throw new Error("New UnitTest missing `parentId` "+JSON.stringify(e));return F.docCreate(Jn,e)}function gb(e){return F.remove(e)}function vb(e,t={}){return F.docUpdate(e,t)}function mb(e){return F.findOne(Jn,{parentId:e})}function Cb(){return F.find(Jn)}const Eb=Object.freeze(Object.defineProperty({__proto__:null,all:Cb,canDuplicate:lb,canSync:fb,create:yb,getByParentId:mb,init:pb,isUnitTest:db,migrate:hb,name:cb,prefix:ub,remove:gb,type:Jn,update:vb},Symbol.toStringTag,{value:"Module"})),Sb="Unit Test Result",yn="UnitTestResult",xb="utr",bb=!1,Tb=!1,Ib=e=>e.type===yn;function Ab(){return{results:null}}function _b(e){return e}function wb(e={}){if(!e.parentId)throw new Error("New UnitTestResult missing `parentId` "+JSON.stringify(e));return F.docCreate(yn,e)}function Bb(e,t){return F.docUpdate(e,t)}function Nb(e){return F.findOne(yn,{parentId:e})}function Rb(e){return F.findOne(yn,{_id:e})}function kb(){return F.find(yn)}const Db=Object.freeze(Object.defineProperty({__proto__:null,all:kb,canDuplicate:bb,canSync:Tb,create:wb,getById:Rb,getByParentId:Nb,init:Ab,isUnitTestResult:Ib,migrate:_b,name:Sb,prefix:xb,type:yn,update:Bb},Symbol.toStringTag,{value:"Module"})),Pb="Unit Test Suite",Mr="UnitTestSuite",Ob="uts",Lb=!0,Ub=!0,$b=e=>e.type===Mr;function Fb(){return{name:"My Test",metaSortKey:-1*Date.now()}}function Mb(e){return e}function Vb(e={}){if(!e.parentId)throw new Error("New UnitTestSuite missing `parentId` "+JSON.stringify(e));return F.docCreate(Mr,e)}function Kb(e,t={}){return F.docUpdate(e,t)}function qb(e){return F.remove(e)}function jb(e){return F.findOne(Mr,{parentId:e})}function Gb(e){return F.find(Mr,{parentId:e})}const Hb=e=>F.findOne(Mr,{_id:e});function zb(){return F.find(Mr)}const Wb=Object.freeze(Object.defineProperty({__proto__:null,all:zb,canDuplicate:Lb,canSync:Ub,create:Vb,findByParentId:Gb,getById:Hb,getByParentId:jb,init:Fb,isUnitTestSuite:$b,migrate:Mb,name:Pb,prefix:Ob,remove:qb,type:Mr,update:Kb},Symbol.toStringTag,{value:"Module"})),Yb="UserSession",Ua="UserSession",Qb="usr",Xb=!1,Jb=!1;function Zb(){return{accountId:"",id:"",email:"",firstName:"",lastName:"",symmetricKey:{},publicKey:{},encPrivateKey:{},vaultKey:"",vaultSalt:""}}function eT(e){return e}async function tT(){let e=await F.find(Ua);return e?.length===0&&(e=[await $a()]),e}async function rT(){return await F.docCreate(Ua)}async function nT(e,t){return await F.docUpdate(e,t)}async function aT(e){const t=await $a();return await F.docUpdate(t,e)}async function $a(){const e=await F.findOne(Ua);return e||await rT()}async function iT(){return $a()}const sT=Object.freeze(Object.defineProperty({__proto__:null,all:tT,canDuplicate:Xb,canSync:Jb,get:iT,getOrCreate:$a,init:Zb,migrate:eT,name:Yb,patch:aT,prefix:Qb,type:Ua,update:nT},Symbol.toStringTag,{value:"Module"})),Ld="WebSocket Payload",gn="WebSocketPayload",Ud="ws-payload",oT=!0,cT=!0,uT=e=>e.type===gn,lT=e=>e?.startsWith(`${Ud}_`),fT=()=>({name:"New Payload",value:"",mode:"application/json"}),dT=e=>e,pT=(e={})=>{if(!e.parentId)throw new Error(`New WebSocketPayload missing \`parentId\`: ${JSON.stringify(e)}`);return F.docCreate(gn,e)},hT=e=>F.remove(e),yT=(e,t={})=>F.docUpdate(e,t);async function gT(e,t={}){return!t.name&&e.name&&(t.name=`${e.name} (Copy)`),F.duplicate(e,{name:Ld,...t})}const vT=e=>F.findOne(gn,{_id:e}),mT=e=>F.findOne(gn,{parentId:e}),CT=()=>F.find(gn),ET=Object.freeze(Object.defineProperty({__proto__:null,all:CT,canDuplicate:oT,canSync:cT,create:pT,duplicate:gT,getById:vT,getByParentId:mT,init:fT,isWebSocketPayload:uT,isWebSocketPayloadId:lT,migrate:dT,name:Ld,prefix:Ud,remove:hT,type:gn,update:yT},Symbol.toStringTag,{value:"Module"})),ST="WebSocket Response",qt="WebSocketResponse",xT="ws-res",bT=!1,TT=!1,IT=e=>e.type===qt;function AT(){return{statusCode:0,statusMessage:"",httpVersion:"",contentType:"",url:"",elapsedTime:0,headers:[],timelinePath:"",eventLogPath:"",error:"",requestVersionId:null,settingStoreCookies:null,settingSendCookies:null,environmentId:null}}function _T(e){return e}function wT(e){return F.findOne(qt,{_id:e})}function BT(e){return F.find(qt,{parentId:e})}async function NT(){return F.find(qt)}async function RT(e,t){const r=await Nt.get(),a={parentId:e};t!==void 0&&r.filterResponsesByEnv&&(a.environmentId=t);const i=await F.find(qt,a);for(const s of i)re.promises.unlink(s.eventLogPath),re.promises.unlink(s.timelinePath);await F.removeWhere(qt,a)}function kT(e){return re.promises.unlink(e.eventLogPath),re.promises.unlink(e.timelinePath),F.remove(e)}async function DT(e={},t=20){if(!e.parentId)throw new Error("New Response missing `parentId`");const{parentId:r}=e,a=await Gn(r),i=a?await Kr.create(a):null;e.requestVersionId=i?i._id:null;const s={parentId:r};(await Nt.get()).filterResponsesByEnv&&"environmentId"in e&&(s.environmentId=e.environmentId);const c=Math.max(1,t),d=(await F.find(qt,s,{modified:-1},c)).map(f=>f._id);return await F.removeWhere(qt,{...s,_id:{$nin:d}}),F.docCreate(qt,e)}async function PT(e,t){const r=(await Nt.get()).filterResponsesByEnv;return await F.findOne(qt,{parentId:e,...r?{environmentId:t}:{}},{modified:-1})}const OT=Object.freeze(Object.defineProperty({__proto__:null,all:NT,canDuplicate:bT,canSync:TT,create:DT,findByParentId:BT,getById:wT,getLatestForRequestId:PT,init:AT,isWebSocketResponse:IT,migrate:_T,name:ST,prefix:xT,remove:kT,removeForRequest:RT,type:qt},Symbol.toStringTag,{value:"Module"})),LT="Workspace",Vr="Workspace",UT="wrk",$T=!0,FT=!0,Et={design:"design",collection:"collection",mockServer:"mock-server",environment:"environment",mcp:"mcp"},MT=e=>e.type===Vr,VT=e=>e.scope===Et.design,KT=e=>e.scope===Et.collection,qT=e=>e.scope===Et.mockServer,jT=e=>e.scope===Et.environment,GT=e=>e.scope===Et.mcp,HT=()=>({name:`New ${ha.collection.singular}`,description:"",scope:Et.collection});function zT(e){try{return e=tI(e),e=rI(e),e=nI(e),e}catch(t){throw console.log("[db] Error during workspace migration",t),t}}function WT(e){return F.findOne(Vr,{_id:e})}function YT(e){return F.find(Vr,{parentId:e})}async function QT(e={}){return $d(e.parentId),F.docCreate(Vr,e)}async function XT(){return await F.find(Vr)}function JT(e){return F.count(Vr,e?{scope:e}:{})}function ZT(e,t){return $d(t.parentId),F.docUpdate(e,t)}function eI(e){return F.remove(e)}function tI(e){const t=e.certificates||null;if(!Array.isArray(t))return e;for(const r of t)Fa.create({parentId:e._id,host:r.host||"",passphrase:r.passphrase||null,cert:r.cert||null,key:r.key||null,pfx:r.pfx||null,isPrivate:!1});return delete e.certificates,e}function rI(e){return typeof e.name!="string"&&(e.name="My Workspace"),e}function nI(e){return e.scope===Et.design||e.scope===Et.collection||e.scope===Et.mockServer||e.scope===Et.environment||e.scope===Et.mcp||(e.scope==="designer"||e.scope==="spec"?e.scope=Et.design:e.scope=Et.collection),e}function $d(e){if(e&&!jf(e))throw new Error("Expected the parent of a Workspace to be a Project")}const Fd="wrk_scratchpad";function aI(e){return e?._id===Fd}const iI=e=>{switch(e){case Et.collection:return"debug";case Et.design:return"spec";case Et.mockServer:return"mock-server";case Et.environment:return"environment";case Et.mcp:return"mcp";default:return"debug"}},sI=Object.freeze(Object.defineProperty({__proto__:null,SCRATCHPAD_WORKSPACE_ID:Fd,WorkspaceScopeKeys:Et,all:XT,canDuplicate:$T,canSync:FT,count:JT,create:QT,findByParentId:YT,getById:WT,init:HT,isCollection:KT,isDesign:VT,isEnvironment:jT,isMcp:GT,isMockServer:qT,isScratchpad:aI,isWorkspace:MT,migrate:zT,name:LT,prefix:UT,remove:eI,scopeToActivity:iI,type:Vr,update:ZT},Symbol.toStringTag,{value:"Module"})),oI="Workspace Meta",vn="WorkspaceMeta",cI="wrkm",uI=!1,lI=!1,fI=e=>e.type===vn;function dI(){return{activeActivity:null,activeEnvironmentId:null,activeGlobalEnvironmentId:null,activeRequestId:null,activeUnitTestSuiteId:null,gitRepositoryId:null,gitFilePath:null,parentId:null,pushSnapshotOnInitialize:!1,hasUncommittedChanges:!1,hasUnpushedChanges:!1}}function pI(e){return e}function Md(e={}){if(!e.parentId)throw new Error(`New WorkspaceMeta missing parentId ${JSON.stringify(e)}`);return F.docCreate(vn,e)}function hI(e,t={}){return F.docUpdate(e,t)}async function yI(e,t={}){const r=await Uo(e);return r&&F.docUpdate(r,t)}async function Uo(e){return F.findOne(vn,{parentId:e})}async function gI(e){return F.findOne(vn,{gitRepositoryId:e})}async function vI(e){return await Uo(e)||Md({parentId:e})}function mI(){return F.find(vn)}const CI=Object.freeze(Object.defineProperty({__proto__:null,all:mI,canDuplicate:uI,canSync:lI,create:Md,getByGitRepositoryId:gI,getByParentId:Uo,getOrCreateByParentId:vI,init:dI,isWorkspaceMeta:fI,migrate:pI,name:oI,prefix:cI,type:vn,update:hI,updateByParentId:yI},Symbol.toStringTag,{value:"Module"})),Vd="org_scratchpad",EI=e=>e===Vd,Kd=e=>e.metadata.organizationType==="personal",qd=({organization:e,accountId:t})=>e.metadata.ownerAccountId===t,SI=(e,t)=>e.filter(Kd).find(r=>qd({organization:r,accountId:t})),xI=e=>{switch(e){case"free":return"Essentials";case"individual":return"Individual";case"team":return"Pro";case"enterprise":return"Enterprise";case"enterprise-member":return"Enterprise";default:return"Free"}},bI=Object.freeze(Object.defineProperty({__proto__:null,SCRATCHPAD_ORGANIZATION_ID:Vd,findPersonalOrganization:SI,formatCurrentPlanType:xI,isOwnerOfOrganization:qd,isPersonalOrganization:Kd,isScratchpadOrganizationId:EI},Symbol.toStringTag,{value:"Module"})),Qr=I0,Fa=Z0,$o=F0,Ma=Ay,br=s0,jd=My,Fo=eg,va=dm,Mo=Yv,ma=Im,Gd=Um,jt=VC,kn=nE,Vo=yE,Dn=AE,Kr=vS,Ca=JS,Ko=US,Nt=mx,Va=r1,Hd=ob,Ea=Eb,Sa=Wb,xa=Db,ba=R1,Pn=g1,Gt=pg,qo=Tg,jo=ET,Ht=Cv,zt=sv,Go=Rx,Ho=zx,zo=OT,hr=sI,Wo=CI,zd=sT,Wd=hy,_r=Lg,Yo=Pv,Qo=Qg;function Ka(){return[Hd,Nt,Va,hr,Wo,br,jd,Fo,Ma,Qr,kn,Vo,jt,Kr,Dn,Ko,va,Mo,ma,$o,Fa,Gd,Sa,xa,Ea,ba,Pn,Gt,qo,Ca,jo,Ht,zo,zd,zt,Go,Ho,Wd,_r,Yo,Qo]}function Yd(){return Ka().map(e=>e.type)}const TI=e=>Yd().includes(e);function II(e){if(e.isPrivate)return!1;const t=Zn(e.type);return t&&t.canSync||!1}function Zn(e){return Ka().find(t=>t.type===e)||null}function Qd(e){const t=Zn(e);if(!t)throw new Error(`The model type ${e} must exist but could not be found.`);return t}function Xd(e){const t=Zn(e);return t?t.canDuplicate:!1}async function Sr(e,...t){const r=Zn(e);if(!r){const n=Ka().map(d=>d.type).join(", ");throw new Error(`Tried to init invalid model "${e}". Choices are ${n}`)}const a=Object.assign({},{_id:null,type:e,parentId:null,modified:Date.now(),created:Date.now()},r.init()),i=Object.assign({},a,...t);i._id||(i._id=Xr(r.prefix));const s=r.migrate(i),c="optionalKeys"in r?r.optionalKeys||[]:[];for(const n of rh(s))!(n in a)&&!c.includes(n)&&delete s[n];return s}const Xo=()=>({[Va.type]:[hr.type],[hr.type]:[kn.type,jt.type,Gt.type,Ht.type,zt.type,Ma.type,br.type,Qr.type,va.type,Sa.type,Pn.type,ba.type,Wo.type,Ca.type,$o.type,Fa.type,_r.type],[kn.type]:[kn.type,jt.type,Gt.type,Ht.type,zt.type,Ca.type,Vo.type,ma.type],[jt.type]:[Dn.type,Ko.type,Kr.type,ma.type],[Gt.type]:[qo.type],[Ht.type]:[jo.type,zo.type,Dn.type],[zt.type]:[Go.type,Ho.type,Dn.type],[_r.type]:[Qo.type,Yo.type],[va.type]:[Mo.type],[br.type]:[br.type],[Sa.type]:[Ea.type,xa.type],[Ea.type]:[xa.type],[Pn.type]:[Pn.type,ba.type]});let ro;const AI=()=>{if(ro)return ro;const e={};for(const[t,r]of Object.entries(Xo()))for(const a of r)e[a]||(e[a]=[]),e[a].push(t);return ro=e,e},Jd=e=>{const t={},r=new Set,a=i=>{if(!i||r.has(i))return;r.add(i);const c=AI()[i];if(c?.length)for(const n of c)t[n]||(t[n]=[]),t[n].push(i),a(n)};for(const i of e)a(i);return t},R2=Object.freeze(Object.defineProperty({__proto__:null,all:Ka,apiSpec:Qr,caCertificate:$o,canDuplicate:Xd,canSync:II,clientCertificate:Fa,cloudCredential:Wd,cookieJar:Ma,environment:br,generateDescendantMap:Jd,getAllDescendantMap:Xo,getModel:Zn,gitCredentials:jd,gitRepository:Fo,grpcRequest:Gt,grpcRequestMeta:qo,initModel:Sr,isValidType:TI,mcpPayload:Qo,mcpRequest:_r,mcpResponse:Yo,mockRoute:Mo,mockServer:va,mustGetModel:Qd,oAuth2Token:ma,organization:bI,pluginData:Gd,project:Va,protoDirectory:Pn,protoFile:ba,request:jt,requestGroup:kn,requestGroupMeta:Vo,requestMeta:Dn,requestVersion:Kr,response:Ko,runnerTestResult:Ca,settings:Nt,socketIOPayload:Go,socketIORequest:zt,socketIOResponse:Ho,stats:Hd,types:Yd,unitTest:Ea,unitTestResult:xa,unitTestSuite:Sa,userSession:zd,webSocketPayload:jo,webSocketRequest:Ht,webSocketResponse:zo,workspace:hr,workspaceMeta:Wo},Symbol.toStringTag,{value:"Module"}));export{Vh as $,yA as A,Mo as B,Sa as C,iA as D,Mf as E,MA as F,_r as G,sA as H,bA as I,ga as J,Qr as K,GI as L,VT as M,EI as N,qd as O,Ap as P,Kd as Q,th as R,Fd as S,qf as T,QI as U,t1 as V,gA as W,vA as X,a2 as Y,Fh as Z,lr as _,Fo as a,NI as a$,Gh as a0,Sh as a1,fA as a2,Xp as a3,ao as a4,Yh as a5,Wh as a6,FA as a7,Ta as a8,u2 as a9,HC as aA,aI as aB,GT as aC,OI as aD,Ka as aE,kn as aF,Ht as aG,zt as aH,Gt as aI,zh as aJ,Ea as aK,br as aL,Ma as aM,Dr as aN,an as aO,Rr as aP,Xh as aQ,db as aR,$b as aS,v0 as aT,MT as aU,my as aV,Mv as aW,Zn as aX,wp as aY,Dp as aZ,UI as a_,QA as aa,re as ab,l2 as ac,Hd as ad,S2 as ae,wd as af,Te as ag,AA as ah,kA as ai,RA as aj,Yp as ak,_A as al,wA as am,IA as an,dC as ao,Ut as ap,qA as aq,LA as ar,bp as as,Ll as at,na as au,DI as av,kI as aw,io as ax,jt as ay,ln as az,F as b,On as b$,RI as b0,_p as b1,PI as b2,x2 as b3,Ee as b4,Hp as b5,Ol as b6,Gp as b7,pp as b8,Bl as b9,Cd as bA,hd as bB,_o as bC,VE as bD,GE as bE,QE as bF,md as bG,dn as bH,eS as bI,YE as bJ,tS as bK,j0 as bL,xA as bM,PS as bN,Fa as bO,$o as bP,A2 as bQ,b2 as bR,SC as bS,NA as bT,LI as bU,VA as bV,nb as bW,uA as bX,lA as bY,kf as bZ,Bf as b_,yp as ba,BI as bb,Ia as bc,Ko as bd,ma as be,lo as bf,hC as bg,id as bh,Km as bi,zI as bj,HI as bk,$A as bl,Ef as bm,rE as bn,Sr as bo,fr as bp,I2 as bq,BA as br,ld as bs,fd as bt,Ro as bu,dd as bv,Yn as bw,Sd as bx,Ed as by,fn as bz,Wd as c,o2 as c$,wg as c0,TA as c1,IT as c2,Lx as c3,Iv as c4,Kr as c5,Ul as c6,qp as c7,oA as c8,mA as c9,jA as cA,So as cB,Ao as cC,hA as cD,Vo as cE,cE as cF,YI as cG,Gn as cH,qo as cI,R2 as cJ,Go as cK,Na as cL,Qo as cM,zo as cN,Ho as cO,Yo as cP,Ev as cQ,zm as cR,Qm as cS,d2 as cT,EE as cU,Up as cV,zp as cW,Wp as cX,no as cY,sd as cZ,DA as c_,Pl as ca,jp as cb,Dn as cc,mS as cd,ba as ce,Pn as cf,s1 as cg,S1 as ch,uC as ci,Be as cj,c2 as ck,Qp as cl,Jp as cm,AC as cn,_C as co,TC as cp,T2 as cq,rd as cr,bS as cs,CA as ct,EA as cu,jo as cv,dA as cw,pA as cx,Co as cy,IC as cz,Uh as d,r2 as d$,f2 as d0,Dl as d1,cA as d2,Ca as d3,GA as d4,HA as d5,xa as d6,Qh as d7,i2 as d8,$1 as d9,E2 as dA,p2 as dB,O1 as dC,Hf as dD,St as dE,Bp as dF,II as dG,w2 as dH,UA as dI,qI as dJ,Jm as dK,vI as dL,N2 as dM,$n as dN,XA as dO,ff as dP,pf as dQ,df as dR,iy as dS,tn as dT,Yd as dU,PA as dV,Nl as dW,_e as dX,ha as dY,t2 as dZ,e2 as d_,y2 as da,Yi as db,Zf as dc,v2 as dd,To as de,M1 as df,Yf as dg,oC as dh,k1 as di,co as dj,D1 as dk,xr as dl,m2 as dm,g2 as dn,cC as dp,ed as dq,q1 as dr,ae as ds,j1 as dt,U1 as du,zf as dv,h2 as dw,oo as dx,lC as dy,C2 as dz,Va as e,JA as e0,ZA as e1,Kf as e2,Ce as e3,JI as e4,wl as e5,B2 as e6,Bd as e7,_2 as e8,Rl as e9,Pp as eA,rx as eB,Nd as eC,ZI as eD,jI as eE,eA as eF,aS as ea,SA as eb,KI as ec,VI as ed,KA as ee,Lp as ef,_n as eg,KT as eh,jT as ei,Zm as ej,qT as ek,Mp as el,Vp as em,Et as en,MI as eo,XI as ep,zA as eq,WA as er,xI as es,YA as et,s2 as eu,$I as ev,rA as ew,tA as ex,aA as ey,nA as ez,SI as f,jd as g,Ff as h,Zy as i,Vd as j,hr as k,iI as l,WI as m,Xr as n,FI as o,Gd as p,n2 as q,ya as r,Nt as s,sf as t,zd as u,af as v,Wo as w,OA as x,Hh as y,va as z};
//# sourceMappingURL=index-BnTlsbFl.js.map
