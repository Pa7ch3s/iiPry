import{h as i}from"./chunk-WY5IRSCW-1dc6FieG.js";import{e as p}from"./index-BnTlsbFl.js";import{V as m,bX as d}from"./trial.start-yrr1pYcE.js";import{i as c}from"./invariant-DVddvGrP.js";import{c as h}from"./router-BoVIwh1i.js";async function y({request:o,params:a}){const{projectId:n,workspaceId:s}=a,t=await o.json();c(typeof t.message=="string","Message is required");const r=m();try{if(await r.takeSnapshot(t.message),t.push){const e=await p.getById(n);c(e,"Project not found"),c(e.remoteId,"Project is not remote"),await r.push({teamId:e.parentId,teamProjectId:e.remoteId})}delete d[s]}catch(e){return{error:e instanceof Error?e.message:"Unknown error while creating snapshot."}}return null}const S=h(o=>({message:a,push:n,organizationId:s,projectId:t,workspaceId:r})=>o(JSON.stringify({message:a,push:n}),{method:"POST",action:i("/organization/:organizationId/project/:projectId/workspace/:workspaceId/insomnia-sync/create-snapshot",{organizationId:s,projectId:t,workspaceId:r}),encType:"application/json"}));export{y as c,S as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.create-snapshot-DMfKO0YH.js.map
