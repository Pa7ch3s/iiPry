import{h as p}from"./chunk-WY5IRSCW-1dc6FieG.js";import{r as w}from"./chunk-OIYGIGL5-BYynBxW5.js";import{e as I,k as m,z as f,B as g,cG as v,aL as S,aF as h,cE as _,ay as b}from"./index-BnTlsbFl.js";import{S as j}from"./analytics-fpOjxorv.js";import{i}from"./invariant-DVddvGrP.js";import{c as q}from"./router-BoVIwh1i.js";async function F({params:r}){const{organizationId:n,projectId:e,workspaceId:t}=r,c=await I.getById(e);i(c,"Project not found");const k=await m.getById(t);i(k,"Workspace not found");const a=await f.getByParentId(t);i(a,"Mock Server not found");const u=await g.findByParentId(a._id),s=await m.create({name:`${a.name} Collection`,parentId:e,scope:"collection"}),l=v(a,"").replace(/\/$/,"");await S.create({name:"Base Environment",parentId:s._id,data:{mockbin_base_url:l}});const d=await h.create({name:"Mock Server Requests",parentId:s._id});await _.create({parentId:d._id,collapsed:!1});for(const o of u)await b.create({name:`${o.name}`,url:"{{ mockbin_base_url }}"+o.name,method:o.method.toUpperCase(),parentId:d._id,description:`Generated from mock route: ${o.name}`,headers:[{name:"insomnia-mock-method",value:o.method,disabled:!1}]});return window.main.trackSegmentEvent({event:j.generateCollectionFromMock}),w(p("/organization/:organizationId/project/:projectId/workspace/:workspaceId/debug",{organizationId:n,projectId:e,workspaceId:s._id}))}const G=q(r=>({organizationId:n,projectId:e,workspaceId:t})=>{const c=p("/organization/:organizationId/project/:projectId/workspace/:workspaceId/mock-server/generate-request-collection",{organizationId:n,projectId:e,workspaceId:t});return r({},{action:c,method:"POST"})});export{F as c,G as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.mock-server.generate-request-collection-DcBFb32H.js.map
