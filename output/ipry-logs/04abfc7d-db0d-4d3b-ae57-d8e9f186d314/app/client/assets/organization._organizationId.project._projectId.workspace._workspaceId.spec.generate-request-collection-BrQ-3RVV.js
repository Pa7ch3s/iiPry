import{e as l,K as k,k as h,w as j,J as y,ag as P}from"./index-BnTlsbFl.js";import{h as d}from"./chunk-WY5IRSCW-1dc6FieG.js";import{r as S}from"./chunk-OIYGIGL5-BYynBxW5.js";import{G as R,J as z}from"./import-DfaWnrdO.js";import{i}from"./invariant-DVddvGrP.js";import{c as $}from"./router-BoVIwh1i.js";async function E({params:a}){const{organizationId:n,projectId:e,workspaceId:t}=a,o=await l.getById(e);i(o,"Project not found");const r=await k.getByParentId(t);i(r,"No API Specification was found");const w=await h.getById(t);i(w,"Workspace not found");const u=await j.getOrCreateByParentId(t),g=f=>f.severity===0,c=y(o)?o.gitRepositoryId:u?.gitRepositoryId,m=c?P.join(window.app.getPath("userData"),`version-control/git/${c}/other/.spectral.yaml`):"",{diagnostics:I,error:s}=await window.main.lintSpec({documentContent:r.contents,rulesetPath:m});if(s)throw s;const p=I?.filter(g);if(r.contents&&p&&p.length)throw new Error("Error Generating Configuration");return await R([{contentStr:r.contents}]),await z({workspaceId:t}),S(d("/organization/:organizationId/project/:projectId/workspace/:workspaceId/debug",{organizationId:n,projectId:e,workspaceId:t}))}const M=$(a=>({organizationId:n,projectId:e,workspaceId:t})=>{const o=d("/organization/:organizationId/project/:projectId/workspace/:workspaceId/spec/generate-request-collection",{organizationId:n,projectId:e,workspaceId:t});return a({},{action:o,method:"POST"})});export{E as c,M as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.spec.generate-request-collection-BrQ-3RVV.js.map
