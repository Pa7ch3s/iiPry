import{w as D,a as T,b as A,c as O,N as C,R as w,d}from"./chunk-OIYGIGL5-BYynBxW5.js";import{j as e}from"./jsx-runtime-cpqHEc2t.js";import{r as a}from"./index-b8gibUUP.js";import{u as B,$ as W,a as y,W as H,b as G}from"./use-insomnia-tab-DPK2smQu.js";import{$}from"./Button-Pc6dXscm.js";import{h as V,u as F,b as q,I as K,c as U,d as Q,i as Z,O as J,M as X,E as R,S as N,j as Y,A as ee}from"./trial.start-yrr1pYcE.js";import{$ as oe,a as te,b as re,c as ie,s as ae}from"./index-CiWR7xsz.js";import{P as S,a as u,b as I}from"./error-boundary-qQv-jeYH.js";import{k as se,z as ne,B as ce,D as M}from"./index-BnTlsbFl.js";import{u as le}from"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route._mockRouteId.delete-CBIZWYJb.js";import{I as f}from"./icon-pbM3MSP9.js";import{M as me}from"./mock-route-modal-BnQ-7tzU.js";import{i as E}from"./invariant-DVddvGrP.js";import"./_commonjsHelpers-CE1G-McA.js";import"./utils-BWA8Q1_N.js";import"./index-BBURUpBQ.js";import"./Heading-CJLhoRaQ.js";import"./RSPContexts-DCUrjzvU.js";import"./chunk-WY5IRSCW-1dc6FieG.js";import"./organization._organizationId.project._projectId.workspace.update-BTK7AG3H.js";import"./analytics-fpOjxorv.js";import"./router-BoVIwh1i.js";import"./index-wZAP8gf2.js";import"./import-DfaWnrdO.js";import"./sax-DTOkft0z.js";import"./format-i_2FlR3N.js";import"./event-bus-gjQB7sSy.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.generate-request-collection-DcBFb32H.js";import"./git.branch.checkout-24mct9lT.js";import"./git.fetch-V7uv_IT7.js";import"./git.push-C-wcZJjF.js";import"./git.repo-BBQti4ki.js";import"./git.reset-DI5KZlh1.js";import"./git.status-qLD8fOhB.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-CJN0pku1.js";import"./Text-CNZDhubC.js";import"./VisuallyHidden-DFfuR22R.js";import"./Form-xjwDMhyX.js";import"./index-B0jEcytd.js";import"./useControlledState-CVI9bVg4.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId-CCT5t53Y.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-meta-CRlGCFc9.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-payload-DHsO7wRp.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request-group._requestGroupId.update-BcedaLUm.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request-group._requestGroupId.update-meta-szcm3PeP.js";import"./settings.update-BK5WtJcK.js";import"./git.branch.delete-BnBpM4jO.js";import"./git.branch.new-BvBAmjXB.js";import"./git.branches-DSfOBTH4.js";import"./git.changes-CufBSoA0.js";import"./git.log-VScJjeAs.js";import"./git.update-Ct4Hysyl.js";import"./tooltip-BiEx1s0w.js";import"./PortalProvider-CgpNn0eI.js";import"./git.commit-BOTBEKdr.js";import"./git.diff-rvyD93UG.js";import"./git.stage-WRvQ9YR0.js";import"./git.unstage-BG9AvbEd.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.branch.checkout-BFdhyIzf.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.pull-BJpkfRkS.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.push-CfM5amSb.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.rollback-DbuDWqiP.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.branch.create-BD-JEB_S.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.branch.delete-Ck9dZ7bb.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.branch.merge-C_Hlo7i6.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.fetch-DiAT7xDA.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.restore-DzaYuRyT.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.create-snapshot-DMfKO0YH.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.stage-DakA5DCx.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.unstage-fOL91F5Y.js";import"./ai.generate-commit-messages-D7XzOLO8.js";import"./index-DkUPaXby.js";import"./insomnia-fetch-B_XbrnGh.js";import"./organization._organizationId.project.new-D3C_sj1w.js";import"./migrate-projects-into-organization-CxpdXy_W.js";import"./lodash-CnYLY2KZ.js";import"./auth.authorize-CVUDGUam.js";import"./auth-session-provider.client-B6EymBM1.js";import"./session-Dp07jz9w.js";import"./vault-key.client-BYwC5SBL.js";import"./auth.default-browser-redirect-Dz15uuKH.js";import"./auth.logout-Bgkq1Ur9.js";import"./cloud-credentials.create-D29FOB74.js";import"./git-credentials.github.complete-sign-in-QUucA-_J.js";import"./git-credentials.gitlab.complete-sign-in-iSdK124j.js";import"./import.scan-CIM-8ira.js";import"./trial.check-st6_Q4W5.js";import"./untracked-projects-Dxl3yYQQ.js";import"./commands-CpETkOnR.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request.new-mock-send-DTyjZaRX.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route._mockRouteId.update-L_Ehr73N.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request-group._requestGroupId-ClXMvU4m.js";import"./index-9z9WB_nm.js";import"./xpath-V_VlYgIe.js";import"./index-BKSSlv8C.js";import"./index-BMm92w-c.js";import"./git.migrate-legacy-insomnia-folder-to-file-Cn4qXbei.js";import"./git.commits-C721-25t.js";import"./git.discard-yWCe4llX.js";import"./organization._organizationId.permissions-ce3pUO4N.js";import"./git.remote-branches-D25XWswd.js";import"./git-credentials.github-eh2MnRiC.js";import"./git-credentials.github.init-sign-in-MvedveJK.js";import"./git-credentials.github.sign-out-HzzMex4W.js";import"./git-credentials.gitlab-C9jV75uM.js";import"./git-credentials.gitlab.init-sign-in-DZFf8KTH.js";import"./git-credentials.gitlab.sign-out-DlPqV6dO.js";import"./organization._organizationId.project._projectId.delete-Zh6QxqDG.js";import"./git.init-clone-Bwgsynf-.js";import"./organization._organizationId.project._projectId.update-CnIPYBnW.js";import"./insomnia-icon-DsDa0lSD.js";import"./organization._organizationId.project._projectId.move-CGW0jVUY.js";import"./organization._organizationId.project._projectId.move-workspace-CWMxcFOA.js";import"./git.repository-tree-jzi-oT2U.js";import"./git.clone-Dz6ZsdrO.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request.new-DZNrbQ0p.js";import"./auth.clear-vault-key-B0vAvdAY.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.environment.set-active-DQD_GOKm.js";import"./remote-files-QiiU5lTV.js";import"./organization._organizationId.collaborators-BP2ctKnQ.js";import"./organization._organizationId.collaborators.invites._invitationId-hJMODP0K.js";import"./organization._organizationId.collaborators.invites._invitationId.reinvite-i6_4wOiO.js";import"./organization._organizationId.collaborators-check-seats-DsqfBJzh.js";import"./organization._organizationId.members._userId.roles-D3CH43Zf.js";import"./organization._organizationId.collaborators-search-DSW9uxb9.js";import"./resource.usage-CbBoS-Ts.js";import"./organization._organizationId.project._projectId-CtDmbbW4.js";import"./cloud-credentials._cloudCredentialId.delete-CHPMwoBx.js";import"./cloud-credentials._cloudCredentialId.update-RaJlpXVy.js";import"./auth.create-vault-key-B-0jQzTT.js";import"./auth.update-vault-salt-BBWvZ0Tc.js";import"./auth.reset-vault-key-YbpkP1rp.js";import"./auth.validate-vault-key-UWRH3JbX.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route.new-C3GYuFkd.js";async function Ct({params:c}){const{workspaceId:s}=c,l=await se.getById(s);E(l,"Workspace not found");const i=await ne.getByParentId(s);E(i,"Mock Server not found");const m=await ce.findByParentId(i._id);return{mockServerId:i._id,mockRoutes:m}}const pe=()=>{const{organizationId:c,projectId:s,workspaceId:l,mockRouteId:i}=T(),{settings:m}=V(),{mockServerId:j,mockRoutes:x}=A(),{activeProject:P,activeWorkspace:_}=F(),L=le(),z=O(),v=[{id:"edit-route",name:"Edit",icon:"edit",action:o=>{const t=x.find(n=>n._id===o);p({isOpen:!0,title:"Edit Mock Route",defaultPath:t?.name,defaultMethod:t?.method,mode:"edit",mockRouteId:o,mockServerId:j})}},{id:"delete-route",name:"Delete",icon:"trash",action:(o,t)=>{ae(ee,{title:"Delete Mock Route",message:`Do you really want to delete "${t}"?`,yesText:"Delete",noText:"Cancel",onDone:async n=>{n&&L.submit({organizationId:c,projectId:s,workspaceId:l,mockRouteId:o,isSelected:i===o})}})}}],h=a.useRef(null);function k(){const o=h.current?.getLayout();o&&(o&&o[0]>0?o[0]=0:o[0]=M,h.current?.setLayout(o))}a.useEffect(()=>window.main.on("toggle-sidebar",k),[]),q({sidebar_toggle:k});const[g,b]=a.useState(m.forceVerticalLayout?"vertical":"horizontal"),[r,p]=a.useState(null);return a.useLayoutEffect(()=>{if(m.forceVerticalLayout)return b("vertical"),()=>{};const o=window.matchMedia("(max-width: 880px)");b(o.matches?"vertical":"horizontal");const t=n=>{b(n.matches?"vertical":"horizontal")};return o.addEventListener("change",t),()=>{o.removeEventListener("change",t)}},[m.forceVerticalLayout,g]),B({organizationId:c,projectId:s,workspaceId:l,activeWorkspace:_,activeProject:P,activeMockRoute:x.find(o=>o._id===i)}),a.useEffect(()=>{p(null)},[i]),e.jsxs(S,{ref:h,autoSaveId:"insomnia-sidebar",id:"wrapper",className:"new-sidebar h-full w-full text-[--color-font]",direction:"horizontal",children:[e.jsx(u,{id:"sidebar",className:"sidebar theme--sidebar",defaultSize:M,maxSize:40,minSize:10,collapsible:!0,children:e.jsxs("div",{className:"flex flex-1 flex-col divide-y divide-solid divide-[--hl-md] overflow-hidden",children:[e.jsx("div",{className:`flex items-center gap-2 h-[${K}px] px-[--padding-sm]`,children:e.jsxs(W,{className:"m-0 flex w-full list-none items-center gap-2 p-0 font-bold",children:[e.jsxs(y,{className:"flex h-full select-none items-center gap-2 text-[--color-font] outline-none data-[focused]:outline-none",children:[e.jsx(C,{"data-testid":"project",className:"flex aspect-square h-7 flex-shrink-0 items-center justify-center gap-2 rounded-sm px-1 py-1 text-sm text-[--color-font] outline-none ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] data-[focused]:outline-none",to:`/organization/${c}/project/${s}`,children:e.jsx(f,{className:"text-xs",icon:"chevron-left"})}),e.jsx("span",{"aria-hidden":!0,role:"separator",className:"h-4 text-[--hl-lg] outline outline-1"})]}),e.jsx(y,{className:"flex h-full select-none items-center gap-2 truncate text-[--color-font] outline-none data-[focused]:outline-none",children:e.jsx(H,{})})]})}),e.jsx("div",{className:"p-[--padding-sm]",children:e.jsxs($,{className:"flex items-center justify-center gap-2 rounded-sm px-4 py-1 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",onPress:()=>{p({isOpen:!0,title:"New Mock Route",defaultPath:"/",defaultMethod:"GET",mode:"create",mockServerId:j})},children:[e.jsx(f,{icon:"plus"}),"New Mock Route"]})}),e.jsx(U,{"aria-label":"Mock Routes",items:x.map(o=>({id:o._id,key:o._id,...o})),className:"flex-1 overflow-y-auto py-[--padding-sm] data-[empty]:py-0",disallowEmptySelection:!0,selectedKeys:[i],selectionMode:"single",onSelectionChange:o=>{if(o!=="all"){const t=o.values().next().value;z({pathname:`/organization/${c}/project/${s}/workspace/${l}/mock-server/mock-route/${t}`})}},children:o=>e.jsx(Q,{id:o._id,textValue:o.name,className:"group w-full select-none outline-none",children:e.jsxs("div",{className:"relative flex h-[--line-height-xs] w-full select-none items-center gap-2 overflow-hidden px-4 text-[--hl] outline-none transition-colors group-hover:bg-[--hl-xs] group-focus:bg-[--hl-sm] group-aria-selected:text-[--color-font]",children:[e.jsx("span",{className:"absolute left-0 top-0 h-full w-[2px] bg-transparent transition-colors group-aria-selected:bg-[--color-surprise]"}),e.jsx("span",{className:`flex w-10 flex-shrink-0 items-center justify-center rounded-sm border border-solid border-[--hl-sm] text-[0.65rem] ${{GET:"bg-[rgba(var(--color-surprise-rgb),0.5)] text-[--color-font-surprise]",POST:"bg-[rgba(var(--color-success-rgb),0.5)] text-[--color-font-success]",HEAD:"bg-[rgba(var(--color-info-rgb),0.5)] text-[--color-font-info]",OPTIONS:"bg-[rgba(var(--color-info-rgb),0.5)] text-[--color-font-info]",DELETE:"bg-[rgba(var(--color-danger-rgb),0.5)] text-[--color-font-danger]",PUT:"bg-[rgba(var(--color-warning-rgb),0.5)] text-[--color-font-warning]",PATCH:"bg-[rgba(var(--color-notice-rgb),0.5)] text-[--color-font-notice]"}[o.method]||"bg-[--hl-md] text-[--color-font]"}`,children:Z(o.method)}),e.jsx("span",{className:"flex-1 truncate",children:o.name}),e.jsx("span",{className:"flex-1"}),e.jsxs(oe,{children:[e.jsx($,{"aria-label":"Mock Route Actions",className:"flex aspect-square h-6 items-center justify-center rounded-sm text-sm text-[--color-font] opacity-0 ring-1 ring-transparent transition-all hover:bg-[--hl-xs] hover:opacity-100 focus:opacity-100 focus:ring-inset focus:ring-[--hl-md] group-hover:opacity-100 group-focus:opacity-100 data-[pressed]:bg-[--hl-sm] data-[pressed]:opacity-100",children:e.jsx(f,{icon:"caret-down"})}),e.jsx(te,{className:"flex min-w-max flex-col overflow-y-hidden",children:e.jsx(re,{"aria-label":"Mock Route Action Menu",selectionMode:"single",onAction:t=>{v.find(({id:n})=>t===n)?.action(o._id,o.name)},items:v,className:"min-w-max select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] py-2 text-sm shadow-lg focus:outline-none",children:t=>e.jsxs(ie,{id:t.id,className:"flex h-[--line-height-xs] w-full items-center gap-2 whitespace-nowrap bg-transparent px-[--padding-md] text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-selected:font-bold","aria-label":t.name,children:[e.jsx(f,{icon:t.icon}),e.jsx("span",{children:t.name})]},t.id)})})]})]})},o._id)}),e.jsx(G,{})]})}),e.jsx(I,{className:"h-full w-[1px] bg-[--hl-md]"}),e.jsxs(u,{className:"flex flex-col",children:[e.jsx(J,{}),e.jsxs(S,{autoSaveId:"insomnia-panels",direction:g,children:[e.jsx(u,{id:"pane-one",minSize:10,className:"pane-one theme--pane",children:e.jsxs(w,{children:[e.jsx(d,{path:"mock-route/:mockRouteId/*",element:e.jsx(a.Suspense,{children:e.jsx(X,{})})}),e.jsx(d,{path:"*",element:e.jsx(R,{icon:e.jsx(N,{icon:"bug"}),documentationLinks:[],title:"Create a route to configure mock response here"})})]})}),e.jsx(I,{className:g==="horizontal"?"h-full w-[1px] bg-[--hl-md]":"h-[1px] w-full bg-[--hl-md]"}),e.jsx(u,{id:"pane-two",minSize:10,className:"pane-two theme--pane",children:e.jsxs(w,{children:[e.jsx(d,{path:"mock-route/:mockRouteId/*",element:e.jsx(a.Suspense,{children:e.jsx(Y,{})})}),e.jsx(d,{path:"*",element:e.jsx(R,{icon:e.jsx(N,{icon:"bug"}),documentationLinks:[],title:"Create a route to see mock server activity here"})})]})})]})]}),r&&e.jsx(me,{isOpen:r.isOpen,onOpenChange:o=>{p(o?r:null)},title:r.title,defaultPath:r.defaultPath,defaultMethod:r.defaultMethod,mode:r.mode,mockRouteId:r.mockRouteId,mockServerId:r.mockServerId})]})},Bt=D(pe);export{Ct as clientLoader,Bt as default};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.mock-server-DyFfwN78.js.map
