import{h as m}from"./chunk-WY5IRSCW-1dc6FieG.js";import{r as I}from"./chunk-OIYGIGL5-BYynBxW5.js";import{s as q,aY as T,ay as i,d1 as p,aI as f,bf as h,b6 as g,cV as l,d2 as E,aG as N,aH as S,ad as _}from"./index-BnTlsbFl.js";import{S as R}from"./analytics-fpOjxorv.js";import{i as b}from"./invariant-DVddvGrP.js";import{c as k}from"./router-BoVIwh1i.js";async function H({params:o,request:d}){const{organizationId:c,projectId:u,workspaceId:e}=o,{requestType:t,parentId:a,req:r}=await d.json(),n=(await q.getOrCreate()).disableAppVersionUserAgent?[]:[{name:"User-Agent",value:`insomnia/${T()}`,description:"",disabled:!1}];let s;if(t==="HTTP"&&(s=(await i.create({parentId:a||e,method:p,name:"New Request",headers:n}))._id),t==="gRPC"&&(s=(await f.create({parentId:a||e,name:"New Request"}))._id),t==="GraphQL"&&(s=(await i.create({parentId:a||e,method:l,headers:[...n,{name:"Content-Type",value:g}],body:{mimeType:h,text:""},name:"New Request"}))._id),t==="Event Stream"&&(s=(await i.create({parentId:a||e,method:p,url:"",headers:[...n,{name:"Accept",value:E}],name:"New Event Stream"}))._id),t==="WebSocket"&&(s=(await N.create({parentId:a||e,name:"New WebSocket Request",headers:n}))._id),t==="SocketIO"&&(s=(await S.create({parentId:a||e,name:"New Socket.IO Request",headers:n}))._id),t==="From Curl"){if(!r)return null;try{s=(await i.create({parentId:a||e,url:r.url,method:r.method,headers:r.headers,body:r.body,authentication:r.authentication,parameters:r.parameters}))._id}catch(w){return console.error(w),null}}return b(typeof s=="string","Request ID is required"),_.incrementCreatedRequests(),window.main.trackSegmentEvent({event:R.requestCreate,properties:{requestType:t}}),I(`${m("/organization/:organizationId/project/:projectId/workspace/:workspaceId/debug/request/:requestId",{organizationId:c,projectId:u,workspaceId:e,requestId:s})}?created=true`)}const z=k(o=>({organizationId:d,projectId:c,workspaceId:u,requestType:e,parentId:t,req:a})=>{const r=m("/organization/:organizationId/project/:projectId/workspace/:workspaceId/debug/request/new",{organizationId:d,projectId:c,workspaceId:u});return o(JSON.stringify({requestType:e,parentId:t,req:a}),{action:r,method:"POST",encType:"application/json"})});export{H as c,z as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.debug.request.new-DZNrbQ0p.js.map
