import{b as y,d as A,$ as E,h as W,i as G,g as k,j as H,k as U,l as z,m as K}from"./utils-BWA8Q1_N.js";import{b as J,c as Q,d as X,e as Y,f as Z,g as ee}from"./Form-xjwDMhyX.js";import{t as _,p as ae,n as O,u as ie,m as de,v as le,w as te,x as re,o as oe}from"./Button-Pc6dXscm.js";import{a as ne}from"./Text-CNZDhubC.js";import{r as x,R as C}from"./index-b8gibUUP.js";import{$ as se}from"./useControlledState-CVI9bVg4.js";import{a as ce,b as ue}from"./VisuallyHidden-DFfuR22R.js";import{b as S,e as I}from"./index-BnTlsbFl.js";const j=new WeakMap;function fe(a,e,l){let{value:i,children:r,"aria-label":t,"aria-labelledby":p,onPressStart:d,onPressEnd:c,onPressChange:u,onPress:o,onPressUp:n,onClick:b}=a;const f=a.isDisabled||e.isDisabled;let R=e.selectedValue===i,m=M=>{M.stopPropagation(),e.setSelectedValue(i)},{pressProps:h,isPressed:V}=_({onPressStart:d,onPressEnd:c,onPressChange:u,onPress:o,onPressUp:n,onClick:b,isDisabled:f}),{pressProps:D,isPressed:g}=_({onPressStart:d,onPressEnd:c,onPressChange:u,onPressUp:n,onClick:b,isDisabled:f,onPress(M){var q;o?.(M),e.setSelectedValue(i),(q=l.current)===null||q===void 0||q.focus()}}),{focusableProps:w}=ae(y(a,{onFocus:()=>e.setLastFocusedValue(i)}),l),P=y(h,w),s=O(a,{labelable:!0}),$=-1;e.selectedValue!=null?e.selectedValue===i&&($=0):(e.lastFocusedValue===i||e.lastFocusedValue==null)&&($=0),f&&($=void 0);let{name:v,form:F,descriptionId:T,errorMessageId:N,validationBehavior:B}=j.get(e);return J(l,e.defaultSelectedValue,e.setSelectedValue),Q({validationBehavior:B},e,l),{labelProps:y(D,{onClick:M=>M.preventDefault()}),inputProps:y(s,{...P,type:"radio",name:v,form:F,tabIndex:$,disabled:f,required:e.isRequired&&B==="native",checked:R,value:i,onChange:m,"aria-describedby":[a["aria-describedby"],e.isInvalid?N:null,T].filter(Boolean).join(" ")||void 0}),isDisabled:f,isSelected:R,isPressed:V||g}}function be(a,e){let{name:l,form:i,isReadOnly:r,isRequired:t,isDisabled:p,orientation:d="vertical",validationBehavior:c="aria"}=a,{direction:u}=ie(),{isInvalid:o,validationErrors:n,validationDetails:b}=e.displayValidation,{labelProps:f,fieldProps:R,descriptionProps:m,errorMessageProps:h}=X({...a,labelElementType:"span",isInvalid:e.isInvalid,errorMessage:a.errorMessage||n}),V=O(a,{labelable:!0}),{focusWithinProps:D}=de({onBlurWithin(P){var s;(s=a.onBlur)===null||s===void 0||s.call(a,P),e.selectedValue||e.setLastFocusedValue(null)},onFocusWithin:a.onFocus,onFocusWithinChange:a.onFocusChange}),g=P=>{let s;switch(P.key){case"ArrowRight":u==="rtl"&&d!=="vertical"?s="prev":s="next";break;case"ArrowLeft":u==="rtl"&&d!=="vertical"?s="next":s="prev";break;case"ArrowDown":s="next";break;case"ArrowUp":s="prev";break;default:return}P.preventDefault();let $=ce(P.currentTarget,{from:P.target,accept:F=>F instanceof le(F).HTMLInputElement&&F.type==="radio"}),v;s==="next"?(v=$.nextNode(),v||($.currentNode=P.currentTarget,v=$.firstChild())):(v=$.previousNode(),v||($.currentNode=P.currentTarget,v=$.lastChild())),v&&(v.focus(),e.setSelectedValue(v.value))},w=A(l);return j.set(e,{name:w,form:i,descriptionId:m.id,errorMessageId:h.id,validationBehavior:c}),{radioGroupProps:y(V,{role:"radiogroup",onKeyDown:g,"aria-invalid":e.isInvalid||void 0,"aria-errormessage":a["aria-errormessage"],"aria-readonly":r||void 0,"aria-required":t||void 0,"aria-disabled":p||void 0,"aria-orientation":d,...R,...D}),labelProps:f,descriptionProps:m,errorMessageProps:h,isInvalid:o,validationErrors:n,validationDetails:b}}let $e=Math.round(Math.random()*1e10),ve=0;function pe(a){let e=x.useMemo(()=>a.name||`radio-group-${$e}-${++ve}`,[a.name]);var l;let[i,r]=se(a.value,(l=a.defaultValue)!==null&&l!==void 0?l:null,a.onChange),[t]=x.useState(i),[p,d]=x.useState(null),c=Y({...a,value:i}),u=b=>{!a.isReadOnly&&!a.isDisabled&&(r(b),c.commitValidation())},o=c.displayValidation.isInvalid;var n;return{...c,name:e,selectedValue:i,defaultSelectedValue:a.value!==void 0?t:(n=a.defaultValue)!==null&&n!==void 0?n:null,setSelectedValue:u,lastFocusedValue:p,setLastFocusedValue:d,isDisabled:a.isDisabled||!1,isReadOnly:a.isReadOnly||!1,isRequired:a.isRequired||!1,validationState:a.validationState||(o?"invalid":null),isInvalid:o}}const Pe=x.createContext(null),me=x.createContext(null),L=x.createContext(null),Ce=x.forwardRef(function(e,l){[e,l]=E(e,l,Pe);let{validationBehavior:i}=W(Z)||{};var r,t;let p=(t=(r=e.validationBehavior)!==null&&r!==void 0?r:i)!==null&&t!==void 0?t:"native",d=pe({...e,validationBehavior:p}),[c,u]=G(!e["aria-label"]&&!e["aria-labelledby"]),{radioGroupProps:o,labelProps:n,descriptionProps:b,errorMessageProps:f,...R}=be({...e,label:u,validationBehavior:p},d),m=k({...e,values:{orientation:e.orientation||"vertical",isDisabled:d.isDisabled,isReadOnly:d.isReadOnly,isRequired:d.isRequired,isInvalid:d.isInvalid,state:d},defaultClassName:"react-aria-RadioGroup"}),h=O(e,{global:!0});return C.createElement("div",{...y(h,m,o),ref:l,slot:e.slot||void 0,"data-orientation":e.orientation||"vertical","data-invalid":d.isInvalid||void 0,"data-disabled":d.isDisabled||void 0,"data-readonly":d.isReadOnly||void 0,"data-required":d.isRequired||void 0},C.createElement(H,{values:[[L,d],[te,{...n,ref:c,elementType:"span"}],[ne,{slots:{description:b,errorMessage:f}}],[ee,R]]},m.children))}),Fe=x.forwardRef(function(e,l){let{inputRef:i=null,...r}=e;[e,l]=E(r,l,me);let t=C.useContext(L),p=U(x.useMemo(()=>z(i,e.inputRef!==void 0?e.inputRef:null),[i,e.inputRef])),{labelProps:d,inputProps:c,isSelected:u,isDisabled:o,isPressed:n}=fe({...K(e),children:typeof e.children=="function"?!0:e.children},t,p),{isFocused:b,isFocusVisible:f,focusProps:R}=re(),m=o||t.isReadOnly,{hoverProps:h,isHovered:V}=oe({...e,isDisabled:m}),D=k({...e,defaultClassName:"react-aria-Radio",values:{isSelected:u,isPressed:n,isHovered:V,isFocused:b,isFocusVisible:f,isDisabled:o,isReadOnly:t.isReadOnly,isInvalid:t.isInvalid,isRequired:t.isRequired}}),g=O(e,{global:!0});return delete g.id,delete g.onClick,C.createElement("label",{...y(g,d,h,D),ref:l,"data-selected":u||void 0,"data-pressed":n||void 0,"data-hovered":V||void 0,"data-focused":b||void 0,"data-focus-visible":f||void 0,"data-disabled":o||void 0,"data-readonly":t.isReadOnly||void 0,"data-invalid":t.isInvalid||void 0,"data-required":t.isRequired||void 0},C.createElement(ue,{elementType:"span"},C.createElement("input",{...y(c,R),ref:p})),D.children)}),Me=async()=>{const[a,e]=await Promise.all([S.count(I.type,{remoteId:null,parentId:null}),S.count(I.type,{remoteId:{$ne:null},parentId:null})]);return a>0||e>0},Se=async({personalOrganizationId:a})=>{const[e,l]=await Promise.all([S.find(I.type,{remoteId:{$ne:null},parentId:null}),S.find(I.type,{remoteId:null,parentId:null,_id:{$ne:I.SCRATCHPAD_PROJECT_ID}})]),i=[];for(const r of e)i.push(I.update(r,{parentId:r.remoteId,remoteId:r._id}));for(const r of l)i.push(I.update(r,{parentId:a}));await Promise.all(i)};export{Ce as $,Fe as a,Se as m,Me as s};
//# sourceMappingURL=migrate-projects-into-organization-CxpdXy_W.js.map
