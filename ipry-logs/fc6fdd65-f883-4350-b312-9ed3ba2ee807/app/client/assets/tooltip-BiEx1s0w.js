import{j as C}from"./jsx-runtime-cpqHEc2t.js";import{$ as H,a as S,c as w}from"./index-B0jEcytd.js";import{R as p,r as c}from"./index-b8gibUUP.js";import{n as _,o as M,p as k,l as j,q as I}from"./Button-Pc6dXscm.js";import{c as L,b as E,d as N}from"./utils-BWA8Q1_N.js";import{$ as F}from"./PortalProvider-CgpNn0eI.js";import{R as W}from"./chunk-WY5IRSCW-1dc6FieG.js";const O=p.createContext(null);function A(o){let{children:t}=o,e=c.useContext(O),[n,a]=c.useState(0),i=c.useMemo(()=>({parent:e,modalCount:n,addModal(){a(l=>l+1),e&&e.addModal()},removeModal(){a(l=>l-1),e&&e.removeModal()}}),[e,n]);return p.createElement(O.Provider,{value:i},t)}function B(){let o=c.useContext(O);return{modalProviderProps:{"aria-hidden":o&&o.modalCount>0?!0:void 0}}}function K(o){let{modalProviderProps:t}=B();return p.createElement("div",{"data-overlay-container":!0,...o,...t})}function U(o){return p.createElement(A,null,p.createElement(K,o))}function V(o){let t=L(),{portalContainer:e=t?null:document.body,...n}=o,{getContainer:a}=F();if(!o.portalContainer&&a&&(e=a()),p.useEffect(()=>{if(e?.closest("[data-overlay-container]"))throw new Error("An OverlayContainer must not be inside another container. Please change the portalContainer prop.")},[e]),!e)return null;let i=p.createElement(U,n);return W.createPortal(i,e)}function q(o,t){let e=_(o,{labelable:!0}),{hoverProps:n}=M({onHoverStart:()=>t?.open(!0),onHoverEnd:()=>t?.close()});return{tooltipProps:E(e,n,{role:"tooltip"})}}function Y(o,t,e){let{isDisabled:n,trigger:a}=o,i=N(),l=c.useRef(!1),r=c.useRef(!1),$=()=>{(l.current||r.current)&&t.open(r.current)},d=v=>{!l.current&&!r.current&&t.close(v)};c.useEffect(()=>{let v=R=>{e&&e.current&&R.key==="Escape"&&(R.stopPropagation(),t.close(!0))};if(t.isOpen)return document.addEventListener("keydown",v,!0),()=>{document.removeEventListener("keydown",v,!0)}},[e,t]);let m=()=>{a!=="focus"&&(j()==="pointer"?l.current=!0:l.current=!1,$())},u=()=>{a!=="focus"&&(r.current=!1,l.current=!1,d())},b=()=>{r.current=!1,l.current=!1,d(!0)},T=()=>{I()&&(r.current=!0,$())},s=()=>{r.current=!1,l.current=!1,d(!0)},{hoverProps:h}=M({isDisabled:n,onHoverStart:m,onHoverEnd:u}),{focusableProps:y}=k({isDisabled:n,onFocus:T,onBlur:s},e);return{triggerProps:{"aria-describedby":t.isOpen?i:void 0,...E(y,h,{onPointerDown:b,onKeyDown:b}),tabIndex:void 0},tooltipProps:{id:i}}}const z=1500,D=500;let x={},G=0,g=!1,f=null,P=null;function J(o={}){let{delay:t=z,closeDelay:e=D}=o,{isOpen:n,open:a,close:i}=H(o),l=c.useMemo(()=>`${++G}`,[]),r=c.useRef(null),$=c.useRef(i),d=()=>{x[l]=b},m=()=>{for(let s in x)s!==l&&(x[s](!0),delete x[s])},u=()=>{r.current&&clearTimeout(r.current),r.current=null,m(),d(),g=!0,a(),f&&(clearTimeout(f),f=null),P&&(clearTimeout(P),P=null)},b=s=>{s||e<=0?(r.current&&clearTimeout(r.current),r.current=null,$.current()):r.current||(r.current=setTimeout(()=>{r.current=null,$.current()},e)),f&&(clearTimeout(f),f=null),g&&(P&&clearTimeout(P),P=setTimeout(()=>{delete x[l],P=null,g=!1},Math.max(D,e)))},T=()=>{m(),d(),!n&&!f&&!g?f=setTimeout(()=>{f=null,g=!0,u()},t):n||u()};return c.useEffect(()=>{$.current=i},[i]),c.useEffect(()=>()=>{r.current&&clearTimeout(r.current),x[l]&&delete x[l]},[l]),{isOpen:n,open:s=>{!s&&t>0&&!r.current?T():u()},close:b}}const le=o=>{const{children:t,message:e,className:n,wide:a,selectable:i,delay:l=400,position:r,style:$}=o,d=p.useRef(null),m=p.useRef(null),u=J({delay:l}),b=Y(o,u,d),T=q(b.tooltipProps,u),{overlayProps:s}=S({targetRef:d,overlayRef:m,placement:r,offset:5,isOpen:u.isOpen}),h=w(n,"tooltip"),y=w("tooltip__bubble theme--tooltip",{"tooltip__bubble--visible":u.isOpen,"tooltip__bubble--wide":a,selectable:i});return C.jsxs(C.Fragment,{children:[C.jsx("div",{ref:d,className:h,style:{position:"relative",...$},...b.triggerProps,onClick:o.onClick,children:t}),u.isOpen&&C.jsx(V,{children:C.jsx("div",{ref:m,onClick:v=>v.stopPropagation(),...E(T.tooltipProps,s),className:y,children:e})})]})};export{V as $,le as T,J as a,Y as b,q as c};
//# sourceMappingURL=tooltip-BiEx1s0w.js.map
