import{h as p}from"./chunk-WY5IRSCW-1dc6FieG.js";import{e as d,b as l}from"./index-BnTlsbFl.js";import{bW as u,V as I,b_ as c,bX as w}from"./trial.start-yrr1pYcE.js";import{S as s}from"./analytics-fpOjxorv.js";import{i}from"./invariant-DVddvGrP.js";import{c as f}from"./router-BoVIwh1i.js";async function b({params:r}){const{projectId:n,workspaceId:t}=r,e=await d.getById(n);i(e,"Project not found");const{syncItems:m}=await u({workspaceId:t});try{i(e.remoteId,"Project is not remote");const o=await I().pull({candidates:m,teamId:e.parentId,teamProjectId:e.remoteId,projectId:e._id});return window.main.trackSegmentEvent({event:s.vcsAction,properties:c("remote","pull")}),await l.batchModifyDocs(o),delete w[t],{success:!0}}catch(a){const o=a instanceof Error?a.message:"Unknown error while pulling from remote.";return window.main.trackSegmentEvent({event:s.vcsAction,properties:c("remote","pull",o)}),{error:o}}}const k=f(r=>({organizationId:n,projectId:t,workspaceId:e})=>r({},{action:p("/organization/:organizationId/project/:projectId/workspace/:workspaceId/insomnia-sync/pull",{organizationId:n,projectId:t,workspaceId:e}),method:"POST"}));export{b as c,k as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.pull-BJpkfRkS.js.map
