import{h}from"./chunk-WY5IRSCW-1dc6FieG.js";import{B as R,ay as o,bd as y}from"./index-BnTlsbFl.js";import{f as k,t as S,g as _,h as x,i as T}from"./index-wZAP8gf2.js";import{i}from"./invariant-DVddvGrP.js";import{c as v}from"./router-BoVIwh1i.js";async function A({request:r}){const t=await r.json();i(typeof t.url=="string","URL is required"),i(typeof t.method=="string","method is required"),i(typeof t.parentId=="string","mock route ID is required");const n=await R.getById(t.parentId);i(n,"mock route not found");const s=(await o.findByParentId(n._id))[0]||await o.create({parentId:n._id,isPrivate:!0});i(s,"mock route is missing a testing request");const e=await o.update(s,t),{environment:u,settings:m,clientCertificates:p,caCert:w,activeEnvironmentId:q,timelinePath:f,responseId:l}=await k(e._id);window.main.startExecution({requestId:e._id}),window.main.addExecutionStep({requestId:e._id,stepName:"Rendering request"});const d=await S({request:e,environment:u._id,purpose:"send"}),c=await _(d);window.main.completeExecutionStep({requestId:e._id}),window.main.addExecutionStep({requestId:e._id,stepName:"Sending request"});const I=await x(c,p,w,m,f,l),g=await T(I,q,c,d.context);return await y.create(g),window.main.completeExecutionStep({requestId:e._id}),null}const B=v(r=>({organizationId:t,projectId:n,workspaceId:a,patch:s})=>{const e=h("/organization/:organizationId/project/:projectId/workspace/:workspaceId/debug/request/new-mock-send",{organizationId:t,projectId:n,workspaceId:a});return r(JSON.stringify(s),{action:e,method:"POST",encType:"application/json"})});export{A as c,B as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.debug.request.new-mock-send-DTyjZaRX.js.map
