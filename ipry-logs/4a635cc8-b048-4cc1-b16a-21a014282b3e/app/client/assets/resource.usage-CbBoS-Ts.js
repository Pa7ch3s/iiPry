import{h as l}from"./chunk-WY5IRSCW-1dc6FieG.js";import{u as o}from"./index-BnTlsbFl.js";import{g as c}from"./trial.check-st6_Q4W5.js";import{i as r}from"./insomnia-fetch-B_XbrnGh.js";import{b as g}from"./router-BoVIwh1i.js";function f(e){return r({method:"GET",path:"/v1/user/resource-usage",sessionId:e})}function p(e){return r({method:"GET",path:"/v1/user/enterprises",sessionId:e})}async function m(e){const t=await p(e);return Array.isArray(t)?t.find(n=>n.role==="owner")??t[0]:null}function d(e){return r({method:"GET",path:"/v1/accounts/seats",sessionId:e})}function h(e,t){return r({method:"GET",path:`/v1/enterprise/${t}/license-usage`,sessionId:e})}function E(e,t){return t?h(e,t):d(e)}async function S(){const{id:e,accountId:t}=await o.get();if(!e)return{resourceUsage:null,licenseUsage:null,isEligible:!1};const u=JSON.parse(localStorage.getItem(`${t}:currentPlan`)||"{}")?.type==="enterprise"?(await m(e))?.id:null,[i,a,s]=await Promise.allSettled([f(e),E(e,u),c(e)]);return{resourceUsage:i.status==="fulfilled"?i.value:null,licenseUsage:a.status==="fulfilled"?a.value:null,isEligible:s.status==="fulfilled"&&"isEligible"in s.value?s.value?.isEligible:!1}}const T=g(e=>()=>e(l("/resource/usage")));export{S as c,T as u};
//# sourceMappingURL=resource.usage-CbBoS-Ts.js.map
