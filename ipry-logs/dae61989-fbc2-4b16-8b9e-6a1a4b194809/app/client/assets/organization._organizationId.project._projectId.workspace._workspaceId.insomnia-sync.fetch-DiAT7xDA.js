import{h}from"./chunk-WY5IRSCW-1dc6FieG.js";import{e as d,b as f}from"./index-BnTlsbFl.js";import{V as p}from"./trial.start-yrr1pYcE.js";import{i as n}from"./invariant-DVddvGrP.js";import{c as u}from"./router-BoVIwh1i.js";async function y({request:a,params:c}){const{projectId:r}=c,t=await d.getById(r);n(t,"Project not found");const i=(await a.formData()).get("branch");n(typeof i=="string","Branch is required");const e=p(),m=await e.getCurrentBranchName();try{n(t.remoteId,"Project is not remote"),await e.checkout([],i);const o=await e.pull({candidates:[],teamId:t.parentId,teamProjectId:t.remoteId,projectId:r});await f.batchModifyDocs(o)}catch(o){return await e.checkout([],m),{error:o instanceof Error?o.message:"Unknown error while fetching remote branch."}}return null}const k=u(a=>({organizationId:c,projectId:r,workspaceId:t,branch:s})=>a({branch:s},{method:"POST",action:h("/organization/:organizationId/project/:projectId/workspace/:workspaceId/insomnia-sync/fetch",{organizationId:c,projectId:r,workspaceId:t})}));export{y as c,k as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.insomnia-sync.fetch-DiAT7xDA.js.map
