import{j as e}from"./jsx-runtime-cpqHEc2t.js";import{r as T}from"./index-wZAP8gf2.js";import{R as M}from"./index-b8gibUUP.js";import{$ as c,a as F}from"./Button-Pc6dXscm.js";import{d as P,e as R,f as k}from"./index-CiWR7xsz.js";import{$ as E,a as I}from"./Form-xjwDMhyX.js";import{$ as V}from"./Heading-CJLhoRaQ.js";import{k as q,g as H}from"./trial.start-yrr1pYcE.js";import{a as z}from"./chunk-OIYGIGL5-BYynBxW5.js";import{u as A}from"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route._mockRouteId.update-L_Ehr73N.js";import{u as B}from"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route.new-C3GYuFkd.js";import{H as S}from"./index-BnTlsbFl.js";import{I as C}from"./icon-pbM3MSP9.js";const G=({isOpen:j,onOpenChange:a,title:i,defaultPath:y,defaultMethod:N,mode:d,mockRouteId:v,mockServerId:f,mockServerName:n,responseData:t})=>{const{organizationId:m,projectId:u,workspaceId:x}=z(),p=B(),b=A(),w=async r=>{if(r.preventDefault(),!r.currentTarget.checkValidity())return;const h=new FormData(r.currentTarget),g=h.get("path"),$=h.get("method");let l="";if(t?.bodyPath)try{l=(await T.readFile(t.bodyPath)).toString()}catch(s){console.error("Failed to read response body:",s)}if(d==="create"){const s={name:g,method:$,...t&&{body:l,headers:t.headers,statusCode:t.statusCode,mimeType:t.mimeType},...f?{parentId:f}:{},...n?{mockServerName:n}:{}};p.submit({organizationId:m,projectId:u,workspaceId:x,patch:s})}else{const s={name:g,method:$,...t&&{body:l,headers:t.headers,statusCode:t.statusCode,mimeType:t.mimeType}};b.submit({organizationId:m,projectId:u,workspaceId:x,mockRouteId:v,patch:s})}},o=d==="create"?p:b;return M.useEffect(()=>{d==="edit"&&o.state==="idle"&&o.data===null&&a(!1)},[o.state,o.data,d,a]),e.jsx(P,{isOpen:j,onOpenChange:a,isDismissable:!0,className:"fixed left-0 top-0 z-10 flex h-[--visual-viewport-height] w-full items-center justify-center bg-black/30",children:e.jsx(R,{className:"flex max-h-[90dvh] w-full max-w-lg flex-col overflow-hidden rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] text-[--color-font]",children:e.jsxs(k,{className:"flex flex-col overflow-hidden outline-none",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 p-[--padding-md]",children:[e.jsx(V,{className:"text-lg font-bold",children:i}),e.jsx(c,{className:"flex aspect-square h-8 items-center justify-center rounded-sm text-[--color-font] hover:bg-[--hl-xs] focus:bg-[--hl-sm] focus:outline-none",onPress:()=>a(!1),children:e.jsx(C,{icon:"x"})})]}),o.data?.error&&e.jsx("div",{className:"px-[--padding-md] pb-[--padding-md]",children:e.jsx("div",{className:"flex items-center gap-2 rounded-sm bg-[rgba(var(--color-danger-rgb),0.5)] px-2 py-1 text-sm text-[--color-font-danger]",children:e.jsxs("span",{children:["Error: ",o.data.error]})})}),e.jsxs(E,{onSubmit:w,className:"flex flex-col gap-4 p-[--padding-md]",children:[e.jsxs(q,{name:"path",defaultValue:y||"/",isRequired:!0,validate:r=>r.startsWith("/")?null:"Path must begin with a /",className:"group relative flex flex-col gap-2",children:[e.jsx(F,{className:"text-sm text-[--hl]",children:"Path"}),e.jsx(H,{autoFocus:!0,type:"text",placeholder:"/path/to/resource",className:"w-full rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] py-1 pl-2 pr-7 text-[--color-font] transition-colors placeholder:italic focus:outline-none focus:ring-1 focus:ring-[--hl-md]"}),e.jsx(I,{className:"text-xs text-red-500"})]}),e.jsxs("div",{className:"group relative flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm text-[--hl]",children:"HTTP Method"}),e.jsx("select",{name:"method",defaultValue:N||"GET",required:!0,className:"w-full rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] py-1 pl-2 pr-7 text-[--color-font] transition-colors focus:outline-none focus:ring-1 focus:ring-[--hl-md]",children:S.map(r=>e.jsx("option",{value:r,children:r},r))})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4",children:[e.jsx(c,{onPress:()=>a(!1),isDisabled:o.state!=="idle",className:"rounded-sm border border-solid border-[--hl-md] px-3 py-2 text-[--color-font] transition-colors hover:bg-opacity-90",children:"Cancel"}),e.jsx(c,{type:"submit",isDisabled:o.state!=="idle",className:"flex items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-md] bg-[--color-surprise] px-3 py-2 text-center text-[--color-font-surprise] transition-colors hover:bg-opacity-90",children:i})]})]})]})})})};G.displayName="MockRouteModal";export{G as M};
//# sourceMappingURL=mock-route-modal-BnQ-7tzU.js.map
