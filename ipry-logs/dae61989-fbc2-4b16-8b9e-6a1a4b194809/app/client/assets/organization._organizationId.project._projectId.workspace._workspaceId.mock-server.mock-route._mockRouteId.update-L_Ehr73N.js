import{h as u}from"./chunk-WY5IRSCW-1dc6FieG.js";import{B as m,z as p}from"./index-BnTlsbFl.js";import{S as h}from"./analytics-fpOjxorv.js";import{i as a}from"./invariant-DVddvGrP.js";import{c as f}from"./router-BoVIwh1i.js";async function S({request:i,params:s}){const{mockRouteId:r}=s;try{const e=await i.json(),t=await m.getById(r);if(a(t,"Mock route is required"),e.name!==void 0){a(typeof e.name=="string","Name is required"),a(e.name.startsWith("/"),"Path must begin with a /");const c=await p.getById(t.parentId),n=await m.findByParentId(t.parentId);c?.useInsomniaCloud?n.filter(o=>o._id!==r).find(o=>o.name===e.name)&&a(!1,`Path "${e.name}" already exists. Please enter a different path.`):n.filter(o=>o._id!==r).find(o=>o.name===e.name&&o.method.toUpperCase()===(e.method||t.method).toUpperCase())&&a(!1,`Path "${e.name}" with ${e.method||t.method} method already exists. Please enter a different path or method.`)}return await m.update(t,e),window.main.trackSegmentEvent({event:h.mockRouteEdit}),null}catch(e){return console.error("Error updating mock route:",e),{error:e instanceof Error?e.message:"Failed to update mock route"}}}const w=f(i=>({organizationId:s,projectId:r,workspaceId:e,mockRouteId:t,patch:c})=>{const n=u("/organization/:organizationId/project/:projectId/workspace/:workspaceId/mock-server/mock-route/:mockRouteId/update",{organizationId:s,projectId:r,workspaceId:e,mockRouteId:t});return i(JSON.stringify(c),{action:n,method:"POST",encType:"application/json"})});export{S as c,w as u};
//# sourceMappingURL=organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route._mockRouteId.update-L_Ehr73N.js.map
