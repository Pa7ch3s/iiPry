import{j as e}from"./jsx-runtime-cpqHEc2t.js";import{c as Ce}from"./index-B0jEcytd.js";import{N as $e,a as O,c as Ee}from"./chunk-OIYGIGL5-BYynBxW5.js";import{r as v}from"./index-b8gibUUP.js";import{$ as b,a as V}from"./Button-Pc6dXscm.js";import{u as ee,a as pe,a4 as Se,g as _,h as Pe,c as ue,e as le,a5 as L,a6 as ge,a7 as be,a8 as Q,a9 as Y,d as je,$ as Ie,aa as Ae,ab as De,ac as ve,ad as Fe,k as _e,a1 as ye,a0 as J}from"./trial.start-yrr1pYcE.js";import{h as Oe,a as Z,f as K,d as z,e as B,$ as ce,b as de,c as xe,s as Me}from"./index-CiWR7xsz.js";import{$ as A}from"./Heading-CJLhoRaQ.js";import{c as W,d as X,$ as ne,A as Te}from"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-CJN0pku1.js";import{$ as ae}from"./Text-CNZDhubC.js";import{u as Ve}from"./organization._organizationId.project._projectId.workspace._workspaceId.environment.set-active-DQD_GOKm.js";import{u as Ke}from"./organization._organizationId.project._projectId.workspace._workspaceId.environment.set-active-global-OVAdNVZK.js";import{r as Ne,a7 as we,t as Re,v as U,y as ze,a8 as Be}from"./index-BnTlsbFl.js";import{u as qe}from"./event-bus-gjQB7sSy.js";import{I as m}from"./icon-pbM3MSP9.js";import{u as Ge}from"./organization._organizationId.project._projectId.workspace._workspaceId.cacert.delete-gmFqOotq.js";import{u as Je}from"./organization._organizationId.project._projectId.workspace._workspaceId.cacert.new-BAw3_PFn.js";import{u as Ue}from"./organization._organizationId.project._projectId.workspace._workspaceId.cacert.update-RP9rRE7q.js";import{u as He}from"./organization._organizationId.project._projectId.workspace._workspaceId.clientcert.delete-C7qAoH39.js";import{u as Le}from"./organization._organizationId.project._projectId.workspace._workspaceId.clientcert.new-cLo9gJHS.js";import{u as We}from"./organization._organizationId.project._projectId.workspace._workspaceId.clientcert.update-CivLuyzL.js";import{u as Xe}from"./organization._organizationId.project._projectId.workspace._workspaceId.environment.create-C5SrSIuz.js";import{u as Qe}from"./organization._organizationId.project._projectId.workspace._workspaceId.environment.delete-Bbtl6Atl.js";import{u as Ye}from"./organization._organizationId.project._projectId.workspace._workspaceId.environment.duplicate-MRGgtgUo.js";import{u as Ze}from"./organization._organizationId.project._projectId.workspace._workspaceId.environment.update-BFDmExsV.js";import{i as re}from"./invariant-DVddvGrP.js";import{a as es}from"./sax-DTOkft0z.js";import{E as me}from"./editable-input-CP0Ibhfa.js";import{h as ss,E as ts,a as ns}from"./key-value-editor-CPoqROww.js";import{C as oe,c as ke,a as fe}from"./index-wZAP8gf2.js";import{u as rs}from"./organization._organizationId.project._projectId.workspace._workspaceId.update-cookie-jar-BxajqJCO.js";import{i as ie}from"./format-i_2FlR3N.js";const Ws=({organizationId:a,projectId:d,workspaceId:i,className:n})=>e.jsx("nav",{className:`flex h-[40px] w-full items-center ${n} justify-around px-1`,children:[{id:"spec",name:"Spec"},{id:"debug",name:"Collection"},{id:"test",name:"Tests"}].map(s=>e.jsx($e,{to:`/organization/${a}/project/${d}/workspace/${i}/${s.id}`,className:({isActive:t,isPending:x})=>Ce("rounded-full px-2 text-center",{"bg-[--color-surprise] text-[--color-font-surprise]":t,"animate-pulse":x}),"data-testid":`workspace-${s.id}`,children:s.name},s.id))}),Xs=({isOpen:a,onOpenChange:d,onOpenEnvironmentSettingsModal:i})=>{const{activeProject:n,activeWorkspaceMeta:s,activeEnvironment:t,activeGlobalEnvironment:x,subEnvironments:u,baseEnvironment:c,globalBaseEnvironments:f,globalSubEnvironments:y}=ee(),{organizationId:w,projectId:C,workspaceId:g}=O(),{features:S}=pe(),k=!!(Ne(n)&&!s?.gitRepositoryId),I=!!(S.gitSync.enabled&&s?.gitRepositoryId),M=Ve(),D=Ke(),j=[c,...u].map(({type:l,...r})=>({...r,id:r._id,isBase:r._id===c._id})),o=x?.parentId?.startsWith("wrk")?x._id:x?.parentId,N=f.find(l=>l._id===o),$=N?[N,...y.filter(l=>l.parentId===N._id)].map(({type:l,...r})=>({...r,id:r._id,isBase:r._id===N._id})):[],P=N,T=c,q=u.find(l=>l._id===t._id),se=Ee();return e.jsxs(Oe,{isOpen:a,onOpenChange:d,children:[e.jsxs(b,{"aria-label":"Manage Environments",className:"flex max-w-full flex-col items-start gap-2 truncate rounded-sm px-4 py-1 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:[x&&P&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx(m,{icon:x.isPrivate?"lock":I?["fab","git-alt"]:k?"globe-americas":"file-arrow-down",style:{color:x.color||""},className:"w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:x.name})]}),e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx(m,{icon:"0",className:"invisible w-5 flex-shrink-0"}),e.jsx("span",{className:"flex-shrink truncate text-xs text-[--hl]",children:P.workspaceName})]})]}),e.jsxs("div",{className:"flex w-full flex-1 items-center gap-2",children:[e.jsx(m,{icon:t.isPrivate?"lock":I?["fab","git-alt"]:k?"globe-americas":"file-arrow-down",style:{color:t.color||""},className:"w-5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:q?q.name:T.name})]})]}),e.jsx(Z,{className:"!z-10 flex max-h-[90vh] min-w-max flex-col",placement:"bottom start",offset:8,children:e.jsx(K,{className:"grid h-full w-full select-none grid-flow-col divide-x divide-solid divide-[--hl-md] overflow-hidden rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] text-sm shadow-lg [grid-auto-columns:min(260px,calc(40vw))_min(260px,calc(40vw))] focus:outline-none",children:e.jsxs("div",{className:"relative flex h-full w-full flex-1 flex-col overflow-hidden",children:[e.jsxs(A,{className:"flex h-[--line-height-sm] flex-shrink-0 items-center justify-between gap-2 px-3 py-1 text-sm font-bold text-[--hl]",children:[e.jsx("span",{children:"Global Environments"}),e.jsx(b,{"aria-label":"Manage global environment",onPress:()=>N&&se(`/organization/${w}/project/${C}/workspace/${N.parentId}/environment`),className:`flex aspect-square h-6 flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] outline-none ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] ${N?"":"opacity-50"}`,children:e.jsx(m,{icon:"gear"})})]}),e.jsx("div",{children:e.jsxs(Se,{"aria-label":"Global Environment",shouldFocusWrap:!0,allowsCustomValue:!1,menuTrigger:"focus",defaultFilter:(l,r)=>!!we(r,l,{splitSpace:!1,loose:!0})?.indexes,onSelectionChange:l=>{l==="all"||l===null||D.submit({organizationId:w,projectId:C,workspaceId:g,environmentId:l.toString()})},defaultInputValue:N?.workspaceName||N?.name||"No Global Environment",selectedKey:o||"",defaultItems:[{id:"",icon:"cancel",name:"No Global Environment",textValue:"No Global Environment"},...f.map(l=>({id:l._id,icon:"code",name:l.workspaceName||l.name,textValue:l.workspaceName||l.name}))],children:[e.jsxs("div",{className:"group mx-2 my-2 flex items-center gap-2 rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] px-2 text-[--color-font] transition-colors focus:outline-none focus:ring-1 focus:ring-[--hl-md]",children:[e.jsx(_,{"aria-label":"Global Environment",placeholder:"Choose a global environment",className:"w-full py-1 pl-2 pr-7 placeholder:italic"}),e.jsx(b,{className:"flex aspect-square items-center justify-center gap-2 truncate rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:e.jsx(m,{icon:"caret-down",className:"w-5 flex-shrink-0"})})]}),e.jsx(Z,{className:"!z-10 grid max-h-[90vh] min-w-max select-none auto-cols-[min(250px,calc(45vw))] grid-flow-col divide-x divide-solid divide-[--hl-md] overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] text-sm shadow-lg focus:outline-none",placement:"bottom start",offset:8,children:e.jsx(W,{className:"flex h-full max-h-full min-w-max select-none flex-col p-2 text-sm focus:outline-none",children:l=>e.jsxs(X,{textValue:l.name,className:"flex h-[--line-height-xs] w-full items-center gap-2 whitespace-nowrap rounded bg-transparent px-[--padding-md] text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-disabled:cursor-not-allowed aria-disabled:opacity-30 aria-selected:bg-[--hl-sm] aria-selected:font-bold data-[focused]:bg-[--hl-xs]",children:[e.jsx(m,{icon:l.icon,className:"w-4"}),e.jsx("span",{className:"truncate",children:l.name})]})})})]})}),e.jsx(W,{"aria-label":"Select a Global Environment",selectionMode:"single",disallowEmptySelection:!0,items:$,selectedKeys:[x?._id||P?._id||""],onSelectionChange:l=>{if(l==="all"||!l)return;const[r]=l.values();D.submit({organizationId:w,projectId:C,workspaceId:g,environmentId:r.toString()})},className:"flex max-h-[fit-content] min-w-max flex-1 select-none flex-col overflow-y-auto p-2 text-sm empty:p-0 focus:outline-none",children:l=>e.jsx(X,{textValue:l.name,className:`flex h-[--line-height-xs] w-full flex-none items-center gap-2 whitespace-nowrap rounded bg-transparent pr-1 text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed ${l.isBase?"pl-[--padding-md]":"pl-8"}`,children:({isSelected:r})=>e.jsxs(v.Fragment,{children:[e.jsx("span",{style:{borderColor:l.color??"var(--color-font)"},children:e.jsx(m,{icon:l.isPrivate?"lock":I?["fab","git-alt"]:k?"globe-americas":"file-arrow-down",className:"w-5 text-xs",style:{color:l.color??"var(--color-font)"}})}),e.jsx(ae,{slot:"label",className:"flex-1 truncate",children:l.name}),r&&e.jsx(m,{icon:"check",className:"justify-self-end px-2 text-[--color-success]"})]})})},x?._id),e.jsxs("div",{className:"relative contents w-full overflow-hidden",children:[e.jsxs(A,{className:"flex h-7 flex-shrink-0 items-center justify-between gap-2 px-3 py-1 text-sm font-bold text-[--hl]",children:[e.jsx("span",{children:"Collection Environments"}),e.jsx(b,{onPress:i,"aria-label":"Manage collection environments",className:"flex aspect-square h-6 flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] outline-none ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:e.jsx(m,{icon:"edit"})})]}),e.jsx(W,{"aria-label":"Select a Collection Environment",selectionMode:"single",items:j,selectedKeys:[t._id||c._id||""],disallowEmptySelection:!0,onSelectionChange:l=>{if(l==="all"||!l)return;const[r]=l.values();M.submit({organizationId:w,projectId:C,workspaceId:g,environmentId:r.toString()}),qe.emit("CHANGE_ACTIVE_ENV",g)},className:"max-h-[fit-content] flex-1 select-none overflow-y-auto p-2 text-sm focus:outline-none",children:l=>e.jsx(X,{textValue:l.name,className:`flex h-[--line-height-xs] w-full items-center gap-2 truncate whitespace-nowrap rounded bg-transparent pr-1 text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none ${l.isBase?"pl-[--padding-md]":"pl-8"}`,children:({isSelected:r})=>e.jsxs(v.Fragment,{children:[e.jsx("span",{style:{borderColor:l.color??"var(--color-font)"},children:e.jsx(m,{icon:l.isPrivate?"lock":I?["fab","git-alt"]:k?"globe-americas":"file-arrow-down",className:"w-5 text-xs",style:{color:l.color??"var(--color-font)"}})}),e.jsx(ae,{slot:"label",className:"flex-1 truncate",children:l.name}),r&&e.jsx(m,{icon:"check",className:"justify-self-end px-2 text-[--color-success]"})]})})},t._id)]})]})})})]})},as="â€¢",os=()=>as.repeat(4+Math.random()*7),ls=({onShow:a,initiallyHidden:d=!0,text:i,maskText:n=!0})=>{const{settings:s}=Pe(),{showPasswords:t}=s,[x,u]=v.useState(null);v.useEffect(()=>{n&&u(os())},[n]);const[c,f]=v.useState(t??d),y=v.useCallback(()=>{a?.(),f(!c)},[c,a]);return e.jsxs("span",{className:"monospace",children:[e.jsx("i",{className:`fa ${c?"fa-eye":"fa-eye-slash"} cursor-pointer pr-[--padding-xs]`,onClick:y}),c?e.jsx("span",{className:"selectable",children:i}):x]})},is=({onClose:a})=>{const{organizationId:d,projectId:i,workspaceId:n}=O(),s=Le(),t=v.useId(),[x,u]=v.useState(""),[c,f]=v.useState(""),[y,w]=v.useState("");return v.useEffect(()=>{s.data&&s.data.certificate&&a()},[s.data,a]),e.jsx(z,{isOpen:!0,isDismissable:!0,onOpenChange:C=>{!C&&a()},className:"fixed left-0 top-0 z-20 flex h-[--visual-viewport-height] w-full items-center justify-center bg-black/30",children:e.jsx(B,{onOpenChange:C=>{!C&&a()},className:"flex w-full max-w-lg flex-col rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] p-[--padding-lg] text-[--color-font]",children:e.jsx(K,{className:"flex h-full flex-1 flex-col overflow-y-hidden outline-none",children:({close:C})=>e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-y-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(A,{slot:"title",className:"text-2xl",children:"Add Client Certificate"}),e.jsx(b,{className:"flex aspect-square h-6 flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",onPress:C,children:e.jsx(m,{icon:"x"})})]}),e.jsx("div",{className:"flex w-full flex-1 basis-96 select-none flex-col gap-2 overflow-y-auto rounded px-2",children:e.jsxs("form",{id:t,className:"flex flex-col gap-2",onSubmit:g=>{g.preventDefault();const S=new FormData(g.currentTarget),k=Object.fromEntries(S.entries());s.submit({organizationId:d,projectId:i,workspaceId:n,patch:{...k,isPrivate:k.isPrivate==="on"}})},children:[e.jsx(_,{name:"parentId",type:"text",value:n,readOnly:!0,className:"hidden"}),e.jsxs(V,{className:"flex flex-col gap-1","aria-label":"Host",children:[e.jsx("span",{className:"text-sm",children:"Host"}),e.jsx(_,{name:"host",type:"text",required:!0,placeholder:"example.com",className:"w-full rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] py-1 pl-2 pr-7 text-[--color-font] transition-colors focus:outline-none focus:ring-1 focus:ring-[--hl-md]"})]}),e.jsxs(ge,{className:"rounded-sm border border-solid border-[--hl-md]",children:[e.jsxs(be,{className:"flex items-center border-b border-solid border-[--hl-md]",children:[e.jsx(Q,{className:"flex items-center gap-2 px-2 py-1 text-[--color-font] outline-none transition-colors hover:bg-[--hl-sm] hover:bg-opacity-90 hover:no-underline aria-selected:bg-[--hl-md]",id:"certificate",children:"Certificate"}),e.jsx(Q,{className:"flex items-center gap-2 px-2 py-1 text-[--color-font] outline-none transition-colors hover:bg-[--hl-sm] hover:bg-opacity-90 hover:no-underline aria-selected:bg-[--hl-md]",id:"pfx",children:"PFX or PKCS12"})]}),e.jsx(Y,{className:"p-2",id:"pfx",children:e.jsxs(V,{className:"flex flex-col gap-1","aria-label":"Host",children:[e.jsx("span",{className:"text-sm",children:"PFX or PKCS12 file"}),e.jsx(L,{allowsMultiple:!1,onSelect:g=>{if(!g)return;const k=Array.from(g)[0];u(window.webUtils.getPathForFile(k))},children:e.jsxs(b,{className:"flex h-full flex-shrink-0 items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-sm] px-2 py-1 text-base text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] aria-selected:bg-[--hl-sm]",children:[!x&&e.jsx(m,{icon:"plus"}),e.jsx("span",{className:"truncate",title:x,children:x||"Add PFX or PKCS12 file"})]})}),e.jsx(_,{name:"pfx",type:"text",value:x,readOnly:!0,className:"hidden"})]})}),e.jsxs(Y,{className:"flex w-full flex-col gap-2 overflow-hidden p-2",id:"certificate",children:[e.jsxs(V,{className:"flex flex-1 flex-col gap-1","aria-label":"Certificate",children:[e.jsx("span",{className:"text-sm",children:"Certificate"}),e.jsx(L,{allowsMultiple:!1,onSelect:g=>{if(!g)return;const k=Array.from(g)[0];f(window.webUtils.getPathForFile(k))},children:e.jsxs(b,{"data-test-id":"add-client-certificate-file-chooser",className:"flex h-full flex-shrink-0 items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-sm] px-2 py-1 text-base text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] aria-selected:bg-[--hl-sm]",children:[!c&&e.jsx(m,{icon:"plus"}),e.jsx("span",{className:"truncate",title:c,children:c||"Add certificate file"})]})}),e.jsx(_,{name:"cert",type:"text",value:c,readOnly:!0,className:"hidden"})]}),e.jsxs(V,{className:"flex flex-1 flex-col gap-1","aria-label":"Key",children:[e.jsx("span",{className:"text-sm",children:"Key"}),e.jsx(L,{allowsMultiple:!1,onSelect:g=>{if(!g)return;const k=Array.from(g)[0];w(window.webUtils.getPathForFile(k))},children:e.jsxs(b,{"data-test-id":"add-client-certificate-key-file-chooser",className:"flex h-full flex-shrink-0 items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-sm] px-2 py-1 text-base text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] aria-selected:bg-[--hl-sm]",children:[!y&&e.jsx(m,{icon:"plus"}),e.jsx("span",{className:"truncate",title:y,children:y||"Add key file"})]})}),e.jsx(_,{name:"key",type:"text",value:y,readOnly:!0,className:"hidden"})]})]})]}),e.jsxs(V,{className:"flex flex-col gap-1","aria-label":"Passphrase",children:[e.jsx("span",{className:"text-sm",children:"Passphrase"}),e.jsx(_,{name:"passphrase",type:"password",className:"w-full rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] py-1 pl-2 pr-7 text-[--color-font] transition-colors focus:outline-none focus:ring-1 focus:ring-[--hl-md]"})]})]})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(b,{onPress:C,className:"rounded-sm border border-solid border-[--hl-md] px-3 py-2 text-[--color-font] transition-colors hover:border-[--hl-sm] hover:bg-opacity-90 hover:no-underline",children:"Cancel"}),e.jsxs(b,{type:"submit",form:t,className:"flex items-center gap-2 rounded-sm border border-solid border-[--hl-md] bg-[rgba(var(--color-surprise-rgb),var(--tw-bg-opacity))] bg-opacity-100 px-3 py-2 text-[--color-font-surprise] transition-colors hover:border-[--hl-sm] hover:bg-opacity-90 hover:no-underline",children:[e.jsx(m,{icon:"plus"}),e.jsx("span",{children:"Add certificate"})]})]})]})})})})},cs=({certificate:a})=>{const{organizationId:d,projectId:i,workspaceId:n}=O(),s=We(),t=He();return e.jsx(je,{className:"flex flex-col items-center justify-between gap-2 p-4 outline-none ring-inset focus:ring-1 focus:ring-[--hl-md]",children:e.jsxs("div",{className:"flex w-full items-center gap-2",children:[!!(a.pfx||a.cert)&&e.jsx(m,{icon:"file-contract",className:"w-4",title:a.pfx||a.cert||""}),a.key&&e.jsx(m,{icon:"key",title:a.key}),e.jsx("div",{className:"flex-1 truncate text-sm text-[--color-font]",children:a.host}),a.passphrase&&e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[e.jsx("span",{className:"text-sm",children:"Password:"}),e.jsx("div",{className:"truncate text-sm",children:e.jsx(ls,{text:a.passphrase})})]}),e.jsxs("div",{className:"flex h-6 items-center gap-2",children:[e.jsx(le,{"data-test-id":"client-certificate-toggle",onChange:x=>{s.submit({organizationId:d,projectId:i,workspaceId:n,patch:{...a,disabled:!x}})},isSelected:!a.disabled,className:"flex h-full w-[12ch] flex-shrink-0 items-center justify-start gap-2 rounded-sm px-2 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md]",children:({isSelected:x})=>e.jsxs(v.Fragment,{children:[e.jsx(m,{icon:x?"toggle-on":"toggle-off",className:`${x?"text-[--color-success]":""}`}),e.jsx("span",{children:x?"Enabled":"Disabled"})]})}),e.jsx(b,{isDisabled:t.state!=="idle",onPress:()=>{t.submit({organizationId:d,projectId:i,workspaceId:n,_id:a._id})},className:"flex aspect-square h-full flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:e.jsx(m,{icon:"trash"})})]})]})})},ds=({caCertificate:a,tip:d})=>{const{organizationId:i,projectId:n,workspaceId:s}=O(),t=Je(),x=Ge(),u=Ue();return e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"text-xl",children:"CA Certificate"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[a?e.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-sm border border-solid border-[--hl-sm] p-4",children:[e.jsx(m,{icon:"file-contract",className:"w-4"}),e.jsx("div",{className:"flex-1 truncate text-sm text-[--color-font]",title:a.path||"",children:a?.path?.split("\\")?.pop()?.split("/")?.pop()}),e.jsxs("div",{className:"flex h-6 items-center gap-2",children:[e.jsx(le,{onChange:c=>{u.submit({organizationId:i,projectId:n,workspaceId:s,patch:{_id:a._id,disabled:!c}})},isSelected:!a.disabled,className:"flex h-full w-[12ch] flex-shrink-0 items-center justify-start gap-2 rounded-sm px-2 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md]",children:({isSelected:c})=>e.jsxs(v.Fragment,{children:[e.jsx(m,{icon:c?"toggle-on":"toggle-off",className:`${c?"text-[--color-success]":""}`}),e.jsx("span",{children:c?"Enabled":"Disabled"})]})}),e.jsx(b,{isDisabled:x.state!=="idle",onPress:()=>{x.submit({organizationId:i,projectId:n,workspaceId:s})},className:"flex aspect-square h-full flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:e.jsx(m,{icon:"trash"})})]})]}):e.jsx("div",{className:"flex items-center justify-between gap-2",children:e.jsx(L,{acceptedFileTypes:[".pem"],allowsMultiple:!1,onSelect:c=>{if(!c)return;const y=Array.from(c)[0];t.submit({organizationId:i,projectId:n,workspaceId:s,patch:{parentId:s,path:window.webUtils.getPathForFile(y)}})},children:e.jsxs(b,{className:"flex h-full flex-1 flex-shrink-0 items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-sm] px-2 py-1 text-base text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] aria-selected:bg-[--hl-sm]",children:[e.jsx(m,{icon:"plus"}),e.jsx("span",{children:"Add CA Certificate"})]})})}),e.jsxs("p",{className:"max-w-[80ch] text-sm italic text-[--hl]",children:[e.jsx(m,{icon:"info-circle",className:"pr-2"}),d||"One or more PEM format certificates in a single file to pass to curl. Overrides the root CA certificate. On MacOS please upload your local Keychain certificates here."]})]})]})},Qs=({onClose:a})=>{const{workspaceId:d}=O(),i=ee(),[n,s]=v.useState(!1),{caCertificate:t,clientCertificates:x}=i;return d?e.jsx(z,{isOpen:!0,isDismissable:!0,onOpenChange:u=>{!u&&a()},className:"fixed left-0 top-0 z-10 flex h-[--visual-viewport-height] w-full items-center justify-center bg-black/30",children:e.jsx(B,{onOpenChange:u=>{!u&&a()},className:"flex h-[calc(100%-var(--padding-xl))] w-full max-w-3xl flex-col rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] p-[--padding-lg] text-[--color-font]",children:e.jsx(K,{className:"flex h-full flex-1 flex-col overflow-hidden outline-none",children:({close:u})=>e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(A,{slot:"title",className:"flex items-center gap-2 text-2xl",children:"Manage Certificates"}),e.jsx(b,{className:"flex aspect-square h-6 flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",onPress:u,children:e.jsx(m,{icon:"x"})})]}),e.jsxs("div",{className:"flex w-full flex-1 basis-96 select-none flex-col gap-6 overflow-hidden overflow-y-auto rounded",children:[e.jsx(ds,{caCertificate:t}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(A,{className:"text-xl",children:"Client Certificates"}),e.jsxs(b,{onPress:()=>{s(!0)},className:"flex h-full flex-shrink-0 items-center justify-center gap-2 rounded-sm px-2 text-base text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] aria-selected:bg-[--hl-sm]",children:[e.jsx(m,{icon:"plus"}),e.jsx("span",{children:"Add client certificate"})]})]}),n&&e.jsx(is,{onClose:()=>{s(!1)}}),e.jsx(ue,{className:"divide-y divide-solid divide-[--hl-md] overflow-y-auto rounded-sm border border-solid border-[--hl-md]",items:x.map(c=>({cert:c,id:c._id,key:c._id})),children:c=>e.jsx(cs,{certificate:c.cert})})]}),e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsx(b,{onPress:u,className:"rounded-sm border border-solid border-[--hl-md] px-3 py-2 text-[--color-font] transition-colors hover:bg-opacity-90 hover:no-underline",children:"Done"})})]})})})}):null},Ys=({onClose:a})=>{const{organizationId:d,projectId:i,workspaceId:n}=O();re(d,"Organization ID is required"),re(i,"Project ID is required"),re(n,"Workspace ID is required");const s=ee(),t=v.useRef(null),{features:x}=pe(),u=Xe(),c=Qe(),f=Ze(),y=Ye(),{baseEnvironment:w,activeEnvironment:C,subEnvironments:g,activeProject:S,activeWorkspaceMeta:k}=s,[I,M]=v.useState(C._id),D=!!(Ne(S)&&!k?.gitRepositoryId),j=!!(x.gitSync.enabled&&k?.gitRepositoryId),o=[w,...g].find(r=>r._id===I),N=v.useMemo(()=>o?es.test(JSON.stringify(o.data)):!1,[o]),$=!o?.kvPairData?.some(r=>r.type===Re.SECRET),P=[{id:"duplicate",name:"Duplicate",icon:"copy",action:async r=>{y.submit({organizationId:d,projectId:i,workspaceId:n,environmentId:r._id})}},{id:"delete",name:"Delete",icon:"trash",action:async r=>{Me(Te,{title:"Delete Environment",message:`Are you sure you want to delete "${r.name}"?`,addCancel:!0,okLabel:"Delete",onConfirm:async()=>{c.submit({organizationId:d,projectId:i,workspaceId:n,environmentId:r._id}),M(w._id)}})}}],T=[{id:"shared",name:"Shared environment",description:`${j?"Synced with Git Sync and exportable":D?"Synced with Insomnia Sync and exportable":"Exportable"}`,icon:j?["fab","git-alt"]:D?"globe-americas":"file-arrow-down",action:async()=>{u.submit({organizationId:d,projectId:i,workspaceId:n,params:{isPrivate:!1}})}},{id:"private",name:"Private environment",description:"Local and not exportable",icon:"lock",action:async()=>{u.submit({organizationId:d,projectId:i,workspaceId:n,params:{isPrivate:!0}})}}],q=r=>{if(t.current?.isValid()&&o){const{object:h,propertyOrder:p}=r;f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{data:h,dataPropertyOrder:p},environmentId:o._id})}},se=r=>{if(o){const h=ze(r);f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{data:h.data,dataPropertyOrder:h.dataPropertyOrder,kvPairData:r},environmentId:o._id})}},l=Ie({getItems:r=>[...r].map(h=>({"text/plain":h.toString()})),onReorder(r){const h=[...r.keys][0],p=g.find(F=>F._id===h),E=g.find(F=>F._id===r.target.key);if(!p||!E)return;const G=r.target.dropPosition;if(G==="before"){const F=g.findIndex(te=>te._id===E._id),R=g[F-1];R?p.metaSortKey=(R.metaSortKey+E.metaSortKey)/2:p.metaSortKey=E.metaSortKey-1}if(G==="after"){const F=g.findIndex(te=>te._id===E._id),R=g[F+1];R?p.metaSortKey=(R.metaSortKey+E.metaSortKey)/2:p.metaSortKey=E.metaSortKey+1}f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{metaSortKey:p.metaSortKey},environmentId:p._id})},renderDropIndicator(r){return r.type==="item"?r.dropPosition==="before"&&r.key===w._id?e.jsx(ne,{target:r,className:"hidden"}):e.jsx(ne,{target:r,className:"outline outline-1 outline-[--color-surprise]"}):e.jsx(ne,{target:r,className:"outline outline-1 outline-[--color-surprise]"})}});return e.jsx(z,{isOpen:!0,onOpenChange:r=>{!r&&a()},className:"fixed left-0 top-0 z-10 flex h-[--visual-viewport-height] w-full items-center justify-center bg-black/30",children:e.jsx(B,{onOpenChange:r=>{!r&&a()},className:"flex h-[calc(100%-var(--padding-xl))] w-[calc(100%-var(--padding-xl))] flex-col rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] p-[--padding-lg] text-[--color-font]",children:e.jsx(K,{className:"flex h-full flex-1 flex-col overflow-hidden outline-none",children:({close:r})=>e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(A,{slot:"title",className:"text-2xl",children:"Manage Environments"}),e.jsx(b,{className:"flex aspect-square h-6 flex-shrink-0 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",onPress:r,children:e.jsx(m,{icon:"x"})})]}),e.jsxs("div",{className:"flex w-full flex-1 basis-96 select-none divide-x divide-solid divide-[--hl-md] overflow-hidden overflow-y-auto rounded border border-solid border-[--hl-sm]",children:[e.jsx(ue,{"aria-label":"Environments",items:[w,...g],className:"w-full max-w-xs flex-shrink-0 overflow-y-auto py-[--padding-xs] data-[empty]:py-0",disallowEmptySelection:!0,selectionMode:"single",selectionBehavior:"replace",selectedKeys:[I],dragAndDropHooks:l.dragAndDropHooks,onSelectionChange:h=>{if(h!=="all"){const[p]=h.values();M(p.toString())}},children:h=>e.jsx(je,{id:h._id,textValue:h.name,className:"group select-none outline-none",children:e.jsxs("div",{className:`${h.parentId===n?"pl-4":"pl-8"} relative flex h-[--line-height-xs] w-full select-none items-center gap-2 overflow-hidden pr-4 text-[--hl] outline-none transition-colors group-hover:bg-[--hl-xs] group-focus:bg-[--hl-sm] group-aria-selected:text-[--color-font]`,children:[e.jsx("span",{className:"absolute left-0 top-0 h-full w-[2px] bg-transparent transition-colors group-aria-selected:bg-[--color-surprise]"}),e.jsx(m,{icon:h.isPrivate?"lock":j?["fab","git-alt"]:D?"globe-americas":"file-arrow-down",className:"w-5",style:{color:h.color||void 0}}),e.jsx(me,{value:h.name,name:"name",ariaLabel:"Environment name",className:"flex-1 px-1 hover:!bg-transparent",onSubmit:p=>{p&&f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{name:p},environmentId:h._id})}}),h.parentId!==n&&e.jsxs(ce,{children:[e.jsx(b,{"aria-label":"Environment Actions",className:"flex aspect-square h-6 items-center justify-center rounded-sm text-sm text-[--color-font] opacity-0 ring-1 ring-transparent transition-all hover:bg-[--hl-xs] hover:opacity-100 focus:opacity-100 focus:ring-inset focus:ring-[--hl-md] group-hover:opacity-100 group-focus:opacity-100 data-[pressed]:bg-[--hl-sm] data-[pressed]:opacity-100",children:e.jsx(m,{icon:"caret-down"})}),e.jsx(Z,{className:"flex min-w-max flex-col overflow-y-hidden",children:e.jsx(de,{"aria-label":"Environment Actions menu",selectionMode:"single",onAction:p=>{P.find(({id:E})=>p===E)?.action(h)},items:P,className:"min-w-max select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] py-2 text-sm shadow-lg focus:outline-none",children:p=>e.jsxs(xe,{id:p.id,className:"flex h-[--line-height-xs] w-full items-center gap-2 whitespace-nowrap bg-transparent px-[--padding-md] text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-selected:font-bold","aria-label":p.name,children:[e.jsx(m,{className:"w-5",icon:p.icon}),e.jsx("span",{children:p.name})]},p.id)})})]}),h.parentId===n&&e.jsxs(ce,{children:[e.jsx(b,{"aria-label":"Create Environment","data-testid":"CreateEnvironmentDropdown",className:"flex aspect-square h-6 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] data-[pressed]:bg-[--hl-sm]",children:e.jsx(m,{icon:"plus-circle"})}),e.jsx(Z,{className:"flex min-w-max flex-col overflow-y-hidden",children:e.jsx(de,{"aria-label":"Create Environment menu",selectionMode:"single",onAction:p=>{T.find(({id:E})=>p===E)?.action(h)},items:T,className:"min-w-max select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] py-2 text-sm shadow-lg focus:outline-none",children:p=>e.jsxs(xe,{id:p.id,className:"flex w-full flex-col gap-1 whitespace-nowrap bg-transparent px-[--padding-md] py-2 text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-selected:font-bold","aria-label":p.name,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-5",icon:p.icon}),e.jsx("span",{children:p.name})]}),e.jsx(ae,{slot:"description",className:"text-xs text-[--hl]",children:p.description})]},p.id)})})]})]})},h._id)}),e.jsxs("div",{className:"flex flex-1 flex-col divide-y divide-solid divide-[--hl-md] overflow-hidden",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2 overflow-hidden px-[--padding-sm]",children:[e.jsxs(A,{className:"flex flex-grow items-center gap-2 overflow-hidden px-4 py-2 text-lg",children:[e.jsx(m,{style:{color:o?.color||""},className:"w-4",icon:o?.isPrivate?"lock":j?["fab","git-alt"]:D?"globe-americas":"file-arrow-down"}),e.jsx(me,{value:o?.name||"",name:"name",ariaLabel:"Environment name",className:"flex-1 px-1",onSubmit:h=>{h&&f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{name:h},environmentId:I})}})]}),o&&o.parentId!==n&&e.jsxs(V,{className:"ml-auto mr-2 flex flex-shrink-0 items-center gap-2 rounded-sm bg-[--hl-sm] px-2 py-1 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] data-[pressed]:bg-[--hl-sm]",children:[e.jsx("span",{children:"Color:"}),e.jsx("input",{onChange:h=>{const p=h.target.value;f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{color:p},environmentId:o._id})},type:"color",value:o?.color||""})]}),o&&$&&e.jsx(le,{onChange:h=>{const p=(G,F)=>{f.submit({organizationId:d,projectId:i,workspaceId:n,patch:{environmentType:G,kvPairData:F},environmentId:o._id})},E=!!t.current?.isValid();ss(h,o,E,p)},isSelected:o?.environmentType!==U.KVPAIR,className:"flex w-[14ch] flex-shrink-0 items-center justify-start gap-2 rounded-sm px-2 py-1 text-sm text-[--color-font] ring-1 ring-transparent transition-colors hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md]","aria-label":o?.environmentType!==U.KVPAIR?"Table Edit":"Raw Edit",children:({isSelected:h})=>e.jsxs(v.Fragment,{children:[e.jsx(m,{icon:h?"toggle-off":"toggle-on",className:`${h?"":"text-[--color-success]"}`}),e.jsx("span",{children:"Table View"})]})})]}),o&&(o.environmentType===U.JSON||!o.environmentType)&&e.jsx(ts,{ref:t,onChange:q,environmentInfo:{object:o.data,propertyOrder:o.dataPropertyOrder}},o._id),o&&o.environmentType===U.KVPAIR&&e.jsx(ns,{data:o.kvPairData||[],onChange:se},o._id)]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[N&&e.jsxs("p",{className:"warning text-sm italic",children:[e.jsx(m,{icon:"exclamation-circle"}),e.jsxs("a",{href:Ae,children:[" ","We suggest to save your response into an environment variable using after-response script."]})]}),e.jsxs("p",{className:"text-sm italic",children:["* Environment data can be used for ",e.jsx("a",{href:De,children:"Nunjucks Templating"})," in your requests."]})]}),e.jsx(b,{onPress:r,className:"rounded-sm border border-solid border-[--hl-md] px-3 py-2 text-[--color-font] transition-colors hover:bg-opacity-90 hover:no-underline",children:"Close"})]})]})})})})};class xs extends v.PureComponent{constructor(){super(...arguments),this.state={renderedText:"",error:""}}async _render(){const{render:d,children:i}=this.props;if(!i){this.setState({renderedText:"",error:""});return}try{const n=await d(i);this.setState({renderedText:n,error:""})}catch(n){this.setState({error:n.message})}}componentDidMount(){this._render()}componentDidUpdate(){this._render()}render(){return this.state.error?e.jsx("span",{className:"font-error",style:{fontSize:"0.9em",fontStyle:"italic"},children:this.state.error||"Unknown Error"}):this.state.renderedText||""}}const he=a=>{const{handleRender:d}=ve();return e.jsx(xs,{...a,render:d})},ms=2147483647e3,fs=5;function H(a,d=fs){const i=[];for(let n=0;n<a.length;n+=d)i.push(a.slice(n,n+d));return i}const Zs=({setIsOpen:a})=>{const{handleRender:d}=ve(),{organizationId:i,projectId:n,workspaceId:s}=O(),{activeCookieJar:t}=ee(),x=rs(),[u,c]=v.useState(0),[f,y]=v.useState(""),[w,C]=v.useState(H(t?.cookies||[])),g=(j,o)=>{x.submit({organizationId:i,projectId:n,workspaceId:s,patch:o,cookieJarId:j}),C(H(o.cookies))},S=async j=>{y(j);const o=[];for(const $ of t?.cookies||[])try{o.push(await d($))}catch{o.push($)}if(!j){C(H(o));return}const N=[];o.forEach($=>{we(j,JSON.stringify($),{splitSpace:!0})&&N.push($)}),C(H(N))},k=j=>{const o=t;o.cookies=t.cookies.filter(N=>N.id!==j),g(t._id,o)},I=()=>{const j=t;j.cookies=[],g(t._id,j)},M=()=>{const j=t;j.cookies=[{id:Be(),key:"foo",value:"bar",domain:"domain.com",expires:ms,path:"/",secure:!1,httpOnly:!1},...t.cookies],g(t._id,j)},D=j=>{const o=fe(j);let N=null;o.expires&&ie(new Date(o.expires))&&(N=new Date(o.expires)),o.expires=N;const $=fe(t),P=t.cookies.findIndex(T=>T.id===j.id);if(P<0){console.warn(`Could not find cookie with id=${j.id} to edit`);return}$.cookies=[...$.cookies.slice(0,P),o,...$.cookies.slice(P+1)],g($._id,$)};return e.jsx(z,{isDismissable:!0,isOpen:!0,onOpenChange:a,className:"theme--transparent-overlay fixed left-0 top-0 z-10 flex h-[--visual-viewport-height] w-full justify-center bg-[--color-bg] py-[100px]",children:e.jsx(B,{className:"theme--dialog h-fit max-h-full w-full max-w-[900px] overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] p-[32px] text-[--color-font]",children:e.jsx(K,{className:"relative outline-none",children:({close:j})=>e.jsxs(e.Fragment,{children:[t&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(A,{slot:"title",className:"mb-[14px] text-[22px] leading-[34px]",children:"Manage Cookies"}),e.jsx(b,{onPress:j,className:"fa fa-times absolute right-0 top-0 text-xl"}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsxs(Fe,{className:"flex w-[50%] items-center gap-2 rounded bg-[--hl-xs] px-[8px] py-[4px]",children:[e.jsx("i",{className:"fa fa-search"}),e.jsx(_e,{value:f,onChange:S,"aria-label":"Cookie search query",className:"flex-1",children:e.jsx(_,{className:"w-full",placeholder:"Search cookies"})}),f&&e.jsx(b,{onPress:()=>S(""),children:e.jsx(m,{icon:"circle-xmark",className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-end gap-4",children:[e.jsxs(b,{className:"flex min-w-[75px] items-center gap-2 px-2 py-1 text-sm font-semibold text-[--color-font] transition-all aria-pressed:bg-[--hl-sm]",onPress:M,children:[e.jsx(m,{icon:"plus"})," Add Cookie"]}),e.jsxs(ye,{className:"flex min-w-[85px] items-center gap-2 px-2 py-1 text-sm font-semibold text-[--color-font] transition-all aria-pressed:bg-[--hl-sm]",confirmMessage:"Confirm",onClick:I,children:[e.jsx(m,{icon:"trash"})," Delete All"]})]})]}),e.jsx("hr",{className:"my-[14px] border"}),w.length===0?e.jsx("div",{className:"flex h-[200px] items-center justify-center",children:e.jsx("p",{className:"text-[12px] text-[--color-font]",children:f?`No cookies match your search: "${f}"`:"No cookies found."})}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{cookies:w[u]||[],onCookieDelete:k,onUpdateCookie:D}),e.jsx(ps,{isPrevDisabled:u===0,isNextDisabled:w.length===1||u===w.length-1,isHidden:w.length===1,page:u+1,totalPages:w.length,onPrevPress:()=>{c(u-1)},onNextPress:()=>{c(u+1)}})]})]}),e.jsxs("div",{className:"mt-[2rem] flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-[12px] italic",children:"* cookies are automatically sent with relevant requests"}),e.jsx(b,{className:"flex h-full items-center justify-center gap-2 rounded-md border border-solid border-[--hl-md] bg-[rgba(var(--color-surprise-rgb),var(--tw-bg-opacity))] bg-opacity-100 px-4 py-2 text-sm font-semibold text-[--color-font-surprise] ring-1 ring-transparent transition-all hover:bg-opacity-80 focus:ring-inset focus:ring-[--hl-md] aria-pressed:opacity-80",onPress:j,children:"Done"})]})]})})})})},hs=({cookies:a,onCookieDelete:d,onUpdateCookie:i})=>{const[n,s]=v.useState(null);return e.jsxs(e.Fragment,{children:[e.jsx(W,{"aria-label":"Cookies list",className:"flex min-h-[200px] w-full flex-col",children:a.map((t,x)=>{const u=oe.fromJSON(t),c=u?ke(u):"";return t.expires&&!ie(new Date(t.expires))&&(t.expires=null),e.jsxs(X,{id:t.id,"data-testid":`cookie-test-iteration-${x}`,textValue:t.domain,className:"flex min-h-[40px] justify-between gap-2 rounded-sm px-2 py-1 leading-[36px] outline-none odd:bg-[--hl-xs]",children:[e.jsx("span",{className:"flex min-w-[20%] items-center break-all leading-relaxed","data-testid":"cookie-domain",children:e.jsx(he,{children:t.domain||""})}),e.jsx("div",{className:"flex w-[70%] items-center leading-relaxed",children:e.jsx("div",{className:"line-clamp-3 w-full break-all",children:e.jsx(he,{children:c||""})})}),e.jsxs("div",{className:"flex min-w-[10%] items-center justify-end gap-1",children:[e.jsx(b,{className:"flex min-w-[35px] items-center justify-center gap-2 px-2 py-1 text-sm font-semibold text-[--color-font] transition-all aria-pressed:bg-[--hl-sm]",onPress:()=>s(t),children:"Edit"}),e.jsx(ye,{className:"flex min-w-[15px] items-center gap-2 px-2 py-1 text-sm font-semibold text-[--color-font] transition-all aria-pressed:bg-[--hl-sm]",confirmMessage:"",doneMessage:"",onClick:()=>d(t.id),title:"Delete cookie",children:e.jsx("i",{className:"fa fa-trash-o"})})]})]},t.id)})}),n&&e.jsx(us,{isOpen:n!==null,cookie:n,setIsOpen:()=>s(null),onUpdateCookie:i})]})},ps=({isNextDisabled:a,isPrevDisabled:d,isHidden:i,page:n,totalPages:s,onPrevPress:t,onNextPress:x})=>i?null:e.jsx("div",{className:"flex flex-col items-end",children:e.jsxs("div",{className:"flex h-[50px] w-full flex-shrink-0 items-center justify-between",children:[e.jsxs(b,{isDisabled:d,"aria-label":"previous page",className:"flex h-[25px] items-center justify-center gap-[5px] p-1",onPress:t,children:[e.jsx(m,{icon:"arrow-left",className:"text h-[12px] w-[12px] text-[--color-font] disabled:text-[#00000080]"}),e.jsx("p",{className:"m-0 text-[12px] font-normal capitalize leading-[15px] text-[--color-font] disabled:text-[#00000080]",children:"Previous"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"m-0 text-[10px] font-normal leading-[15px] text-[--color-font] disabled:text-[#00000080]",children:n}),e.jsx("p",{className:"m-0 text-[10px] font-normal leading-[15px] text-[--color-font] disabled:text-[#00000080]",children:"of"}),e.jsx("p",{className:"m-0 text-[10px] font-normal leading-[15px] text-[--color-font] disabled:text-[#00000080]",children:s})]}),e.jsxs(b,{isDisabled:a,"aria-label":"next page",className:"flex h-[25px] items-center justify-center gap-[5px] p-1",onPress:x,children:[e.jsx("p",{className:"m-0 text-[12px] font-normal capitalize leading-[15px] text-[--color-font] disabled:text-[#00000080]",children:"Next"}),e.jsx(m,{icon:"arrow-right",className:"h-[12px] w-[12px] text-[--color-font] disabled:text-[#00000080]"})]})]})}),us=({cookie:a,isOpen:d,setIsOpen:i,onUpdateCookie:n})=>{const[s,t]=v.useState(a);let x;s&&s.expires&&ie(new Date(s.expires))&&(x=new Date(s.expires).toISOString().slice(0,16));let u;if(!s)u="";else try{const c=oe.fromJSON(JSON.stringify(s));u=c?ke(c):""}catch(c){console.warn("Failed to parse cookie string",c),u=""}return e.jsx(z,{isDismissable:!0,isOpen:d,onOpenChange:i,className:"theme--transparent-overlay fixed left-0 top-0 z-10 flex h-[--visual-viewport-height] w-full justify-center bg-[--color-bg] py-[100px]",children:e.jsx(B,{className:"theme--dialog h-fit max-h-full w-full max-w-[900px] overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] p-[32px] text-[--color-font]",children:e.jsx(K,{className:"relative outline-none",children:({close:c})=>e.jsxs(e.Fragment,{children:[s&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(A,{slot:"title",className:"mb-[14px] text-[22px] leading-[34px]",children:"Manage Cookies"}),e.jsx(b,{onPress:c,className:"fa fa-times absolute right-0 top-0 text-xl"}),e.jsxs(ge,{"aria-label":"Cookie modify tabs",className:"flex h-full w-full flex-1 flex-col",children:[e.jsxs(be,{className:"flex h-[--line-height-sm] w-full flex-shrink-0 items-center overflow-x-auto border-b border-solid border-b-[--hl-md] bg-[--color-bg]","aria-label":"Request pane tabs",children:[e.jsx(Q,{className:"flex h-full flex-shrink-0 cursor-pointer select-none items-center justify-between gap-2 px-3 py-1 text-[--hl] outline-none transition-colors duration-300 hover:bg-[--hl-sm] hover:text-[--color-font] focus:bg-[--hl-sm] aria-selected:bg-[--hl-xs] aria-selected:text-[--color-font] aria-selected:hover:bg-[--hl-sm] aria-selected:focus:bg-[--hl-sm]",id:"friendly",children:"Friendly"}),e.jsx(Q,{className:"flex h-full flex-shrink-0 cursor-pointer select-none items-center justify-between gap-2 px-3 py-1 text-[--hl] outline-none transition-colors duration-300 hover:bg-[--hl-sm] hover:text-[--color-font] focus:bg-[--hl-sm] aria-selected:bg-[--hl-xs] aria-selected:text-[--color-font] aria-selected:hover:bg-[--hl-sm] aria-selected:focus:bg-[--hl-sm]",id:"raw",children:"Raw"})]}),e.jsxs(Y,{className:"flex w-full flex-1 flex-col overflow-y-auto pt-3",id:"friendly",children:[e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-control form-control--outlined",children:e.jsxs("label",{"data-testid":"CookieKey",children:["Key",e.jsx(J,{id:"cookie-key",defaultValue:(s&&s.key||"").toString(),onChange:f=>t({...s,key:f.trim()})})]})}),e.jsx("div",{className:"form-control form-control--outlined",children:e.jsxs("label",{"data-testid":"CookieValue",children:["Value",e.jsx(J,{id:"cookie-value",defaultValue:(s&&s.value||"").toString(),onChange:f=>t({...s,value:f.trim()})})]})})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("div",{className:"form-control form-control--outlined",children:e.jsxs("label",{"data-testid":"CookieDomain",children:["Domain",e.jsx(J,{id:"cookie-domain",defaultValue:(s&&s.domain||"").toString(),onChange:f=>t({...s,domain:f.trim()})})]})}),e.jsx("div",{className:"form-control form-control--outlined",children:e.jsxs("label",{"data-testid":"CookiePath",children:["Path",e.jsx(J,{id:"cookie-path",defaultValue:(s&&s.path||"").toString(),onChange:f=>t({...s,path:f.trim()})})]})})]}),e.jsx("div",{className:"form-control form-control--outlined",children:e.jsxs("label",{"data-testid":"CookieExpires",children:["Expires",e.jsx("input",{type:"datetime-local",defaultValue:x,className:"calendar-invert",onChange:f=>t({...s,expires:f.target.value})})]})}),e.jsxs("div",{className:"grid w-full grid-cols-2 gap-2",children:[e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{className:"space-left",type:"checkbox",name:"secure",defaultChecked:s.secure||!1,onChange:f=>t({...s,secure:f.target.checked})}),"Secure"]}),e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{className:"space-left",type:"checkbox",name:"httpOnly",defaultChecked:s.httpOnly||!1,onChange:f=>t({...s,httpOnly:f.target.checked})}),"HttpOnly"]})]}),e.jsx("div",{className:"grid w-full grid-cols-2 gap-2",children:e.jsxs("label",{className:"flex items-center gap-1",children:[e.jsx("input",{className:"space-left",type:"checkbox",name:"hostOnly",defaultChecked:s.hostOnly||!1,onChange:f=>t({...s,hostOnly:f.target.checked})}),"HostOnly"]})})]}),e.jsx(Y,{className:"flex w-full flex-1 flex-col overflow-y-auto pt-3",id:"raw",children:e.jsx("div",{className:"form-control form-control--outlined",children:e.jsxs("label",{children:["Raw Cookie String",e.jsx("input",{type:"text",onChange:f=>{try{const y=oe.parse(f.target.value,{loose:!0})?.toJSON();y&&(y.id=s.id,y.hostOnly=s.hostOnly,t(y))}catch(y){console.warn(`Failed to parse cookie string "${f.target.value}"`,y);return}},defaultValue:u})]})})})]})]})}),e.jsx("div",{className:"mt-[2rem] flex items-center justify-end",children:e.jsx(b,{className:"flex h-full items-center justify-center gap-2 rounded-md border border-solid border-[--hl-md] bg-[rgba(var(--color-surprise-rgb),var(--tw-bg-opacity))] bg-opacity-100 px-4 py-2 text-sm font-semibold text-[--color-font-surprise] ring-1 ring-transparent transition-all hover:bg-opacity-80 focus:ring-inset focus:ring-[--hl-md] aria-pressed:opacity-80",onPress:()=>{n(s),i(!1)},children:"Done"})})]})})})})};export{Zs as C,Ws as D,Xs as E,Ys as W,Qs as a,ds as b};
//# sourceMappingURL=cookies-modal-CEq170Q6.js.map
