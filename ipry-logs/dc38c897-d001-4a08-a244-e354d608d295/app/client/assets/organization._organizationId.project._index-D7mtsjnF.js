import{h as Fe}from"./chunk-WY5IRSCW-1dc6FieG.js";import{w as He,r as Ke,b as Je,a as Qe,e as Xe,c as Ye}from"./chunk-OIYGIGL5-BYynBxW5.js";import{j as e}from"./jsx-runtime-cpqHEc2t.js";import{r as j}from"./index-b8gibUUP.js";import{$ as w}from"./Button-Pc6dXscm.js";import{s as Ze,p as et,V as tt,m as A,h as st,n as ot,o as at,q as rt,r as nt,t as it,a as ct,D as lt,v as je,g as ve,c as Z,d as ee,w as ye,x as dt,G as pt,L as mt,C as gt,O as ut,W as ft,y as ht,z as xt,B as bt,T as jt,F as vt,N as yt,H as wt,J as we,K as Nt,Q as Pt}from"./trial.start-yrr1pYcE.js";import{$ as Ne}from"./Heading-CJLhoRaQ.js";import{u as O,a as Pe,b as $t,c as $e,d as Se}from"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-CJN0pku1.js";import{a as te,$ as St,b as It,c as Ct}from"./index-CiWR7xsz.js";import{E as Ft,P as kt,a as Ie,b as Rt}from"./error-boundary-qQv-jeYH.js";import{l as Mt}from"./session-Dp07jz9w.js";import{u as Dt,e as oe,J as D,a as ae,k as re,b as $,w as ke,K as Lt,z as Ot,F as se,M as Ce,N as _t,O as zt,Q as At,R as Tt,l as Et,r as T,D as Ut,h as Bt,T as Wt,U as Gt,V as qt,W as Vt,X as Ht}from"./index-BnTlsbFl.js";import{d as Kt,s as Jt}from"./index-wZAP8gf2.js";import{S as Qt}from"./analytics-fpOjxorv.js";import{I as n}from"./icon-pbM3MSP9.js";import{i as Xt}from"./insomnia-fetch-B_XbrnGh.js";import{i as E}from"./invariant-DVddvGrP.js";import"./_commonjsHelpers-CE1G-McA.js";import"./utils-BWA8Q1_N.js";import"./organization._organizationId.project.new-D3C_sj1w.js";import"./router-BoVIwh1i.js";import"./index-B0jEcytd.js";import"./useControlledState-CVI9bVg4.js";import"./RSPContexts-DCUrjzvU.js";import"./Text-CNZDhubC.js";import"./VisuallyHidden-DFfuR22R.js";import"./index-BBURUpBQ.js";import"./migrate-projects-into-organization-CxpdXy_W.js";import"./Form-xjwDMhyX.js";import"./import-DfaWnrdO.js";import"./lodash-CnYLY2KZ.js";import"./sax-DTOkft0z.js";import"./index-DkUPaXby.js";import"./auth.authorize-CVUDGUam.js";import"./auth-session-provider.client-B6EymBM1.js";import"./vault-key.client-BYwC5SBL.js";import"./auth.default-browser-redirect-Dz15uuKH.js";import"./auth.logout-Bgkq1Ur9.js";import"./cloud-credentials.create-D29FOB74.js";import"./git-credentials.github.complete-sign-in-QUucA-_J.js";import"./git-credentials.gitlab.complete-sign-in-iSdK124j.js";import"./import.scan-CIM-8ira.js";import"./tooltip-BiEx1s0w.js";import"./PortalProvider-CgpNn0eI.js";import"./ai.generate-commit-messages-D7XzOLO8.js";import"./format-i_2FlR3N.js";import"./event-bus-gjQB7sSy.js";import"./trial.check-st6_Q4W5.js";import"./untracked-projects-Dxl3yYQQ.js";import"./commands-CpETkOnR.js";import"./organization._organizationId.project._projectId.workspace.update-BTK7AG3H.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request.new-mock-send-DTyjZaRX.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.mock-server.mock-route._mockRouteId.update-L_Ehr73N.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId-CCT5t53Y.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request-group._requestGroupId-ClXMvU4m.js";import"./index-9z9WB_nm.js";import"./xpath-V_VlYgIe.js";import"./index-BKSSlv8C.js";import"./index-BMm92w-c.js";import"./git.branch.checkout-24mct9lT.js";import"./git.fetch-V7uv_IT7.js";import"./git.push-C-wcZJjF.js";import"./git.repo-BBQti4ki.js";import"./git.status-qLD8fOhB.js";import"./git.branch.delete-BnBpM4jO.js";import"./git.branch.new-BvBAmjXB.js";import"./git.branches-DSfOBTH4.js";import"./git.changes-CufBSoA0.js";import"./git.log-VScJjeAs.js";import"./git.migrate-legacy-insomnia-folder-to-file-Cn4qXbei.js";import"./git.commit-BOTBEKdr.js";import"./git.commits-C721-25t.js";import"./git.diff-rvyD93UG.js";import"./git.discard-yWCe4llX.js";import"./git.stage-WRvQ9YR0.js";import"./git.unstage-BG9AvbEd.js";import"./organization._organizationId.permissions-ce3pUO4N.js";import"./git.remote-branches-D25XWswd.js";import"./git.reset-DI5KZlh1.js";import"./git.update-Ct4Hysyl.js";import"./git-credentials.github-eh2MnRiC.js";import"./git-credentials.github.init-sign-in-MvedveJK.js";import"./git-credentials.github.sign-out-HzzMex4W.js";import"./git-credentials.gitlab-C9jV75uM.js";import"./git-credentials.gitlab.init-sign-in-DZFf8KTH.js";import"./git-credentials.gitlab.sign-out-DlPqV6dO.js";import"./organization._organizationId.project._projectId.delete-Zh6QxqDG.js";import"./git.init-clone-Bwgsynf-.js";import"./organization._organizationId.project._projectId.update-CnIPYBnW.js";import"./insomnia-icon-DsDa0lSD.js";import"./organization._organizationId.project._projectId.move-CGW0jVUY.js";import"./organization._organizationId.project._projectId.move-workspace-CWMxcFOA.js";import"./git.repository-tree-jzi-oT2U.js";import"./git.clone-Dz6ZsdrO.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request.new-DZNrbQ0p.js";import"./auth.clear-vault-key-B0vAvdAY.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.environment.set-active-DQD_GOKm.js";import"./remote-files-QiiU5lTV.js";import"./organization._organizationId.collaborators-BP2ctKnQ.js";import"./organization._organizationId.collaborators.invites._invitationId-hJMODP0K.js";import"./organization._organizationId.collaborators.invites._invitationId.reinvite-i6_4wOiO.js";import"./organization._organizationId.collaborators-check-seats-DsqfBJzh.js";import"./organization._organizationId.members._userId.roles-D3CH43Zf.js";import"./organization._organizationId.collaborators-search-DSW9uxb9.js";import"./resource.usage-CbBoS-Ts.js";import"./organization._organizationId.project._projectId-CtDmbbW4.js";import"./cloud-credentials._cloudCredentialId.delete-CHPMwoBx.js";import"./cloud-credentials._cloudCredentialId.update-RaJlpXVy.js";import"./auth.create-vault-key-B-0jQzTT.js";import"./auth.update-vault-salt-BBWvZ0Tc.js";import"./auth.reset-vault-key-YbpkP1rp.js";import"./auth.validate-vault-key-UWRH3JbX.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-meta-CRlGCFc9.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request._requestId.update-payload-DHsO7wRp.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request-group._requestGroupId.update-BcedaLUm.js";import"./organization._organizationId.project._projectId.workspace._workspaceId.debug.request-group._requestGroupId.update-meta-szcm3PeP.js";import"./settings.update-BK5WtJcK.js";const Yt={design:"Document",collection:"Collection","mock-server":"Mock Server",unsynced:"Unsynced",environment:"Environment",mcp:"MCP Client"},Zt={design:"file",collection:"bars","mock-server":"server",unsynced:"cloud-download",environment:"code"},es={design:"bg-[--color-info]",collection:"bg-[--color-surprise]","mock-server":"bg-[--color-warning]",unsynced:"bg-[--hl-md]",environment:"bg-[--color-font]"},ts={design:"text-[--color-font-info]",collection:"text-[--color-font-surprise]","mock-server":"text-[--color-font-warning]",unsynced:"text-[--color-font]",environment:"text-[--color-bg]"};async function ss({projectId:l}){const s=await re.findByParentId(l),[a,i,d]=await Promise.all([$.find(ke.type,{parentId:{$in:s.map(o=>o._id)}}),$.find(Lt.type,{parentId:{$in:s.map(o=>o._id)}}),$.find(Ot.type,{parentId:{$in:s.map(o=>o._id)}})]),p=await $.find(ae.type,{parentId:{$in:a.map(o=>o.gitRepositoryId).filter(se)}});return s.map(o=>{const b=i.find(x=>x.parentId===o._id),f=d.find(x=>x.parentId===o._id);let h=null,S=null,k=null;if(b)try{const x=et(b.contents);h=x.contents,S=x.format,k=x.formatVersion}catch{}const u=a.find(x=>x.parentId===o._id),N=p.find(x=>x._id===u?.gitRepositoryId),m=N?.cachedGitRepositoryBranch,v=N?.cachedGitLastAuthor,I=u?.modified||o.modified,y=Ce(o)?b?.modified||0:I,U=[o?.modified,u?.modified,y,N?.cachedGitLastCommitTime].filter(se).sort(Kt)[0],C=!!(Ce(o)&&N?.cachedGitLastCommitTime&&y>N?.cachedGitLastCommitTime),F=h?.info?.version?String(h?.info?.version):"";return{id:o._id,name:o.name,scope:o.scope,label:Yt[o.scope],created:o.created,lastModifiedTimestamp:C&&y||N?.cachedGitLastCommitTime||U,branch:m||"",lastCommit:C&&N?.cachedGitLastCommitTime&&v?`by ${v}`:"",version:F?`${F?.startsWith("v")?"":"v"}${F}`:"",oasFormat:S?`${S==="openapi"?"OpenAPI":"Swagger"} ${k||""}`:"",mockServer:f,apiSpec:b,workspace:o,hasUncommittedChanges:u?.hasUncommittedChanges,hasUnpushedChanges:u?.hasUnpushedChanges,gitFilePath:u?.gitFilePath}})}async function os({projectId:l,organizationId:s}){try{const a=await oe.getById(l);E(a,"Project not found");const i=a.remoteId;if(!i)return[];console.log("[getAllRemoteFiles] start fetching remote backend workspaces for project",l,`remoteId: ${i}`);const d=tt(),[p,g]=await Promise.all([d.localBackendProjects().then(f=>f.filter(h=>h.id===i)),d.remoteBackendProjects({teamId:s,teamProjectId:i})]);console.log(`[getAllRemoteFiles] found allPulledBackendProjectsForRemoteId: ${p.length} and allFetchedRemoteBackendProjectsForRemoteId: ${g.length} for remoteId: ${i}`);const o=await $.find(re.type,{_id:{$in:[...p,...g].map(f=>f.rootDocumentId)},parentId:a._id});console.log(`[getAllRemoteFiles] found workspacesWithBackendProjects: ${o.length}`);const b=g.filter(f=>!o.find(h=>h._id===f.rootDocumentId));return console.log(`[getAllRemoteFiles] get ${b.length} unsynced files`),b.map(f=>({id:f.rootDocumentId,name:f.name,scope:"unsynced",label:"Unsynced",remoteId:f.id,created:0,lastModifiedTimestamp:0}))}catch(a){console.warn("Failed to load backend projects",a)}return[]}const as=async l=>{let s=l;const a=window.localStorage.getItem("learning-feature-last-fetch"),i=a?parseInt(a,10):0,p=Date.now()-i>864e5;if(!window.localStorage.getItem("learning-feature-dismissed")&&p)try{s=await Xt({method:"GET",path:"/insomnia-production-public-assets/inapp-learning.json",origin:"https://storage.googleapis.com",sessionId:""}),window.localStorage.setItem("learning-feature-last-fetch",Date.now().toString())}catch{console.log("[project] Could not fetch learning feature data.")}return s},rs=async l=>{const s=await re.findByParentId(l);return(await $.find(ke.type,{parentId:{$in:s.map(i=>i._id)}})).some(i=>i.hasUncommittedChanges||i.hasUnpushedChanges)},ns=async l=>{const s=l.map(d=>rs(d._id)),a=await Promise.all(s),i={};return l.forEach((d,p)=>{i[d._id]=a[p]}),i};async function is({organizationId:l}){const s=await $.find(oe.type,{parentId:l}),a=s.map(d=>d.gitRepositoryId).filter(se),i=await $.find(ae.type,{_id:{$in:a}});return s.map(d=>{const p=i.find(g=>g._id===d.gitRepositoryId);return{...d,gitRepository:p}})}async function va({params:l}){const{organizationId:s,projectId:a}=l;E(s,"Organization ID is required");const{id:i}=await Dt.getOrCreate(),d={active:!1,title:"",message:"",cta:"",url:""};if(!a)return{localFiles:[],allFilesCount:0,documentsCount:0,environmentsCount:0,collectionsCount:0,mockServersCount:0,projectsCount:0,activeProject:void 0,projects:[]};if(!i)throw await Mt(),Ke(Fe("/auth/login"));E(a,"projectId parameter is required");const p=await oe.getById(a);E(p,`Project was not found ${a}`),console.log("[project loader] Loading project:",p.name,a);const[g,o=[]]=await Promise.all([ss({projectId:a}),is({organizationId:s})]),b=os({projectId:a,organizationId:s}),f=as(d),h=Ze(o),S=ns(h),k=D(p)?await ae.getById(p.gitRepositoryId||""):null;return{localFiles:g,learningFeaturePromise:f,remoteFilesPromise:b,projects:h,projectsCount:o.length,activeProject:p,activeProjectGitRepository:k,allFilesCount:g.length,environmentsCount:g.filter(u=>u.scope==="environment").length,documentsCount:g.filter(u=>u.scope==="design").length,collectionsCount:g.filter(u=>u.scope==="collection").length,mockServersCount:g.filter(u=>u.scope==="mock-server").length,projectsSyncStatusPromise:S}}const cs=()=>{const{localFiles:l,activeProject:s,activeProjectGitRepository:a,projects:i,allFilesCount:d,environmentsCount:p,collectionsCount:g,mockServersCount:o,documentsCount:b,projectsCount:f,learningFeaturePromise:h,remoteFilesPromise:S,projectsSyncStatusPromise:k}=Je(),[u,N]=O("learning-feature-dismissed",""),{organizationId:m,projectId:v}=Qe(),[I]=A(h),[y]=A(S,v);j.useEffect(()=>{s?.remoteId&&y&&console.log("[remote files] remote files loaded for project ui",y.length)},[s?.remoteId,y]);const[ne]=A(k,v),U=j.useMemo(()=>y?[...l,...y]:l,[l,y]),{userSession:C}=st(),F=ot(),x=Xe().filter(t=>t.formAction===Fe("/organization/:organizationId/insomnia-sync/pull-remote-file",{organizationId:m})).map(t=>t.formData?.get("backendProjectId")),B=at(),{presence:ie}=rt(),W=nt({key:`storage-rule:${m}`}),G=it(),{billing:R,features:Re}=ct();j.useEffect(()=>{if(!_t(m)){const t=W.load;t({organizationId:m})}},[m,W.load]);const{storagePromise:Me}=W.data||{},[P=lt]=A(Me,m),[q,De]=O(`${m}:project-list-filter`,""),[M,Le]=O(`${v}:workspace-list-filter`,""),[V,Oe]=O(`${v}:workspace-list-scope`,"all"),[ce,_e]=O(`${v}:workspace-list-sort-order`,"modified-desc"),[le,H]=j.useState(null),[de,pe]=j.useState(!1),[me,ge]=j.useState(!1),_=B?.organizations.find(t=>t.id===m),K=_&&C.accountId&&zt({organization:_,accountId:C.accountId}),ze=_&&At(_),ue=U.filter(t=>V!=="all"?t.scope===V:!0).filter(t=>M?!!Tt(M,[t.name,t.scope==="design"?"document":"collection",t.branch||"",t.oasFormat||""],{splitSpace:!0,loose:!0})?.indexes:!0).sort((t,c)=>Jt[ce](t,c)).map(t=>{const c=ie.filter(r=>r.project===s?.remoteId&&r.file===t.id).filter(r=>r.acct!==C.accountId).map(r=>({key:r.acct,alt:r.firstName||r.lastName?`${r.firstName} ${r.lastName}`:r.acct,src:r.avatar}));return{...t,loading:x.includes(t.remoteId)||F.formData?.get("backendProjectId")&&F.formData?.get("backendProjectId")===t.remoteId,presence:c}}).map(t=>({...t,action:()=>{if(t.scope==="unsynced")return s?.remoteId&&t.remoteId?F.submit({backendProjectId:t.remoteId,remoteId:s.remoteId,organizationId:m}):void 0;const c=Et(t.scope);return J(`/organization/${m}/project/${v}/workspace/${t.id}/${c}`)}})),Ae=i.filter(t=>q?t.name?.toLowerCase().includes(q.toLowerCase()):!0).map(t=>{const c=ie.filter(r=>r.project===t.remoteId).filter(r=>r.acct!==C.accountId).map(r=>({key:r.acct,alt:r.firstName||r.lastName?`${r.firstName} ${r.lastName}`:r.acct,src:r.avatar}));return{...t,presence:c,hasUncommittedOrUnpushedChanges:ne?.[t._id]||t.gitRepository?.hasUncommittedChanges||t.gitRepository?.hasUnpushedChanges}}),[Te,Ee]=j.useState(!1),J=Ye(),[Q,L]=j.useState({scope:"collection",isOpen:!1}),fe=()=>L({scope:"collection",isOpen:!0}),X=()=>L({scope:"design",isOpen:!0}),he=()=>Y&&L({scope:"mock-server",isOpen:!0}),xe=()=>L({scope:"environment",isOpen:!0}),Ue=()=>{s&&G.submit({organizationId:m,projectId:v,name:"My first collection",scope:"collection",withRequest:!0})},Y=s?._id,z=Re.gitSync.enabled,be=[{id:"new-collection",name:"Request collection",icon:"bars",action:fe},{id:"new-document",name:"Design document",icon:"file",action:X},...Y?[{id:"new-mock-server",name:"Mock Server",icon:"server",action:he}]:[],{id:"new-environment",name:"Environment",icon:"code",action:xe}],Be=[{id:"all",label:`All files (${d})`,icon:"border-all"},{id:"design",label:`Documents (${b})`,icon:"file",action:{icon:"plus",label:"New design document",run:X}},{id:"collection",label:`Collections (${g})`,icon:"bars",action:{icon:"plus",label:"New request collection",run:fe}},...Y?[{id:"mock-server",label:`Mock (${o})`,icon:"server",action:{icon:"plus",label:"New Mock Server",run:he}}]:[],{id:"environment",label:`Environments (${p})`,icon:"code",action:{icon:"plus",label:"New Environment",run:xe}}],We=s&&T(s)&&!P.enableCloudSync,Ge=s&&!T(s)&&!D(s)&&!P.enableLocalVault,qe=s&&D(s)&&!P.enableGitSync,Ve=We||Ge||qe;return e.jsx(Ft,{children:e.jsxs(j.Fragment,{children:[e.jsxs(kt,{autoSaveId:"insomnia-sidebar",id:"wrapper",className:"new-sidebar h-full w-full text-[--color-font]",direction:"horizontal",children:[e.jsx(Ie,{id:"sidebar",className:"sidebar theme--sidebar",defaultSize:Ut,maxSize:40,minSize:10,collapsible:!0,children:e.jsxs("div",{className:"flex flex-1 flex-col divide-y divide-solid divide-[--hl-md] overflow-hidden",children:[e.jsx("div",{className:"h-[40px] p-[--padding-sm]",children:e.jsxs(Pe,{"aria-label":"Organizations",onSelectionChange:t=>{J(`/organization/${t}`)},selectedKey:m,children:[e.jsxs(w,{className:"flex flex-1 items-center justify-center gap-2 rounded-sm px-4 py-1 text-sm font-bold text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:[e.jsx($t,{className:"flex items-center justify-center gap-2 truncate",children:({selectedItem:t})=>t?.display_name||"Select an organization"}),e.jsx(n,{icon:"caret-down"})]}),e.jsx(te,{className:"flex min-w-max flex-col overflow-y-hidden",children:e.jsx($e,{items:B?.organizations,className:"min-w-max select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] py-2 text-sm shadow-lg focus:outline-none",children:t=>e.jsx(Se,{id:t.id,className:"flex h-[--line-height-xs] w-full items-center gap-2 whitespace-nowrap bg-transparent px-[--padding-md] text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-selected:font-bold","aria-label":t.display_name,textValue:t.display_name,value:t,children:({isSelected:c})=>e.jsxs(j.Fragment,{children:[e.jsx("span",{children:t.display_name}),c&&e.jsx(n,{icon:"check",className:"justify-self-end text-[--color-success]"})]})},t.id)})})]})}),e.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs(Ne,{className:"p-[--padding-sm] text-xs uppercase",children:["Projects (",f,")"]}),e.jsxs("div",{className:"flex justify-between gap-1 p-[--padding-sm]",children:[e.jsxs(je,{"aria-label":"Projects filter",className:"group relative flex-1",isDisabled:s===void 0,value:q,onChange:De,children:[e.jsx(ve,{placeholder:"Filter",className:"w-full rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] py-1 pl-2 pr-7 text-[--color-font] transition-colors placeholder:italic focus:outline-none focus:ring-1 focus:ring-[--hl-md]"}),e.jsx("div",{className:"absolute right-0 top-0 flex h-full items-center px-2",children:e.jsx(w,{className:"flex aspect-square w-5 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] group-data-[empty]:hidden",children:e.jsx(n,{icon:"close"})})})]}),e.jsx(w,{"aria-label":"Create new Project",onPress:()=>pe(!0),isDisabled:s===void 0,className:"flex aspect-square h-full items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:e.jsx(n,{icon:"plus-circle"})})]}),e.jsx(Z,{"aria-label":"Projects",items:Ae,className:"flex-1 overflow-y-auto py-[--padding-sm] data-[empty]:py-0",disallowEmptySelection:!0,selectedKeys:[s?._id||""],selectionMode:"single",onSelectionChange:t=>{if(t!=="all"){const[c]=t.values();J({pathname:`/organization/${m}/project/${c}`})}},children:t=>e.jsx(ee,{id:t._id,textValue:t.name,className:"group select-none outline-none",children:e.jsxs("div",{className:"relative flex h-[--line-height-xs] w-full select-none items-center gap-2 overflow-hidden px-4 text-[--hl] outline-none transition-colors group-hover:bg-[--hl-xs] group-focus:bg-[--hl-sm] group-aria-selected:text-[--color-font]",children:[e.jsx("span",{className:"absolute left-0 top-0 h-full w-[2px] bg-transparent transition-colors group-aria-selected:bg-[--color-surprise]"}),e.jsx(n,{icon:T(t)?"globe-americas":D(t)?["fab","git-alt"]:"laptop"}),e.jsx("span",{className:"truncate",children:t.name}),e.jsx("span",{className:"flex-1"}),t.presence.length>0&&e.jsx(ye,{size:"small",maxAvatars:3,items:t.presence}),t._id!==Bt&&e.jsx(dt,{organizationId:m,project:t,storageRules:P,isGitSyncEnabled:z})]})},t._id)})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{"aria-label":"Scope filter",items:Be,className:"flex-1 flex-shrink-0 overflow-y-auto py-[--padding-sm] data-[empty]:py-0",disallowEmptySelection:!0,selectedKeys:[V||"all"],selectionMode:"single",onSelectionChange:t=>{if(t!=="all"){const[c]=t.values();Oe(c.toString())}},children:t=>e.jsx(ee,{textValue:t.label,className:"group select-none outline-none",children:e.jsxs("div",{className:"relative flex h-12 w-full select-none items-center gap-2 overflow-hidden px-4 text-[--hl] outline-none transition-colors group-hover:bg-[--hl-xs] group-focus:bg-[--hl-sm] group-aria-selected:bg-[--hl-sm] group-aria-selected:text-[--color-font]",children:[e.jsx("span",{className:"flex h-6 w-6 items-center justify-center",children:e.jsx(n,{icon:t.icon,className:"w-6"})}),e.jsx("span",{className:"truncate capitalize",children:t.label}),e.jsx("span",{className:"flex-1"}),t.action&&e.jsx(w,{onPress:t.action.run,"aria-label":t.action.label,className:"flex aspect-square h-6 items-center justify-center rounded-sm text-sm text-[--color-font] opacity-80 ring-1 ring-transparent transition-all hover:bg-[--hl-xs] hover:opacity-100 focus:opacity-100 focus:ring-inset focus:ring-[--hl-md] group-hover:opacity-100 group-focus:opacity-100 aria-pressed:bg-[--hl-sm] data-[pressed]:opacity-100",children:e.jsx(n,{icon:t.action.icon})})]})})}),D(s)&&e.jsx(pt,{gitRepository:a},a?._id),Wt(s)&&!D(s)&&e.jsx(mt,{}),T(s)&&e.jsx(gt,{})]}),!u&&I?.active&&e.jsxs("div",{className:"flex flex-shrink-0 flex-col gap-2 p-[--padding-sm]",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs(Ne,{className:"text-base",children:[e.jsx(n,{icon:"graduation-cap"}),e.jsx("span",{className:"ml-2",children:I.title})]}),e.jsx(w,{onPress:()=>{N("true")},children:e.jsx(n,{icon:"close"})})]}),e.jsx("p",{className:"text-sm text-[--hl]",children:I.message}),e.jsxs("a",{href:I.url,className:"flex items-center gap-2 text-sm underline",children:[I.cta,e.jsx(n,{icon:"arrow-up-right-from-square"})]})]})]})}),e.jsx(Rt,{className:"h-full w-[1px] bg-[--hl-md]"}),e.jsxs(Ie,{id:"pane-one",className:"pane-one theme--pane flex flex-col",children:[e.jsx(ut,{showActiveStatus:!1}),s?e.jsxs("div",{className:"flex w-full flex-col overflow-hidden",children:[R.isActive?null:e.jsx("div",{className:"p-[--padding-md] pb-0",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded border border-solid border-[--hl-md] bg-[rgba(var(--color-warning-rgb),var(--tw-bg-opacity))] bg-opacity-50 p-[--padding-sm] text-[--color-font-warning]",children:[e.jsxs("p",{className:"text-base",children:[e.jsx(n,{icon:"exclamation-triangle",className:"mr-2"}),K?`Your ${ze?"personal account":"organization"} has unpaid past invoices. Please enter a new payment method to continue using Insomnia.`:"This organization has unpaid past invoices. Please ask the organization owner to enter a new payment method to continue using Insomnia."]}),K&&e.jsx("a",{href:`${Gt()}/app/subscription/past-due`,className:"flex items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-md] bg-[rgba(var(--color-font-rgb),var(--tw-bg-opacity))] bg-opacity-100 px-4 py-1 text-sm font-semibold text-[--color-bg] ring-1 ring-transparent transition-all hover:bg-opacity-80 focus:ring-inset focus:ring-[--hl-md] aria-pressed:opacity-80",children:"Update payment method"})]})}),R?.expirationErrorMessage||R?.expirationWarningMessage?e.jsx("div",{className:"p-[--padding-md] pb-0",children:e.jsxs("div",{className:`flex flex-wrap items-center justify-between gap-2 rounded border border-solid border-[--hl-md] bg-opacity-50 p-[--padding-sm] text-[--color-font-warning] ${R?.expirationWarningMessage?"bg-[rgba(var(--color-warning-rgb),var(--tw-bg-opacity))]":"bg-[rgba(var(--color-danger-rgb),var(--tw-bg-opacity))]"}`,children:[e.jsxs("p",{className:"text-base",children:[e.jsx(n,{icon:"exclamation-triangle",className:"mr-2"}),R?.expirationErrorMessage||R?.expirationWarningMessage]}),K&&e.jsx("a",{href:"https://insomnia.rest/pricing/contact",className:"flex items-center justify-center gap-2 rounded-sm border border-solid border-[--hl-md] bg-[rgba(var(--color-font-rgb),var(--tw-bg-opacity))] bg-opacity-100 px-4 py-1 text-sm font-semibold text-[--color-bg] ring-1 ring-transparent transition-all hover:bg-opacity-80 focus:ring-inset focus:ring-[--hl-md] aria-pressed:opacity-80",children:"Contact sales"})]})}):null,Ve&&e.jsx("div",{className:"p-[--padding-md] pb-0",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 rounded border border-solid border-[--hl-md] bg-[rgba(var(--color-warning-rgb),var(--tw-bg-opacity))] bg-opacity-50 p-[--padding-sm] text-[--color-font-warning]",children:[e.jsxs("p",{className:"text-base",children:[e.jsx(n,{icon:"exclamation-triangle",className:"mr-2"}),"The organization owner mandates that projects must be created and stored using"," ",qt(P),"."]}),e.jsx(w,{onPress:()=>ge(!0),className:"flex items-center justify-center rounded-sm border border-solid border-white px-2 py-1",children:"Update"})]})}),(ue.length>0||M)&&e.jsxs("div",{className:"flex w-full max-w-xl justify-between gap-2 p-[--padding-md]",children:[e.jsxs(je,{"aria-label":"Files filter",className:"group relative flex-1",value:M,onChange:t=>Le(t),children:[e.jsx(ve,{placeholder:"Filter",className:"w-full rounded-sm border border-solid border-[--hl-sm] bg-[--color-bg] py-1 pl-2 pr-7 text-[--color-font] transition-colors placeholder:italic focus:outline-none focus:ring-1 focus:ring-[--hl-md]"}),e.jsx("div",{className:"absolute right-0 top-0 flex h-full items-center px-2",children:e.jsx(w,{className:"flex aspect-square w-5 items-center justify-center rounded-sm text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm] group-data-[empty]:hidden",children:e.jsx(n,{icon:"close"})})})]}),e.jsxs(Pe,{"aria-label":"Sort order",className:"aspect-square h-full",selectedKey:ce,onSelectionChange:t=>_e(t),children:[e.jsx(w,{"aria-label":"Select sort order",className:"flex aspect-square h-full flex-shrink-0 items-center justify-center rounded-sm bg-[--hl-xxs] text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:e.jsx(n,{icon:"sort"})}),e.jsx(te,{className:"flex min-w-max flex-col overflow-y-hidden",children:e.jsx($e,{items:Vt.map(t=>({id:t,name:Ht[t]})),className:"min-w-max select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] py-2 text-sm shadow-lg focus:outline-none",children:t=>e.jsx(Se,{id:t.id,className:"flex h-[--line-height-xs] w-full items-center gap-2 whitespace-nowrap bg-transparent px-[--padding-md] text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-selected:font-bold","aria-label":t.name,textValue:t.name,value:t,children:({isSelected:c})=>e.jsxs(j.Fragment,{children:[e.jsx("span",{children:t.name}),c&&e.jsx(n,{icon:"check",className:"justify-self-end text-[--color-success]"})]})},t.id)})})]}),e.jsxs(St,{children:[e.jsxs(w,{"aria-label":"Create in project",className:"flex h-full items-center justify-center gap-2 rounded-sm bg-[--hl-xxs] px-4 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:[e.jsx(n,{icon:"plus-circle"})," ",e.jsx("span",{className:"hidden md:block",children:"Create"})]}),e.jsx(te,{className:"flex min-w-max flex-col overflow-y-hidden",children:e.jsx(It,{"aria-label":"Create in project actions",selectionMode:"single",onAction:t=>{const c=be.find(r=>r.id===t);c&&c.action()},items:be,className:"min-w-max select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] py-2 text-sm shadow-lg focus:outline-none",children:t=>e.jsxs(Ct,{id:t.id,className:"flex h-[--line-height-xs] w-full items-center gap-2 whitespace-nowrap bg-transparent px-[--padding-md] text-[--color-font] transition-colors hover:bg-[--hl-sm] focus:bg-[--hl-xs] focus:outline-none disabled:cursor-not-allowed aria-selected:font-bold","aria-label":t.name,children:[e.jsx(n,{icon:t.icon}),e.jsx("span",{children:t.name})]},t.id)})})]}),e.jsxs(w,{onPress:()=>{window.main.trackSegmentEvent({event:Qt.importStarted,properties:{source:"project"}}),H("file")},"aria-label":"Import",className:"flex h-full items-center justify-center gap-2 rounded-sm bg-[--hl-xxs] px-4 text-sm text-[--color-font] ring-1 ring-transparent transition-all hover:bg-[--hl-xs] focus:ring-inset focus:ring-[--hl-md] aria-pressed:bg-[--hl-sm]",children:[e.jsx(n,{icon:"file-import"})," ",e.jsx("span",{className:"hidden md:block",children:"Import"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx(Z,{"aria-label":"Files",className:"grid gap-4 p-[--padding-md] [grid-template-columns:repeat(auto-fit,200px)] [grid-template-rows:repeat(auto-fit,200px)] data-[empty]:flex data-[empty]:justify-center",items:ue,renderEmptyState:()=>M?e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsxs("p",{className:"notice subtle",children:["No documents found for ",e.jsx("strong",{children:M})]})}):e.jsxs("div",{className:"flex w-full flex-col items-center justify-center gap-4",children:[e.jsx(vt,{onCreateRequestCollectionWithRequest:Ue,onCreateDesignDocument:X,onImportFrom:()=>H("file")}),G.data?.error&&e.jsx("div",{className:"px-10",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-sm bg-[rgba(var(--color-danger-rgb),0.5)] px-2 py-1 text-sm text-[--color-font-danger]",children:[e.jsx(n,{icon:"triangle-exclamation"}),e.jsx("span",{children:G.data?.error})]})})]}),children:t=>e.jsxs(ee,{id:t.id,textValue:t.name,onAction:t.action,className:`flex aspect-square w-full flex-1 select-none flex-col overflow-hidden rounded-md p-[--padding-md] outline-none ring-1 ring-[--hl-md] transition-all hover:bg-[--hl-xs] hover:shadow-md hover:ring-[--hl-sm] focus:bg-[--hl-sm] focus:ring-[--hl-lg] ${t.loading?"animate-pulse":""}`,children:[e.jsxs("div",{className:"flex h-[20px] gap-2",children:[e.jsxs("div",{className:"flex h-full flex-shrink-0 items-center gap-2 rounded-sm bg-[--hl-xs] pr-2 text-sm text-[--color-font]",children:[e.jsx("div",{className:`${es[t.scope]} ${ts[t.scope]} flex h-[20px] w-[20px] items-center justify-center rounded-s-sm px-2`,children:e.jsx(n,{icon:t.loading?"spinner":Zt[t.scope],className:t.loading?"animate-spin":""})}),e.jsx("span",{children:t.label})]}),e.jsx("span",{className:"flex-1"}),t.presence.length>0&&e.jsx(ye,{size:"small",maxAvatars:3,items:t.presence}),s&&t.scope!=="unsynced"&&t.workspace&&e.jsx(ft,{workspace:t.workspace,mockServer:t.mockServer,gitFilePath:t.gitFilePath||void 0,apiSpec:t.apiSpec,project:s,projects:i})]}),e.jsxs(ht,{children:[e.jsx(xt,{onPress:t.action,className:"line-clamp-4 pt-4 text-base font-bold outline-none",children:t.name}),e.jsx(bt,{offset:8,className:"max-h-[85vh] max-w-xs select-none overflow-y-auto rounded-md border border-solid border-[--hl-sm] bg-[--color-bg] px-4 py-2 text-sm text-[--color-font] shadow-lg focus:outline-none",children:e.jsx("span",{children:t.name})})]}),e.jsxs("div",{className:"flex flex-1 flex-col justify-end gap-2 text-sm text-[--hl]",children:[t.gitFilePath&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{icon:"file-alt"}),e.jsx("span",{className:"truncate",title:t.gitFilePath,children:t.gitFilePath})]}),t.version&&e.jsx("div",{className:"flex-1 pt-2",children:t.version}),t.oasFormat&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{icon:"file-alt"}),e.jsx("span",{children:t.oasFormat})]}),t.branch&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(n,{icon:"code-branch"}),e.jsx("span",{className:"truncate",children:t.branch})]}),!!t.lastModifiedTimestamp&&e.jsxs("div",{className:"flex items-center gap-2 truncate text-sm",children:[e.jsx(n,{icon:"clock"}),e.jsx(jt,{title:c=>`Last updated ${c}, and created on ${new Date(t.created).toLocaleDateString()}`,timestamp:t.lastModifiedTimestamp}),e.jsx("span",{className:"truncate",children:t.lastCommit})]}),(t.hasUncommittedChanges||t.hasUnpushedChanges)&&e.jsx("div",{className:"flex items-center gap-2 text-sm text-[rgba(var(--color-warning-rgb),0.8)]",children:e.jsx("span",{children:t.hasUncommittedChanges?"Uncommitted changes":"Unpushed changes"})})]})]},t.id)})})]}):e.jsx(yt,{isGitSyncEnabled:z,storageRules:P})]})]}),Te&&e.jsx(wt,{onHide:()=>Ee(!1)}),de&&e.jsx(we,{isOpen:de,onOpenChange:pe,storageRules:P,isGitSyncEnabled:z}),me&&e.jsx(we,{isOpen:me,onOpenChange:ge,project:s,gitRepository:a||void 0,storageRules:P,isGitSyncEnabled:z}),s&&Q?.isOpen&&e.jsx(Nt,{isOpen:!0,project:s,storageRules:P,currentPlan:B?.currentPlan,scope:Q.scope,onOpenChange:t=>{L({scope:Q.scope,isOpen:t})}}),s&&le&&e.jsx(Pt,{onHide:()=>H(null),projectName:s.name,from:{type:le},organizationId:m,defaultProjectId:s._id})]})})},ya=He(cs);export{va as clientLoader,ya as default};
//# sourceMappingURL=organization._organizationId.project._index-D7mtsjnF.js.map
